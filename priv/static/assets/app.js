(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __defProps = Object.defineProperties;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getOwnPropSymbols = Object.getOwnPropertySymbols;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __propIsEnum = Object.prototype.propertyIsEnumerable;
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __spreadValues = (a, b2) => {
    for (var prop in b2 || (b2 = {}))
      if (__hasOwnProp.call(b2, prop))
        __defNormalProp(a, prop, b2[prop]);
    if (__getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(b2)) {
        if (__propIsEnum.call(b2, prop))
          __defNormalProp(a, prop, b2[prop]);
      }
    return a;
  };
  var __spreadProps = (a, b2) => __defProps(a, __getOwnPropDescs(b2));
  var __objRest = (source, exclude) => {
    var target = {};
    for (var prop in source)
      if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
        target[prop] = source[prop];
    if (source != null && __getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(source)) {
        if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
          target[prop] = source[prop];
      }
    return target;
  };
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));

  // vendor/topbar.js
  var require_topbar = __commonJS({
    "vendor/topbar.js"(exports, module) {
      (function(window2, document2) {
        "use strict";
        (function() {
          var lastTime = 0;
          var vendors = ["ms", "moz", "webkit", "o"];
          for (var x2 = 0; x2 < vendors.length && !window2.requestAnimationFrame; ++x2) {
            window2.requestAnimationFrame = window2[vendors[x2] + "RequestAnimationFrame"];
            window2.cancelAnimationFrame = window2[vendors[x2] + "CancelAnimationFrame"] || window2[vendors[x2] + "CancelRequestAnimationFrame"];
          }
          if (!window2.requestAnimationFrame)
            window2.requestAnimationFrame = function(callback, element) {
              var currTime = (/* @__PURE__ */ new Date()).getTime();
              var timeToCall = Math.max(0, 16 - (currTime - lastTime));
              var id = window2.setTimeout(function() {
                callback(currTime + timeToCall);
              }, timeToCall);
              lastTime = currTime + timeToCall;
              return id;
            };
          if (!window2.cancelAnimationFrame)
            window2.cancelAnimationFrame = function(id) {
              clearTimeout(id);
            };
        })();
        var canvas, currentProgress, showing, progressTimerId = null, fadeTimerId = null, delayTimerId = null, addEvent = function(elem, type, handler) {
          if (elem.addEventListener)
            elem.addEventListener(type, handler, false);
          else if (elem.attachEvent)
            elem.attachEvent("on" + type, handler);
          else
            elem["on" + type] = handler;
        }, options = {
          autoRun: true,
          barThickness: 3,
          barColors: {
            0: "rgba(26,  188, 156, .9)",
            ".25": "rgba(52,  152, 219, .9)",
            ".50": "rgba(241, 196, 15,  .9)",
            ".75": "rgba(230, 126, 34,  .9)",
            "1.0": "rgba(211, 84,  0,   .9)"
          },
          shadowBlur: 10,
          shadowColor: "rgba(0,   0,   0,   .6)",
          className: null
        }, repaint = function() {
          canvas.width = window2.innerWidth;
          canvas.height = options.barThickness * 5;
          var ctx = canvas.getContext("2d");
          ctx.shadowBlur = options.shadowBlur;
          ctx.shadowColor = options.shadowColor;
          var lineGradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
          for (var stop in options.barColors)
            lineGradient.addColorStop(stop, options.barColors[stop]);
          ctx.lineWidth = options.barThickness;
          ctx.beginPath();
          ctx.moveTo(0, options.barThickness / 2);
          ctx.lineTo(
            Math.ceil(currentProgress * canvas.width),
            options.barThickness / 2
          );
          ctx.strokeStyle = lineGradient;
          ctx.stroke();
        }, createCanvas = function() {
          canvas = document2.createElement("canvas");
          var style = canvas.style;
          style.position = "fixed";
          style.top = style.left = style.right = style.margin = style.padding = 0;
          style.zIndex = 100001;
          style.display = "none";
          if (options.className)
            canvas.classList.add(options.className);
          document2.body.appendChild(canvas);
          addEvent(window2, "resize", repaint);
        }, topbar2 = {
          config: function(opts) {
            for (var key in opts)
              if (options.hasOwnProperty(key))
                options[key] = opts[key];
          },
          show: function(delay) {
            if (showing)
              return;
            if (delay) {
              if (delayTimerId)
                return;
              delayTimerId = setTimeout(() => topbar2.show(), delay);
            } else {
              showing = true;
              if (fadeTimerId !== null)
                window2.cancelAnimationFrame(fadeTimerId);
              if (!canvas)
                createCanvas();
              canvas.style.opacity = 1;
              canvas.style.display = "block";
              topbar2.progress(0);
              if (options.autoRun) {
                (function loop() {
                  progressTimerId = window2.requestAnimationFrame(loop);
                  topbar2.progress(
                    "+" + 0.05 * Math.pow(1 - Math.sqrt(currentProgress), 2)
                  );
                })();
              }
            }
          },
          progress: function(to) {
            if (typeof to === "undefined")
              return currentProgress;
            if (typeof to === "string") {
              to = (to.indexOf("+") >= 0 || to.indexOf("-") >= 0 ? currentProgress : 0) + parseFloat(to);
            }
            currentProgress = to > 1 ? 1 : to;
            repaint();
            return currentProgress;
          },
          hide: function() {
            clearTimeout(delayTimerId);
            delayTimerId = null;
            if (!showing)
              return;
            showing = false;
            if (progressTimerId != null) {
              window2.cancelAnimationFrame(progressTimerId);
              progressTimerId = null;
            }
            (function loop() {
              if (topbar2.progress("+.1") >= 1) {
                canvas.style.opacity -= 0.05;
                if (canvas.style.opacity <= 0.05) {
                  canvas.style.display = "none";
                  fadeTimerId = null;
                  return;
                }
              }
              fadeTimerId = window2.requestAnimationFrame(loop);
            })();
          }
        };
        if (typeof module === "object" && typeof module.exports === "object") {
          module.exports = topbar2;
        } else if (typeof define === "function" && define.amd) {
          define(function() {
            return topbar2;
          });
        } else {
          this.topbar = topbar2;
        }
      }).call(exports, window, document);
    }
  });

  // ../deps/phoenix_html/priv/static/phoenix_html.js
  (function() {
    var PolyfillEvent = eventConstructor();
    function eventConstructor() {
      if (typeof window.CustomEvent === "function")
        return window.CustomEvent;
      function CustomEvent2(event, params) {
        params = params || { bubbles: false, cancelable: false, detail: void 0 };
        var evt = document.createEvent("CustomEvent");
        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
        return evt;
      }
      CustomEvent2.prototype = window.Event.prototype;
      return CustomEvent2;
    }
    function buildHiddenInput(name, value) {
      var input = document.createElement("input");
      input.type = "hidden";
      input.name = name;
      input.value = value;
      return input;
    }
    function handleClick(element, targetModifierKey) {
      var to = element.getAttribute("data-to"), method = buildHiddenInput("_method", element.getAttribute("data-method")), csrf = buildHiddenInput("_csrf_token", element.getAttribute("data-csrf")), form = document.createElement("form"), submit = document.createElement("input"), target = element.getAttribute("target");
      form.method = element.getAttribute("data-method") === "get" ? "get" : "post";
      form.action = to;
      form.style.display = "none";
      if (target)
        form.target = target;
      else if (targetModifierKey)
        form.target = "_blank";
      form.appendChild(csrf);
      form.appendChild(method);
      document.body.appendChild(form);
      submit.type = "submit";
      form.appendChild(submit);
      submit.click();
    }
    window.addEventListener("click", function(e) {
      var element = e.target;
      if (e.defaultPrevented)
        return;
      while (element && element.getAttribute) {
        var phoenixLinkEvent = new PolyfillEvent("phoenix.link.click", {
          "bubbles": true,
          "cancelable": true
        });
        if (!element.dispatchEvent(phoenixLinkEvent)) {
          e.preventDefault();
          e.stopImmediatePropagation();
          return false;
        }
        if (element.getAttribute("data-method")) {
          handleClick(element, e.metaKey || e.shiftKey);
          e.preventDefault();
          return false;
        } else {
          element = element.parentNode;
        }
      }
    }, false);
    window.addEventListener("phoenix.link.click", function(e) {
      var message = e.target.getAttribute("data-confirm");
      if (message && !window.confirm(message)) {
        e.preventDefault();
      }
    }, false);
  })();

  // ../deps/phoenix/priv/static/phoenix.mjs
  var closure = (value) => {
    if (typeof value === "function") {
      return value;
    } else {
      let closure22 = function() {
        return value;
      };
      return closure22;
    }
  };
  var globalSelf = typeof self !== "undefined" ? self : null;
  var phxWindow = typeof window !== "undefined" ? window : null;
  var global = globalSelf || phxWindow || global;
  var DEFAULT_VSN = "2.0.0";
  var SOCKET_STATES = { connecting: 0, open: 1, closing: 2, closed: 3 };
  var DEFAULT_TIMEOUT = 1e4;
  var WS_CLOSE_NORMAL = 1e3;
  var CHANNEL_STATES = {
    closed: "closed",
    errored: "errored",
    joined: "joined",
    joining: "joining",
    leaving: "leaving"
  };
  var CHANNEL_EVENTS = {
    close: "phx_close",
    error: "phx_error",
    join: "phx_join",
    reply: "phx_reply",
    leave: "phx_leave"
  };
  var TRANSPORTS = {
    longpoll: "longpoll",
    websocket: "websocket"
  };
  var XHR_STATES = {
    complete: 4
  };
  var Push = class {
    constructor(channel, event, payload, timeout) {
      this.channel = channel;
      this.event = event;
      this.payload = payload || function() {
        return {};
      };
      this.receivedResp = null;
      this.timeout = timeout;
      this.timeoutTimer = null;
      this.recHooks = [];
      this.sent = false;
    }
    resend(timeout) {
      this.timeout = timeout;
      this.reset();
      this.send();
    }
    send() {
      if (this.hasReceived("timeout")) {
        return;
      }
      this.startTimeout();
      this.sent = true;
      this.channel.socket.push({
        topic: this.channel.topic,
        event: this.event,
        payload: this.payload(),
        ref: this.ref,
        join_ref: this.channel.joinRef()
      });
    }
    receive(status, callback) {
      if (this.hasReceived(status)) {
        callback(this.receivedResp.response);
      }
      this.recHooks.push({ status, callback });
      return this;
    }
    reset() {
      this.cancelRefEvent();
      this.ref = null;
      this.refEvent = null;
      this.receivedResp = null;
      this.sent = false;
    }
    matchReceive({ status, response, _ref }) {
      this.recHooks.filter((h) => h.status === status).forEach((h) => h.callback(response));
    }
    cancelRefEvent() {
      if (!this.refEvent) {
        return;
      }
      this.channel.off(this.refEvent);
    }
    cancelTimeout() {
      clearTimeout(this.timeoutTimer);
      this.timeoutTimer = null;
    }
    startTimeout() {
      if (this.timeoutTimer) {
        this.cancelTimeout();
      }
      this.ref = this.channel.socket.makeRef();
      this.refEvent = this.channel.replyEventName(this.ref);
      this.channel.on(this.refEvent, (payload) => {
        this.cancelRefEvent();
        this.cancelTimeout();
        this.receivedResp = payload;
        this.matchReceive(payload);
      });
      this.timeoutTimer = setTimeout(() => {
        this.trigger("timeout", {});
      }, this.timeout);
    }
    hasReceived(status) {
      return this.receivedResp && this.receivedResp.status === status;
    }
    trigger(status, response) {
      this.channel.trigger(this.refEvent, { status, response });
    }
  };
  var Timer = class {
    constructor(callback, timerCalc) {
      this.callback = callback;
      this.timerCalc = timerCalc;
      this.timer = null;
      this.tries = 0;
    }
    reset() {
      this.tries = 0;
      clearTimeout(this.timer);
    }
    scheduleTimeout() {
      clearTimeout(this.timer);
      this.timer = setTimeout(() => {
        this.tries = this.tries + 1;
        this.callback();
      }, this.timerCalc(this.tries + 1));
    }
  };
  var Channel = class {
    constructor(topic, params, socket) {
      this.state = CHANNEL_STATES.closed;
      this.topic = topic;
      this.params = closure(params || {});
      this.socket = socket;
      this.bindings = [];
      this.bindingRef = 0;
      this.timeout = this.socket.timeout;
      this.joinedOnce = false;
      this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);
      this.pushBuffer = [];
      this.stateChangeRefs = [];
      this.rejoinTimer = new Timer(() => {
        if (this.socket.isConnected()) {
          this.rejoin();
        }
      }, this.socket.rejoinAfterMs);
      this.stateChangeRefs.push(this.socket.onError(() => this.rejoinTimer.reset()));
      this.stateChangeRefs.push(this.socket.onOpen(() => {
        this.rejoinTimer.reset();
        if (this.isErrored()) {
          this.rejoin();
        }
      }));
      this.joinPush.receive("ok", () => {
        this.state = CHANNEL_STATES.joined;
        this.rejoinTimer.reset();
        this.pushBuffer.forEach((pushEvent) => pushEvent.send());
        this.pushBuffer = [];
      });
      this.joinPush.receive("error", () => {
        this.state = CHANNEL_STATES.errored;
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.onClose(() => {
        this.rejoinTimer.reset();
        if (this.socket.hasLogger())
          this.socket.log("channel", `close ${this.topic} ${this.joinRef()}`);
        this.state = CHANNEL_STATES.closed;
        this.socket.remove(this);
      });
      this.onError((reason) => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `error ${this.topic}`, reason);
        if (this.isJoining()) {
          this.joinPush.reset();
        }
        this.state = CHANNEL_STATES.errored;
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.joinPush.receive("timeout", () => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `timeout ${this.topic} (${this.joinRef()})`, this.joinPush.timeout);
        let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), this.timeout);
        leavePush.send();
        this.state = CHANNEL_STATES.errored;
        this.joinPush.reset();
        if (this.socket.isConnected()) {
          this.rejoinTimer.scheduleTimeout();
        }
      });
      this.on(CHANNEL_EVENTS.reply, (payload, ref) => {
        this.trigger(this.replyEventName(ref), payload);
      });
    }
    join(timeout = this.timeout) {
      if (this.joinedOnce) {
        throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");
      } else {
        this.timeout = timeout;
        this.joinedOnce = true;
        this.rejoin();
        return this.joinPush;
      }
    }
    onClose(callback) {
      this.on(CHANNEL_EVENTS.close, callback);
    }
    onError(callback) {
      return this.on(CHANNEL_EVENTS.error, (reason) => callback(reason));
    }
    on(event, callback) {
      let ref = this.bindingRef++;
      this.bindings.push({ event, ref, callback });
      return ref;
    }
    off(event, ref) {
      this.bindings = this.bindings.filter((bind) => {
        return !(bind.event === event && (typeof ref === "undefined" || ref === bind.ref));
      });
    }
    canPush() {
      return this.socket.isConnected() && this.isJoined();
    }
    push(event, payload, timeout = this.timeout) {
      payload = payload || {};
      if (!this.joinedOnce) {
        throw new Error(`tried to push '${event}' to '${this.topic}' before joining. Use channel.join() before pushing events`);
      }
      let pushEvent = new Push(this, event, function() {
        return payload;
      }, timeout);
      if (this.canPush()) {
        pushEvent.send();
      } else {
        pushEvent.startTimeout();
        this.pushBuffer.push(pushEvent);
      }
      return pushEvent;
    }
    leave(timeout = this.timeout) {
      this.rejoinTimer.reset();
      this.joinPush.cancelTimeout();
      this.state = CHANNEL_STATES.leaving;
      let onClose = () => {
        if (this.socket.hasLogger())
          this.socket.log("channel", `leave ${this.topic}`);
        this.trigger(CHANNEL_EVENTS.close, "leave");
      };
      let leavePush = new Push(this, CHANNEL_EVENTS.leave, closure({}), timeout);
      leavePush.receive("ok", () => onClose()).receive("timeout", () => onClose());
      leavePush.send();
      if (!this.canPush()) {
        leavePush.trigger("ok", {});
      }
      return leavePush;
    }
    onMessage(_event, payload, _ref) {
      return payload;
    }
    isMember(topic, event, payload, joinRef) {
      if (this.topic !== topic) {
        return false;
      }
      if (joinRef && joinRef !== this.joinRef()) {
        if (this.socket.hasLogger())
          this.socket.log("channel", "dropping outdated message", { topic, event, payload, joinRef });
        return false;
      } else {
        return true;
      }
    }
    joinRef() {
      return this.joinPush.ref;
    }
    rejoin(timeout = this.timeout) {
      if (this.isLeaving()) {
        return;
      }
      this.socket.leaveOpenTopic(this.topic);
      this.state = CHANNEL_STATES.joining;
      this.joinPush.resend(timeout);
    }
    trigger(event, payload, ref, joinRef) {
      let handledPayload = this.onMessage(event, payload, ref, joinRef);
      if (payload && !handledPayload) {
        throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");
      }
      let eventBindings = this.bindings.filter((bind) => bind.event === event);
      for (let i = 0; i < eventBindings.length; i++) {
        let bind = eventBindings[i];
        bind.callback(handledPayload, ref, joinRef || this.joinRef());
      }
    }
    replyEventName(ref) {
      return `chan_reply_${ref}`;
    }
    isClosed() {
      return this.state === CHANNEL_STATES.closed;
    }
    isErrored() {
      return this.state === CHANNEL_STATES.errored;
    }
    isJoined() {
      return this.state === CHANNEL_STATES.joined;
    }
    isJoining() {
      return this.state === CHANNEL_STATES.joining;
    }
    isLeaving() {
      return this.state === CHANNEL_STATES.leaving;
    }
  };
  var Ajax = class {
    static request(method, endPoint, accept, body, timeout, ontimeout, callback) {
      if (global.XDomainRequest) {
        let req = new global.XDomainRequest();
        return this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback);
      } else {
        let req = new global.XMLHttpRequest();
        return this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback);
      }
    }
    static xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback) {
      req.timeout = timeout;
      req.open(method, endPoint);
      req.onload = () => {
        let response = this.parseJSON(req.responseText);
        callback && callback(response);
      };
      if (ontimeout) {
        req.ontimeout = ontimeout;
      }
      req.onprogress = () => {
      };
      req.send(body);
      return req;
    }
    static xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback) {
      req.open(method, endPoint, true);
      req.timeout = timeout;
      req.setRequestHeader("Content-Type", accept);
      req.onerror = () => callback && callback(null);
      req.onreadystatechange = () => {
        if (req.readyState === XHR_STATES.complete && callback) {
          let response = this.parseJSON(req.responseText);
          callback(response);
        }
      };
      if (ontimeout) {
        req.ontimeout = ontimeout;
      }
      req.send(body);
      return req;
    }
    static parseJSON(resp) {
      if (!resp || resp === "") {
        return null;
      }
      try {
        return JSON.parse(resp);
      } catch (e) {
        console && console.log("failed to parse JSON response", resp);
        return null;
      }
    }
    static serialize(obj, parentKey) {
      let queryStr = [];
      for (var key in obj) {
        if (!Object.prototype.hasOwnProperty.call(obj, key)) {
          continue;
        }
        let paramKey = parentKey ? `${parentKey}[${key}]` : key;
        let paramVal = obj[key];
        if (typeof paramVal === "object") {
          queryStr.push(this.serialize(paramVal, paramKey));
        } else {
          queryStr.push(encodeURIComponent(paramKey) + "=" + encodeURIComponent(paramVal));
        }
      }
      return queryStr.join("&");
    }
    static appendParams(url, params) {
      if (Object.keys(params).length === 0) {
        return url;
      }
      let prefix = url.match(/\?/) ? "&" : "?";
      return `${url}${prefix}${this.serialize(params)}`;
    }
  };
  var LongPoll = class {
    constructor(endPoint) {
      this.endPoint = null;
      this.token = null;
      this.skipHeartbeat = true;
      this.reqs = /* @__PURE__ */ new Set();
      this.awaitingBatchAck = false;
      this.currentBatch = null;
      this.currentBatchTimer = null;
      this.batchBuffer = [];
      this.onopen = function() {
      };
      this.onerror = function() {
      };
      this.onmessage = function() {
      };
      this.onclose = function() {
      };
      this.pollEndpoint = this.normalizeEndpoint(endPoint);
      this.readyState = SOCKET_STATES.connecting;
      this.poll();
    }
    normalizeEndpoint(endPoint) {
      return endPoint.replace("ws://", "http://").replace("wss://", "https://").replace(new RegExp("(.*)/" + TRANSPORTS.websocket), "$1/" + TRANSPORTS.longpoll);
    }
    endpointURL() {
      return Ajax.appendParams(this.pollEndpoint, { token: this.token });
    }
    closeAndRetry(code, reason, wasClean) {
      this.close(code, reason, wasClean);
      this.readyState = SOCKET_STATES.connecting;
    }
    ontimeout() {
      this.onerror("timeout");
      this.closeAndRetry(1005, "timeout", false);
    }
    isActive() {
      return this.readyState === SOCKET_STATES.open || this.readyState === SOCKET_STATES.connecting;
    }
    poll() {
      this.ajax("GET", "application/json", null, () => this.ontimeout(), (resp) => {
        if (resp) {
          var { status, token, messages } = resp;
          this.token = token;
        } else {
          status = 0;
        }
        switch (status) {
          case 200:
            messages.forEach((msg) => {
              setTimeout(() => this.onmessage({ data: msg }), 0);
            });
            this.poll();
            break;
          case 204:
            this.poll();
            break;
          case 410:
            this.readyState = SOCKET_STATES.open;
            this.onopen({});
            this.poll();
            break;
          case 403:
            this.onerror(403);
            this.close(1008, "forbidden", false);
            break;
          case 0:
          case 500:
            this.onerror(500);
            this.closeAndRetry(1011, "internal server error", 500);
            break;
          default:
            throw new Error(`unhandled poll status ${status}`);
        }
      });
    }
    send(body) {
      if (this.currentBatch) {
        this.currentBatch.push(body);
      } else if (this.awaitingBatchAck) {
        this.batchBuffer.push(body);
      } else {
        this.currentBatch = [body];
        this.currentBatchTimer = setTimeout(() => {
          this.batchSend(this.currentBatch);
          this.currentBatch = null;
        }, 0);
      }
    }
    batchSend(messages) {
      this.awaitingBatchAck = true;
      this.ajax("POST", "application/x-ndjson", messages.join("\n"), () => this.onerror("timeout"), (resp) => {
        this.awaitingBatchAck = false;
        if (!resp || resp.status !== 200) {
          this.onerror(resp && resp.status);
          this.closeAndRetry(1011, "internal server error", false);
        } else if (this.batchBuffer.length > 0) {
          this.batchSend(this.batchBuffer);
          this.batchBuffer = [];
        }
      });
    }
    close(code, reason, wasClean) {
      for (let req of this.reqs) {
        req.abort();
      }
      this.readyState = SOCKET_STATES.closed;
      let opts = Object.assign({ code: 1e3, reason: void 0, wasClean: true }, { code, reason, wasClean });
      this.batchBuffer = [];
      clearTimeout(this.currentBatchTimer);
      this.currentBatchTimer = null;
      if (typeof CloseEvent !== "undefined") {
        this.onclose(new CloseEvent("close", opts));
      } else {
        this.onclose(opts);
      }
    }
    ajax(method, contentType, body, onCallerTimeout, callback) {
      let req;
      let ontimeout = () => {
        this.reqs.delete(req);
        onCallerTimeout();
      };
      req = Ajax.request(method, this.endpointURL(), contentType, body, this.timeout, ontimeout, (resp) => {
        this.reqs.delete(req);
        if (this.isActive()) {
          callback(resp);
        }
      });
      this.reqs.add(req);
    }
  };
  var serializer_default = {
    HEADER_LENGTH: 1,
    META_LENGTH: 4,
    KINDS: { push: 0, reply: 1, broadcast: 2 },
    encode(msg, callback) {
      if (msg.payload.constructor === ArrayBuffer) {
        return callback(this.binaryEncode(msg));
      } else {
        let payload = [msg.join_ref, msg.ref, msg.topic, msg.event, msg.payload];
        return callback(JSON.stringify(payload));
      }
    },
    decode(rawPayload, callback) {
      if (rawPayload.constructor === ArrayBuffer) {
        return callback(this.binaryDecode(rawPayload));
      } else {
        let [join_ref, ref, topic, event, payload] = JSON.parse(rawPayload);
        return callback({ join_ref, ref, topic, event, payload });
      }
    },
    binaryEncode(message) {
      let { join_ref, ref, event, topic, payload } = message;
      let metaLength = this.META_LENGTH + join_ref.length + ref.length + topic.length + event.length;
      let header = new ArrayBuffer(this.HEADER_LENGTH + metaLength);
      let view = new DataView(header);
      let offset = 0;
      view.setUint8(offset++, this.KINDS.push);
      view.setUint8(offset++, join_ref.length);
      view.setUint8(offset++, ref.length);
      view.setUint8(offset++, topic.length);
      view.setUint8(offset++, event.length);
      Array.from(join_ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(ref, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(topic, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      Array.from(event, (char) => view.setUint8(offset++, char.charCodeAt(0)));
      var combined = new Uint8Array(header.byteLength + payload.byteLength);
      combined.set(new Uint8Array(header), 0);
      combined.set(new Uint8Array(payload), header.byteLength);
      return combined.buffer;
    },
    binaryDecode(buffer) {
      let view = new DataView(buffer);
      let kind = view.getUint8(0);
      let decoder = new TextDecoder();
      switch (kind) {
        case this.KINDS.push:
          return this.decodePush(buffer, view, decoder);
        case this.KINDS.reply:
          return this.decodeReply(buffer, view, decoder);
        case this.KINDS.broadcast:
          return this.decodeBroadcast(buffer, view, decoder);
      }
    },
    decodePush(buffer, view, decoder) {
      let joinRefSize = view.getUint8(1);
      let topicSize = view.getUint8(2);
      let eventSize = view.getUint8(3);
      let offset = this.HEADER_LENGTH + this.META_LENGTH - 1;
      let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));
      offset = offset + joinRefSize;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      return { join_ref: joinRef, ref: null, topic, event, payload: data };
    },
    decodeReply(buffer, view, decoder) {
      let joinRefSize = view.getUint8(1);
      let refSize = view.getUint8(2);
      let topicSize = view.getUint8(3);
      let eventSize = view.getUint8(4);
      let offset = this.HEADER_LENGTH + this.META_LENGTH;
      let joinRef = decoder.decode(buffer.slice(offset, offset + joinRefSize));
      offset = offset + joinRefSize;
      let ref = decoder.decode(buffer.slice(offset, offset + refSize));
      offset = offset + refSize;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      let payload = { status: event, response: data };
      return { join_ref: joinRef, ref, topic, event: CHANNEL_EVENTS.reply, payload };
    },
    decodeBroadcast(buffer, view, decoder) {
      let topicSize = view.getUint8(1);
      let eventSize = view.getUint8(2);
      let offset = this.HEADER_LENGTH + 2;
      let topic = decoder.decode(buffer.slice(offset, offset + topicSize));
      offset = offset + topicSize;
      let event = decoder.decode(buffer.slice(offset, offset + eventSize));
      offset = offset + eventSize;
      let data = buffer.slice(offset, buffer.byteLength);
      return { join_ref: null, ref: null, topic, event, payload: data };
    }
  };
  var Socket = class {
    constructor(endPoint, opts = {}) {
      this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] };
      this.channels = [];
      this.sendBuffer = [];
      this.ref = 0;
      this.timeout = opts.timeout || DEFAULT_TIMEOUT;
      this.transport = opts.transport || global.WebSocket || LongPoll;
      this.establishedConnections = 0;
      this.defaultEncoder = serializer_default.encode.bind(serializer_default);
      this.defaultDecoder = serializer_default.decode.bind(serializer_default);
      this.closeWasClean = false;
      this.binaryType = opts.binaryType || "arraybuffer";
      this.connectClock = 1;
      if (this.transport !== LongPoll) {
        this.encode = opts.encode || this.defaultEncoder;
        this.decode = opts.decode || this.defaultDecoder;
      } else {
        this.encode = this.defaultEncoder;
        this.decode = this.defaultDecoder;
      }
      let awaitingConnectionOnPageShow = null;
      if (phxWindow && phxWindow.addEventListener) {
        phxWindow.addEventListener("pagehide", (_e2) => {
          if (this.conn) {
            this.disconnect();
            awaitingConnectionOnPageShow = this.connectClock;
          }
        });
        phxWindow.addEventListener("pageshow", (_e2) => {
          if (awaitingConnectionOnPageShow === this.connectClock) {
            awaitingConnectionOnPageShow = null;
            this.connect();
          }
        });
      }
      this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 3e4;
      this.rejoinAfterMs = (tries) => {
        if (opts.rejoinAfterMs) {
          return opts.rejoinAfterMs(tries);
        } else {
          return [1e3, 2e3, 5e3][tries - 1] || 1e4;
        }
      };
      this.reconnectAfterMs = (tries) => {
        if (opts.reconnectAfterMs) {
          return opts.reconnectAfterMs(tries);
        } else {
          return [10, 50, 100, 150, 200, 250, 500, 1e3, 2e3][tries - 1] || 5e3;
        }
      };
      this.logger = opts.logger || null;
      this.longpollerTimeout = opts.longpollerTimeout || 2e4;
      this.params = closure(opts.params || {});
      this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;
      this.vsn = opts.vsn || DEFAULT_VSN;
      this.heartbeatTimeoutTimer = null;
      this.heartbeatTimer = null;
      this.pendingHeartbeatRef = null;
      this.reconnectTimer = new Timer(() => {
        this.teardown(() => this.connect());
      }, this.reconnectAfterMs);
    }
    getLongPollTransport() {
      return LongPoll;
    }
    replaceTransport(newTransport) {
      this.connectClock++;
      this.closeWasClean = true;
      this.reconnectTimer.reset();
      this.sendBuffer = [];
      if (this.conn) {
        this.conn.close();
        this.conn = null;
      }
      this.transport = newTransport;
    }
    protocol() {
      return location.protocol.match(/^https/) ? "wss" : "ws";
    }
    endPointURL() {
      let uri = Ajax.appendParams(Ajax.appendParams(this.endPoint, this.params()), { vsn: this.vsn });
      if (uri.charAt(0) !== "/") {
        return uri;
      }
      if (uri.charAt(1) === "/") {
        return `${this.protocol()}:${uri}`;
      }
      return `${this.protocol()}://${location.host}${uri}`;
    }
    disconnect(callback, code, reason) {
      this.connectClock++;
      this.closeWasClean = true;
      this.reconnectTimer.reset();
      this.teardown(callback, code, reason);
    }
    connect(params) {
      if (params) {
        console && console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor");
        this.params = closure(params);
      }
      if (this.conn) {
        return;
      }
      this.connectClock++;
      this.closeWasClean = false;
      this.conn = new this.transport(this.endPointURL());
      this.conn.binaryType = this.binaryType;
      this.conn.timeout = this.longpollerTimeout;
      this.conn.onopen = () => this.onConnOpen();
      this.conn.onerror = (error) => this.onConnError(error);
      this.conn.onmessage = (event) => this.onConnMessage(event);
      this.conn.onclose = (event) => this.onConnClose(event);
    }
    log(kind, msg, data) {
      this.logger(kind, msg, data);
    }
    hasLogger() {
      return this.logger !== null;
    }
    onOpen(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.open.push([ref, callback]);
      return ref;
    }
    onClose(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.close.push([ref, callback]);
      return ref;
    }
    onError(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.error.push([ref, callback]);
      return ref;
    }
    onMessage(callback) {
      let ref = this.makeRef();
      this.stateChangeCallbacks.message.push([ref, callback]);
      return ref;
    }
    ping(callback) {
      if (!this.isConnected()) {
        return false;
      }
      let ref = this.makeRef();
      let startTime = Date.now();
      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref });
      let onMsgRef = this.onMessage((msg) => {
        if (msg.ref === ref) {
          this.off([onMsgRef]);
          callback(Date.now() - startTime);
        }
      });
      return true;
    }
    clearHeartbeats() {
      clearTimeout(this.heartbeatTimer);
      clearTimeout(this.heartbeatTimeoutTimer);
    }
    onConnOpen() {
      if (this.hasLogger())
        this.log("transport", `connected to ${this.endPointURL()}`);
      this.closeWasClean = false;
      this.establishedConnections++;
      this.flushSendBuffer();
      this.reconnectTimer.reset();
      this.resetHeartbeat();
      this.stateChangeCallbacks.open.forEach(([, callback]) => callback());
    }
    heartbeatTimeout() {
      if (this.pendingHeartbeatRef) {
        this.pendingHeartbeatRef = null;
        if (this.hasLogger()) {
          this.log("transport", "heartbeat timeout. Attempting to re-establish connection");
        }
        this.triggerChanError();
        this.closeWasClean = false;
        this.teardown(() => this.reconnectTimer.scheduleTimeout(), WS_CLOSE_NORMAL, "heartbeat timeout");
      }
    }
    resetHeartbeat() {
      if (this.conn && this.conn.skipHeartbeat) {
        return;
      }
      this.pendingHeartbeatRef = null;
      this.clearHeartbeats();
      this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
    }
    teardown(callback, code, reason) {
      if (!this.conn) {
        return callback && callback();
      }
      this.waitForBufferDone(() => {
        if (this.conn) {
          if (code) {
            this.conn.close(code, reason || "");
          } else {
            this.conn.close();
          }
        }
        this.waitForSocketClosed(() => {
          if (this.conn) {
            this.conn.onopen = function() {
            };
            this.conn.onerror = function() {
            };
            this.conn.onmessage = function() {
            };
            this.conn.onclose = function() {
            };
            this.conn = null;
          }
          callback && callback();
        });
      });
    }
    waitForBufferDone(callback, tries = 1) {
      if (tries === 5 || !this.conn || !this.conn.bufferedAmount) {
        callback();
        return;
      }
      setTimeout(() => {
        this.waitForBufferDone(callback, tries + 1);
      }, 150 * tries);
    }
    waitForSocketClosed(callback, tries = 1) {
      if (tries === 5 || !this.conn || this.conn.readyState === SOCKET_STATES.closed) {
        callback();
        return;
      }
      setTimeout(() => {
        this.waitForSocketClosed(callback, tries + 1);
      }, 150 * tries);
    }
    onConnClose(event) {
      let closeCode = event && event.code;
      if (this.hasLogger())
        this.log("transport", "close", event);
      this.triggerChanError();
      this.clearHeartbeats();
      if (!this.closeWasClean && closeCode !== 1e3) {
        this.reconnectTimer.scheduleTimeout();
      }
      this.stateChangeCallbacks.close.forEach(([, callback]) => callback(event));
    }
    onConnError(error) {
      if (this.hasLogger())
        this.log("transport", error);
      let transportBefore = this.transport;
      let establishedBefore = this.establishedConnections;
      this.stateChangeCallbacks.error.forEach(([, callback]) => {
        callback(error, transportBefore, establishedBefore);
      });
      if (transportBefore === this.transport || establishedBefore > 0) {
        this.triggerChanError();
      }
    }
    triggerChanError() {
      this.channels.forEach((channel) => {
        if (!(channel.isErrored() || channel.isLeaving() || channel.isClosed())) {
          channel.trigger(CHANNEL_EVENTS.error);
        }
      });
    }
    connectionState() {
      switch (this.conn && this.conn.readyState) {
        case SOCKET_STATES.connecting:
          return "connecting";
        case SOCKET_STATES.open:
          return "open";
        case SOCKET_STATES.closing:
          return "closing";
        default:
          return "closed";
      }
    }
    isConnected() {
      return this.connectionState() === "open";
    }
    remove(channel) {
      this.off(channel.stateChangeRefs);
      this.channels = this.channels.filter((c2) => c2.joinRef() !== channel.joinRef());
    }
    off(refs) {
      for (let key in this.stateChangeCallbacks) {
        this.stateChangeCallbacks[key] = this.stateChangeCallbacks[key].filter(([ref]) => {
          return refs.indexOf(ref) === -1;
        });
      }
    }
    channel(topic, chanParams = {}) {
      let chan = new Channel(topic, chanParams, this);
      this.channels.push(chan);
      return chan;
    }
    push(data) {
      if (this.hasLogger()) {
        let { topic, event, payload, ref, join_ref } = data;
        this.log("push", `${topic} ${event} (${join_ref}, ${ref})`, payload);
      }
      if (this.isConnected()) {
        this.encode(data, (result) => this.conn.send(result));
      } else {
        this.sendBuffer.push(() => this.encode(data, (result) => this.conn.send(result)));
      }
    }
    makeRef() {
      let newRef = this.ref + 1;
      if (newRef === this.ref) {
        this.ref = 0;
      } else {
        this.ref = newRef;
      }
      return this.ref.toString();
    }
    sendHeartbeat() {
      if (this.pendingHeartbeatRef && !this.isConnected()) {
        return;
      }
      this.pendingHeartbeatRef = this.makeRef();
      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref: this.pendingHeartbeatRef });
      this.heartbeatTimeoutTimer = setTimeout(() => this.heartbeatTimeout(), this.heartbeatIntervalMs);
    }
    flushSendBuffer() {
      if (this.isConnected() && this.sendBuffer.length > 0) {
        this.sendBuffer.forEach((callback) => callback());
        this.sendBuffer = [];
      }
    }
    onConnMessage(rawMessage) {
      this.decode(rawMessage.data, (msg) => {
        let { topic, event, payload, ref, join_ref } = msg;
        if (ref && ref === this.pendingHeartbeatRef) {
          this.clearHeartbeats();
          this.pendingHeartbeatRef = null;
          this.heartbeatTimer = setTimeout(() => this.sendHeartbeat(), this.heartbeatIntervalMs);
        }
        if (this.hasLogger())
          this.log("receive", `${payload.status || ""} ${topic} ${event} ${ref && "(" + ref + ")" || ""}`, payload);
        for (let i = 0; i < this.channels.length; i++) {
          const channel = this.channels[i];
          if (!channel.isMember(topic, event, payload, join_ref)) {
            continue;
          }
          channel.trigger(event, payload, ref, join_ref);
        }
        for (let i = 0; i < this.stateChangeCallbacks.message.length; i++) {
          let [, callback] = this.stateChangeCallbacks.message[i];
          callback(msg);
        }
      });
    }
    leaveOpenTopic(topic) {
      let dupChannel = this.channels.find((c2) => c2.topic === topic && (c2.isJoined() || c2.isJoining()));
      if (dupChannel) {
        if (this.hasLogger())
          this.log("transport", `leaving duplicate topic "${topic}"`);
        dupChannel.leave();
      }
    }
  };

  // ../deps/phoenix_live_view/priv/static/phoenix_live_view.esm.js
  var CONSECUTIVE_RELOADS = "consecutive-reloads";
  var MAX_RELOADS = 10;
  var RELOAD_JITTER_MIN = 5e3;
  var RELOAD_JITTER_MAX = 1e4;
  var FAILSAFE_JITTER = 3e4;
  var PHX_EVENT_CLASSES = [
    "phx-click-loading",
    "phx-change-loading",
    "phx-submit-loading",
    "phx-keydown-loading",
    "phx-keyup-loading",
    "phx-blur-loading",
    "phx-focus-loading"
  ];
  var PHX_COMPONENT = "data-phx-component";
  var PHX_LIVE_LINK = "data-phx-link";
  var PHX_TRACK_STATIC = "track-static";
  var PHX_LINK_STATE = "data-phx-link-state";
  var PHX_REF = "data-phx-ref";
  var PHX_REF_SRC = "data-phx-ref-src";
  var PHX_TRACK_UPLOADS = "track-uploads";
  var PHX_UPLOAD_REF = "data-phx-upload-ref";
  var PHX_PREFLIGHTED_REFS = "data-phx-preflighted-refs";
  var PHX_DONE_REFS = "data-phx-done-refs";
  var PHX_DROP_TARGET = "drop-target";
  var PHX_ACTIVE_ENTRY_REFS = "data-phx-active-refs";
  var PHX_LIVE_FILE_UPDATED = "phx:live-file:updated";
  var PHX_SKIP = "data-phx-skip";
  var PHX_PRUNE = "data-phx-prune";
  var PHX_PAGE_LOADING = "page-loading";
  var PHX_CONNECTED_CLASS = "phx-connected";
  var PHX_LOADING_CLASS = "phx-loading";
  var PHX_NO_FEEDBACK_CLASS = "phx-no-feedback";
  var PHX_ERROR_CLASS = "phx-error";
  var PHX_CLIENT_ERROR_CLASS = "phx-client-error";
  var PHX_SERVER_ERROR_CLASS = "phx-server-error";
  var PHX_PARENT_ID = "data-phx-parent-id";
  var PHX_MAIN = "data-phx-main";
  var PHX_ROOT_ID = "data-phx-root-id";
  var PHX_VIEWPORT_TOP = "viewport-top";
  var PHX_VIEWPORT_BOTTOM = "viewport-bottom";
  var PHX_TRIGGER_ACTION = "trigger-action";
  var PHX_FEEDBACK_FOR = "feedback-for";
  var PHX_HAS_FOCUSED = "phx-has-focused";
  var FOCUSABLE_INPUTS = ["text", "textarea", "number", "email", "password", "search", "tel", "url", "date", "time", "datetime-local", "color", "range"];
  var CHECKABLE_INPUTS = ["checkbox", "radio"];
  var PHX_HAS_SUBMITTED = "phx-has-submitted";
  var PHX_SESSION = "data-phx-session";
  var PHX_VIEW_SELECTOR = `[${PHX_SESSION}]`;
  var PHX_STICKY = "data-phx-sticky";
  var PHX_STATIC = "data-phx-static";
  var PHX_READONLY = "data-phx-readonly";
  var PHX_DISABLED = "data-phx-disabled";
  var PHX_DISABLE_WITH = "disable-with";
  var PHX_DISABLE_WITH_RESTORE = "data-phx-disable-with-restore";
  var PHX_HOOK = "hook";
  var PHX_DEBOUNCE = "debounce";
  var PHX_THROTTLE = "throttle";
  var PHX_UPDATE = "update";
  var PHX_STREAM = "stream";
  var PHX_STREAM_REF = "data-phx-stream";
  var PHX_KEY = "key";
  var PHX_PRIVATE = "phxPrivate";
  var PHX_AUTO_RECOVER = "auto-recover";
  var PHX_LV_DEBUG = "phx:live-socket:debug";
  var PHX_LV_PROFILE = "phx:live-socket:profiling";
  var PHX_LV_LATENCY_SIM = "phx:live-socket:latency-sim";
  var PHX_PROGRESS = "progress";
  var PHX_MOUNTED = "mounted";
  var LOADER_TIMEOUT = 1;
  var BEFORE_UNLOAD_LOADER_TIMEOUT = 200;
  var BINDING_PREFIX = "phx-";
  var PUSH_TIMEOUT = 3e4;
  var DEBOUNCE_TRIGGER = "debounce-trigger";
  var THROTTLED = "throttled";
  var DEBOUNCE_PREV_KEY = "debounce-prev-key";
  var DEFAULTS = {
    debounce: 300,
    throttle: 300
  };
  var DYNAMICS = "d";
  var STATIC = "s";
  var COMPONENTS = "c";
  var EVENTS = "e";
  var REPLY = "r";
  var TITLE = "t";
  var TEMPLATES = "p";
  var STREAM = "stream";
  var EntryUploader = class {
    constructor(entry, chunkSize, liveSocket2) {
      this.liveSocket = liveSocket2;
      this.entry = entry;
      this.offset = 0;
      this.chunkSize = chunkSize;
      this.chunkTimer = null;
      this.uploadChannel = liveSocket2.channel(`lvu:${entry.ref}`, { token: entry.metadata() });
    }
    error(reason) {
      clearTimeout(this.chunkTimer);
      this.uploadChannel.leave();
      this.entry.error(reason);
    }
    upload() {
      this.uploadChannel.onError((reason) => this.error(reason));
      this.uploadChannel.join().receive("ok", (_data) => this.readNextChunk()).receive("error", (reason) => this.error(reason));
    }
    isDone() {
      return this.offset >= this.entry.file.size;
    }
    readNextChunk() {
      let reader = new window.FileReader();
      let blob = this.entry.file.slice(this.offset, this.chunkSize + this.offset);
      reader.onload = (e) => {
        if (e.target.error === null) {
          this.offset += e.target.result.byteLength;
          this.pushChunk(e.target.result);
        } else {
          return logError("Read error: " + e.target.error);
        }
      };
      reader.readAsArrayBuffer(blob);
    }
    pushChunk(chunk) {
      if (!this.uploadChannel.isJoined()) {
        return;
      }
      this.uploadChannel.push("chunk", chunk).receive("ok", () => {
        this.entry.progress(this.offset / this.entry.file.size * 100);
        if (!this.isDone()) {
          this.chunkTimer = setTimeout(() => this.readNextChunk(), this.liveSocket.getLatencySim() || 0);
        }
      });
    }
  };
  var logError = (msg, obj) => console.error && console.error(msg, obj);
  var isCid = (cid) => {
    let type = typeof cid;
    return type === "number" || type === "string" && /^(0|[1-9]\d*)$/.test(cid);
  };
  function detectDuplicateIds() {
    let ids = /* @__PURE__ */ new Set();
    let elems = document.querySelectorAll("*[id]");
    for (let i = 0, len = elems.length; i < len; i++) {
      if (ids.has(elems[i].id)) {
        console.error(`Multiple IDs detected: ${elems[i].id}. Ensure unique element ids.`);
      } else {
        ids.add(elems[i].id);
      }
    }
  }
  var debug = (view, kind, msg, obj) => {
    if (view.liveSocket.isDebugEnabled()) {
      console.log(`${view.id} ${kind}: ${msg} - `, obj);
    }
  };
  var closure2 = (val) => typeof val === "function" ? val : function() {
    return val;
  };
  var clone = (obj) => {
    return JSON.parse(JSON.stringify(obj));
  };
  var closestPhxBinding = (el, binding, borderEl) => {
    do {
      if (el.matches(`[${binding}]`) && !el.disabled) {
        return el;
      }
      el = el.parentElement || el.parentNode;
    } while (el !== null && el.nodeType === 1 && !(borderEl && borderEl.isSameNode(el) || el.matches(PHX_VIEW_SELECTOR)));
    return null;
  };
  var isObject = (obj) => {
    return obj !== null && typeof obj === "object" && !(obj instanceof Array);
  };
  var isEqualObj = (obj1, obj2) => JSON.stringify(obj1) === JSON.stringify(obj2);
  var isEmpty = (obj) => {
    for (let x2 in obj) {
      return false;
    }
    return true;
  };
  var maybe = (el, callback) => el && callback(el);
  var channelUploader = function(entries, onError, resp, liveSocket2) {
    entries.forEach((entry) => {
      let entryUploader = new EntryUploader(entry, resp.config.chunk_size, liveSocket2);
      entryUploader.upload();
    });
  };
  var Browser = {
    canPushState() {
      return typeof history.pushState !== "undefined";
    },
    dropLocal(localStorage2, namespace, subkey) {
      return localStorage2.removeItem(this.localKey(namespace, subkey));
    },
    updateLocal(localStorage2, namespace, subkey, initial, func) {
      let current = this.getLocal(localStorage2, namespace, subkey);
      let key = this.localKey(namespace, subkey);
      let newVal = current === null ? initial : func(current);
      localStorage2.setItem(key, JSON.stringify(newVal));
      return newVal;
    },
    getLocal(localStorage2, namespace, subkey) {
      return JSON.parse(localStorage2.getItem(this.localKey(namespace, subkey)));
    },
    updateCurrentState(callback) {
      if (!this.canPushState()) {
        return;
      }
      history.replaceState(callback(history.state || {}), "", window.location.href);
    },
    pushState(kind, meta, to) {
      if (this.canPushState()) {
        if (to !== window.location.href) {
          if (meta.type == "redirect" && meta.scroll) {
            let currentState = history.state || {};
            currentState.scroll = meta.scroll;
            history.replaceState(currentState, "", window.location.href);
          }
          delete meta.scroll;
          history[kind + "State"](meta, "", to || null);
          let hashEl = this.getHashTargetEl(window.location.hash);
          if (hashEl) {
            hashEl.scrollIntoView();
          } else if (meta.type === "redirect") {
            window.scroll(0, 0);
          }
        }
      } else {
        this.redirect(to);
      }
    },
    setCookie(name, value) {
      document.cookie = `${name}=${value}`;
    },
    getCookie(name) {
      return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${name}s*=s*([^;]*).*$)|^.*$`), "$1");
    },
    redirect(toURL, flash) {
      if (flash) {
        Browser.setCookie("__phoenix_flash__", flash + "; max-age=60000; path=/");
      }
      window.location = toURL;
    },
    localKey(namespace, subkey) {
      return `${namespace}-${subkey}`;
    },
    getHashTargetEl(maybeHash) {
      let hash = maybeHash.toString().substring(1);
      if (hash === "") {
        return;
      }
      return document.getElementById(hash) || document.querySelector(`a[name="${hash}"]`);
    }
  };
  var browser_default = Browser;
  var DOM = {
    byId(id) {
      return document.getElementById(id) || logError(`no id found for ${id}`);
    },
    removeClass(el, className) {
      el.classList.remove(className);
      if (el.classList.length === 0) {
        el.removeAttribute("class");
      }
    },
    all(node, query, callback) {
      if (!node) {
        return [];
      }
      let array = Array.from(node.querySelectorAll(query));
      return callback ? array.forEach(callback) : array;
    },
    childNodeLength(html) {
      let template = document.createElement("template");
      template.innerHTML = html;
      return template.content.childElementCount;
    },
    isUploadInput(el) {
      return el.type === "file" && el.getAttribute(PHX_UPLOAD_REF) !== null;
    },
    findUploadInputs(node) {
      return this.all(node, `input[type="file"][${PHX_UPLOAD_REF}]`);
    },
    findComponentNodeList(node, cid) {
      return this.filterWithinSameLiveView(this.all(node, `[${PHX_COMPONENT}="${cid}"]`), node);
    },
    isPhxDestroyed(node) {
      return node.id && DOM.private(node, "destroyed") ? true : false;
    },
    wantsNewTab(e) {
      let wantsNewTab = e.ctrlKey || e.shiftKey || e.metaKey || e.button && e.button === 1;
      let isDownload = e.target instanceof HTMLAnchorElement && e.target.hasAttribute("download");
      let isTargetBlank = e.target.getAttribute("target") === "_blank";
      return wantsNewTab || isTargetBlank || isDownload;
    },
    isUnloadableFormSubmit(e) {
      return !e.defaultPrevented && !this.wantsNewTab(e);
    },
    isNewPageClick(e, currentLocation) {
      let href = e.target instanceof HTMLAnchorElement ? e.target.getAttribute("href") : null;
      let url;
      if (e.defaultPrevented || href === null || this.wantsNewTab(e)) {
        return false;
      }
      if (href.startsWith("mailto:") || href.startsWith("tel:")) {
        return false;
      }
      try {
        url = new URL(href);
      } catch (e2) {
        try {
          url = new URL(href, currentLocation);
        } catch (e3) {
          return true;
        }
      }
      if (url.host === currentLocation.host && url.protocol === currentLocation.protocol) {
        if (url.pathname === currentLocation.pathname && url.search === currentLocation.search) {
          return url.hash === "" && !url.href.endsWith("#");
        }
      }
      return url.protocol.startsWith("http");
    },
    markPhxChildDestroyed(el) {
      if (this.isPhxChild(el)) {
        el.setAttribute(PHX_SESSION, "");
      }
      this.putPrivate(el, "destroyed", true);
    },
    findPhxChildrenInFragment(html, parentId) {
      let template = document.createElement("template");
      template.innerHTML = html;
      return this.findPhxChildren(template.content, parentId);
    },
    isIgnored(el, phxUpdate) {
      return (el.getAttribute(phxUpdate) || el.getAttribute("data-phx-update")) === "ignore";
    },
    isPhxUpdate(el, phxUpdate, updateTypes) {
      return el.getAttribute && updateTypes.indexOf(el.getAttribute(phxUpdate)) >= 0;
    },
    findPhxSticky(el) {
      return this.all(el, `[${PHX_STICKY}]`);
    },
    findPhxChildren(el, parentId) {
      return this.all(el, `${PHX_VIEW_SELECTOR}[${PHX_PARENT_ID}="${parentId}"]`);
    },
    findParentCIDs(node, cids) {
      let initial = new Set(cids);
      let parentCids = cids.reduce((acc, cid) => {
        let selector = `[${PHX_COMPONENT}="${cid}"] [${PHX_COMPONENT}]`;
        this.filterWithinSameLiveView(this.all(node, selector), node).map((el) => parseInt(el.getAttribute(PHX_COMPONENT))).forEach((childCID) => acc.delete(childCID));
        return acc;
      }, initial);
      return parentCids.size === 0 ? new Set(cids) : parentCids;
    },
    filterWithinSameLiveView(nodes, parent) {
      if (parent.querySelector(PHX_VIEW_SELECTOR)) {
        return nodes.filter((el) => this.withinSameLiveView(el, parent));
      } else {
        return nodes;
      }
    },
    withinSameLiveView(node, parent) {
      while (node = node.parentNode) {
        if (node.isSameNode(parent)) {
          return true;
        }
        if (node.getAttribute(PHX_SESSION) !== null) {
          return false;
        }
      }
    },
    private(el, key) {
      return el[PHX_PRIVATE] && el[PHX_PRIVATE][key];
    },
    deletePrivate(el, key) {
      el[PHX_PRIVATE] && delete el[PHX_PRIVATE][key];
    },
    putPrivate(el, key, value) {
      if (!el[PHX_PRIVATE]) {
        el[PHX_PRIVATE] = {};
      }
      el[PHX_PRIVATE][key] = value;
    },
    updatePrivate(el, key, defaultVal, updateFunc) {
      let existing = this.private(el, key);
      if (existing === void 0) {
        this.putPrivate(el, key, updateFunc(defaultVal));
      } else {
        this.putPrivate(el, key, updateFunc(existing));
      }
    },
    copyPrivates(target, source) {
      if (source[PHX_PRIVATE]) {
        target[PHX_PRIVATE] = source[PHX_PRIVATE];
      }
    },
    putTitle(str) {
      let titleEl = document.querySelector("title");
      if (titleEl) {
        let { prefix, suffix } = titleEl.dataset;
        document.title = `${prefix || ""}${str}${suffix || ""}`;
      } else {
        document.title = str;
      }
    },
    debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, callback) {
      let debounce = el.getAttribute(phxDebounce);
      let throttle = el.getAttribute(phxThrottle);
      if (debounce === "") {
        debounce = defaultDebounce;
      }
      if (throttle === "") {
        throttle = defaultThrottle;
      }
      let value = debounce || throttle;
      switch (value) {
        case null:
          return callback();
        case "blur":
          if (this.once(el, "debounce-blur")) {
            el.addEventListener("blur", () => callback());
          }
          return;
        default:
          let timeout = parseInt(value);
          let trigger = () => throttle ? this.deletePrivate(el, THROTTLED) : callback();
          let currentCycle = this.incCycle(el, DEBOUNCE_TRIGGER, trigger);
          if (isNaN(timeout)) {
            return logError(`invalid throttle/debounce value: ${value}`);
          }
          if (throttle) {
            let newKeyDown = false;
            if (event.type === "keydown") {
              let prevKey = this.private(el, DEBOUNCE_PREV_KEY);
              this.putPrivate(el, DEBOUNCE_PREV_KEY, event.key);
              newKeyDown = prevKey !== event.key;
            }
            if (!newKeyDown && this.private(el, THROTTLED)) {
              return false;
            } else {
              callback();
              this.putPrivate(el, THROTTLED, true);
              setTimeout(() => {
                if (asyncFilter()) {
                  this.triggerCycle(el, DEBOUNCE_TRIGGER);
                }
              }, timeout);
            }
          } else {
            setTimeout(() => {
              if (asyncFilter()) {
                this.triggerCycle(el, DEBOUNCE_TRIGGER, currentCycle);
              }
            }, timeout);
          }
          let form = el.form;
          if (form && this.once(form, "bind-debounce")) {
            form.addEventListener("submit", () => {
              Array.from(new FormData(form).entries(), ([name]) => {
                let input = form.querySelector(`[name="${name}"]`);
                this.incCycle(input, DEBOUNCE_TRIGGER);
                this.deletePrivate(input, THROTTLED);
              });
            });
          }
          if (this.once(el, "bind-debounce")) {
            el.addEventListener("blur", () => this.triggerCycle(el, DEBOUNCE_TRIGGER));
          }
      }
    },
    triggerCycle(el, key, currentCycle) {
      let [cycle, trigger] = this.private(el, key);
      if (!currentCycle) {
        currentCycle = cycle;
      }
      if (currentCycle === cycle) {
        this.incCycle(el, key);
        trigger();
      }
    },
    once(el, key) {
      if (this.private(el, key) === true) {
        return false;
      }
      this.putPrivate(el, key, true);
      return true;
    },
    incCycle(el, key, trigger = function() {
    }) {
      let [currentCycle] = this.private(el, key) || [0, trigger];
      currentCycle++;
      this.putPrivate(el, key, [currentCycle, trigger]);
      return currentCycle;
    },
    maybeAddPrivateHooks(el, phxViewportTop, phxViewportBottom) {
      if (el.hasAttribute && (el.hasAttribute(phxViewportTop) || el.hasAttribute(phxViewportBottom))) {
        el.setAttribute("data-phx-hook", "Phoenix.InfiniteScroll");
      }
    },
    maybeHideFeedback(container, input, phxFeedbackFor) {
      if (!(this.private(input, PHX_HAS_FOCUSED) || this.private(input, PHX_HAS_SUBMITTED))) {
        let feedbacks = [input.name];
        if (input.name.endsWith("[]")) {
          feedbacks.push(input.name.slice(0, -2));
        }
        let selector = feedbacks.map((f2) => `[${phxFeedbackFor}="${f2}"]`).join(", ");
        DOM.all(container, selector, (el) => el.classList.add(PHX_NO_FEEDBACK_CLASS));
      }
    },
    resetForm(form, phxFeedbackFor) {
      Array.from(form.elements).forEach((input) => {
        let query = `[${phxFeedbackFor}="${input.id}"],
                   [${phxFeedbackFor}="${input.name}"],
                   [${phxFeedbackFor}="${input.name.replace(/\[\]$/, "")}"]`;
        this.deletePrivate(input, PHX_HAS_FOCUSED);
        this.deletePrivate(input, PHX_HAS_SUBMITTED);
        this.all(document, query, (feedbackEl) => {
          feedbackEl.classList.add(PHX_NO_FEEDBACK_CLASS);
        });
      });
    },
    showError(inputEl, phxFeedbackFor) {
      if (inputEl.id || inputEl.name) {
        this.all(inputEl.form, `[${phxFeedbackFor}="${inputEl.id}"], [${phxFeedbackFor}="${inputEl.name}"]`, (el) => {
          this.removeClass(el, PHX_NO_FEEDBACK_CLASS);
        });
      }
    },
    isPhxChild(node) {
      return node.getAttribute && node.getAttribute(PHX_PARENT_ID);
    },
    isPhxSticky(node) {
      return node.getAttribute && node.getAttribute(PHX_STICKY) !== null;
    },
    firstPhxChild(el) {
      return this.isPhxChild(el) ? el : this.all(el, `[${PHX_PARENT_ID}]`)[0];
    },
    dispatchEvent(target, name, opts = {}) {
      let bubbles = opts.bubbles === void 0 ? true : !!opts.bubbles;
      let eventOpts = { bubbles, cancelable: true, detail: opts.detail || {} };
      let event = name === "click" ? new MouseEvent("click", eventOpts) : new CustomEvent(name, eventOpts);
      target.dispatchEvent(event);
    },
    cloneNode(node, html) {
      if (typeof html === "undefined") {
        return node.cloneNode(true);
      } else {
        let cloned = node.cloneNode(false);
        cloned.innerHTML = html;
        return cloned;
      }
    },
    mergeAttrs(target, source, opts = {}) {
      let exclude = opts.exclude || [];
      let isIgnored = opts.isIgnored;
      let sourceAttrs = source.attributes;
      for (let i = sourceAttrs.length - 1; i >= 0; i--) {
        let name = sourceAttrs[i].name;
        if (exclude.indexOf(name) < 0) {
          target.setAttribute(name, source.getAttribute(name));
        }
      }
      let targetAttrs = target.attributes;
      for (let i = targetAttrs.length - 1; i >= 0; i--) {
        let name = targetAttrs[i].name;
        if (isIgnored) {
          if (name.startsWith("data-") && !source.hasAttribute(name)) {
            target.removeAttribute(name);
          }
        } else {
          if (!source.hasAttribute(name)) {
            target.removeAttribute(name);
          }
        }
      }
    },
    mergeFocusedInput(target, source) {
      if (!(target instanceof HTMLSelectElement)) {
        DOM.mergeAttrs(target, source, { exclude: ["value"] });
      }
      if (source.readOnly) {
        target.setAttribute("readonly", true);
      } else {
        target.removeAttribute("readonly");
      }
    },
    hasSelectionRange(el) {
      return el.setSelectionRange && (el.type === "text" || el.type === "textarea");
    },
    restoreFocus(focused, selectionStart, selectionEnd) {
      if (!DOM.isTextualInput(focused)) {
        return;
      }
      let wasFocused = focused.matches(":focus");
      if (focused.readOnly) {
        focused.blur();
      }
      if (!wasFocused) {
        focused.focus();
      }
      if (this.hasSelectionRange(focused)) {
        focused.setSelectionRange(selectionStart, selectionEnd);
      }
    },
    isFormInput(el) {
      return /^(?:input|select|textarea)$/i.test(el.tagName) && el.type !== "button";
    },
    syncAttrsToProps(el) {
      if (el instanceof HTMLInputElement && CHECKABLE_INPUTS.indexOf(el.type.toLocaleLowerCase()) >= 0) {
        el.checked = el.getAttribute("checked") !== null;
      }
    },
    isTextualInput(el) {
      return FOCUSABLE_INPUTS.indexOf(el.type) >= 0;
    },
    isNowTriggerFormExternal(el, phxTriggerExternal) {
      return el.getAttribute && el.getAttribute(phxTriggerExternal) !== null;
    },
    syncPendingRef(fromEl, toEl, disableWith) {
      let ref = fromEl.getAttribute(PHX_REF);
      if (ref === null) {
        return true;
      }
      let refSrc = fromEl.getAttribute(PHX_REF_SRC);
      if (DOM.isFormInput(fromEl) || fromEl.getAttribute(disableWith) !== null) {
        if (DOM.isUploadInput(fromEl)) {
          DOM.mergeAttrs(fromEl, toEl, { isIgnored: true });
        }
        DOM.putPrivate(fromEl, PHX_REF, toEl);
        return false;
      } else {
        PHX_EVENT_CLASSES.forEach((className) => {
          fromEl.classList.contains(className) && toEl.classList.add(className);
        });
        toEl.setAttribute(PHX_REF, ref);
        toEl.setAttribute(PHX_REF_SRC, refSrc);
        return true;
      }
    },
    cleanChildNodes(container, phxUpdate) {
      if (DOM.isPhxUpdate(container, phxUpdate, ["append", "prepend"])) {
        let toRemove = [];
        container.childNodes.forEach((childNode) => {
          if (!childNode.id) {
            let isEmptyTextNode = childNode.nodeType === Node.TEXT_NODE && childNode.nodeValue.trim() === "";
            if (!isEmptyTextNode) {
              logError(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(childNode.outerHTML || childNode.nodeValue).trim()}"

`);
            }
            toRemove.push(childNode);
          }
        });
        toRemove.forEach((childNode) => childNode.remove());
      }
    },
    replaceRootContainer(container, tagName, attrs) {
      let retainedAttrs = /* @__PURE__ */ new Set(["id", PHX_SESSION, PHX_STATIC, PHX_MAIN, PHX_ROOT_ID]);
      if (container.tagName.toLowerCase() === tagName.toLowerCase()) {
        Array.from(container.attributes).filter((attr) => !retainedAttrs.has(attr.name.toLowerCase())).forEach((attr) => container.removeAttribute(attr.name));
        Object.keys(attrs).filter((name) => !retainedAttrs.has(name.toLowerCase())).forEach((attr) => container.setAttribute(attr, attrs[attr]));
        return container;
      } else {
        let newContainer = document.createElement(tagName);
        Object.keys(attrs).forEach((attr) => newContainer.setAttribute(attr, attrs[attr]));
        retainedAttrs.forEach((attr) => newContainer.setAttribute(attr, container.getAttribute(attr)));
        newContainer.innerHTML = container.innerHTML;
        container.replaceWith(newContainer);
        return newContainer;
      }
    },
    getSticky(el, name, defaultVal) {
      let op = (DOM.private(el, "sticky") || []).find(([existingName]) => name === existingName);
      if (op) {
        let [_name, _op, stashedResult] = op;
        return stashedResult;
      } else {
        return typeof defaultVal === "function" ? defaultVal() : defaultVal;
      }
    },
    deleteSticky(el, name) {
      this.updatePrivate(el, "sticky", [], (ops) => {
        return ops.filter(([existingName, _2]) => existingName !== name);
      });
    },
    putSticky(el, name, op) {
      let stashedResult = op(el);
      this.updatePrivate(el, "sticky", [], (ops) => {
        let existingIndex = ops.findIndex(([existingName]) => name === existingName);
        if (existingIndex >= 0) {
          ops[existingIndex] = [name, op, stashedResult];
        } else {
          ops.push([name, op, stashedResult]);
        }
        return ops;
      });
    },
    applyStickyOperations(el) {
      let ops = DOM.private(el, "sticky");
      if (!ops) {
        return;
      }
      ops.forEach(([name, op, _stashed]) => this.putSticky(el, name, op));
    }
  };
  var dom_default = DOM;
  var UploadEntry = class {
    static isActive(fileEl, file) {
      let isNew = file._phxRef === void 0;
      let activeRefs = fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
      let isActive = activeRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
      return file.size > 0 && (isNew || isActive);
    }
    static isPreflighted(fileEl, file) {
      let preflightedRefs = fileEl.getAttribute(PHX_PREFLIGHTED_REFS).split(",");
      let isPreflighted = preflightedRefs.indexOf(LiveUploader.genFileRef(file)) >= 0;
      return isPreflighted && this.isActive(fileEl, file);
    }
    constructor(fileEl, file, view) {
      this.ref = LiveUploader.genFileRef(file);
      this.fileEl = fileEl;
      this.file = file;
      this.view = view;
      this.meta = null;
      this._isCancelled = false;
      this._isDone = false;
      this._progress = 0;
      this._lastProgressSent = -1;
      this._onDone = function() {
      };
      this._onElUpdated = this.onElUpdated.bind(this);
      this.fileEl.addEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
    }
    metadata() {
      return this.meta;
    }
    progress(progress) {
      this._progress = Math.floor(progress);
      if (this._progress > this._lastProgressSent) {
        if (this._progress >= 100) {
          this._progress = 100;
          this._lastProgressSent = 100;
          this._isDone = true;
          this.view.pushFileProgress(this.fileEl, this.ref, 100, () => {
            LiveUploader.untrackFile(this.fileEl, this.file);
            this._onDone();
          });
        } else {
          this._lastProgressSent = this._progress;
          this.view.pushFileProgress(this.fileEl, this.ref, this._progress);
        }
      }
    }
    cancel() {
      this._isCancelled = true;
      this._isDone = true;
      this._onDone();
    }
    isDone() {
      return this._isDone;
    }
    error(reason = "failed") {
      this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
      this.view.pushFileProgress(this.fileEl, this.ref, { error: reason });
      LiveUploader.clearFiles(this.fileEl);
    }
    onDone(callback) {
      this._onDone = () => {
        this.fileEl.removeEventListener(PHX_LIVE_FILE_UPDATED, this._onElUpdated);
        callback();
      };
    }
    onElUpdated() {
      let activeRefs = this.fileEl.getAttribute(PHX_ACTIVE_ENTRY_REFS).split(",");
      if (activeRefs.indexOf(this.ref) === -1) {
        this.cancel();
      }
    }
    toPreflightPayload() {
      return {
        last_modified: this.file.lastModified,
        name: this.file.name,
        relative_path: this.file.webkitRelativePath,
        size: this.file.size,
        type: this.file.type,
        ref: this.ref
      };
    }
    uploader(uploaders) {
      if (this.meta.uploader) {
        let callback = uploaders[this.meta.uploader] || logError(`no uploader configured for ${this.meta.uploader}`);
        return { name: this.meta.uploader, callback };
      } else {
        return { name: "channel", callback: channelUploader };
      }
    }
    zipPostFlight(resp) {
      this.meta = resp.entries[this.ref];
      if (!this.meta) {
        logError(`no preflight upload response returned with ref ${this.ref}`, { input: this.fileEl, response: resp });
      }
    }
  };
  var liveUploaderFileRef = 0;
  var LiveUploader = class {
    static genFileRef(file) {
      let ref = file._phxRef;
      if (ref !== void 0) {
        return ref;
      } else {
        file._phxRef = (liveUploaderFileRef++).toString();
        return file._phxRef;
      }
    }
    static getEntryDataURL(inputEl, ref, callback) {
      let file = this.activeFiles(inputEl).find((file2) => this.genFileRef(file2) === ref);
      callback(URL.createObjectURL(file));
    }
    static hasUploadsInProgress(formEl) {
      let active = 0;
      dom_default.findUploadInputs(formEl).forEach((input) => {
        if (input.getAttribute(PHX_PREFLIGHTED_REFS) !== input.getAttribute(PHX_DONE_REFS)) {
          active++;
        }
      });
      return active > 0;
    }
    static serializeUploads(inputEl) {
      let files = this.activeFiles(inputEl);
      let fileData = {};
      files.forEach((file) => {
        let entry = { path: inputEl.name };
        let uploadRef = inputEl.getAttribute(PHX_UPLOAD_REF);
        fileData[uploadRef] = fileData[uploadRef] || [];
        entry.ref = this.genFileRef(file);
        entry.last_modified = file.lastModified;
        entry.name = file.name || entry.ref;
        entry.relative_path = file.webkitRelativePath;
        entry.type = file.type;
        entry.size = file.size;
        fileData[uploadRef].push(entry);
      });
      return fileData;
    }
    static clearFiles(inputEl) {
      inputEl.value = null;
      inputEl.removeAttribute(PHX_UPLOAD_REF);
      dom_default.putPrivate(inputEl, "files", []);
    }
    static untrackFile(inputEl, file) {
      dom_default.putPrivate(inputEl, "files", dom_default.private(inputEl, "files").filter((f2) => !Object.is(f2, file)));
    }
    static trackFiles(inputEl, files, dataTransfer) {
      if (inputEl.getAttribute("multiple") !== null) {
        let newFiles = files.filter((file) => !this.activeFiles(inputEl).find((f2) => Object.is(f2, file)));
        dom_default.putPrivate(inputEl, "files", this.activeFiles(inputEl).concat(newFiles));
        inputEl.value = null;
      } else {
        if (dataTransfer && dataTransfer.files.length > 0) {
          inputEl.files = dataTransfer.files;
        }
        dom_default.putPrivate(inputEl, "files", files);
      }
    }
    static activeFileInputs(formEl) {
      let fileInputs = dom_default.findUploadInputs(formEl);
      return Array.from(fileInputs).filter((el) => el.files && this.activeFiles(el).length > 0);
    }
    static activeFiles(input) {
      return (dom_default.private(input, "files") || []).filter((f2) => UploadEntry.isActive(input, f2));
    }
    static inputsAwaitingPreflight(formEl) {
      let fileInputs = dom_default.findUploadInputs(formEl);
      return Array.from(fileInputs).filter((input) => this.filesAwaitingPreflight(input).length > 0);
    }
    static filesAwaitingPreflight(input) {
      return this.activeFiles(input).filter((f2) => !UploadEntry.isPreflighted(input, f2));
    }
    constructor(inputEl, view, onComplete) {
      this.view = view;
      this.onComplete = onComplete;
      this._entries = Array.from(LiveUploader.filesAwaitingPreflight(inputEl) || []).map((file) => new UploadEntry(inputEl, file, view));
      this.numEntriesInProgress = this._entries.length;
    }
    entries() {
      return this._entries;
    }
    initAdapterUpload(resp, onError, liveSocket2) {
      this._entries = this._entries.map((entry) => {
        entry.zipPostFlight(resp);
        entry.onDone(() => {
          this.numEntriesInProgress--;
          if (this.numEntriesInProgress === 0) {
            this.onComplete();
          }
        });
        return entry;
      });
      let groupedEntries = this._entries.reduce((acc, entry) => {
        let { name, callback } = entry.uploader(liveSocket2.uploaders);
        acc[name] = acc[name] || { callback, entries: [] };
        acc[name].entries.push(entry);
        return acc;
      }, {});
      for (let name in groupedEntries) {
        let { callback, entries } = groupedEntries[name];
        callback(entries, onError, resp, liveSocket2);
      }
    }
  };
  var ARIA = {
    focusMain() {
      let target = document.querySelector("main h1, main, h1");
      if (target) {
        let origTabIndex = target.tabIndex;
        target.tabIndex = -1;
        target.focus();
        target.tabIndex = origTabIndex;
      }
    },
    anyOf(instance, classes) {
      return classes.find((name) => instance instanceof name);
    },
    isFocusable(el, interactiveOnly) {
      return el instanceof HTMLAnchorElement && el.rel !== "ignore" || el instanceof HTMLAreaElement && el.href !== void 0 || !el.disabled && this.anyOf(el, [HTMLInputElement, HTMLSelectElement, HTMLTextAreaElement, HTMLButtonElement]) || el instanceof HTMLIFrameElement || (el.tabIndex > 0 || !interactiveOnly && el.tabIndex === 0 && el.getAttribute("tabindex") !== null && el.getAttribute("aria-hidden") !== "true");
    },
    attemptFocus(el, interactiveOnly) {
      if (this.isFocusable(el, interactiveOnly)) {
        try {
          el.focus();
        } catch (e) {
        }
      }
      return !!document.activeElement && document.activeElement.isSameNode(el);
    },
    focusFirstInteractive(el) {
      let child = el.firstElementChild;
      while (child) {
        if (this.attemptFocus(child, true) || this.focusFirstInteractive(child, true)) {
          return true;
        }
        child = child.nextElementSibling;
      }
    },
    focusFirst(el) {
      let child = el.firstElementChild;
      while (child) {
        if (this.attemptFocus(child) || this.focusFirst(child)) {
          return true;
        }
        child = child.nextElementSibling;
      }
    },
    focusLast(el) {
      let child = el.lastElementChild;
      while (child) {
        if (this.attemptFocus(child) || this.focusLast(child)) {
          return true;
        }
        child = child.previousElementSibling;
      }
    }
  };
  var aria_default = ARIA;
  var Hooks = {
    LiveFileUpload: {
      activeRefs() {
        return this.el.getAttribute(PHX_ACTIVE_ENTRY_REFS);
      },
      preflightedRefs() {
        return this.el.getAttribute(PHX_PREFLIGHTED_REFS);
      },
      mounted() {
        this.preflightedWas = this.preflightedRefs();
      },
      updated() {
        let newPreflights = this.preflightedRefs();
        if (this.preflightedWas !== newPreflights) {
          this.preflightedWas = newPreflights;
          if (newPreflights === "") {
            this.__view.cancelSubmit(this.el.form);
          }
        }
        if (this.activeRefs() === "") {
          this.el.value = null;
        }
        this.el.dispatchEvent(new CustomEvent(PHX_LIVE_FILE_UPDATED));
      }
    },
    LiveImgPreview: {
      mounted() {
        this.ref = this.el.getAttribute("data-phx-entry-ref");
        this.inputEl = document.getElementById(this.el.getAttribute(PHX_UPLOAD_REF));
        LiveUploader.getEntryDataURL(this.inputEl, this.ref, (url) => {
          this.url = url;
          this.el.src = url;
        });
      },
      destroyed() {
        URL.revokeObjectURL(this.url);
      }
    },
    FocusWrap: {
      mounted() {
        this.focusStart = this.el.firstElementChild;
        this.focusEnd = this.el.lastElementChild;
        this.focusStart.addEventListener("focus", () => aria_default.focusLast(this.el));
        this.focusEnd.addEventListener("focus", () => aria_default.focusFirst(this.el));
        this.el.addEventListener("phx:show-end", () => this.el.focus());
        if (window.getComputedStyle(this.el).display !== "none") {
          aria_default.focusFirst(this.el);
        }
      }
    }
  };
  var scrollTop = () => document.documentElement.scrollTop || document.body.scrollTop;
  var winHeight = () => window.innerHeight || document.documentElement.clientHeight;
  var isAtViewportTop = (el) => {
    let rect = el.getBoundingClientRect();
    return rect.top >= 0 && rect.left >= 0 && rect.top <= winHeight();
  };
  var isAtViewportBottom = (el) => {
    let rect = el.getBoundingClientRect();
    return rect.right >= 0 && rect.left >= 0 && rect.bottom <= winHeight();
  };
  var isWithinViewport = (el) => {
    let rect = el.getBoundingClientRect();
    return rect.top >= 0 && rect.left >= 0 && rect.top <= winHeight();
  };
  Hooks.InfiniteScroll = {
    mounted() {
      let scrollBefore = scrollTop();
      let topOverran = false;
      let throttleInterval = 500;
      let pendingOp = null;
      let onTopOverrun = this.throttle(throttleInterval, (topEvent, firstChild) => {
        pendingOp = () => true;
        this.liveSocket.execJSHookPush(this.el, topEvent, { id: firstChild.id, _overran: true }, () => {
          pendingOp = null;
        });
      });
      let onFirstChildAtTop = this.throttle(throttleInterval, (topEvent, firstChild) => {
        pendingOp = () => firstChild.scrollIntoView({ block: "start" });
        this.liveSocket.execJSHookPush(this.el, topEvent, { id: firstChild.id }, () => {
          pendingOp = null;
          if (!isWithinViewport(firstChild)) {
            firstChild.scrollIntoView({ block: "start" });
          }
        });
      });
      let onLastChildAtBottom = this.throttle(throttleInterval, (bottomEvent, lastChild) => {
        pendingOp = () => lastChild.scrollIntoView({ block: "end" });
        this.liveSocket.execJSHookPush(this.el, bottomEvent, { id: lastChild.id }, () => {
          pendingOp = null;
          if (!isWithinViewport(lastChild)) {
            lastChild.scrollIntoView({ block: "end" });
          }
        });
      });
      this.onScroll = (e) => {
        let scrollNow = scrollTop();
        if (pendingOp) {
          scrollBefore = scrollNow;
          return pendingOp();
        }
        let rect = this.el.getBoundingClientRect();
        let topEvent = this.el.getAttribute(this.liveSocket.binding("viewport-top"));
        let bottomEvent = this.el.getAttribute(this.liveSocket.binding("viewport-bottom"));
        let lastChild = this.el.lastElementChild;
        let firstChild = this.el.firstElementChild;
        let isScrollingUp = scrollNow < scrollBefore;
        let isScrollingDown = scrollNow > scrollBefore;
        if (isScrollingUp && topEvent && !topOverran && rect.top >= 0) {
          topOverran = true;
          onTopOverrun(topEvent, firstChild);
        } else if (isScrollingDown && topOverran && rect.top <= 0) {
          topOverran = false;
        }
        if (topEvent && isScrollingUp && isAtViewportTop(firstChild)) {
          onFirstChildAtTop(topEvent, firstChild);
        } else if (bottomEvent && isScrollingDown && isAtViewportBottom(lastChild)) {
          onLastChildAtBottom(bottomEvent, lastChild);
        }
        scrollBefore = scrollNow;
      };
      window.addEventListener("scroll", this.onScroll);
    },
    destroyed() {
      window.removeEventListener("scroll", this.onScroll);
    },
    throttle(interval, callback) {
      let lastCallAt = 0;
      let timer;
      return (...args) => {
        let now = Date.now();
        let remainingTime = interval - (now - lastCallAt);
        if (remainingTime <= 0 || remainingTime > interval) {
          if (timer) {
            clearTimeout(timer);
            timer = null;
          }
          lastCallAt = now;
          callback(...args);
        } else if (!timer) {
          timer = setTimeout(() => {
            lastCallAt = Date.now();
            timer = null;
            callback(...args);
          }, remainingTime);
        }
      };
    }
  };
  var hooks_default = Hooks;
  var DOMPostMorphRestorer = class {
    constructor(containerBefore, containerAfter, updateType) {
      let idsBefore = /* @__PURE__ */ new Set();
      let idsAfter = new Set([...containerAfter.children].map((child) => child.id));
      let elementsToModify = [];
      Array.from(containerBefore.children).forEach((child) => {
        if (child.id) {
          idsBefore.add(child.id);
          if (idsAfter.has(child.id)) {
            let previousElementId = child.previousElementSibling && child.previousElementSibling.id;
            elementsToModify.push({ elementId: child.id, previousElementId });
          }
        }
      });
      this.containerId = containerAfter.id;
      this.updateType = updateType;
      this.elementsToModify = elementsToModify;
      this.elementIdsToAdd = [...idsAfter].filter((id) => !idsBefore.has(id));
    }
    perform() {
      let container = dom_default.byId(this.containerId);
      this.elementsToModify.forEach((elementToModify) => {
        if (elementToModify.previousElementId) {
          maybe(document.getElementById(elementToModify.previousElementId), (previousElem) => {
            maybe(document.getElementById(elementToModify.elementId), (elem) => {
              let isInRightPlace = elem.previousElementSibling && elem.previousElementSibling.id == previousElem.id;
              if (!isInRightPlace) {
                previousElem.insertAdjacentElement("afterend", elem);
              }
            });
          });
        } else {
          maybe(document.getElementById(elementToModify.elementId), (elem) => {
            let isInRightPlace = elem.previousElementSibling == null;
            if (!isInRightPlace) {
              container.insertAdjacentElement("afterbegin", elem);
            }
          });
        }
      });
      if (this.updateType == "prepend") {
        this.elementIdsToAdd.reverse().forEach((elemId) => {
          maybe(document.getElementById(elemId), (elem) => container.insertAdjacentElement("afterbegin", elem));
        });
      }
    }
  };
  var DOCUMENT_FRAGMENT_NODE = 11;
  function morphAttrs(fromNode, toNode) {
    var toNodeAttrs = toNode.attributes;
    var attr;
    var attrName;
    var attrNamespaceURI;
    var attrValue;
    var fromValue;
    if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE || fromNode.nodeType === DOCUMENT_FRAGMENT_NODE) {
      return;
    }
    for (var i = toNodeAttrs.length - 1; i >= 0; i--) {
      attr = toNodeAttrs[i];
      attrName = attr.name;
      attrNamespaceURI = attr.namespaceURI;
      attrValue = attr.value;
      if (attrNamespaceURI) {
        attrName = attr.localName || attrName;
        fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);
        if (fromValue !== attrValue) {
          if (attr.prefix === "xmlns") {
            attrName = attr.name;
          }
          fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);
        }
      } else {
        fromValue = fromNode.getAttribute(attrName);
        if (fromValue !== attrValue) {
          fromNode.setAttribute(attrName, attrValue);
        }
      }
    }
    var fromNodeAttrs = fromNode.attributes;
    for (var d = fromNodeAttrs.length - 1; d >= 0; d--) {
      attr = fromNodeAttrs[d];
      attrName = attr.name;
      attrNamespaceURI = attr.namespaceURI;
      if (attrNamespaceURI) {
        attrName = attr.localName || attrName;
        if (!toNode.hasAttributeNS(attrNamespaceURI, attrName)) {
          fromNode.removeAttributeNS(attrNamespaceURI, attrName);
        }
      } else {
        if (!toNode.hasAttribute(attrName)) {
          fromNode.removeAttribute(attrName);
        }
      }
    }
  }
  var range;
  var NS_XHTML = "http://www.w3.org/1999/xhtml";
  var doc = typeof document === "undefined" ? void 0 : document;
  var HAS_TEMPLATE_SUPPORT = !!doc && "content" in doc.createElement("template");
  var HAS_RANGE_SUPPORT = !!doc && doc.createRange && "createContextualFragment" in doc.createRange();
  function createFragmentFromTemplate(str) {
    var template = doc.createElement("template");
    template.innerHTML = str;
    return template.content.childNodes[0];
  }
  function createFragmentFromRange(str) {
    if (!range) {
      range = doc.createRange();
      range.selectNode(doc.body);
    }
    var fragment = range.createContextualFragment(str);
    return fragment.childNodes[0];
  }
  function createFragmentFromWrap(str) {
    var fragment = doc.createElement("body");
    fragment.innerHTML = str;
    return fragment.childNodes[0];
  }
  function toElement(str) {
    str = str.trim();
    if (HAS_TEMPLATE_SUPPORT) {
      return createFragmentFromTemplate(str);
    } else if (HAS_RANGE_SUPPORT) {
      return createFragmentFromRange(str);
    }
    return createFragmentFromWrap(str);
  }
  function compareNodeNames(fromEl, toEl) {
    var fromNodeName = fromEl.nodeName;
    var toNodeName = toEl.nodeName;
    var fromCodeStart, toCodeStart;
    if (fromNodeName === toNodeName) {
      return true;
    }
    fromCodeStart = fromNodeName.charCodeAt(0);
    toCodeStart = toNodeName.charCodeAt(0);
    if (fromCodeStart <= 90 && toCodeStart >= 97) {
      return fromNodeName === toNodeName.toUpperCase();
    } else if (toCodeStart <= 90 && fromCodeStart >= 97) {
      return toNodeName === fromNodeName.toUpperCase();
    } else {
      return false;
    }
  }
  function createElementNS(name, namespaceURI) {
    return !namespaceURI || namespaceURI === NS_XHTML ? doc.createElement(name) : doc.createElementNS(namespaceURI, name);
  }
  function moveChildren(fromEl, toEl) {
    var curChild = fromEl.firstChild;
    while (curChild) {
      var nextChild = curChild.nextSibling;
      toEl.appendChild(curChild);
      curChild = nextChild;
    }
    return toEl;
  }
  function syncBooleanAttrProp(fromEl, toEl, name) {
    if (fromEl[name] !== toEl[name]) {
      fromEl[name] = toEl[name];
      if (fromEl[name]) {
        fromEl.setAttribute(name, "");
      } else {
        fromEl.removeAttribute(name);
      }
    }
  }
  var specialElHandlers = {
    OPTION: function(fromEl, toEl) {
      var parentNode = fromEl.parentNode;
      if (parentNode) {
        var parentName = parentNode.nodeName.toUpperCase();
        if (parentName === "OPTGROUP") {
          parentNode = parentNode.parentNode;
          parentName = parentNode && parentNode.nodeName.toUpperCase();
        }
        if (parentName === "SELECT" && !parentNode.hasAttribute("multiple")) {
          if (fromEl.hasAttribute("selected") && !toEl.selected) {
            fromEl.setAttribute("selected", "selected");
            fromEl.removeAttribute("selected");
          }
          parentNode.selectedIndex = -1;
        }
      }
      syncBooleanAttrProp(fromEl, toEl, "selected");
    },
    INPUT: function(fromEl, toEl) {
      syncBooleanAttrProp(fromEl, toEl, "checked");
      syncBooleanAttrProp(fromEl, toEl, "disabled");
      if (fromEl.value !== toEl.value) {
        fromEl.value = toEl.value;
      }
      if (!toEl.hasAttribute("value")) {
        fromEl.removeAttribute("value");
      }
    },
    TEXTAREA: function(fromEl, toEl) {
      var newValue = toEl.value;
      if (fromEl.value !== newValue) {
        fromEl.value = newValue;
      }
      var firstChild = fromEl.firstChild;
      if (firstChild) {
        var oldValue = firstChild.nodeValue;
        if (oldValue == newValue || !newValue && oldValue == fromEl.placeholder) {
          return;
        }
        firstChild.nodeValue = newValue;
      }
    },
    SELECT: function(fromEl, toEl) {
      if (!toEl.hasAttribute("multiple")) {
        var selectedIndex = -1;
        var i = 0;
        var curChild = fromEl.firstChild;
        var optgroup;
        var nodeName;
        while (curChild) {
          nodeName = curChild.nodeName && curChild.nodeName.toUpperCase();
          if (nodeName === "OPTGROUP") {
            optgroup = curChild;
            curChild = optgroup.firstChild;
          } else {
            if (nodeName === "OPTION") {
              if (curChild.hasAttribute("selected")) {
                selectedIndex = i;
                break;
              }
              i++;
            }
            curChild = curChild.nextSibling;
            if (!curChild && optgroup) {
              curChild = optgroup.nextSibling;
              optgroup = null;
            }
          }
        }
        fromEl.selectedIndex = selectedIndex;
      }
    }
  };
  var ELEMENT_NODE = 1;
  var DOCUMENT_FRAGMENT_NODE$1 = 11;
  var TEXT_NODE = 3;
  var COMMENT_NODE = 8;
  function noop() {
  }
  function defaultGetNodeKey(node) {
    if (node) {
      return node.getAttribute && node.getAttribute("id") || node.id;
    }
  }
  function morphdomFactory(morphAttrs2) {
    return function morphdom2(fromNode, toNode, options) {
      if (!options) {
        options = {};
      }
      if (typeof toNode === "string") {
        if (fromNode.nodeName === "#document" || fromNode.nodeName === "HTML" || fromNode.nodeName === "BODY") {
          var toNodeHtml = toNode;
          toNode = doc.createElement("html");
          toNode.innerHTML = toNodeHtml;
        } else {
          toNode = toElement(toNode);
        }
      } else if (toNode.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
        toNode = toNode.firstElementChild;
      }
      var getNodeKey = options.getNodeKey || defaultGetNodeKey;
      var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;
      var onNodeAdded = options.onNodeAdded || noop;
      var onBeforeElUpdated = options.onBeforeElUpdated || noop;
      var onElUpdated = options.onElUpdated || noop;
      var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;
      var onNodeDiscarded = options.onNodeDiscarded || noop;
      var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || noop;
      var skipFromChildren = options.skipFromChildren || noop;
      var addChild = options.addChild || function(parent, child) {
        return parent.appendChild(child);
      };
      var childrenOnly = options.childrenOnly === true;
      var fromNodesLookup = /* @__PURE__ */ Object.create(null);
      var keyedRemovalList = [];
      function addKeyedRemoval(key) {
        keyedRemovalList.push(key);
      }
      function walkDiscardedChildNodes(node, skipKeyedNodes) {
        if (node.nodeType === ELEMENT_NODE) {
          var curChild = node.firstChild;
          while (curChild) {
            var key = void 0;
            if (skipKeyedNodes && (key = getNodeKey(curChild))) {
              addKeyedRemoval(key);
            } else {
              onNodeDiscarded(curChild);
              if (curChild.firstChild) {
                walkDiscardedChildNodes(curChild, skipKeyedNodes);
              }
            }
            curChild = curChild.nextSibling;
          }
        }
      }
      function removeNode(node, parentNode, skipKeyedNodes) {
        if (onBeforeNodeDiscarded(node) === false) {
          return;
        }
        if (parentNode) {
          parentNode.removeChild(node);
        }
        onNodeDiscarded(node);
        walkDiscardedChildNodes(node, skipKeyedNodes);
      }
      function indexTree(node) {
        if (node.nodeType === ELEMENT_NODE || node.nodeType === DOCUMENT_FRAGMENT_NODE$1) {
          var curChild = node.firstChild;
          while (curChild) {
            var key = getNodeKey(curChild);
            if (key) {
              fromNodesLookup[key] = curChild;
            }
            indexTree(curChild);
            curChild = curChild.nextSibling;
          }
        }
      }
      indexTree(fromNode);
      function handleNodeAdded(el) {
        onNodeAdded(el);
        var curChild = el.firstChild;
        while (curChild) {
          var nextSibling = curChild.nextSibling;
          var key = getNodeKey(curChild);
          if (key) {
            var unmatchedFromEl = fromNodesLookup[key];
            if (unmatchedFromEl && compareNodeNames(curChild, unmatchedFromEl)) {
              curChild.parentNode.replaceChild(unmatchedFromEl, curChild);
              morphEl(unmatchedFromEl, curChild);
            } else {
              handleNodeAdded(curChild);
            }
          } else {
            handleNodeAdded(curChild);
          }
          curChild = nextSibling;
        }
      }
      function cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey) {
        while (curFromNodeChild) {
          var fromNextSibling = curFromNodeChild.nextSibling;
          if (curFromNodeKey = getNodeKey(curFromNodeChild)) {
            addKeyedRemoval(curFromNodeKey);
          } else {
            removeNode(curFromNodeChild, fromEl, true);
          }
          curFromNodeChild = fromNextSibling;
        }
      }
      function morphEl(fromEl, toEl, childrenOnly2) {
        var toElKey = getNodeKey(toEl);
        if (toElKey) {
          delete fromNodesLookup[toElKey];
        }
        if (!childrenOnly2) {
          if (onBeforeElUpdated(fromEl, toEl) === false) {
            return;
          }
          morphAttrs2(fromEl, toEl);
          onElUpdated(fromEl);
          if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {
            return;
          }
        }
        if (fromEl.nodeName !== "TEXTAREA") {
          morphChildren(fromEl, toEl);
        } else {
          specialElHandlers.TEXTAREA(fromEl, toEl);
        }
      }
      function morphChildren(fromEl, toEl) {
        var skipFrom = skipFromChildren(fromEl);
        var curToNodeChild = toEl.firstChild;
        var curFromNodeChild = fromEl.firstChild;
        var curToNodeKey;
        var curFromNodeKey;
        var fromNextSibling;
        var toNextSibling;
        var matchingFromEl;
        outer:
          while (curToNodeChild) {
            toNextSibling = curToNodeChild.nextSibling;
            curToNodeKey = getNodeKey(curToNodeChild);
            while (!skipFrom && curFromNodeChild) {
              fromNextSibling = curFromNodeChild.nextSibling;
              if (curToNodeChild.isSameNode && curToNodeChild.isSameNode(curFromNodeChild)) {
                curToNodeChild = toNextSibling;
                curFromNodeChild = fromNextSibling;
                continue outer;
              }
              curFromNodeKey = getNodeKey(curFromNodeChild);
              var curFromNodeType = curFromNodeChild.nodeType;
              var isCompatible = void 0;
              if (curFromNodeType === curToNodeChild.nodeType) {
                if (curFromNodeType === ELEMENT_NODE) {
                  if (curToNodeKey) {
                    if (curToNodeKey !== curFromNodeKey) {
                      if (matchingFromEl = fromNodesLookup[curToNodeKey]) {
                        if (fromNextSibling === matchingFromEl) {
                          isCompatible = false;
                        } else {
                          fromEl.insertBefore(matchingFromEl, curFromNodeChild);
                          if (curFromNodeKey) {
                            addKeyedRemoval(curFromNodeKey);
                          } else {
                            removeNode(curFromNodeChild, fromEl, true);
                          }
                          curFromNodeChild = matchingFromEl;
                        }
                      } else {
                        isCompatible = false;
                      }
                    }
                  } else if (curFromNodeKey) {
                    isCompatible = false;
                  }
                  isCompatible = isCompatible !== false && compareNodeNames(curFromNodeChild, curToNodeChild);
                  if (isCompatible) {
                    morphEl(curFromNodeChild, curToNodeChild);
                  }
                } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {
                  isCompatible = true;
                  if (curFromNodeChild.nodeValue !== curToNodeChild.nodeValue) {
                    curFromNodeChild.nodeValue = curToNodeChild.nodeValue;
                  }
                }
              }
              if (isCompatible) {
                curToNodeChild = toNextSibling;
                curFromNodeChild = fromNextSibling;
                continue outer;
              }
              if (curFromNodeKey) {
                addKeyedRemoval(curFromNodeKey);
              } else {
                removeNode(curFromNodeChild, fromEl, true);
              }
              curFromNodeChild = fromNextSibling;
            }
            if (curToNodeKey && (matchingFromEl = fromNodesLookup[curToNodeKey]) && compareNodeNames(matchingFromEl, curToNodeChild)) {
              if (!skipFrom) {
                addChild(fromEl, matchingFromEl);
              }
              morphEl(matchingFromEl, curToNodeChild);
            } else {
              var onBeforeNodeAddedResult = onBeforeNodeAdded(curToNodeChild);
              if (onBeforeNodeAddedResult !== false) {
                if (onBeforeNodeAddedResult) {
                  curToNodeChild = onBeforeNodeAddedResult;
                }
                if (curToNodeChild.actualize) {
                  curToNodeChild = curToNodeChild.actualize(fromEl.ownerDocument || doc);
                }
                addChild(fromEl, curToNodeChild);
                handleNodeAdded(curToNodeChild);
              }
            }
            curToNodeChild = toNextSibling;
            curFromNodeChild = fromNextSibling;
          }
        cleanupFromEl(fromEl, curFromNodeChild, curFromNodeKey);
        var specialElHandler = specialElHandlers[fromEl.nodeName];
        if (specialElHandler) {
          specialElHandler(fromEl, toEl);
        }
      }
      var morphedNode = fromNode;
      var morphedNodeType = morphedNode.nodeType;
      var toNodeType = toNode.nodeType;
      if (!childrenOnly) {
        if (morphedNodeType === ELEMENT_NODE) {
          if (toNodeType === ELEMENT_NODE) {
            if (!compareNodeNames(fromNode, toNode)) {
              onNodeDiscarded(fromNode);
              morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));
            }
          } else {
            morphedNode = toNode;
          }
        } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) {
          if (toNodeType === morphedNodeType) {
            if (morphedNode.nodeValue !== toNode.nodeValue) {
              morphedNode.nodeValue = toNode.nodeValue;
            }
            return morphedNode;
          } else {
            morphedNode = toNode;
          }
        }
      }
      if (morphedNode === toNode) {
        onNodeDiscarded(fromNode);
      } else {
        if (toNode.isSameNode && toNode.isSameNode(morphedNode)) {
          return;
        }
        morphEl(morphedNode, toNode, childrenOnly);
        if (keyedRemovalList) {
          for (var i = 0, len = keyedRemovalList.length; i < len; i++) {
            var elToRemove = fromNodesLookup[keyedRemovalList[i]];
            if (elToRemove) {
              removeNode(elToRemove, elToRemove.parentNode, false);
            }
          }
        }
      }
      if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {
        if (morphedNode.actualize) {
          morphedNode = morphedNode.actualize(fromNode.ownerDocument || doc);
        }
        fromNode.parentNode.replaceChild(morphedNode, fromNode);
      }
      return morphedNode;
    };
  }
  var morphdom = morphdomFactory(morphAttrs);
  var morphdom_esm_default = morphdom;
  var DOMPatch = class {
    static patchEl(fromEl, toEl, activeElement) {
      morphdom_esm_default(fromEl, toEl, {
        childrenOnly: false,
        onBeforeElUpdated: (fromEl2, toEl2) => {
          if (activeElement && activeElement.isSameNode(fromEl2) && dom_default.isFormInput(fromEl2)) {
            dom_default.mergeFocusedInput(fromEl2, toEl2);
            return false;
          }
        }
      });
    }
    constructor(view, container, id, html, streams, targetCID) {
      this.view = view;
      this.liveSocket = view.liveSocket;
      this.container = container;
      this.id = id;
      this.rootID = view.root.id;
      this.html = html;
      this.streams = streams;
      this.streamInserts = {};
      this.targetCID = targetCID;
      this.cidPatch = isCid(this.targetCID);
      this.pendingRemoves = [];
      this.phxRemove = this.liveSocket.binding("remove");
      this.callbacks = {
        beforeadded: [],
        beforeupdated: [],
        beforephxChildAdded: [],
        afteradded: [],
        afterupdated: [],
        afterdiscarded: [],
        afterphxChildAdded: [],
        aftertransitionsDiscarded: []
      };
    }
    before(kind, callback) {
      this.callbacks[`before${kind}`].push(callback);
    }
    after(kind, callback) {
      this.callbacks[`after${kind}`].push(callback);
    }
    trackBefore(kind, ...args) {
      this.callbacks[`before${kind}`].forEach((callback) => callback(...args));
    }
    trackAfter(kind, ...args) {
      this.callbacks[`after${kind}`].forEach((callback) => callback(...args));
    }
    markPrunableContentForRemoval() {
      let phxUpdate = this.liveSocket.binding(PHX_UPDATE);
      dom_default.all(this.container, `[${phxUpdate}=${PHX_STREAM}]`, (el) => el.innerHTML = "");
      dom_default.all(this.container, `[${phxUpdate}=append] > *, [${phxUpdate}=prepend] > *`, (el) => {
        el.setAttribute(PHX_PRUNE, "");
      });
    }
    perform() {
      let { view, liveSocket: liveSocket2, container, html } = this;
      let targetContainer = this.isCIDPatch() ? this.targetCIDContainer(html) : container;
      if (this.isCIDPatch() && !targetContainer) {
        return;
      }
      let focused = liveSocket2.getActiveElement();
      let { selectionStart, selectionEnd } = focused && dom_default.hasSelectionRange(focused) ? focused : {};
      let phxUpdate = liveSocket2.binding(PHX_UPDATE);
      let phxFeedbackFor = liveSocket2.binding(PHX_FEEDBACK_FOR);
      let disableWith = liveSocket2.binding(PHX_DISABLE_WITH);
      let phxViewportTop = liveSocket2.binding(PHX_VIEWPORT_TOP);
      let phxViewportBottom = liveSocket2.binding(PHX_VIEWPORT_BOTTOM);
      let phxTriggerExternal = liveSocket2.binding(PHX_TRIGGER_ACTION);
      let added = [];
      let trackedInputs = [];
      let updates = [];
      let appendPrependUpdates = [];
      let externalFormTriggered = null;
      let diffHTML = liveSocket2.time("premorph container prep", () => {
        return this.buildDiffHTML(container, html, phxUpdate, targetContainer);
      });
      this.trackBefore("added", container);
      this.trackBefore("updated", container, container);
      liveSocket2.time("morphdom", () => {
        this.streams.forEach(([ref, inserts, deleteIds, reset]) => {
          Object.entries(inserts).forEach(([key, [streamAt, limit]]) => {
            this.streamInserts[key] = { ref, streamAt, limit };
          });
          if (reset !== void 0) {
            dom_default.all(container, `[${PHX_STREAM_REF}="${ref}"]`, (child) => {
              this.removeStreamChildElement(child);
            });
          }
          deleteIds.forEach((id) => {
            let child = container.querySelector(`[id="${id}"]`);
            if (child) {
              this.removeStreamChildElement(child);
            }
          });
        });
        morphdom_esm_default(targetContainer, diffHTML, {
          childrenOnly: targetContainer.getAttribute(PHX_COMPONENT) === null,
          getNodeKey: (node) => {
            return dom_default.isPhxDestroyed(node) ? null : node.id;
          },
          skipFromChildren: (from) => {
            return from.getAttribute(phxUpdate) === PHX_STREAM;
          },
          addChild: (parent, child) => {
            let { ref, streamAt, limit } = this.getStreamInsert(child);
            if (ref === void 0) {
              return parent.appendChild(child);
            }
            dom_default.putSticky(child, PHX_STREAM_REF, (el) => el.setAttribute(PHX_STREAM_REF, ref));
            if (streamAt === 0) {
              parent.insertAdjacentElement("afterbegin", child);
            } else if (streamAt === -1) {
              parent.appendChild(child);
            } else if (streamAt > 0) {
              let sibling = Array.from(parent.children)[streamAt];
              parent.insertBefore(child, sibling);
            }
            let children = limit !== null && Array.from(parent.children);
            let childrenToRemove = [];
            if (limit && limit < 0 && children.length > limit * -1) {
              childrenToRemove = children.slice(0, children.length + limit);
            } else if (limit && limit >= 0 && children.length > limit) {
              childrenToRemove = children.slice(limit);
            }
            childrenToRemove.forEach((removeChild) => {
              if (!this.streamInserts[removeChild.id]) {
                this.removeStreamChildElement(removeChild);
              }
            });
          },
          onBeforeNodeAdded: (el) => {
            dom_default.maybeAddPrivateHooks(el, phxViewportTop, phxViewportBottom);
            this.trackBefore("added", el);
            return el;
          },
          onNodeAdded: (el) => {
            if (el.getAttribute) {
              this.maybeReOrderStream(el);
            }
            if (el instanceof HTMLImageElement && el.srcset) {
              el.srcset = el.srcset;
            } else if (el instanceof HTMLVideoElement && el.autoplay) {
              el.play();
            }
            if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
              externalFormTriggered = el;
            }
            if (el.getAttribute && el.getAttribute("name") && dom_default.isFormInput(el)) {
              trackedInputs.push(el);
            }
            if (dom_default.isPhxChild(el) && view.ownsElement(el) || dom_default.isPhxSticky(el) && view.ownsElement(el.parentNode)) {
              this.trackAfter("phxChildAdded", el);
            }
            added.push(el);
          },
          onNodeDiscarded: (el) => this.onNodeDiscarded(el),
          onBeforeNodeDiscarded: (el) => {
            if (el.getAttribute && el.getAttribute(PHX_PRUNE) !== null) {
              return true;
            }
            if (el.parentElement !== null && el.id && dom_default.isPhxUpdate(el.parentElement, phxUpdate, [PHX_STREAM, "append", "prepend"])) {
              return false;
            }
            if (this.maybePendingRemove(el)) {
              return false;
            }
            if (this.skipCIDSibling(el)) {
              return false;
            }
            return true;
          },
          onElUpdated: (el) => {
            if (dom_default.isNowTriggerFormExternal(el, phxTriggerExternal)) {
              externalFormTriggered = el;
            }
            updates.push(el);
            this.maybeReOrderStream(el);
          },
          onBeforeElUpdated: (fromEl, toEl) => {
            dom_default.maybeAddPrivateHooks(toEl, phxViewportTop, phxViewportBottom);
            dom_default.cleanChildNodes(toEl, phxUpdate);
            if (this.skipCIDSibling(toEl)) {
              return false;
            }
            if (dom_default.isPhxSticky(fromEl)) {
              return false;
            }
            if (dom_default.isIgnored(fromEl, phxUpdate) || fromEl.form && fromEl.form.isSameNode(externalFormTriggered)) {
              this.trackBefore("updated", fromEl, toEl);
              dom_default.mergeAttrs(fromEl, toEl, { isIgnored: true });
              updates.push(fromEl);
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            if (fromEl.type === "number" && (fromEl.validity && fromEl.validity.badInput)) {
              return false;
            }
            if (!dom_default.syncPendingRef(fromEl, toEl, disableWith)) {
              if (dom_default.isUploadInput(fromEl)) {
                this.trackBefore("updated", fromEl, toEl);
                updates.push(fromEl);
              }
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            if (dom_default.isPhxChild(toEl)) {
              let prevSession = fromEl.getAttribute(PHX_SESSION);
              dom_default.mergeAttrs(fromEl, toEl, { exclude: [PHX_STATIC] });
              if (prevSession !== "") {
                fromEl.setAttribute(PHX_SESSION, prevSession);
              }
              fromEl.setAttribute(PHX_ROOT_ID, this.rootID);
              dom_default.applyStickyOperations(fromEl);
              return false;
            }
            dom_default.copyPrivates(toEl, fromEl);
            let isFocusedFormEl = focused && fromEl.isSameNode(focused) && dom_default.isFormInput(fromEl);
            if (isFocusedFormEl && fromEl.type !== "hidden") {
              this.trackBefore("updated", fromEl, toEl);
              dom_default.mergeFocusedInput(fromEl, toEl);
              dom_default.syncAttrsToProps(fromEl);
              updates.push(fromEl);
              dom_default.applyStickyOperations(fromEl);
              trackedInputs.push(fromEl);
              return false;
            } else {
              if (dom_default.isPhxUpdate(toEl, phxUpdate, ["append", "prepend"])) {
                appendPrependUpdates.push(new DOMPostMorphRestorer(fromEl, toEl, toEl.getAttribute(phxUpdate)));
              }
              dom_default.syncAttrsToProps(toEl);
              dom_default.applyStickyOperations(toEl);
              if (toEl.getAttribute("name") && dom_default.isFormInput(toEl)) {
                trackedInputs.push(toEl);
              }
              this.trackBefore("updated", fromEl, toEl);
              return true;
            }
          }
        });
      });
      if (liveSocket2.isDebugEnabled()) {
        detectDuplicateIds();
      }
      if (appendPrependUpdates.length > 0) {
        liveSocket2.time("post-morph append/prepend restoration", () => {
          appendPrependUpdates.forEach((update) => update.perform());
        });
      }
      trackedInputs.forEach((input) => {
        dom_default.maybeHideFeedback(targetContainer, input, phxFeedbackFor);
      });
      liveSocket2.silenceEvents(() => dom_default.restoreFocus(focused, selectionStart, selectionEnd));
      dom_default.dispatchEvent(document, "phx:update");
      added.forEach((el) => this.trackAfter("added", el));
      updates.forEach((el) => this.trackAfter("updated", el));
      this.transitionPendingRemoves();
      if (externalFormTriggered) {
        liveSocket2.unload();
        externalFormTriggered.submit();
      }
      return true;
    }
    onNodeDiscarded(el) {
      if (dom_default.isPhxChild(el) || dom_default.isPhxSticky(el)) {
        this.liveSocket.destroyViewByEl(el);
      }
      this.trackAfter("discarded", el);
    }
    maybePendingRemove(node) {
      if (node.getAttribute && node.getAttribute(this.phxRemove) !== null) {
        this.pendingRemoves.push(node);
        return true;
      } else {
        return false;
      }
    }
    removeStreamChildElement(child) {
      if (!this.maybePendingRemove(child)) {
        child.remove();
        this.onNodeDiscarded(child);
      }
    }
    getStreamInsert(el) {
      let insert = el.id ? this.streamInserts[el.id] : {};
      return insert || {};
    }
    maybeReOrderStream(el) {
      let { ref, streamAt, limit } = this.getStreamInsert(el);
      if (streamAt === void 0) {
        return;
      }
      dom_default.putSticky(el, PHX_STREAM_REF, (el2) => el2.setAttribute(PHX_STREAM_REF, ref));
      if (streamAt === 0) {
        el.parentElement.insertBefore(el, el.parentElement.firstElementChild);
      } else if (streamAt > 0) {
        let children = Array.from(el.parentElement.children);
        let oldIndex = children.indexOf(el);
        if (streamAt >= children.length - 1) {
          el.parentElement.appendChild(el);
        } else {
          let sibling = children[streamAt];
          if (oldIndex > streamAt) {
            el.parentElement.insertBefore(el, sibling);
          } else {
            el.parentElement.insertBefore(el, sibling.nextElementSibling);
          }
        }
      }
    }
    transitionPendingRemoves() {
      let { pendingRemoves, liveSocket: liveSocket2 } = this;
      if (pendingRemoves.length > 0) {
        liveSocket2.transitionRemoves(pendingRemoves);
        liveSocket2.requestDOMUpdate(() => {
          pendingRemoves.forEach((el) => {
            let child = dom_default.firstPhxChild(el);
            if (child) {
              liveSocket2.destroyViewByEl(child);
            }
            el.remove();
          });
          this.trackAfter("transitionsDiscarded", pendingRemoves);
        });
      }
    }
    isCIDPatch() {
      return this.cidPatch;
    }
    skipCIDSibling(el) {
      return el.nodeType === Node.ELEMENT_NODE && el.getAttribute(PHX_SKIP) !== null;
    }
    targetCIDContainer(html) {
      if (!this.isCIDPatch()) {
        return;
      }
      let [first, ...rest] = dom_default.findComponentNodeList(this.container, this.targetCID);
      if (rest.length === 0 && dom_default.childNodeLength(html) === 1) {
        return first;
      } else {
        return first && first.parentNode;
      }
    }
    buildDiffHTML(container, html, phxUpdate, targetContainer) {
      let isCIDPatch = this.isCIDPatch();
      let isCIDWithSingleRoot = isCIDPatch && targetContainer.getAttribute(PHX_COMPONENT) === this.targetCID.toString();
      if (!isCIDPatch || isCIDWithSingleRoot) {
        return html;
      } else {
        let diffContainer = null;
        let template = document.createElement("template");
        diffContainer = dom_default.cloneNode(targetContainer);
        let [firstComponent, ...rest] = dom_default.findComponentNodeList(diffContainer, this.targetCID);
        template.innerHTML = html;
        rest.forEach((el) => el.remove());
        Array.from(diffContainer.childNodes).forEach((child) => {
          if (child.id && child.nodeType === Node.ELEMENT_NODE && child.getAttribute(PHX_COMPONENT) !== this.targetCID.toString()) {
            child.setAttribute(PHX_SKIP, "");
            child.innerHTML = "";
          }
        });
        Array.from(template.content.childNodes).forEach((el) => diffContainer.insertBefore(el, firstComponent));
        firstComponent.remove();
        return diffContainer.outerHTML;
      }
    }
    indexOf(parent, child) {
      return Array.from(parent.children).indexOf(child);
    }
  };
  var Rendered = class {
    static extract(diff) {
      let { [REPLY]: reply, [EVENTS]: events, [TITLE]: title } = diff;
      delete diff[REPLY];
      delete diff[EVENTS];
      delete diff[TITLE];
      return { diff, title, reply: reply || null, events: events || [] };
    }
    constructor(viewId, rendered) {
      this.viewId = viewId;
      this.rendered = {};
      this.mergeDiff(rendered);
    }
    parentViewId() {
      return this.viewId;
    }
    toString(onlyCids) {
      let [str, streams] = this.recursiveToString(this.rendered, this.rendered[COMPONENTS], onlyCids);
      return [str, streams];
    }
    recursiveToString(rendered, components = rendered[COMPONENTS], onlyCids) {
      onlyCids = onlyCids ? new Set(onlyCids) : null;
      let output = { buffer: "", components, onlyCids, streams: /* @__PURE__ */ new Set() };
      this.toOutputBuffer(rendered, null, output);
      return [output.buffer, output.streams];
    }
    componentCIDs(diff) {
      return Object.keys(diff[COMPONENTS] || {}).map((i) => parseInt(i));
    }
    isComponentOnlyDiff(diff) {
      if (!diff[COMPONENTS]) {
        return false;
      }
      return Object.keys(diff).length === 1;
    }
    getComponent(diff, cid) {
      return diff[COMPONENTS][cid];
    }
    mergeDiff(diff) {
      let newc = diff[COMPONENTS];
      let cache = {};
      delete diff[COMPONENTS];
      this.rendered = this.mutableMerge(this.rendered, diff);
      this.rendered[COMPONENTS] = this.rendered[COMPONENTS] || {};
      if (newc) {
        let oldc = this.rendered[COMPONENTS];
        for (let cid in newc) {
          newc[cid] = this.cachedFindComponent(cid, newc[cid], oldc, newc, cache);
        }
        for (let cid in newc) {
          oldc[cid] = newc[cid];
        }
        diff[COMPONENTS] = newc;
      }
    }
    cachedFindComponent(cid, cdiff, oldc, newc, cache) {
      if (cache[cid]) {
        return cache[cid];
      } else {
        let ndiff, stat, scid = cdiff[STATIC];
        if (isCid(scid)) {
          let tdiff;
          if (scid > 0) {
            tdiff = this.cachedFindComponent(scid, newc[scid], oldc, newc, cache);
          } else {
            tdiff = oldc[-scid];
          }
          stat = tdiff[STATIC];
          ndiff = this.cloneMerge(tdiff, cdiff);
          ndiff[STATIC] = stat;
        } else {
          ndiff = cdiff[STATIC] !== void 0 ? cdiff : this.cloneMerge(oldc[cid] || {}, cdiff);
        }
        cache[cid] = ndiff;
        return ndiff;
      }
    }
    mutableMerge(target, source) {
      if (source[STATIC] !== void 0) {
        return source;
      } else {
        this.doMutableMerge(target, source);
        return target;
      }
    }
    doMutableMerge(target, source) {
      for (let key in source) {
        let val = source[key];
        let targetVal = target[key];
        let isObjVal = isObject(val);
        if (isObjVal && val[STATIC] === void 0 && isObject(targetVal)) {
          this.doMutableMerge(targetVal, val);
        } else {
          target[key] = val;
        }
      }
    }
    cloneMerge(target, source) {
      let merged = __spreadValues(__spreadValues({}, target), source);
      for (let key in merged) {
        let val = source[key];
        let targetVal = target[key];
        if (isObject(val) && val[STATIC] === void 0 && isObject(targetVal)) {
          merged[key] = this.cloneMerge(targetVal, val);
        }
      }
      return merged;
    }
    componentToString(cid) {
      let [str, streams] = this.recursiveCIDToString(this.rendered[COMPONENTS], cid);
      return [str, streams];
    }
    pruneCIDs(cids) {
      cids.forEach((cid) => delete this.rendered[COMPONENTS][cid]);
    }
    get() {
      return this.rendered;
    }
    isNewFingerprint(diff = {}) {
      return !!diff[STATIC];
    }
    templateStatic(part, templates) {
      if (typeof part === "number") {
        return templates[part];
      } else {
        return part;
      }
    }
    toOutputBuffer(rendered, templates, output) {
      if (rendered[DYNAMICS]) {
        return this.comprehensionToBuffer(rendered, templates, output);
      }
      let { [STATIC]: statics } = rendered;
      statics = this.templateStatic(statics, templates);
      output.buffer += statics[0];
      for (let i = 1; i < statics.length; i++) {
        this.dynamicToBuffer(rendered[i - 1], templates, output);
        output.buffer += statics[i];
      }
    }
    comprehensionToBuffer(rendered, templates, output) {
      let { [DYNAMICS]: dynamics, [STATIC]: statics, [STREAM]: stream } = rendered;
      let [_ref, _inserts, deleteIds, reset] = stream || [null, {}, [], null];
      statics = this.templateStatic(statics, templates);
      let compTemplates = templates || rendered[TEMPLATES];
      for (let d = 0; d < dynamics.length; d++) {
        let dynamic = dynamics[d];
        output.buffer += statics[0];
        for (let i = 1; i < statics.length; i++) {
          this.dynamicToBuffer(dynamic[i - 1], compTemplates, output);
          output.buffer += statics[i];
        }
      }
      if (stream !== void 0 && (rendered[DYNAMICS].length > 0 || deleteIds.length > 0 || reset)) {
        delete rendered[STREAM];
        output.streams.add(stream);
      }
    }
    dynamicToBuffer(rendered, templates, output) {
      if (typeof rendered === "number") {
        let [str, streams] = this.recursiveCIDToString(output.components, rendered, output.onlyCids);
        output.buffer += str;
        output.streams = /* @__PURE__ */ new Set([...output.streams, ...streams]);
      } else if (isObject(rendered)) {
        this.toOutputBuffer(rendered, templates, output);
      } else {
        output.buffer += rendered;
      }
    }
    recursiveCIDToString(components, cid, onlyCids) {
      let component = components[cid] || logError(`no component for CID ${cid}`, components);
      let template = document.createElement("template");
      let [html, streams] = this.recursiveToString(component, components, onlyCids);
      template.innerHTML = html;
      let container = template.content;
      let skip = onlyCids && !onlyCids.has(cid);
      let [hasChildNodes, hasChildComponents] = Array.from(container.childNodes).reduce(([hasNodes, hasComponents], child, i) => {
        if (child.nodeType === Node.ELEMENT_NODE) {
          if (child.getAttribute(PHX_COMPONENT)) {
            return [hasNodes, true];
          }
          child.setAttribute(PHX_COMPONENT, cid);
          if (!child.id) {
            child.id = `${this.parentViewId()}-${cid}-${i}`;
          }
          if (skip) {
            child.setAttribute(PHX_SKIP, "");
            child.innerHTML = "";
          }
          return [true, hasComponents];
        } else {
          if (child.nodeValue.trim() !== "") {
            logError(`only HTML element tags are allowed at the root of components.

got: "${child.nodeValue.trim()}"

within:
`, template.innerHTML.trim());
            child.replaceWith(this.createSpan(child.nodeValue, cid));
            return [true, hasComponents];
          } else {
            child.remove();
            return [hasNodes, hasComponents];
          }
        }
      }, [false, false]);
      if (!hasChildNodes && !hasChildComponents) {
        logError("expected at least one HTML element tag inside a component, but the component is empty:\n", template.innerHTML.trim());
        return [this.createSpan("", cid).outerHTML, streams];
      } else if (!hasChildNodes && hasChildComponents) {
        logError("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.", template.innerHTML.trim());
        return [template.innerHTML, streams];
      } else {
        return [template.innerHTML, streams];
      }
    }
    createSpan(text, cid) {
      let span = document.createElement("span");
      span.innerText = text;
      span.setAttribute(PHX_COMPONENT, cid);
      return span;
    }
  };
  var viewHookID = 1;
  var ViewHook = class {
    static makeID() {
      return viewHookID++;
    }
    static elementID(el) {
      return el.phxHookId;
    }
    constructor(view, el, callbacks) {
      this.__view = view;
      this.liveSocket = view.liveSocket;
      this.__callbacks = callbacks;
      this.__listeners = /* @__PURE__ */ new Set();
      this.__isDisconnected = false;
      this.el = el;
      this.el.phxHookId = this.constructor.makeID();
      for (let key in this.__callbacks) {
        this[key] = this.__callbacks[key];
      }
    }
    __mounted() {
      this.mounted && this.mounted();
    }
    __updated() {
      this.updated && this.updated();
    }
    __beforeUpdate() {
      this.beforeUpdate && this.beforeUpdate();
    }
    __destroyed() {
      this.destroyed && this.destroyed();
    }
    __reconnected() {
      if (this.__isDisconnected) {
        this.__isDisconnected = false;
        this.reconnected && this.reconnected();
      }
    }
    __disconnected() {
      this.__isDisconnected = true;
      this.disconnected && this.disconnected();
    }
    pushEvent(event, payload = {}, onReply = function() {
    }) {
      return this.__view.pushHookEvent(this.el, null, event, payload, onReply);
    }
    pushEventTo(phxTarget, event, payload = {}, onReply = function() {
    }) {
      return this.__view.withinTargets(phxTarget, (view, targetCtx) => {
        return view.pushHookEvent(this.el, targetCtx, event, payload, onReply);
      });
    }
    handleEvent(event, callback) {
      let callbackRef = (customEvent, bypass) => bypass ? event : callback(customEvent.detail);
      window.addEventListener(`phx:${event}`, callbackRef);
      this.__listeners.add(callbackRef);
      return callbackRef;
    }
    removeHandleEvent(callbackRef) {
      let event = callbackRef(null, true);
      window.removeEventListener(`phx:${event}`, callbackRef);
      this.__listeners.delete(callbackRef);
    }
    upload(name, files) {
      return this.__view.dispatchUploads(name, files);
    }
    uploadTo(phxTarget, name, files) {
      return this.__view.withinTargets(phxTarget, (view) => view.dispatchUploads(name, files));
    }
    __cleanup__() {
      this.__listeners.forEach((callbackRef) => this.removeHandleEvent(callbackRef));
    }
  };
  var focusStack = null;
  var JS = {
    exec(eventType, phxEvent, view, sourceEl, defaults) {
      let [defaultKind, defaultArgs] = defaults || [null, { callback: defaults && defaults.callback }];
      let commands = phxEvent.charAt(0) === "[" ? JSON.parse(phxEvent) : [[defaultKind, defaultArgs]];
      commands.forEach(([kind, args]) => {
        if (kind === defaultKind && defaultArgs.data) {
          args.data = Object.assign(args.data || {}, defaultArgs.data);
          args.callback = args.callback || defaultArgs.callback;
        }
        this.filterToEls(sourceEl, args).forEach((el) => {
          this[`exec_${kind}`](eventType, phxEvent, view, sourceEl, el, args);
        });
      });
    },
    isVisible(el) {
      return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length > 0);
    },
    exec_exec(eventType, phxEvent, view, sourceEl, el, [attr, to]) {
      let nodes = to ? dom_default.all(document, to) : [sourceEl];
      nodes.forEach((node) => {
        let encodedJS = node.getAttribute(attr);
        if (!encodedJS) {
          throw new Error(`expected ${attr} to contain JS command on "${to}"`);
        }
        view.liveSocket.execJS(node, encodedJS, eventType);
      });
    },
    exec_dispatch(eventType, phxEvent, view, sourceEl, el, { to, event, detail, bubbles }) {
      detail = detail || {};
      detail.dispatcher = sourceEl;
      dom_default.dispatchEvent(el, event, { detail, bubbles });
    },
    exec_push(eventType, phxEvent, view, sourceEl, el, args) {
      if (!view.isConnected()) {
        return;
      }
      let { event, data, target, page_loading, loading, value, dispatcher, callback } = args;
      let pushOpts = { loading, value, target, page_loading: !!page_loading };
      let targetSrc = eventType === "change" && dispatcher ? dispatcher : sourceEl;
      let phxTarget = target || targetSrc.getAttribute(view.binding("target")) || targetSrc;
      view.withinTargets(phxTarget, (targetView, targetCtx) => {
        if (eventType === "change") {
          let { newCid, _target } = args;
          _target = _target || (dom_default.isFormInput(sourceEl) ? sourceEl.name : void 0);
          if (_target) {
            pushOpts._target = _target;
          }
          targetView.pushInput(sourceEl, targetCtx, newCid, event || phxEvent, pushOpts, callback);
        } else if (eventType === "submit") {
          let { submitter } = args;
          targetView.submitForm(sourceEl, targetCtx, event || phxEvent, submitter, pushOpts, callback);
        } else {
          targetView.pushEvent(eventType, sourceEl, targetCtx, event || phxEvent, data, pushOpts, callback);
        }
      });
    },
    exec_navigate(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
      view.liveSocket.historyRedirect(href, replace ? "replace" : "push");
    },
    exec_patch(eventType, phxEvent, view, sourceEl, el, { href, replace }) {
      view.liveSocket.pushHistoryPatch(href, replace ? "replace" : "push", sourceEl);
    },
    exec_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => aria_default.attemptFocus(el));
    },
    exec_focus_first(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => aria_default.focusFirstInteractive(el) || aria_default.focusFirst(el));
    },
    exec_push_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => focusStack = el || sourceEl);
    },
    exec_pop_focus(eventType, phxEvent, view, sourceEl, el) {
      window.requestAnimationFrame(() => {
        if (focusStack) {
          focusStack.focus();
        }
        focusStack = null;
      });
    },
    exec_add_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
      this.addOrRemoveClasses(el, names, [], transition, time, view);
    },
    exec_remove_class(eventType, phxEvent, view, sourceEl, el, { names, transition, time }) {
      this.addOrRemoveClasses(el, [], names, transition, time, view);
    },
    exec_transition(eventType, phxEvent, view, sourceEl, el, { time, transition }) {
      this.addOrRemoveClasses(el, [], [], transition, time, view);
    },
    exec_toggle(eventType, phxEvent, view, sourceEl, el, { display, ins, outs, time }) {
      this.toggle(eventType, view, el, display, ins, outs, time);
    },
    exec_show(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
      this.show(eventType, view, el, display, transition, time);
    },
    exec_hide(eventType, phxEvent, view, sourceEl, el, { display, transition, time }) {
      this.hide(eventType, view, el, display, transition, time);
    },
    exec_set_attr(eventType, phxEvent, view, sourceEl, el, { attr: [attr, val] }) {
      this.setOrRemoveAttrs(el, [[attr, val]], []);
    },
    exec_remove_attr(eventType, phxEvent, view, sourceEl, el, { attr }) {
      this.setOrRemoveAttrs(el, [], [attr]);
    },
    show(eventType, view, el, display, transition, time) {
      if (!this.isVisible(el)) {
        this.toggle(eventType, view, el, display, transition, null, time);
      }
    },
    hide(eventType, view, el, display, transition, time) {
      if (this.isVisible(el)) {
        this.toggle(eventType, view, el, display, null, transition, time);
      }
    },
    toggle(eventType, view, el, display, ins, outs, time) {
      let [inClasses, inStartClasses, inEndClasses] = ins || [[], [], []];
      let [outClasses, outStartClasses, outEndClasses] = outs || [[], [], []];
      if (inClasses.length > 0 || outClasses.length > 0) {
        if (this.isVisible(el)) {
          let onStart = () => {
            this.addOrRemoveClasses(el, outStartClasses, inClasses.concat(inStartClasses).concat(inEndClasses));
            window.requestAnimationFrame(() => {
              this.addOrRemoveClasses(el, outClasses, []);
              window.requestAnimationFrame(() => this.addOrRemoveClasses(el, outEndClasses, outStartClasses));
            });
          };
          el.dispatchEvent(new Event("phx:hide-start"));
          view.transition(time, onStart, () => {
            this.addOrRemoveClasses(el, [], outClasses.concat(outEndClasses));
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
            el.dispatchEvent(new Event("phx:hide-end"));
          });
        } else {
          if (eventType === "remove") {
            return;
          }
          let onStart = () => {
            this.addOrRemoveClasses(el, inStartClasses, outClasses.concat(outStartClasses).concat(outEndClasses));
            let stickyDisplay = display || this.defaultDisplay(el);
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
            window.requestAnimationFrame(() => {
              this.addOrRemoveClasses(el, inClasses, []);
              window.requestAnimationFrame(() => this.addOrRemoveClasses(el, inEndClasses, inStartClasses));
            });
          };
          el.dispatchEvent(new Event("phx:show-start"));
          view.transition(time, onStart, () => {
            this.addOrRemoveClasses(el, [], inClasses.concat(inEndClasses));
            el.dispatchEvent(new Event("phx:show-end"));
          });
        }
      } else {
        if (this.isVisible(el)) {
          window.requestAnimationFrame(() => {
            el.dispatchEvent(new Event("phx:hide-start"));
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = "none");
            el.dispatchEvent(new Event("phx:hide-end"));
          });
        } else {
          window.requestAnimationFrame(() => {
            el.dispatchEvent(new Event("phx:show-start"));
            let stickyDisplay = display || this.defaultDisplay(el);
            dom_default.putSticky(el, "toggle", (currentEl) => currentEl.style.display = stickyDisplay);
            el.dispatchEvent(new Event("phx:show-end"));
          });
        }
      }
    },
    addOrRemoveClasses(el, adds, removes, transition, time, view) {
      let [transition_run, transition_start, transition_end] = transition || [[], [], []];
      if (transition_run.length > 0) {
        let onStart = () => this.addOrRemoveClasses(el, transition_start.concat(transition_run), []);
        let onDone = () => this.addOrRemoveClasses(el, adds.concat(transition_end), removes.concat(transition_run).concat(transition_start));
        return view.transition(time, onStart, onDone);
      }
      window.requestAnimationFrame(() => {
        let [prevAdds, prevRemoves] = dom_default.getSticky(el, "classes", [[], []]);
        let keepAdds = adds.filter((name) => prevAdds.indexOf(name) < 0 && !el.classList.contains(name));
        let keepRemoves = removes.filter((name) => prevRemoves.indexOf(name) < 0 && el.classList.contains(name));
        let newAdds = prevAdds.filter((name) => removes.indexOf(name) < 0).concat(keepAdds);
        let newRemoves = prevRemoves.filter((name) => adds.indexOf(name) < 0).concat(keepRemoves);
        dom_default.putSticky(el, "classes", (currentEl) => {
          currentEl.classList.remove(...newRemoves);
          currentEl.classList.add(...newAdds);
          return [newAdds, newRemoves];
        });
      });
    },
    setOrRemoveAttrs(el, sets, removes) {
      let [prevSets, prevRemoves] = dom_default.getSticky(el, "attrs", [[], []]);
      let alteredAttrs = sets.map(([attr, _val]) => attr).concat(removes);
      let newSets = prevSets.filter(([attr, _val]) => !alteredAttrs.includes(attr)).concat(sets);
      let newRemoves = prevRemoves.filter((attr) => !alteredAttrs.includes(attr)).concat(removes);
      dom_default.putSticky(el, "attrs", (currentEl) => {
        newRemoves.forEach((attr) => currentEl.removeAttribute(attr));
        newSets.forEach(([attr, val]) => currentEl.setAttribute(attr, val));
        return [newSets, newRemoves];
      });
    },
    hasAllClasses(el, classes) {
      return classes.every((name) => el.classList.contains(name));
    },
    isToggledOut(el, outClasses) {
      return !this.isVisible(el) || this.hasAllClasses(el, outClasses);
    },
    filterToEls(sourceEl, { to }) {
      return to ? dom_default.all(document, to) : [sourceEl];
    },
    defaultDisplay(el) {
      return { tr: "table-row", td: "table-cell" }[el.tagName.toLowerCase()] || "block";
    }
  };
  var js_default = JS;
  var serializeForm = (form, metadata, onlyNames = []) => {
    let _a = metadata, { submitter } = _a, meta = __objRest(_a, ["submitter"]);
    let formData = new FormData(form);
    if (submitter && submitter.hasAttribute("name") && submitter.form && submitter.form === form) {
      formData.append(submitter.name, submitter.value);
    }
    let toRemove = [];
    formData.forEach((val, key, _index) => {
      if (val instanceof File) {
        toRemove.push(key);
      }
    });
    toRemove.forEach((key) => formData.delete(key));
    let params = new URLSearchParams();
    for (let [key, val] of formData.entries()) {
      if (onlyNames.length === 0 || onlyNames.indexOf(key) >= 0) {
        params.append(key, val);
      }
    }
    for (let metaKey in meta) {
      params.append(metaKey, meta[metaKey]);
    }
    return params.toString();
  };
  var View = class {
    constructor(el, liveSocket2, parentView, flash, liveReferer) {
      this.isDead = false;
      this.liveSocket = liveSocket2;
      this.flash = flash;
      this.parent = parentView;
      this.root = parentView ? parentView.root : this;
      this.el = el;
      this.id = this.el.id;
      this.ref = 0;
      this.childJoins = 0;
      this.loaderTimer = null;
      this.pendingDiffs = [];
      this.pruningCIDs = [];
      this.redirect = false;
      this.href = null;
      this.joinCount = this.parent ? this.parent.joinCount - 1 : 0;
      this.joinPending = true;
      this.destroyed = false;
      this.joinCallback = function(onDone) {
        onDone && onDone();
      };
      this.stopCallback = function() {
      };
      this.pendingJoinOps = this.parent ? null : [];
      this.viewHooks = {};
      this.uploaders = {};
      this.formSubmits = [];
      this.children = this.parent ? null : {};
      this.root.children[this.id] = {};
      this.channel = this.liveSocket.channel(`lv:${this.id}`, () => {
        return {
          redirect: this.redirect ? this.href : void 0,
          url: this.redirect ? void 0 : this.href || void 0,
          params: this.connectParams(liveReferer),
          session: this.getSession(),
          static: this.getStatic(),
          flash: this.flash
        };
      });
    }
    setHref(href) {
      this.href = href;
    }
    setRedirect(href) {
      this.redirect = true;
      this.href = href;
    }
    isMain() {
      return this.el.hasAttribute(PHX_MAIN);
    }
    connectParams(liveReferer) {
      let params = this.liveSocket.params(this.el);
      let manifest = dom_default.all(document, `[${this.binding(PHX_TRACK_STATIC)}]`).map((node) => node.src || node.href).filter((url) => typeof url === "string");
      if (manifest.length > 0) {
        params["_track_static"] = manifest;
      }
      params["_mounts"] = this.joinCount;
      params["_live_referer"] = liveReferer;
      return params;
    }
    isConnected() {
      return this.channel.canPush();
    }
    getSession() {
      return this.el.getAttribute(PHX_SESSION);
    }
    getStatic() {
      let val = this.el.getAttribute(PHX_STATIC);
      return val === "" ? null : val;
    }
    destroy(callback = function() {
    }) {
      this.destroyAllChildren();
      this.destroyed = true;
      delete this.root.children[this.id];
      if (this.parent) {
        delete this.root.children[this.parent.id][this.id];
      }
      clearTimeout(this.loaderTimer);
      let onFinished = () => {
        callback();
        for (let id in this.viewHooks) {
          this.destroyHook(this.viewHooks[id]);
        }
      };
      dom_default.markPhxChildDestroyed(this.el);
      this.log("destroyed", () => ["the child has been removed from the parent"]);
      this.channel.leave().receive("ok", onFinished).receive("error", onFinished).receive("timeout", onFinished);
    }
    setContainerClasses(...classes) {
      this.el.classList.remove(PHX_CONNECTED_CLASS, PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_CLIENT_ERROR_CLASS, PHX_SERVER_ERROR_CLASS);
      this.el.classList.add(...classes);
    }
    showLoader(timeout) {
      clearTimeout(this.loaderTimer);
      if (timeout) {
        this.loaderTimer = setTimeout(() => this.showLoader(), timeout);
      } else {
        for (let id in this.viewHooks) {
          this.viewHooks[id].__disconnected();
        }
        this.setContainerClasses(PHX_LOADING_CLASS);
      }
    }
    execAll(binding) {
      dom_default.all(this.el, `[${binding}]`, (el) => this.liveSocket.execJS(el, el.getAttribute(binding)));
    }
    hideLoader() {
      clearTimeout(this.loaderTimer);
      this.setContainerClasses(PHX_CONNECTED_CLASS);
      this.execAll(this.binding("connected"));
    }
    triggerReconnected() {
      for (let id in this.viewHooks) {
        this.viewHooks[id].__reconnected();
      }
    }
    log(kind, msgCallback) {
      this.liveSocket.log(this, kind, msgCallback);
    }
    transition(time, onStart, onDone = function() {
    }) {
      this.liveSocket.transition(time, onStart, onDone);
    }
    withinTargets(phxTarget, callback) {
      if (phxTarget instanceof HTMLElement || phxTarget instanceof SVGElement) {
        return this.liveSocket.owner(phxTarget, (view) => callback(view, phxTarget));
      }
      if (isCid(phxTarget)) {
        let targets = dom_default.findComponentNodeList(this.el, phxTarget);
        if (targets.length === 0) {
          logError(`no component found matching phx-target of ${phxTarget}`);
        } else {
          callback(this, parseInt(phxTarget));
        }
      } else {
        let targets = Array.from(document.querySelectorAll(phxTarget));
        if (targets.length === 0) {
          logError(`nothing found matching the phx-target selector "${phxTarget}"`);
        }
        targets.forEach((target) => this.liveSocket.owner(target, (view) => callback(view, target)));
      }
    }
    applyDiff(type, rawDiff, callback) {
      this.log(type, () => ["", clone(rawDiff)]);
      let { diff, reply, events, title } = Rendered.extract(rawDiff);
      callback({ diff, reply, events });
      if (title) {
        window.requestAnimationFrame(() => dom_default.putTitle(title));
      }
    }
    onJoin(resp) {
      let { rendered, container } = resp;
      if (container) {
        let [tag, attrs] = container;
        this.el = dom_default.replaceRootContainer(this.el, tag, attrs);
      }
      this.childJoins = 0;
      this.joinPending = true;
      this.flash = null;
      browser_default.dropLocal(this.liveSocket.localStorage, window.location.pathname, CONSECUTIVE_RELOADS);
      this.applyDiff("mount", rendered, ({ diff, events }) => {
        this.rendered = new Rendered(this.id, diff);
        let [html, streams] = this.renderContainer(null, "join");
        this.dropPendingRefs();
        let forms = this.formsForRecovery(html);
        this.joinCount++;
        if (forms.length > 0) {
          forms.forEach(([form, newForm, newCid], i) => {
            this.pushFormRecovery(form, newCid, (resp2) => {
              if (i === forms.length - 1) {
                this.onJoinComplete(resp2, html, streams, events);
              }
            });
          });
        } else {
          this.onJoinComplete(resp, html, streams, events);
        }
      });
    }
    dropPendingRefs() {
      dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}]`, (el) => {
        el.removeAttribute(PHX_REF);
        el.removeAttribute(PHX_REF_SRC);
      });
    }
    onJoinComplete({ live_patch }, html, streams, events) {
      if (this.joinCount > 1 || this.parent && !this.parent.isJoinPending()) {
        return this.applyJoinPatch(live_patch, html, streams, events);
      }
      let newChildren = dom_default.findPhxChildrenInFragment(html, this.id).filter((toEl) => {
        let fromEl = toEl.id && this.el.querySelector(`[id="${toEl.id}"]`);
        let phxStatic = fromEl && fromEl.getAttribute(PHX_STATIC);
        if (phxStatic) {
          toEl.setAttribute(PHX_STATIC, phxStatic);
        }
        return this.joinChild(toEl);
      });
      if (newChildren.length === 0) {
        if (this.parent) {
          this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)]);
          this.parent.ackJoin(this);
        } else {
          this.onAllChildJoinsComplete();
          this.applyJoinPatch(live_patch, html, streams, events);
        }
      } else {
        this.root.pendingJoinOps.push([this, () => this.applyJoinPatch(live_patch, html, streams, events)]);
      }
    }
    attachTrueDocEl() {
      this.el = dom_default.byId(this.id);
      this.el.setAttribute(PHX_ROOT_ID, this.root.id);
    }
    execNewMounted() {
      let phxViewportTop = this.binding(PHX_VIEWPORT_TOP);
      let phxViewportBottom = this.binding(PHX_VIEWPORT_BOTTOM);
      dom_default.all(this.el, `[${phxViewportTop}], [${phxViewportBottom}]`, (hookEl) => {
        dom_default.maybeAddPrivateHooks(hookEl, phxViewportTop, phxViewportBottom);
        this.maybeAddNewHook(hookEl);
      });
      dom_default.all(this.el, `[${this.binding(PHX_HOOK)}], [data-phx-${PHX_HOOK}]`, (hookEl) => {
        this.maybeAddNewHook(hookEl);
      });
      dom_default.all(this.el, `[${this.binding(PHX_MOUNTED)}]`, (el) => this.maybeMounted(el));
    }
    applyJoinPatch(live_patch, html, streams, events) {
      this.attachTrueDocEl();
      let patch = new DOMPatch(this, this.el, this.id, html, streams, null);
      patch.markPrunableContentForRemoval();
      this.performPatch(patch, false);
      this.joinNewChildren();
      this.execNewMounted();
      this.joinPending = false;
      this.liveSocket.dispatchEvents(events);
      this.applyPendingUpdates();
      if (live_patch) {
        let { kind, to } = live_patch;
        this.liveSocket.historyPatch(to, kind);
      }
      this.hideLoader();
      if (this.joinCount > 1) {
        this.triggerReconnected();
      }
      this.stopCallback();
    }
    triggerBeforeUpdateHook(fromEl, toEl) {
      this.liveSocket.triggerDOM("onBeforeElUpdated", [fromEl, toEl]);
      let hook = this.getHook(fromEl);
      let isIgnored = hook && dom_default.isIgnored(fromEl, this.binding(PHX_UPDATE));
      if (hook && !fromEl.isEqualNode(toEl) && !(isIgnored && isEqualObj(fromEl.dataset, toEl.dataset))) {
        hook.__beforeUpdate();
        return hook;
      }
    }
    maybeMounted(el) {
      let phxMounted = el.getAttribute(this.binding(PHX_MOUNTED));
      let hasBeenInvoked = phxMounted && dom_default.private(el, "mounted");
      if (phxMounted && !hasBeenInvoked) {
        this.liveSocket.execJS(el, phxMounted);
        dom_default.putPrivate(el, "mounted", true);
      }
    }
    maybeAddNewHook(el, force) {
      let newHook = this.addHook(el);
      if (newHook) {
        newHook.__mounted();
      }
    }
    performPatch(patch, pruneCids) {
      let removedEls = [];
      let phxChildrenAdded = false;
      let updatedHookIds = /* @__PURE__ */ new Set();
      patch.after("added", (el) => {
        this.liveSocket.triggerDOM("onNodeAdded", [el]);
        this.maybeAddNewHook(el);
        if (el.getAttribute) {
          this.maybeMounted(el);
        }
      });
      patch.after("phxChildAdded", (el) => {
        if (dom_default.isPhxSticky(el)) {
          this.liveSocket.joinRootViews();
        } else {
          phxChildrenAdded = true;
        }
      });
      patch.before("updated", (fromEl, toEl) => {
        let hook = this.triggerBeforeUpdateHook(fromEl, toEl);
        if (hook) {
          updatedHookIds.add(fromEl.id);
        }
      });
      patch.after("updated", (el) => {
        if (updatedHookIds.has(el.id)) {
          this.getHook(el).__updated();
        }
      });
      patch.after("discarded", (el) => {
        if (el.nodeType === Node.ELEMENT_NODE) {
          removedEls.push(el);
        }
      });
      patch.after("transitionsDiscarded", (els) => this.afterElementsRemoved(els, pruneCids));
      patch.perform();
      this.afterElementsRemoved(removedEls, pruneCids);
      return phxChildrenAdded;
    }
    afterElementsRemoved(elements, pruneCids) {
      let destroyedCIDs = [];
      elements.forEach((parent) => {
        let components = dom_default.all(parent, `[${PHX_COMPONENT}]`);
        let hooks = dom_default.all(parent, `[${this.binding(PHX_HOOK)}]`);
        components.concat(parent).forEach((el) => {
          let cid = this.componentID(el);
          if (isCid(cid) && destroyedCIDs.indexOf(cid) === -1) {
            destroyedCIDs.push(cid);
          }
        });
        hooks.concat(parent).forEach((hookEl) => {
          let hook = this.getHook(hookEl);
          hook && this.destroyHook(hook);
        });
      });
      if (pruneCids) {
        this.maybePushComponentsDestroyed(destroyedCIDs);
      }
    }
    joinNewChildren() {
      dom_default.findPhxChildren(this.el, this.id).forEach((el) => this.joinChild(el));
    }
    getChildById(id) {
      return this.root.children[this.id][id];
    }
    getDescendentByEl(el) {
      if (el.id === this.id) {
        return this;
      } else {
        return this.children[el.getAttribute(PHX_PARENT_ID)][el.id];
      }
    }
    destroyDescendent(id) {
      for (let parentId in this.root.children) {
        for (let childId in this.root.children[parentId]) {
          if (childId === id) {
            return this.root.children[parentId][childId].destroy();
          }
        }
      }
    }
    joinChild(el) {
      let child = this.getChildById(el.id);
      if (!child) {
        let view = new View(el, this.liveSocket, this);
        this.root.children[this.id][view.id] = view;
        view.join();
        this.childJoins++;
        return true;
      }
    }
    isJoinPending() {
      return this.joinPending;
    }
    ackJoin(_child) {
      this.childJoins--;
      if (this.childJoins === 0) {
        if (this.parent) {
          this.parent.ackJoin(this);
        } else {
          this.onAllChildJoinsComplete();
        }
      }
    }
    onAllChildJoinsComplete() {
      this.joinCallback(() => {
        this.pendingJoinOps.forEach(([view, op]) => {
          if (!view.isDestroyed()) {
            op();
          }
        });
        this.pendingJoinOps = [];
      });
    }
    update(diff, events) {
      if (this.isJoinPending() || this.liveSocket.hasPendingLink() && this.root.isMain()) {
        return this.pendingDiffs.push({ diff, events });
      }
      this.rendered.mergeDiff(diff);
      let phxChildrenAdded = false;
      if (this.rendered.isComponentOnlyDiff(diff)) {
        this.liveSocket.time("component patch complete", () => {
          let parentCids = dom_default.findParentCIDs(this.el, this.rendered.componentCIDs(diff));
          parentCids.forEach((parentCID) => {
            if (this.componentPatch(this.rendered.getComponent(diff, parentCID), parentCID)) {
              phxChildrenAdded = true;
            }
          });
        });
      } else if (!isEmpty(diff)) {
        this.liveSocket.time("full patch complete", () => {
          let [html, streams] = this.renderContainer(diff, "update");
          let patch = new DOMPatch(this, this.el, this.id, html, streams, null);
          phxChildrenAdded = this.performPatch(patch, true);
        });
      }
      this.liveSocket.dispatchEvents(events);
      if (phxChildrenAdded) {
        this.joinNewChildren();
      }
    }
    renderContainer(diff, kind) {
      return this.liveSocket.time(`toString diff (${kind})`, () => {
        let tag = this.el.tagName;
        let cids = diff ? this.rendered.componentCIDs(diff).concat(this.pruningCIDs) : null;
        let [html, streams] = this.rendered.toString(cids);
        return [`<${tag}>${html}</${tag}>`, streams];
      });
    }
    componentPatch(diff, cid) {
      if (isEmpty(diff))
        return false;
      let [html, streams] = this.rendered.componentToString(cid);
      let patch = new DOMPatch(this, this.el, this.id, html, streams, cid);
      let childrenAdded = this.performPatch(patch, true);
      return childrenAdded;
    }
    getHook(el) {
      return this.viewHooks[ViewHook.elementID(el)];
    }
    addHook(el) {
      if (ViewHook.elementID(el) || !el.getAttribute) {
        return;
      }
      let hookName = el.getAttribute(`data-phx-${PHX_HOOK}`) || el.getAttribute(this.binding(PHX_HOOK));
      if (hookName && !this.ownsElement(el)) {
        return;
      }
      let callbacks = this.liveSocket.getHookCallbacks(hookName);
      if (callbacks) {
        if (!el.id) {
          logError(`no DOM ID for hook "${hookName}". Hooks require a unique ID on each element.`, el);
        }
        let hook = new ViewHook(this, el, callbacks);
        this.viewHooks[ViewHook.elementID(hook.el)] = hook;
        return hook;
      } else if (hookName !== null) {
        logError(`unknown hook found for "${hookName}"`, el);
      }
    }
    destroyHook(hook) {
      hook.__destroyed();
      hook.__cleanup__();
      delete this.viewHooks[ViewHook.elementID(hook.el)];
    }
    applyPendingUpdates() {
      this.pendingDiffs.forEach(({ diff, events }) => this.update(diff, events));
      this.pendingDiffs = [];
      this.eachChild((child) => child.applyPendingUpdates());
    }
    eachChild(callback) {
      let children = this.root.children[this.id] || {};
      for (let id in children) {
        callback(this.getChildById(id));
      }
    }
    onChannel(event, cb) {
      this.liveSocket.onChannel(this.channel, event, (resp) => {
        if (this.isJoinPending()) {
          this.root.pendingJoinOps.push([this, () => cb(resp)]);
        } else {
          this.liveSocket.requestDOMUpdate(() => cb(resp));
        }
      });
    }
    bindChannel() {
      this.liveSocket.onChannel(this.channel, "diff", (rawDiff) => {
        this.liveSocket.requestDOMUpdate(() => {
          this.applyDiff("update", rawDiff, ({ diff, events }) => this.update(diff, events));
        });
      });
      this.onChannel("redirect", ({ to, flash }) => this.onRedirect({ to, flash }));
      this.onChannel("live_patch", (redir) => this.onLivePatch(redir));
      this.onChannel("live_redirect", (redir) => this.onLiveRedirect(redir));
      this.channel.onError((reason) => this.onError(reason));
      this.channel.onClose((reason) => this.onClose(reason));
    }
    destroyAllChildren() {
      this.eachChild((child) => child.destroy());
    }
    onLiveRedirect(redir) {
      let { to, kind, flash } = redir;
      let url = this.expandURL(to);
      this.liveSocket.historyRedirect(url, kind, flash);
    }
    onLivePatch(redir) {
      let { to, kind } = redir;
      this.href = this.expandURL(to);
      this.liveSocket.historyPatch(to, kind);
    }
    expandURL(to) {
      return to.startsWith("/") ? `${window.location.protocol}//${window.location.host}${to}` : to;
    }
    onRedirect({ to, flash }) {
      this.liveSocket.redirect(to, flash);
    }
    isDestroyed() {
      return this.destroyed;
    }
    joinDead() {
      this.isDead = true;
    }
    join(callback) {
      this.showLoader(this.liveSocket.loaderTimeout);
      this.bindChannel();
      if (this.isMain()) {
        this.stopCallback = this.liveSocket.withPageLoading({ to: this.href, kind: "initial" });
      }
      this.joinCallback = (onDone) => {
        onDone = onDone || function() {
        };
        callback ? callback(this.joinCount, onDone) : onDone();
      };
      this.liveSocket.wrapPush(this, { timeout: false }, () => {
        return this.channel.join().receive("ok", (data) => {
          if (!this.isDestroyed()) {
            this.liveSocket.requestDOMUpdate(() => this.onJoin(data));
          }
        }).receive("error", (resp) => !this.isDestroyed() && this.onJoinError(resp)).receive("timeout", () => !this.isDestroyed() && this.onJoinError({ reason: "timeout" }));
      });
    }
    onJoinError(resp) {
      if (resp.reason === "reload") {
        this.log("error", () => [`failed mount with ${resp.status}. Falling back to page request`, resp]);
        return this.onRedirect({ to: this.href });
      } else if (resp.reason === "unauthorized" || resp.reason === "stale") {
        this.log("error", () => ["unauthorized live_redirect. Falling back to page request", resp]);
        return this.onRedirect({ to: this.href });
      }
      if (resp.redirect || resp.live_redirect) {
        this.joinPending = false;
        this.channel.leave();
      }
      if (resp.redirect) {
        return this.onRedirect(resp.redirect);
      }
      if (resp.live_redirect) {
        return this.onLiveRedirect(resp.live_redirect);
      }
      this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_SERVER_ERROR_CLASS]);
      this.log("error", () => ["unable to join", resp]);
      if (this.liveSocket.isConnected()) {
        this.liveSocket.reloadWithJitter(this);
      }
    }
    onClose(reason) {
      if (this.isDestroyed()) {
        return;
      }
      if (this.liveSocket.hasPendingLink() && reason !== "leave") {
        return this.liveSocket.reloadWithJitter(this);
      }
      this.destroyAllChildren();
      this.liveSocket.dropActiveElement(this);
      if (document.activeElement) {
        document.activeElement.blur();
      }
      if (this.liveSocket.isUnloaded()) {
        this.showLoader(BEFORE_UNLOAD_LOADER_TIMEOUT);
      }
    }
    onError(reason) {
      this.onClose(reason);
      if (this.liveSocket.isConnected()) {
        this.log("error", () => ["view crashed", reason]);
      }
      if (!this.liveSocket.isUnloaded()) {
        if (this.liveSocket.isConnected()) {
          this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_SERVER_ERROR_CLASS]);
        } else {
          this.displayError([PHX_LOADING_CLASS, PHX_ERROR_CLASS, PHX_CLIENT_ERROR_CLASS]);
        }
      }
    }
    displayError(classes) {
      if (this.isMain()) {
        dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: { to: this.href, kind: "error" } });
      }
      this.showLoader();
      this.setContainerClasses(...classes);
      this.execAll(this.binding("disconnected"));
    }
    pushWithReply(refGenerator, event, payload, onReply = function() {
    }) {
      if (!this.isConnected()) {
        return;
      }
      let [ref, [el], opts] = refGenerator ? refGenerator() : [null, [], {}];
      let onLoadingDone = function() {
      };
      if (opts.page_loading || el && el.getAttribute(this.binding(PHX_PAGE_LOADING)) !== null) {
        onLoadingDone = this.liveSocket.withPageLoading({ kind: "element", target: el });
      }
      if (typeof payload.cid !== "number") {
        delete payload.cid;
      }
      return this.liveSocket.wrapPush(this, { timeout: true }, () => {
        return this.channel.push(event, payload, PUSH_TIMEOUT).receive("ok", (resp) => {
          let finish = (hookReply) => {
            if (resp.redirect) {
              this.onRedirect(resp.redirect);
            }
            if (resp.live_patch) {
              this.onLivePatch(resp.live_patch);
            }
            if (resp.live_redirect) {
              this.onLiveRedirect(resp.live_redirect);
            }
            onLoadingDone();
            onReply(resp, hookReply);
          };
          if (resp.diff) {
            this.liveSocket.requestDOMUpdate(() => {
              this.applyDiff("update", resp.diff, ({ diff, reply, events }) => {
                if (ref !== null) {
                  this.undoRefs(ref);
                }
                this.update(diff, events);
                finish(reply);
              });
            });
          } else {
            if (ref !== null) {
              this.undoRefs(ref);
            }
            finish(null);
          }
        });
      });
    }
    undoRefs(ref) {
      if (!this.isConnected()) {
        return;
      }
      dom_default.all(document, `[${PHX_REF_SRC}="${this.id}"][${PHX_REF}="${ref}"]`, (el) => {
        let disabledVal = el.getAttribute(PHX_DISABLED);
        el.removeAttribute(PHX_REF);
        el.removeAttribute(PHX_REF_SRC);
        if (el.getAttribute(PHX_READONLY) !== null) {
          el.readOnly = false;
          el.removeAttribute(PHX_READONLY);
        }
        if (disabledVal !== null) {
          el.disabled = disabledVal === "true" ? true : false;
          el.removeAttribute(PHX_DISABLED);
        }
        PHX_EVENT_CLASSES.forEach((className) => dom_default.removeClass(el, className));
        let disableRestore = el.getAttribute(PHX_DISABLE_WITH_RESTORE);
        if (disableRestore !== null) {
          el.innerText = disableRestore;
          el.removeAttribute(PHX_DISABLE_WITH_RESTORE);
        }
        let toEl = dom_default.private(el, PHX_REF);
        if (toEl) {
          let hook = this.triggerBeforeUpdateHook(el, toEl);
          DOMPatch.patchEl(el, toEl, this.liveSocket.getActiveElement());
          if (hook) {
            hook.__updated();
          }
          dom_default.deletePrivate(el, PHX_REF);
        }
      });
    }
    putRef(elements, event, opts = {}) {
      let newRef = this.ref++;
      let disableWith = this.binding(PHX_DISABLE_WITH);
      if (opts.loading) {
        elements = elements.concat(dom_default.all(document, opts.loading));
      }
      elements.forEach((el) => {
        el.classList.add(`phx-${event}-loading`);
        el.setAttribute(PHX_REF, newRef);
        el.setAttribute(PHX_REF_SRC, this.el.id);
        let disableText = el.getAttribute(disableWith);
        if (disableText !== null) {
          if (!el.getAttribute(PHX_DISABLE_WITH_RESTORE)) {
            el.setAttribute(PHX_DISABLE_WITH_RESTORE, el.innerText);
          }
          if (disableText !== "") {
            el.innerText = disableText;
          }
          el.setAttribute("disabled", "");
        }
      });
      return [newRef, elements, opts];
    }
    componentID(el) {
      let cid = el.getAttribute && el.getAttribute(PHX_COMPONENT);
      return cid ? parseInt(cid) : null;
    }
    targetComponentID(target, targetCtx, opts = {}) {
      if (isCid(targetCtx)) {
        return targetCtx;
      }
      let cidOrSelector = target.getAttribute(this.binding("target"));
      if (isCid(cidOrSelector)) {
        return parseInt(cidOrSelector);
      } else if (targetCtx && (cidOrSelector !== null || opts.target)) {
        return this.closestComponentID(targetCtx);
      } else {
        return null;
      }
    }
    closestComponentID(targetCtx) {
      if (isCid(targetCtx)) {
        return targetCtx;
      } else if (targetCtx) {
        return maybe(targetCtx.closest(`[${PHX_COMPONENT}]`), (el) => this.ownsElement(el) && this.componentID(el));
      } else {
        return null;
      }
    }
    pushHookEvent(el, targetCtx, event, payload, onReply) {
      if (!this.isConnected()) {
        this.log("hook", () => ["unable to push hook event. LiveView not connected", event, payload]);
        return false;
      }
      let [ref, els, opts] = this.putRef([el], "hook");
      this.pushWithReply(() => [ref, els, opts], "event", {
        type: "hook",
        event,
        value: payload,
        cid: this.closestComponentID(targetCtx)
      }, (resp, reply) => onReply(reply, ref));
      return ref;
    }
    extractMeta(el, meta, value) {
      let prefix = this.binding("value-");
      for (let i = 0; i < el.attributes.length; i++) {
        if (!meta) {
          meta = {};
        }
        let name = el.attributes[i].name;
        if (name.startsWith(prefix)) {
          meta[name.replace(prefix, "")] = el.getAttribute(name);
        }
      }
      if (el.value !== void 0 && !(el instanceof HTMLFormElement)) {
        if (!meta) {
          meta = {};
        }
        meta.value = el.value;
        if (el.tagName === "INPUT" && CHECKABLE_INPUTS.indexOf(el.type) >= 0 && !el.checked) {
          delete meta.value;
        }
      }
      if (value) {
        if (!meta) {
          meta = {};
        }
        for (let key in value) {
          meta[key] = value[key];
        }
      }
      return meta;
    }
    pushEvent(type, el, targetCtx, phxEvent, meta, opts = {}, onReply) {
      this.pushWithReply(() => this.putRef([el], type, opts), "event", {
        type,
        event: phxEvent,
        value: this.extractMeta(el, meta, opts.value),
        cid: this.targetComponentID(el, targetCtx, opts)
      }, (resp, reply) => onReply && onReply(reply));
    }
    pushFileProgress(fileEl, entryRef, progress, onReply = function() {
    }) {
      this.liveSocket.withinOwners(fileEl.form, (view, targetCtx) => {
        view.pushWithReply(null, "progress", {
          event: fileEl.getAttribute(view.binding(PHX_PROGRESS)),
          ref: fileEl.getAttribute(PHX_UPLOAD_REF),
          entry_ref: entryRef,
          progress,
          cid: view.targetComponentID(fileEl.form, targetCtx)
        }, onReply);
      });
    }
    pushInput(inputEl, targetCtx, forceCid, phxEvent, opts, callback) {
      let uploads;
      let cid = isCid(forceCid) ? forceCid : this.targetComponentID(inputEl.form, targetCtx);
      let refGenerator = () => this.putRef([inputEl, inputEl.form], "change", opts);
      let formData;
      let meta = this.extractMeta(inputEl.form);
      if (inputEl.getAttribute(this.binding("change"))) {
        formData = serializeForm(inputEl.form, __spreadValues({ _target: opts._target }, meta), [inputEl.name]);
      } else {
        formData = serializeForm(inputEl.form, __spreadValues({ _target: opts._target }, meta));
      }
      if (dom_default.isUploadInput(inputEl) && inputEl.files && inputEl.files.length > 0) {
        LiveUploader.trackFiles(inputEl, Array.from(inputEl.files));
      }
      uploads = LiveUploader.serializeUploads(inputEl);
      let event = {
        type: "form",
        event: phxEvent,
        value: formData,
        uploads,
        cid
      };
      this.pushWithReply(refGenerator, "event", event, (resp) => {
        dom_default.showError(inputEl, this.liveSocket.binding(PHX_FEEDBACK_FOR));
        if (dom_default.isUploadInput(inputEl) && inputEl.getAttribute("data-phx-auto-upload") !== null) {
          if (LiveUploader.filesAwaitingPreflight(inputEl).length > 0) {
            let [ref, _els] = refGenerator();
            this.uploadFiles(inputEl.form, targetCtx, ref, cid, (_uploads) => {
              callback && callback(resp);
              this.triggerAwaitingSubmit(inputEl.form);
            });
          }
        } else {
          callback && callback(resp);
        }
      });
    }
    triggerAwaitingSubmit(formEl) {
      let awaitingSubmit = this.getScheduledSubmit(formEl);
      if (awaitingSubmit) {
        let [_el, _ref, _opts, callback] = awaitingSubmit;
        this.cancelSubmit(formEl);
        callback();
      }
    }
    getScheduledSubmit(formEl) {
      return this.formSubmits.find(([el, _ref, _opts, _callback]) => el.isSameNode(formEl));
    }
    scheduleSubmit(formEl, ref, opts, callback) {
      if (this.getScheduledSubmit(formEl)) {
        return true;
      }
      this.formSubmits.push([formEl, ref, opts, callback]);
    }
    cancelSubmit(formEl) {
      this.formSubmits = this.formSubmits.filter(([el, ref, _callback]) => {
        if (el.isSameNode(formEl)) {
          this.undoRefs(ref);
          return false;
        } else {
          return true;
        }
      });
    }
    disableForm(formEl, opts = {}) {
      let filterIgnored = (el) => {
        let userIgnored = closestPhxBinding(el, `${this.binding(PHX_UPDATE)}=ignore`, el.form);
        return !(userIgnored || closestPhxBinding(el, "data-phx-update=ignore", el.form));
      };
      let filterDisables = (el) => {
        return el.hasAttribute(this.binding(PHX_DISABLE_WITH));
      };
      let filterButton = (el) => el.tagName == "BUTTON";
      let filterInput = (el) => ["INPUT", "TEXTAREA", "SELECT"].includes(el.tagName);
      let formElements = Array.from(formEl.elements);
      let disables = formElements.filter(filterDisables);
      let buttons = formElements.filter(filterButton).filter(filterIgnored);
      let inputs = formElements.filter(filterInput).filter(filterIgnored);
      buttons.forEach((button) => {
        button.setAttribute(PHX_DISABLED, button.disabled);
        button.disabled = true;
      });
      inputs.forEach((input) => {
        input.setAttribute(PHX_READONLY, input.readOnly);
        input.readOnly = true;
        if (input.files) {
          input.setAttribute(PHX_DISABLED, input.disabled);
          input.disabled = true;
        }
      });
      formEl.setAttribute(this.binding(PHX_PAGE_LOADING), "");
      return this.putRef([formEl].concat(disables).concat(buttons).concat(inputs), "submit", opts);
    }
    pushFormSubmit(formEl, targetCtx, phxEvent, submitter, opts, onReply) {
      let refGenerator = () => this.disableForm(formEl, opts);
      let cid = this.targetComponentID(formEl, targetCtx);
      if (LiveUploader.hasUploadsInProgress(formEl)) {
        let [ref, _els] = refGenerator();
        let push = () => this.pushFormSubmit(formEl, submitter, targetCtx, phxEvent, opts, onReply);
        return this.scheduleSubmit(formEl, ref, opts, push);
      } else if (LiveUploader.inputsAwaitingPreflight(formEl).length > 0) {
        let [ref, els] = refGenerator();
        let proxyRefGen = () => [ref, els, opts];
        this.uploadFiles(formEl, targetCtx, ref, cid, (_uploads) => {
          let meta = this.extractMeta(formEl);
          let formData = serializeForm(formEl, __spreadValues({ submitter }, meta));
          this.pushWithReply(proxyRefGen, "event", {
            type: "form",
            event: phxEvent,
            value: formData,
            cid
          }, onReply);
        });
      } else if (!(formEl.hasAttribute(PHX_REF) && formEl.classList.contains("phx-submit-loading"))) {
        let meta = this.extractMeta(formEl);
        let formData = serializeForm(formEl, __spreadValues({ submitter }, meta));
        this.pushWithReply(refGenerator, "event", {
          type: "form",
          event: phxEvent,
          value: formData,
          cid
        }, onReply);
      }
    }
    uploadFiles(formEl, targetCtx, ref, cid, onComplete) {
      let joinCountAtUpload = this.joinCount;
      let inputEls = LiveUploader.activeFileInputs(formEl);
      let numFileInputsInProgress = inputEls.length;
      inputEls.forEach((inputEl) => {
        let uploader = new LiveUploader(inputEl, this, () => {
          numFileInputsInProgress--;
          if (numFileInputsInProgress === 0) {
            onComplete();
          }
        });
        this.uploaders[inputEl] = uploader;
        let entries = uploader.entries().map((entry) => entry.toPreflightPayload());
        let payload = {
          ref: inputEl.getAttribute(PHX_UPLOAD_REF),
          entries,
          cid: this.targetComponentID(inputEl.form, targetCtx)
        };
        this.log("upload", () => ["sending preflight request", payload]);
        this.pushWithReply(null, "allow_upload", payload, (resp) => {
          this.log("upload", () => ["got preflight response", resp]);
          if (resp.error) {
            this.undoRefs(ref);
            let [entry_ref, reason] = resp.error;
            this.log("upload", () => [`error for entry ${entry_ref}`, reason]);
          } else {
            let onError = (callback) => {
              this.channel.onError(() => {
                if (this.joinCount === joinCountAtUpload) {
                  callback();
                }
              });
            };
            uploader.initAdapterUpload(resp, onError, this.liveSocket);
          }
        });
      });
    }
    dispatchUploads(name, filesOrBlobs) {
      let inputs = dom_default.findUploadInputs(this.el).filter((el) => el.name === name);
      if (inputs.length === 0) {
        logError(`no live file inputs found matching the name "${name}"`);
      } else if (inputs.length > 1) {
        logError(`duplicate live file inputs found matching the name "${name}"`);
      } else {
        dom_default.dispatchEvent(inputs[0], PHX_TRACK_UPLOADS, { detail: { files: filesOrBlobs } });
      }
    }
    pushFormRecovery(form, newCid, callback) {
      this.liveSocket.withinOwners(form, (view, targetCtx) => {
        let phxChange = this.binding("change");
        let inputs = Array.from(form.elements).filter((el) => dom_default.isFormInput(el) && el.name && !el.hasAttribute(phxChange));
        if (inputs.length === 0) {
          return;
        }
        let input = inputs.find((el) => el.type !== "hidden") || input[0];
        let phxEvent = form.getAttribute(this.binding(PHX_AUTO_RECOVER)) || form.getAttribute(this.binding("change"));
        js_default.exec("change", phxEvent, view, input, ["push", { _target: input.name, newCid, callback }]);
      });
    }
    pushLinkPatch(href, targetEl, callback) {
      let linkRef = this.liveSocket.setPendingLink(href);
      let refGen = targetEl ? () => this.putRef([targetEl], "click") : null;
      let fallback = () => this.liveSocket.redirect(window.location.href);
      let push = this.pushWithReply(refGen, "live_patch", { url: href }, (resp) => {
        this.liveSocket.requestDOMUpdate(() => {
          if (resp.link_redirect) {
            this.liveSocket.replaceMain(href, null, callback, linkRef);
          } else {
            if (this.liveSocket.commitPendingLink(linkRef)) {
              this.href = href;
            }
            this.applyPendingUpdates();
            callback && callback(linkRef);
          }
        });
      });
      if (push) {
        push.receive("timeout", fallback);
      } else {
        fallback();
      }
    }
    formsForRecovery(html) {
      if (this.joinCount === 0) {
        return [];
      }
      let phxChange = this.binding("change");
      let template = document.createElement("template");
      template.innerHTML = html;
      return dom_default.all(this.el, `form[${phxChange}]`).filter((form) => form.id && this.ownsElement(form)).filter((form) => form.elements.length > 0).filter((form) => form.getAttribute(this.binding(PHX_AUTO_RECOVER)) !== "ignore").map((form) => {
        let newForm = template.content.querySelector(`form[id="${form.id}"][${phxChange}="${form.getAttribute(phxChange)}"]`);
        if (newForm) {
          return [form, newForm, this.targetComponentID(newForm)];
        } else {
          return [form, form, this.targetComponentID(form)];
        }
      }).filter(([form, newForm, newCid]) => newForm);
    }
    maybePushComponentsDestroyed(destroyedCIDs) {
      let willDestroyCIDs = destroyedCIDs.filter((cid) => {
        return dom_default.findComponentNodeList(this.el, cid).length === 0;
      });
      if (willDestroyCIDs.length > 0) {
        this.pruningCIDs.push(...willDestroyCIDs);
        this.pushWithReply(null, "cids_will_destroy", { cids: willDestroyCIDs }, () => {
          this.pruningCIDs = this.pruningCIDs.filter((cid) => willDestroyCIDs.indexOf(cid) !== -1);
          let completelyDestroyCIDs = willDestroyCIDs.filter((cid) => {
            return dom_default.findComponentNodeList(this.el, cid).length === 0;
          });
          if (completelyDestroyCIDs.length > 0) {
            this.pushWithReply(null, "cids_destroyed", { cids: completelyDestroyCIDs }, (resp) => {
              this.rendered.pruneCIDs(resp.cids);
            });
          }
        });
      }
    }
    ownsElement(el) {
      let parentViewEl = el.closest(PHX_VIEW_SELECTOR);
      return el.getAttribute(PHX_PARENT_ID) === this.id || parentViewEl && parentViewEl.id === this.id || !parentViewEl && this.isDead;
    }
    submitForm(form, targetCtx, phxEvent, submitter, opts = {}) {
      dom_default.putPrivate(form, PHX_HAS_SUBMITTED, true);
      let phxFeedback = this.liveSocket.binding(PHX_FEEDBACK_FOR);
      let inputs = Array.from(form.elements);
      inputs.forEach((input) => dom_default.putPrivate(input, PHX_HAS_SUBMITTED, true));
      this.liveSocket.blurActiveElement(this);
      this.pushFormSubmit(form, targetCtx, phxEvent, submitter, opts, () => {
        inputs.forEach((input) => dom_default.showError(input, phxFeedback));
        this.liveSocket.restorePreviouslyActiveFocus();
      });
    }
    binding(kind) {
      return this.liveSocket.binding(kind);
    }
  };
  var LiveSocket = class {
    constructor(url, phxSocket, opts = {}) {
      this.unloaded = false;
      if (!phxSocket || phxSocket.constructor.name === "Object") {
        throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);
      }
      this.socket = new phxSocket(url, opts);
      this.bindingPrefix = opts.bindingPrefix || BINDING_PREFIX;
      this.opts = opts;
      this.params = closure2(opts.params || {});
      this.viewLogger = opts.viewLogger;
      this.metadataCallbacks = opts.metadata || {};
      this.defaults = Object.assign(clone(DEFAULTS), opts.defaults || {});
      this.activeElement = null;
      this.prevActive = null;
      this.silenced = false;
      this.main = null;
      this.outgoingMainEl = null;
      this.clickStartedAtTarget = null;
      this.linkRef = 1;
      this.roots = {};
      this.href = window.location.href;
      this.pendingLink = null;
      this.currentLocation = clone(window.location);
      this.hooks = opts.hooks || {};
      this.uploaders = opts.uploaders || {};
      this.loaderTimeout = opts.loaderTimeout || LOADER_TIMEOUT;
      this.reloadWithJitterTimer = null;
      this.maxReloads = opts.maxReloads || MAX_RELOADS;
      this.reloadJitterMin = opts.reloadJitterMin || RELOAD_JITTER_MIN;
      this.reloadJitterMax = opts.reloadJitterMax || RELOAD_JITTER_MAX;
      this.failsafeJitter = opts.failsafeJitter || FAILSAFE_JITTER;
      this.localStorage = opts.localStorage || window.localStorage;
      this.sessionStorage = opts.sessionStorage || window.sessionStorage;
      this.boundTopLevelEvents = false;
      this.domCallbacks = Object.assign({ onNodeAdded: closure2(), onBeforeElUpdated: closure2() }, opts.dom || {});
      this.transitions = new TransitionSet();
      window.addEventListener("pagehide", (_e2) => {
        this.unloaded = true;
      });
      this.socket.onOpen(() => {
        if (this.isUnloaded()) {
          window.location.reload();
        }
      });
    }
    isProfileEnabled() {
      return this.sessionStorage.getItem(PHX_LV_PROFILE) === "true";
    }
    isDebugEnabled() {
      return this.sessionStorage.getItem(PHX_LV_DEBUG) === "true";
    }
    isDebugDisabled() {
      return this.sessionStorage.getItem(PHX_LV_DEBUG) === "false";
    }
    enableDebug() {
      this.sessionStorage.setItem(PHX_LV_DEBUG, "true");
    }
    enableProfiling() {
      this.sessionStorage.setItem(PHX_LV_PROFILE, "true");
    }
    disableDebug() {
      this.sessionStorage.setItem(PHX_LV_DEBUG, "false");
    }
    disableProfiling() {
      this.sessionStorage.removeItem(PHX_LV_PROFILE);
    }
    enableLatencySim(upperBoundMs) {
      this.enableDebug();
      console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable");
      this.sessionStorage.setItem(PHX_LV_LATENCY_SIM, upperBoundMs);
    }
    disableLatencySim() {
      this.sessionStorage.removeItem(PHX_LV_LATENCY_SIM);
    }
    getLatencySim() {
      let str = this.sessionStorage.getItem(PHX_LV_LATENCY_SIM);
      return str ? parseInt(str) : null;
    }
    getSocket() {
      return this.socket;
    }
    connect() {
      if (window.location.hostname === "localhost" && !this.isDebugDisabled()) {
        this.enableDebug();
      }
      let doConnect = () => {
        if (this.joinRootViews()) {
          this.bindTopLevelEvents();
          this.socket.connect();
        } else if (this.main) {
          this.socket.connect();
        } else {
          this.bindTopLevelEvents({ dead: true });
        }
        this.joinDeadView();
      };
      if (["complete", "loaded", "interactive"].indexOf(document.readyState) >= 0) {
        doConnect();
      } else {
        document.addEventListener("DOMContentLoaded", () => doConnect());
      }
    }
    disconnect(callback) {
      clearTimeout(this.reloadWithJitterTimer);
      this.socket.disconnect(callback);
    }
    replaceTransport(transport) {
      clearTimeout(this.reloadWithJitterTimer);
      this.socket.replaceTransport(transport);
      this.connect();
    }
    execJS(el, encodedJS, eventType = null) {
      this.owner(el, (view) => js_default.exec(eventType, encodedJS, view, el));
    }
    execJSHookPush(el, phxEvent, data, callback) {
      this.withinOwners(el, (view) => {
        js_default.exec("hook", phxEvent, view, el, ["push", { data, callback }]);
      });
    }
    unload() {
      if (this.unloaded) {
        return;
      }
      if (this.main && this.isConnected()) {
        this.log(this.main, "socket", () => ["disconnect for page nav"]);
      }
      this.unloaded = true;
      this.destroyAllViews();
      this.disconnect();
    }
    triggerDOM(kind, args) {
      this.domCallbacks[kind](...args);
    }
    time(name, func) {
      if (!this.isProfileEnabled() || !console.time) {
        return func();
      }
      console.time(name);
      let result = func();
      console.timeEnd(name);
      return result;
    }
    log(view, kind, msgCallback) {
      if (this.viewLogger) {
        let [msg, obj] = msgCallback();
        this.viewLogger(view, kind, msg, obj);
      } else if (this.isDebugEnabled()) {
        let [msg, obj] = msgCallback();
        debug(view, kind, msg, obj);
      }
    }
    requestDOMUpdate(callback) {
      this.transitions.after(callback);
    }
    transition(time, onStart, onDone = function() {
    }) {
      this.transitions.addTransition(time, onStart, onDone);
    }
    onChannel(channel, event, cb) {
      channel.on(event, (data) => {
        let latency = this.getLatencySim();
        if (!latency) {
          cb(data);
        } else {
          setTimeout(() => cb(data), latency);
        }
      });
    }
    wrapPush(view, opts, push) {
      let latency = this.getLatencySim();
      let oldJoinCount = view.joinCount;
      if (!latency) {
        if (this.isConnected() && opts.timeout) {
          return push().receive("timeout", () => {
            if (view.joinCount === oldJoinCount && !view.isDestroyed()) {
              this.reloadWithJitter(view, () => {
                this.log(view, "timeout", () => ["received timeout while communicating with server. Falling back to hard refresh for recovery"]);
              });
            }
          });
        } else {
          return push();
        }
      }
      let fakePush = {
        receives: [],
        receive(kind, cb) {
          this.receives.push([kind, cb]);
        }
      };
      setTimeout(() => {
        if (view.isDestroyed()) {
          return;
        }
        fakePush.receives.reduce((acc, [kind, cb]) => acc.receive(kind, cb), push());
      }, latency);
      return fakePush;
    }
    reloadWithJitter(view, log) {
      clearTimeout(this.reloadWithJitterTimer);
      this.disconnect();
      let minMs = this.reloadJitterMin;
      let maxMs = this.reloadJitterMax;
      let afterMs = Math.floor(Math.random() * (maxMs - minMs + 1)) + minMs;
      let tries = browser_default.updateLocal(this.localStorage, window.location.pathname, CONSECUTIVE_RELOADS, 0, (count) => count + 1);
      if (tries > this.maxReloads) {
        afterMs = this.failsafeJitter;
      }
      this.reloadWithJitterTimer = setTimeout(() => {
        if (view.isDestroyed() || view.isConnected()) {
          return;
        }
        view.destroy();
        log ? log() : this.log(view, "join", () => [`encountered ${tries} consecutive reloads`]);
        if (tries > this.maxReloads) {
          this.log(view, "join", () => [`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]);
        }
        if (this.hasPendingLink()) {
          window.location = this.pendingLink;
        } else {
          window.location.reload();
        }
      }, afterMs);
    }
    getHookCallbacks(name) {
      return name && name.startsWith("Phoenix.") ? hooks_default[name.split(".")[1]] : this.hooks[name];
    }
    isUnloaded() {
      return this.unloaded;
    }
    isConnected() {
      return this.socket.isConnected();
    }
    getBindingPrefix() {
      return this.bindingPrefix;
    }
    binding(kind) {
      return `${this.getBindingPrefix()}${kind}`;
    }
    channel(topic, params) {
      return this.socket.channel(topic, params);
    }
    joinDeadView() {
      let body = document.body;
      if (body && !this.isPhxView(body) && !this.isPhxView(document.firstElementChild)) {
        let view = this.newRootView(body);
        view.setHref(this.getHref());
        view.joinDead();
        if (!this.main) {
          this.main = view;
        }
        window.requestAnimationFrame(() => view.execNewMounted());
      }
    }
    joinRootViews() {
      let rootsFound = false;
      dom_default.all(document, `${PHX_VIEW_SELECTOR}:not([${PHX_PARENT_ID}])`, (rootEl) => {
        if (!this.getRootById(rootEl.id)) {
          let view = this.newRootView(rootEl);
          view.setHref(this.getHref());
          view.join();
          if (rootEl.hasAttribute(PHX_MAIN)) {
            this.main = view;
          }
        }
        rootsFound = true;
      });
      return rootsFound;
    }
    redirect(to, flash) {
      this.unload();
      browser_default.redirect(to, flash);
    }
    replaceMain(href, flash, callback = null, linkRef = this.setPendingLink(href)) {
      let liveReferer = this.currentLocation.href;
      this.outgoingMainEl = this.outgoingMainEl || this.main.el;
      let newMainEl = dom_default.cloneNode(this.outgoingMainEl, "");
      this.main.showLoader(this.loaderTimeout);
      this.main.destroy();
      this.main = this.newRootView(newMainEl, flash, liveReferer);
      this.main.setRedirect(href);
      this.transitionRemoves();
      this.main.join((joinCount, onDone) => {
        if (joinCount === 1 && this.commitPendingLink(linkRef)) {
          this.requestDOMUpdate(() => {
            dom_default.findPhxSticky(document).forEach((el) => newMainEl.appendChild(el));
            this.outgoingMainEl.replaceWith(newMainEl);
            this.outgoingMainEl = null;
            callback && requestAnimationFrame(callback);
            onDone();
          });
        }
      });
    }
    transitionRemoves(elements) {
      let removeAttr = this.binding("remove");
      elements = elements || dom_default.all(document, `[${removeAttr}]`);
      elements.forEach((el) => {
        this.execJS(el, el.getAttribute(removeAttr), "remove");
      });
    }
    isPhxView(el) {
      return el.getAttribute && el.getAttribute(PHX_SESSION) !== null;
    }
    newRootView(el, flash, liveReferer) {
      let view = new View(el, this, null, flash, liveReferer);
      this.roots[view.id] = view;
      return view;
    }
    owner(childEl, callback) {
      let view = maybe(childEl.closest(PHX_VIEW_SELECTOR), (el) => this.getViewByEl(el)) || this.main;
      if (view) {
        callback(view);
      }
    }
    withinOwners(childEl, callback) {
      this.owner(childEl, (view) => callback(view, childEl));
    }
    getViewByEl(el) {
      let rootId = el.getAttribute(PHX_ROOT_ID);
      return maybe(this.getRootById(rootId), (root) => root.getDescendentByEl(el));
    }
    getRootById(id) {
      return this.roots[id];
    }
    destroyAllViews() {
      for (let id in this.roots) {
        this.roots[id].destroy();
        delete this.roots[id];
      }
      this.main = null;
    }
    destroyViewByEl(el) {
      let root = this.getRootById(el.getAttribute(PHX_ROOT_ID));
      if (root && root.id === el.id) {
        root.destroy();
        delete this.roots[root.id];
      } else if (root) {
        root.destroyDescendent(el.id);
      }
    }
    setActiveElement(target) {
      if (this.activeElement === target) {
        return;
      }
      this.activeElement = target;
      let cancel = () => {
        if (target === this.activeElement) {
          this.activeElement = null;
        }
        target.removeEventListener("mouseup", this);
        target.removeEventListener("touchend", this);
      };
      target.addEventListener("mouseup", cancel);
      target.addEventListener("touchend", cancel);
    }
    getActiveElement() {
      if (document.activeElement === document.body) {
        return this.activeElement || document.activeElement;
      } else {
        return document.activeElement || document.body;
      }
    }
    dropActiveElement(view) {
      if (this.prevActive && view.ownsElement(this.prevActive)) {
        this.prevActive = null;
      }
    }
    restorePreviouslyActiveFocus() {
      if (this.prevActive && this.prevActive !== document.body) {
        this.prevActive.focus();
      }
    }
    blurActiveElement() {
      this.prevActive = this.getActiveElement();
      if (this.prevActive !== document.body) {
        this.prevActive.blur();
      }
    }
    bindTopLevelEvents({ dead } = {}) {
      if (this.boundTopLevelEvents) {
        return;
      }
      this.boundTopLevelEvents = true;
      this.socket.onClose((event) => {
        if (event && event.code === 1e3 && this.main) {
          return this.reloadWithJitter(this.main);
        }
      });
      document.body.addEventListener("click", function() {
      });
      window.addEventListener("pageshow", (e) => {
        if (e.persisted) {
          this.getSocket().disconnect();
          this.withPageLoading({ to: window.location.href, kind: "redirect" });
          window.location.reload();
        }
      }, true);
      if (!dead) {
        this.bindNav();
      }
      this.bindClicks();
      if (!dead) {
        this.bindForms();
      }
      this.bind({ keyup: "keyup", keydown: "keydown" }, (e, type, view, targetEl, phxEvent, eventTarget) => {
        let matchKey = targetEl.getAttribute(this.binding(PHX_KEY));
        let pressedKey = e.key && e.key.toLowerCase();
        if (matchKey && matchKey.toLowerCase() !== pressedKey) {
          return;
        }
        let data = __spreadValues({ key: e.key }, this.eventMeta(type, e, targetEl));
        js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
      });
      this.bind({ blur: "focusout", focus: "focusin" }, (e, type, view, targetEl, phxEvent, eventTarget) => {
        if (!eventTarget) {
          let data = __spreadValues({ key: e.key }, this.eventMeta(type, e, targetEl));
          js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
        }
      });
      this.bind({ blur: "blur", focus: "focus" }, (e, type, view, targetEl, targetCtx, phxEvent, phxTarget) => {
        if (phxTarget === "window") {
          let data = this.eventMeta(type, e, targetEl);
          js_default.exec(type, phxEvent, view, targetEl, ["push", { data }]);
        }
      });
      window.addEventListener("dragover", (e) => e.preventDefault());
      window.addEventListener("drop", (e) => {
        e.preventDefault();
        let dropTargetId = maybe(closestPhxBinding(e.target, this.binding(PHX_DROP_TARGET)), (trueTarget) => {
          return trueTarget.getAttribute(this.binding(PHX_DROP_TARGET));
        });
        let dropTarget = dropTargetId && document.getElementById(dropTargetId);
        let files = Array.from(e.dataTransfer.files || []);
        if (!dropTarget || dropTarget.disabled || files.length === 0 || !(dropTarget.files instanceof FileList)) {
          return;
        }
        LiveUploader.trackFiles(dropTarget, files, e.dataTransfer);
        dropTarget.dispatchEvent(new Event("input", { bubbles: true }));
      });
      this.on(PHX_TRACK_UPLOADS, (e) => {
        let uploadTarget = e.target;
        if (!dom_default.isUploadInput(uploadTarget)) {
          return;
        }
        let files = Array.from(e.detail.files || []).filter((f2) => f2 instanceof File || f2 instanceof Blob);
        LiveUploader.trackFiles(uploadTarget, files);
        uploadTarget.dispatchEvent(new Event("input", { bubbles: true }));
      });
    }
    eventMeta(eventName, e, targetEl) {
      let callback = this.metadataCallbacks[eventName];
      return callback ? callback(e, targetEl) : {};
    }
    setPendingLink(href) {
      this.linkRef++;
      this.pendingLink = href;
      return this.linkRef;
    }
    commitPendingLink(linkRef) {
      if (this.linkRef !== linkRef) {
        return false;
      } else {
        this.href = this.pendingLink;
        this.pendingLink = null;
        return true;
      }
    }
    getHref() {
      return this.href;
    }
    hasPendingLink() {
      return !!this.pendingLink;
    }
    bind(events, callback) {
      for (let event in events) {
        let browserEventName = events[event];
        this.on(browserEventName, (e) => {
          let binding = this.binding(event);
          let windowBinding = this.binding(`window-${event}`);
          let targetPhxEvent = e.target.getAttribute && e.target.getAttribute(binding);
          if (targetPhxEvent) {
            this.debounce(e.target, e, browserEventName, () => {
              this.withinOwners(e.target, (view) => {
                callback(e, event, view, e.target, targetPhxEvent, null);
              });
            });
          } else {
            dom_default.all(document, `[${windowBinding}]`, (el) => {
              let phxEvent = el.getAttribute(windowBinding);
              this.debounce(el, e, browserEventName, () => {
                this.withinOwners(el, (view) => {
                  callback(e, event, view, el, phxEvent, "window");
                });
              });
            });
          }
        });
      }
    }
    bindClicks() {
      window.addEventListener("click", (e) => this.clickStartedAtTarget = e.target);
      this.bindClick("click", "click", false);
      this.bindClick("mousedown", "capture-click", true);
    }
    bindClick(eventName, bindingName, capture) {
      let click = this.binding(bindingName);
      window.addEventListener(eventName, (e) => {
        let target = null;
        if (capture) {
          target = e.target.matches(`[${click}]`) ? e.target : e.target.querySelector(`[${click}]`);
        } else {
          let clickStartedAtTarget = this.clickStartedAtTarget || e.target;
          target = closestPhxBinding(clickStartedAtTarget, click);
          this.dispatchClickAway(e, clickStartedAtTarget);
          this.clickStartedAtTarget = null;
        }
        let phxEvent = target && target.getAttribute(click);
        if (!phxEvent) {
          if (!capture && dom_default.isNewPageClick(e, window.location)) {
            this.unload();
          }
          return;
        }
        if (target.getAttribute("href") === "#") {
          e.preventDefault();
        }
        if (target.hasAttribute(PHX_REF)) {
          return;
        }
        this.debounce(target, e, "click", () => {
          this.withinOwners(target, (view) => {
            js_default.exec("click", phxEvent, view, target, ["push", { data: this.eventMeta("click", e, target) }]);
          });
        });
      }, capture);
    }
    dispatchClickAway(e, clickStartedAt) {
      let phxClickAway = this.binding("click-away");
      dom_default.all(document, `[${phxClickAway}]`, (el) => {
        if (!(el.isSameNode(clickStartedAt) || el.contains(clickStartedAt))) {
          this.withinOwners(e.target, (view) => {
            let phxEvent = el.getAttribute(phxClickAway);
            if (js_default.isVisible(el)) {
              js_default.exec("click", phxEvent, view, el, ["push", { data: this.eventMeta("click", e, e.target) }]);
            }
          });
        }
      });
    }
    bindNav() {
      if (!browser_default.canPushState()) {
        return;
      }
      if (history.scrollRestoration) {
        history.scrollRestoration = "manual";
      }
      let scrollTimer = null;
      window.addEventListener("scroll", (_e2) => {
        clearTimeout(scrollTimer);
        scrollTimer = setTimeout(() => {
          browser_default.updateCurrentState((state) => Object.assign(state, { scroll: window.scrollY }));
        }, 100);
      });
      window.addEventListener("popstate", (event) => {
        if (!this.registerNewLocation(window.location)) {
          return;
        }
        let { type, id, root, scroll } = event.state || {};
        let href = window.location.href;
        this.requestDOMUpdate(() => {
          if (this.main.isConnected() && (type === "patch" && id === this.main.id)) {
            this.main.pushLinkPatch(href, null, () => {
              this.maybeScroll(scroll);
            });
          } else {
            this.replaceMain(href, null, () => {
              if (root) {
                this.replaceRootHistory();
              }
              this.maybeScroll(scroll);
            });
          }
        });
      }, false);
      window.addEventListener("click", (e) => {
        let target = closestPhxBinding(e.target, PHX_LIVE_LINK);
        let type = target && target.getAttribute(PHX_LIVE_LINK);
        if (!type || !this.isConnected() || !this.main || dom_default.wantsNewTab(e)) {
          return;
        }
        let href = target.href;
        let linkState = target.getAttribute(PHX_LINK_STATE);
        e.preventDefault();
        e.stopImmediatePropagation();
        if (this.pendingLink === href) {
          return;
        }
        this.requestDOMUpdate(() => {
          if (type === "patch") {
            this.pushHistoryPatch(href, linkState, target);
          } else if (type === "redirect") {
            this.historyRedirect(href, linkState);
          } else {
            throw new Error(`expected ${PHX_LIVE_LINK} to be "patch" or "redirect", got: ${type}`);
          }
          let phxClick = target.getAttribute(this.binding("click"));
          if (phxClick) {
            this.requestDOMUpdate(() => this.execJS(target, phxClick, "click"));
          }
        });
      }, false);
    }
    maybeScroll(scroll) {
      if (typeof scroll === "number") {
        requestAnimationFrame(() => {
          window.scrollTo(0, scroll);
        });
      }
    }
    dispatchEvent(event, payload = {}) {
      dom_default.dispatchEvent(window, `phx:${event}`, { detail: payload });
    }
    dispatchEvents(events) {
      events.forEach(([event, payload]) => this.dispatchEvent(event, payload));
    }
    withPageLoading(info, callback) {
      dom_default.dispatchEvent(window, "phx:page-loading-start", { detail: info });
      let done = () => dom_default.dispatchEvent(window, "phx:page-loading-stop", { detail: info });
      return callback ? callback(done) : done;
    }
    pushHistoryPatch(href, linkState, targetEl) {
      if (!this.isConnected()) {
        return browser_default.redirect(href);
      }
      this.withPageLoading({ to: href, kind: "patch" }, (done) => {
        this.main.pushLinkPatch(href, targetEl, (linkRef) => {
          this.historyPatch(href, linkState, linkRef);
          done();
        });
      });
    }
    historyPatch(href, linkState, linkRef = this.setPendingLink(href)) {
      if (!this.commitPendingLink(linkRef)) {
        return;
      }
      browser_default.pushState(linkState, { type: "patch", id: this.main.id }, href);
      this.registerNewLocation(window.location);
    }
    historyRedirect(href, linkState, flash) {
      if (!this.isConnected()) {
        return browser_default.redirect(href, flash);
      }
      if (/^\/$|^\/[^\/]+.*$/.test(href)) {
        let { protocol, host } = window.location;
        href = `${protocol}//${host}${href}`;
      }
      let scroll = window.scrollY;
      this.withPageLoading({ to: href, kind: "redirect" }, (done) => {
        this.replaceMain(href, flash, () => {
          browser_default.pushState(linkState, { type: "redirect", id: this.main.id, scroll }, href);
          this.registerNewLocation(window.location);
          done();
        });
      });
    }
    replaceRootHistory() {
      browser_default.pushState("replace", { root: true, type: "patch", id: this.main.id });
    }
    registerNewLocation(newLocation) {
      let { pathname, search } = this.currentLocation;
      if (pathname + search === newLocation.pathname + newLocation.search) {
        return false;
      } else {
        this.currentLocation = clone(newLocation);
        return true;
      }
    }
    bindForms() {
      let iterations = 0;
      let externalFormSubmitted = false;
      this.on("submit", (e) => {
        let phxSubmit = e.target.getAttribute(this.binding("submit"));
        let phxChange = e.target.getAttribute(this.binding("change"));
        if (!externalFormSubmitted && phxChange && !phxSubmit) {
          externalFormSubmitted = true;
          e.preventDefault();
          this.withinOwners(e.target, (view) => {
            view.disableForm(e.target);
            window.requestAnimationFrame(() => {
              if (dom_default.isUnloadableFormSubmit(e)) {
                this.unload();
              }
              e.target.submit();
            });
          });
        }
      }, true);
      this.on("submit", (e) => {
        let phxEvent = e.target.getAttribute(this.binding("submit"));
        if (!phxEvent) {
          if (dom_default.isUnloadableFormSubmit(e)) {
            this.unload();
          }
          return;
        }
        e.preventDefault();
        e.target.disabled = true;
        this.withinOwners(e.target, (view) => {
          js_default.exec("submit", phxEvent, view, e.target, ["push", { submitter: e.submitter }]);
        });
      }, false);
      for (let type of ["change", "input"]) {
        this.on(type, (e) => {
          let phxChange = this.binding("change");
          let input = e.target;
          let inputEvent = input.getAttribute(phxChange);
          let formEvent = input.form && input.form.getAttribute(phxChange);
          let phxEvent = inputEvent || formEvent;
          if (!phxEvent) {
            return;
          }
          if (input.type === "number" && input.validity && input.validity.badInput) {
            return;
          }
          let dispatcher = inputEvent ? input : input.form;
          let currentIterations = iterations;
          iterations++;
          let { at: at2, type: lastType } = dom_default.private(input, "prev-iteration") || {};
          if (at2 === currentIterations - 1 && type !== lastType) {
            return;
          }
          dom_default.putPrivate(input, "prev-iteration", { at: currentIterations, type });
          this.debounce(input, e, type, () => {
            this.withinOwners(dispatcher, (view) => {
              dom_default.putPrivate(input, PHX_HAS_FOCUSED, true);
              if (!dom_default.isTextualInput(input)) {
                this.setActiveElement(input);
              }
              js_default.exec("change", phxEvent, view, input, ["push", { _target: e.target.name, dispatcher }]);
            });
          });
        }, false);
      }
      this.on("reset", (e) => {
        let form = e.target;
        dom_default.resetForm(form, this.binding(PHX_FEEDBACK_FOR));
        let input = Array.from(form.elements).find((el) => el.type === "reset");
        window.requestAnimationFrame(() => {
          input.dispatchEvent(new Event("input", { bubbles: true, cancelable: false }));
        });
      });
    }
    debounce(el, event, eventType, callback) {
      if (eventType === "blur" || eventType === "focusout") {
        return callback();
      }
      let phxDebounce = this.binding(PHX_DEBOUNCE);
      let phxThrottle = this.binding(PHX_THROTTLE);
      let defaultDebounce = this.defaults.debounce.toString();
      let defaultThrottle = this.defaults.throttle.toString();
      this.withinOwners(el, (view) => {
        let asyncFilter = () => !view.isDestroyed() && document.body.contains(el);
        dom_default.debounce(el, event, phxDebounce, defaultDebounce, phxThrottle, defaultThrottle, asyncFilter, () => {
          callback();
        });
      });
    }
    silenceEvents(callback) {
      this.silenced = true;
      callback();
      this.silenced = false;
    }
    on(event, callback) {
      window.addEventListener(event, (e) => {
        if (!this.silenced) {
          callback(e);
        }
      });
    }
  };
  var TransitionSet = class {
    constructor() {
      this.transitions = /* @__PURE__ */ new Set();
      this.pendingOps = [];
    }
    reset() {
      this.transitions.forEach((timer) => {
        clearTimeout(timer);
        this.transitions.delete(timer);
      });
      this.flushPendingOps();
    }
    after(callback) {
      if (this.size() === 0) {
        callback();
      } else {
        this.pushPendingOp(callback);
      }
    }
    addTransition(time, onStart, onDone) {
      onStart();
      let timer = setTimeout(() => {
        this.transitions.delete(timer);
        onDone();
        this.flushPendingOps();
      }, time);
      this.transitions.add(timer);
    }
    pushPendingOp(op) {
      this.pendingOps.push(op);
    }
    size() {
      return this.transitions.size;
    }
    flushPendingOps() {
      if (this.size() > 0) {
        return;
      }
      let op = this.pendingOps.shift();
      if (op) {
        op();
        this.flushPendingOps();
      }
    }
  };

  // js/app.js
  var import_topbar = __toESM(require_topbar());

  // js/node_modules/picmo/dist/index.js
  var U = (s, e, t) => {
    if (!e.has(s))
      throw TypeError("Cannot " + t);
  };
  var y = (s, e, t) => (U(s, e, "read from private field"), t ? t.call(s) : e.get(s));
  var f = (s, e, t) => {
    if (e.has(s))
      throw TypeError("Cannot add the same private member more than once");
    e instanceof WeakSet ? e.add(s) : e.set(s, t);
  };
  var A = (s, e, t, o) => (U(s, e, "write to private field"), o ? o.call(s, t) : e.set(s, t), t);
  var g = (s, e, t) => (U(s, e, "access private method"), t);
  var Ve = "14.0";
  function De(s, e, t) {
    let o = `https://cdn.jsdelivr.net/npm/emojibase-data@${e}/${s}`;
    return typeof t == "function" ? o = t(s, e) : typeof t == "string" && (o = `${t}/${s}`), o;
  }
  async function ae(s, e = {}) {
    const _a = e, {
      local: t = false,
      version: o = "latest",
      cdnUrl: i
    } = _a, r = __objRest(_a, [
      "local",
      "version",
      "cdnUrl"
    ]), a = De(s, o, i), n = t ? localStorage : sessionStorage, l = `emojibase/${o}/${s}`, m = n.getItem(l);
    if (m)
      return Promise.resolve(JSON.parse(m));
    const d = await fetch(a, __spreadValues({
      credentials: "omit",
      mode: "cors",
      redirect: "error"
    }, r));
    if (!d.ok)
      throw new Error("Failed to load Emojibase dataset.");
    const h = await d.json();
    try {
      n.setItem(l, JSON.stringify(h));
    } catch (e2) {
    }
    return h;
  }
  var Be = {
    discord: "joypixels",
    slack: "iamcal"
  };
  async function me(s, e, t) {
    var o;
    return ae(`${s}/shortcodes/${(o = Be[e]) !== null && o !== void 0 ? o : e}.json`, t);
  }
  function k(s, e) {
    if (e.length === 0)
      return s;
    const t = new Set(s.shortcodes);
    return e.forEach((o) => {
      const i = o[s.hexcode];
      Array.isArray(i) ? i.forEach((r) => t.add(r)) : i && t.add(i);
    }), s.shortcodes = [...t], s.skins && s.skins.forEach((o) => {
      k(o, e);
    }), s;
  }
  function Ne(s, e = []) {
    const t = [];
    return s.forEach((o) => {
      if (o.skins) {
        const _a = o, {
          skins: i
        } = _a, r = __objRest(_a, [
          "skins"
        ]);
        t.push(k(r, e)), i.forEach((a) => {
          const n = __spreadValues({}, a);
          r.tags && (n.tags = [...r.tags]), t.push(k(n, e));
        });
      } else
        t.push(k(o, e));
    }), t;
  }
  function Oe(s, e) {
    return e.length === 0 || s.forEach((t) => {
      k(t, e);
    }), s;
  }
  async function Ce(s, e = {}) {
    const _a = e, {
      compact: t = false,
      flat: o = false,
      shortcodes: i = []
    } = _a, r = __objRest(_a, [
      "compact",
      "flat",
      "shortcodes"
    ]), a = await ae(`${s}/${t ? "compact" : "data"}.json`, r);
    let n = [];
    return i.length > 0 && (n = await Promise.all(i.map((l) => {
      let m;
      if (l.includes("/")) {
        const [d, h] = l.split("/");
        m = me(d, h, r);
      } else
        m = me(s, l, r);
      return m.catch(() => ({}));
    }))), o ? Ne(a, n) : Oe(a, n);
  }
  async function je(s, e) {
    return ae(`${s}/messages.json`, e);
  }
  function q(s, e) {
    const o = s.target.closest("[data-emoji]");
    if (o) {
      const i = e.find((r) => r.emoji === o.dataset.emoji);
      if (i)
        return i;
    }
    return null;
  }
  function _e(s) {
    var t;
    const e = (t = window.matchMedia) == null ? void 0 : t.call(window, "(prefers-reduced-motion: reduce)");
    return s.animate && !(e != null && e.matches);
  }
  function ue(s, e) {
    return s.toLowerCase().includes(e.toLowerCase());
  }
  function He(s, e) {
    let t = null;
    return () => {
      t || (t = window.setTimeout(() => {
        s(), t = null;
      }, e));
    };
  }
  function Ke(s, e) {
    let t = null;
    return (...o) => {
      t && window.clearTimeout(t), t = window.setTimeout(() => {
        s(...o), t = null;
      }, e);
    };
  }
  function I(s, e, t, o) {
    if (_e(o) && s.animate)
      return s.animate(e, t).finished;
    const i = t.direction === "normal" ? 1 : 0, r = Object.entries(e).reduce((a, [n, l]) => __spreadProps(__spreadValues({}, a), {
      [n]: l[i]
    }), {});
    return Object.assign(s.style, r), Promise.resolve();
  }
  function Q(s) {
    var t;
    const e = document.createElement("template");
    return e.innerHTML = s, (t = e.content) == null ? void 0 : t.firstElementChild;
  }
  async function Ue(s) {
    const e = new TextEncoder().encode(s), t = await crypto.subtle.digest("SHA-256", e);
    return Array.from(new Uint8Array(t)).map((i) => i.toString(16).padStart(2, "0")).join("");
  }
  function p(...s) {
    return s.reduce((e, t) => __spreadProps(__spreadValues({}, e), {
      [t]: ne(t)
    }), {});
  }
  function ne(s) {
    return `picmo__${s}`;
  }
  function V(s) {
    for (; s.firstChild; )
      s.removeChild(s.firstChild);
    return s;
  }
  function w(s, ...e) {
    V(s).append(...e);
  }
  function ke(s) {
    try {
      return window[s].length, true;
    } catch (e) {
      return false;
    }
  }
  function xe() {
    return ke("sessionStorage");
  }
  function qe() {
    return ke("localStorage");
  }
  function x(s) {
    var e;
    return {
      emoji: s.emoji,
      label: s.label,
      tags: s.tags,
      skins: (e = s.skins) == null ? void 0 : e.map((t) => x(t)),
      order: s.order,
      custom: false,
      hexcode: s.hexcode,
      version: s.version
    };
  }
  function B(s, e, t) {
    var o;
    return t && !t.some((i) => i.order === s.group) ? false : ue(s.label, e) || ((o = s.tags) == null ? void 0 : o.some((i) => ue(i, e)));
  }
  var Ee = class {
    constructor(e = "en") {
      this.locale = e;
    }
  };
  var We = [
    (s, e) => (s.hexcode === "1F91D" && e < 14 && (s.skins = []), s),
    (s, e) => (s.skins && (s.skins = s.skins.filter((t) => !t.version || t.version <= e)), s)
  ];
  function Ge(s, e) {
    return We.some((t) => t(s, e) === null) ? null : s;
  }
  function N(s, e) {
    return s.filter((t) => Ge(t, e) !== null);
  }
  var W = {};
  function Se(s) {
    return W[s] || (W[s] = new Je(s)), W[s];
  }
  Se.deleteDatabase = (s) => {
  };
  var Je = class extends Ee {
    open() {
      return Promise.resolve();
    }
    delete() {
      return Promise.resolve();
    }
    close() {
    }
    isPopulated() {
      return Promise.resolve(false);
    }
    getEmojiCount() {
      return Promise.resolve(this.emojis.length);
    }
    getEtags() {
      return Promise.resolve({ foo: "bar" });
    }
    getHash() {
      return Promise.resolve("");
    }
    populate(e) {
      return this.categories = e.groups, this.emojis = e.emojis, Promise.resolve();
    }
    getCategories(e) {
      var o;
      let t = this.categories.filter((i) => i.key !== "component");
      if (e.showRecents && t.unshift({ key: "recents", order: -1 }), (o = e.custom) != null && o.length && t.push({ key: "custom", order: 10 }), e.categories) {
        const i = e.categories;
        t = t.filter((r) => i.includes(r.key)), t.sort((r, a) => i.indexOf(r.key) - i.indexOf(a.key));
      } else
        t.sort((i, r) => i.order - r.order);
      return Promise.resolve(t);
    }
    getEmojis(e, t) {
      const o = this.emojis.filter((i) => i.group === e.order).filter((i) => i.version <= t).sort((i, r) => i.order != null && r.order != null ? i.order - r.order : 0).map(x);
      return Promise.resolve(N(o, t));
    }
    searchEmojis(e, t, o, i) {
      const r = this.emojis.filter((l) => B(l, e, i) && l.version <= o).map(x), a = t.filter((l) => B(l, e, i)), n = [
        ...N(r, o),
        ...a
      ];
      return Promise.resolve(n);
    }
    setMeta(e) {
      this.meta = e;
    }
  };
  function Ze(s, e) {
    const t = `https://cdn.jsdelivr.net/npm/emojibase-data@${s}/${e}`;
    return {
      emojisUrl: `${t}/data.json`,
      messagesUrl: `${t}/messages.json`
    };
  }
  async function pe(s) {
    try {
      return (await fetch(s, { method: "HEAD" })).headers.get("etag");
    } catch (e) {
      return null;
    }
  }
  function Ye(s) {
    const { emojisUrl: e, messagesUrl: t } = Ze("latest", s);
    try {
      return Promise.all([
        pe(e),
        pe(t)
      ]);
    } catch (e2) {
      return Promise.all([null, null]);
    }
  }
  async function Qe(s, e, t) {
    let o;
    try {
      o = await s.getEtags();
    } catch (e2) {
      o = {};
    }
    const { storedEmojisEtag: i, storedMessagesEtag: r } = o;
    if (t !== r || e !== i) {
      const [a, n] = await Promise.all([je(s.locale), Ce(s.locale)]);
      await s.populate({
        groups: a.groups,
        emojis: n,
        emojisEtag: e,
        messagesEtag: t
      });
    }
  }
  async function Xe(s, e) {
    const t = await s.getHash();
    return e !== t;
  }
  async function Fe(s, e, t) {
    let o = t || e(s);
    try {
      await o.open();
    } catch (e2) {
      console.warn("[picmo] IndexedDB not available, falling back to InMemoryStoreFactory"), o = Se(s);
    }
    return o;
  }
  async function et(s, e, t) {
    if (!xe() && typeof window < "u")
      throw new Error("Session storage is required to use CDN emoji data.");
    const o = await Fe(s, e, t), [i, r] = await Ye(s);
    if (await o.isPopulated())
      i && r && await Qe(o, i, r);
    else {
      const [a, n] = await Promise.all([je(s), Ce(s)]);
      await o.populate({ groups: a.groups, emojis: n, emojisEtag: i, messagesEtag: r });
    }
    return o;
  }
  async function tt(s, e, t, o, i) {
    const r = await Fe(s, e, i), a = await Ue(o);
    return (!await r.isPopulated() || await Xe(r, a)) && await r.populate({ groups: t.groups, emojis: o, hash: a }), r;
  }
  async function ce(s, e, t, o, i) {
    return t && o ? tt(s, e, t, o, i) : et(s, e, i);
  }
  var st = class {
    constructor() {
      this.handleKeyDown = this.handleKeyDown.bind(this);
    }
    activate(e) {
      this.rootElement = e, this.rootElement.addEventListener("keydown", this.handleKeyDown);
    }
    deactivate() {
      var e;
      (e = this.rootElement) == null || e.removeEventListener("keydown", this.handleKeyDown);
    }
    get focusableElements() {
      return this.rootElement.querySelectorAll('input, [tabindex="0"]');
    }
    get lastFocusableElement() {
      return this.focusableElements[this.focusableElements.length - 1];
    }
    get firstFocusableElement() {
      return this.focusableElements[0];
    }
    checkFocus(e, t, o) {
      e.target === t && (o.focus(), e.preventDefault());
    }
    handleKeyDown(e) {
      e.key === "Tab" && this.checkFocus(
        e,
        e.shiftKey ? this.firstFocusableElement : this.lastFocusableElement,
        e.shiftKey ? this.lastFocusableElement : this.firstFocusableElement
      );
    }
  };
  var {
    light: ot,
    dark: Ns,
    auto: Os
  } = p("light", "dark", "auto");
  var c = class {
    constructor({ template: e, classes: t, parent: o }) {
      this.isDestroyed = false, this.appEvents = {}, this.uiEvents = [], this.uiElements = {}, this.ui = {}, this.template = e, this.classes = t, this.parent = o, this.keyBindingHandler = this.keyBindingHandler.bind(this);
    }
    initialize() {
      this.bindAppEvents();
    }
    setCustomEmojis(e) {
      this.customEmojis = e;
    }
    setEvents(e) {
      this.events = e;
    }
    setPickerId(e) {
      this.pickerId = e;
    }
    emit(e, ...t) {
      this.events.emit(e, ...t);
    }
    setI18n(e) {
      this.i18n = e;
    }
    setRenderer(e) {
      this.renderer = e;
    }
    setEmojiData(e) {
      this.emojiDataPromise = e, e.then((t) => {
        this.emojiData = t;
      });
    }
    updateEmojiData(e) {
      this.emojiData = e, this.emojiDataPromise = Promise.resolve(e);
    }
    setOptions(e) {
      this.options = e;
    }
    renderSync(e = {}) {
      return this.el = this.template.renderSync(__spreadValues({
        classes: this.classes,
        i18n: this.i18n,
        pickerId: this.pickerId
      }, e)), this.postRender(), this.el;
    }
    async render(e = {}) {
      return await this.emojiDataPromise, this.el = await this.template.renderAsync(__spreadValues({
        classes: this.classes,
        i18n: this.i18n,
        pickerId: this.pickerId
      }, e)), this.postRender(), this.el;
    }
    postRender() {
      this.bindUIElements(), this.bindKeyBindings(), this.bindUIEvents(), this.scheduleShowAnimation();
    }
    bindAppEvents() {
      Object.keys(this.appEvents).forEach((e) => {
        this.events.on(e, this.appEvents[e], this);
      }), this.events.on("data:ready", this.updateEmojiData, this);
    }
    unbindAppEvents() {
      Object.keys(this.appEvents).forEach((e) => {
        this.events.off(e, this.appEvents[e]);
      }), this.events.off("data:ready", this.updateEmojiData);
    }
    keyBindingHandler(e) {
      const t = this.keyBindings[e.key];
      t && t.call(this, e);
    }
    bindKeyBindings() {
      this.keyBindings && this.el.addEventListener("keydown", this.keyBindingHandler);
    }
    unbindKeyBindings() {
      this.keyBindings && this.el.removeEventListener("keydown", this.keyBindingHandler);
    }
    bindUIElements() {
      this.ui = Object.keys(this.uiElements).reduce((e, t) => __spreadProps(__spreadValues({}, e), {
        [t]: this.el.querySelector(this.uiElements[t])
      }), {});
    }
    bindUIEvents() {
      this.uiEvents.forEach((e) => {
        e.handler = e.handler.bind(this), (e.target ? this.ui[e.target] : this.el).addEventListener(e.event, e.handler, e.options);
      });
    }
    unbindUIEvents() {
      this.uiEvents.forEach((e) => {
        (e.target ? this.ui[e.target] : this.el).removeEventListener(e.event, e.handler);
      });
    }
    destroy() {
      this.unbindAppEvents(), this.unbindUIEvents(), this.unbindKeyBindings(), this.el.remove(), this.isDestroyed = true;
    }
    scheduleShowAnimation() {
      if (this.parent) {
        const e = new MutationObserver((t) => {
          const [o] = t;
          o.type === "childList" && o.addedNodes[0] === this.el && (_e(this.options) && this.animateShow && this.animateShow(), e.disconnect);
        });
        e.observe(this.parent, { childList: true });
      }
    }
    static childEvent(e, t, o, i = {}) {
      return { target: e, event: t, handler: o, options: i };
    }
    static uiEvent(e, t, o = {}) {
      return { event: e, handler: t, options: o };
    }
    static byClass(e) {
      return `.${e}`;
    }
  };
  var it = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"/></svg>';
  var rt = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z"/></svg>';
  var at = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240zM336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176zM259.9 369.4C288.8 369.4 316.2 375.2 340.6 385.5C352.9 390.7 366.7 381.3 361.4 369.1C344.8 330.9 305.6 303.1 259.9 303.1C214.3 303.1 175.1 330.8 158.4 369.1C153.1 381.3 166.1 390.6 179.3 385.4C203.7 375.1 231 369.4 259.9 369.4L259.9 369.4z"/></svg>';
  var nt = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M448 64H192C85.96 64 0 149.1 0 256s85.96 192 192 192h256c106 0 192-85.96 192-192S554 64 448 64zM247.1 280h-32v32c0 13.2-10.78 24-23.98 24c-13.2 0-24.02-10.8-24.02-24v-32L136 279.1C122.8 279.1 111.1 269.2 111.1 256c0-13.2 10.85-24.01 24.05-24.01L167.1 232v-32c0-13.2 10.82-24 24.02-24c13.2 0 23.98 10.8 23.98 24v32h32c13.2 0 24.02 10.8 24.02 24C271.1 269.2 261.2 280 247.1 280zM431.1 344c-22.12 0-39.1-17.87-39.1-39.1s17.87-40 39.1-40s39.1 17.88 39.1 40S454.1 344 431.1 344zM495.1 248c-22.12 0-39.1-17.87-39.1-39.1s17.87-40 39.1-40c22.12 0 39.1 17.88 39.1 40S518.1 248 495.1 248z"/></svg>';
  var ct = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"/></svg>';
  var lt = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M512 32H120c-13.25 0-24 10.75-24 24L96.01 288c0 53 43 96 96 96h192C437 384 480 341 480 288h32c70.63 0 128-57.38 128-128S582.6 32 512 32zM512 224h-32V96h32c35.25 0 64 28.75 64 64S547.3 224 512 224zM560 416h-544C7.164 416 0 423.2 0 432C0 458.5 21.49 480 48 480h480c26.51 0 48-21.49 48-48C576 423.2 568.8 416 560 416z"/></svg>';
  var ht = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M482.3 192C516.5 192 576 221 576 256C576 292 516.5 320 482.3 320H365.7L265.2 495.9C259.5 505.8 248.9 512 237.4 512H181.2C170.6 512 162.9 501.8 165.8 491.6L214.9 320H112L68.8 377.6C65.78 381.6 61.04 384 56 384H14.03C6.284 384 0 377.7 0 369.1C0 368.7 .1818 367.4 .5398 366.1L32 256L.5398 145.9C.1818 144.6 0 143.3 0 142C0 134.3 6.284 128 14.03 128H56C61.04 128 65.78 130.4 68.8 134.4L112 192H214.9L165.8 20.4C162.9 10.17 170.6 0 181.2 0H237.4C248.9 0 259.5 6.153 265.2 16.12L365.7 192H482.3z"/></svg>';
  var dt = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M9.375 233.4C3.375 239.4 0 247.5 0 256v128c0 8.5 3.375 16.62 9.375 22.62S23.5 416 32 416h32V224H32C23.5 224 15.38 227.4 9.375 233.4zM464 96H352V32c0-17.62-14.38-32-32-32S288 14.38 288 32v64H176C131.8 96 96 131.8 96 176V448c0 35.38 28.62 64 64 64h320c35.38 0 64-28.62 64-64V176C544 131.8 508.3 96 464 96zM256 416H192v-32h64V416zM224 296C201.9 296 184 278.1 184 256S201.9 216 224 216S264 233.9 264 256S246.1 296 224 296zM352 416H288v-32h64V416zM448 416h-64v-32h64V416zM416 296c-22.12 0-40-17.88-40-40S393.9 216 416 216S456 233.9 456 256S438.1 296 416 296zM630.6 233.4C624.6 227.4 616.5 224 608 224h-32v192h32c8.5 0 16.62-3.375 22.62-9.375S640 392.5 640 384V256C640 247.5 636.6 239.4 630.6 233.4z"/></svg>';
  var mt = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <defs>
    <radialGradient gradientUnits="userSpaceOnUse" cy="10%" id="gradient-0">
      <stop offset="0" stop-color="hsl(50, 100%, 50%)" />
      <stop offset="1" stop-color="hsl(50, 100%, 60%)" />
    </radialGradient>
  </defs>
  <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="172.586" cy="207.006" rx="39.974" ry="39.974"/>
  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="334.523" cy="207.481" rx="39.974" ry="39.974"/>
  <ellipse stroke="#000" fill="rgba(0, 0, 0, 0.6)" cx="313.325" cy="356.208" rx="91.497" ry="59.893"/>
  <path fill="#55a7ff" d="M 159.427 274.06 L 102.158 363.286 L 124.366 417.011 L 160.476 423.338 L 196.937 414.736 L 218.502 375.214"></path>
  <path fill="url(#gradient-0)" d="M256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM256 352C290.9 352 323.2 367.8 348.3 394.9C354.3 401.4 364.4 401.7 370.9 395.7C377.4 389.7 377.7 379.6 371.7 373.1C341.6 340.5 301 320 256 320C247.2 320 240 327.2 240 336C240 344.8 247.2 352 256 352H256zM208 369C208 349 179.6 308.6 166.4 291.3C163.2 286.9 156.8 286.9 153.6 291.3C140.6 308.6 112 349 112 369C112 395 133.5 416 160 416C186.5 416 208 395 208 369H208zM303.6 208C303.6 225.7 317.1 240 335.6 240C353.3 240 367.6 225.7 367.6 208C367.6 190.3 353.3 176 335.6 176C317.1 176 303.6 190.3 303.6 208zM207.6 208C207.6 190.3 193.3 176 175.6 176C157.1 176 143.6 190.3 143.6 208C143.6 225.7 157.1 240 175.6 240C193.3 240 207.6 225.7 207.6 208z" />
</svg>`;
  var ut = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"/></svg>';
  var pt = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256.3 331.8C208.9 331.8 164.1 324.9 124.5 312.8C112.2 309 100.2 319.7 105.2 331.5C130.1 390.6 188.4 432 256.3 432C324.2 432 382.4 390.6 407.4 331.5C412.4 319.7 400.4 309 388.1 312.8C348.4 324.9 303.7 331.8 256.3 331.8H256.3zM176.4 176C158.7 176 144.4 190.3 144.4 208C144.4 225.7 158.7 240 176.4 240C194 240 208.4 225.7 208.4 208C208.4 190.3 194 176 176.4 176zM336.4 240C354 240 368.4 225.7 368.4 208C368.4 190.3 354 176 336.4 176C318.7 176 304.4 190.3 304.4 208C304.4 225.7 318.7 240 336.4 240z"/></svg>';
  var gt = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"/></svg>';
  var yt = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M413.8 447.1L256 448l0 31.99C256 497.7 241.8 512 224.1 512c-17.67 0-32.1-14.32-32.1-31.99l0-31.99l-158.9-.0099c-28.5 0-43.69-34.49-24.69-56.4l68.98-79.59H62.22c-25.41 0-39.15-29.8-22.67-49.13l60.41-70.85H89.21c-21.28 0-32.87-22.5-19.28-37.31l134.8-146.5c10.4-11.3 28.22-11.3 38.62-.0033l134.9 146.5c13.62 14.81 2.001 37.31-19.28 37.31h-10.77l60.35 70.86c16.46 19.34 2.716 49.12-22.68 49.12h-15.2l68.98 79.59C458.7 413.7 443.1 447.1 413.8 447.1z"/></svg>';
  var ft = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M224 256c70.7 0 128-57.31 128-128S294.7 0 224 0C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3c-95.73 0-173.3 77.6-173.3 173.3C0 496.5 15.52 512 34.66 512H413.3C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304zM479.1 320h-73.85C451.2 357.7 480 414.1 480 477.3C480 490.1 476.2 501.9 470 512h138C625.7 512 640 497.6 640 479.1C640 391.6 568.4 320 479.1 320zM432 256C493.9 256 544 205.9 544 144S493.9 32 432 32c-25.11 0-48.04 8.555-66.72 22.51C376.8 76.63 384 101.4 384 128c0 35.52-11.93 68.14-31.59 94.71C372.7 243.2 400.8 256 432 256z"/></svg>';
  var vt = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <defs>
    <radialGradient id="radial" cy="85%">
      <stop offset="20%" stop-color="var(--color-secondary)" />
      <stop offset="100%" stop-color="var(--color-primary)" />
    </radialGradient>
  </defs>
  <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path fill="url('#radial')" d="M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z" />
</svg>`;
  var wt = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>';
  function bt(s, e) {
    const t = Q(e);
    return t.dataset.icon = s, t.classList.add(ne("icon")), t;
  }
  var ge = {
    clock: it,
    flag: rt,
    frown: at,
    gamepad: nt,
    lightbulb: ct,
    mug: lt,
    plane: ht,
    robot: dt,
    sad: mt,
    search: ut,
    smiley: pt,
    symbols: gt,
    tree: yt,
    users: ft,
    warning: vt,
    xmark: wt
  };
  var O = {
    recents: "clock",
    "smileys-emotion": "smiley",
    "people-body": "users",
    "animals-nature": "tree",
    "food-drink": "mug",
    activities: "gamepad",
    "travel-places": "plane",
    objects: "lightbulb",
    symbols: "symbols",
    flags: "flag",
    custom: "robot"
  };
  function Pe(s, e) {
    if (!(s in ge))
      return console.warn(`Unknown icon: "${s}"`), document.createElement("div");
    const t = bt(s, ge[s]);
    return e && t.classList.add(ne(`icon-${e}`)), t;
  }
  var Ct = {
    mode: "sync"
  };
  var b;
  var E;
  var S;
  var X;
  var F;
  var ee;
  var P;
  var te;
  var u = class {
    constructor(e, t = {}) {
      f(this, S);
      f(this, F);
      f(this, P);
      f(this, b, void 0);
      f(this, E, void 0);
      A(this, b, e), A(this, E, t.mode || Ct.mode);
    }
    renderSync(e = {}) {
      const t = Q(y(this, b).call(this, e));
      return g(this, P, te).call(this, t, e), g(this, F, ee).call(this, t), g(this, S, X).call(this, t, e), t;
    }
    async renderAsync(e = {}) {
      const t = Q(y(this, b).call(this, e));
      return g(this, P, te).call(this, t, e), g(this, F, ee).call(this, t), await g(this, S, X).call(this, t, e), t;
    }
    render(e) {
      return y(this, E) === "sync" ? this.renderSync(e) : this.renderAsync(e);
    }
  };
  b = /* @__PURE__ */ new WeakMap(), E = /* @__PURE__ */ new WeakMap(), S = /* @__PURE__ */ new WeakSet(), X = async function(e, t) {
    const o = e.querySelectorAll("[data-view]"), i = [];
    for (const r of o) {
      const a = t[r.dataset.view];
      a ? r.dataset.render !== "sync" ? i.push(a.render().then((n) => (r.replaceWith(n), n))) : r.replaceWith(a.renderSync()) : r.remove();
    }
    return Promise.all(i);
  }, F = /* @__PURE__ */ new WeakSet(), ee = function(e) {
    e.querySelectorAll("i[data-icon]").forEach((o) => {
      const { icon: i, size: r } = o.dataset;
      o.replaceWith(Pe(i, r));
    });
  }, P = /* @__PURE__ */ new WeakSet(), te = function(e, t) {
    return e.querySelectorAll("[data-placeholder]").forEach((i) => {
      const r = i.dataset.placeholder;
      if (r && t[r]) {
        const a = t[r];
        i.replaceWith(...[a].flat());
      } else
        console.warn(`Missing placeholder element for key "${r}"`);
    }), e;
  };
  var jt = p(
    "imagePlaceholder",
    "placeholder"
  );
  var _t = new u(({ classes: s }) => `
  <div class="${s.placeholder} ${s.imagePlaceholder}"></div>
`);
  var kt = class extends c {
    constructor({ classNames: e } = {}) {
      super({ template: _t, classes: jt }), this.classNames = e;
    }
    load(e) {
      const t = document.createElement("img");
      this.classNames && (t.className = this.classNames), t.addEventListener("load", () => {
        this.el.replaceWith(t);
      }, { once: true }), Promise.resolve(e).then((o) => t.src = o);
    }
    renderSync() {
      return super.renderSync(), this.classNames && this.classNames.split(" ").forEach((t) => this.el.classList.add(t)), this.el;
    }
  };
  var xt = p("customEmoji");
  var Et = class {
    renderElement(e) {
      return { content: e };
    }
    renderImage(e = "", t) {
      const o = new kt({ classNames: e });
      return o.renderSync(), { content: o, resolver: () => (o.load(t()), o.el) };
    }
    doRender(e, t, o) {
      if (e.custom)
        return this.renderCustom(e, t, o);
      const { content: i, resolver: r } = this.render(e, o), a = i instanceof Element ? i : i.el;
      return r && r(), a;
    }
    doEmit(e) {
      return e.custom ? this.emitCustom(e) : this.emit(e);
    }
    emitCustom({ url: e, label: t, emoji: o, data: i }) {
      return { url: e, label: t, emoji: o, data: i };
    }
    renderCustom(e, t, o = "") {
      const i = [xt.customEmoji, o].join(" ").trim(), { content: r, resolver: a } = this.renderImage(i, () => e.url), n = r instanceof Element ? r : r.el;
      return a && a(), n;
    }
  };
  var St = new u(({ emoji: s }) => `<span>${s}</span>`);
  var Ft = class extends Et {
    render(e) {
      return this.renderElement(St.renderSync({ emoji: e.emoji }));
    }
    emit({ emoji: e, hexcode: t, label: o }) {
      return { emoji: e, hexcode: t, label: o };
    }
  };
  var ze = {
    "categories.activities": "Activities",
    "categories.animals-nature": "Animals & Nature",
    "categories.custom": "Custom",
    "categories.flags": "Flags",
    "categories.food-drink": "Food & Drink",
    "categories.objects": "Objects",
    "categories.people-body": "People & Body",
    "categories.recents": "Recently Used",
    "categories.smileys-emotion": "Smileys & Emotion",
    "categories.symbols": "Symbols",
    "categories.travel-places": "Travel & Places",
    "error.load": "Failed to load emojis",
    "recents.clear": "Clear recent emojis",
    "recents.none": "You haven't selected any emojis yet.",
    retry: "Try again",
    "search.clear": "Clear search",
    "search.error": "Failed to search emojis",
    "search.notFound": "No results found",
    search: "Search emojis..."
  };
  var se = "PicMo";
  function Le(s) {
    return new Pt(s);
  }
  Le.deleteDatabase = (s) => new Promise((e, t) => {
    const o = indexedDB.deleteDatabase(`${se}-${s}`);
    o.addEventListener("success", e), o.addEventListener("error", t);
  });
  var Pt = class extends Ee {
    async open() {
      const e = indexedDB.open(`${se}-${this.locale}`);
      return new Promise((t, o) => {
        e.addEventListener("success", (i) => {
          var r;
          this.db = (r = i.target) == null ? void 0 : r.result, t();
        }), e.addEventListener("error", o), e.addEventListener("upgradeneeded", async (i) => {
          var a;
          this.db = (a = i.target) == null ? void 0 : a.result, this.db.createObjectStore("category", { keyPath: "order" });
          const r = this.db.createObjectStore("emoji", { keyPath: "emoji" });
          r.createIndex("category", "group"), r.createIndex("version", "version"), this.db.createObjectStore("meta");
        });
      });
    }
    async delete() {
      this.close();
      const e = indexedDB.deleteDatabase(`${se}-${this.locale}`);
      await this.waitForRequest(e);
    }
    close() {
      this.db.close();
    }
    async getEmojiCount() {
      const t = this.db.transaction("emoji", "readonly").objectStore("emoji");
      return (await this.waitForRequest(t.count())).target.result;
    }
    async getEtags() {
      const t = this.db.transaction("meta", "readonly").objectStore("meta"), [o, i] = await Promise.all([
        this.waitForRequest(t.get("emojisEtag")),
        this.waitForRequest(t.get("messagesEtag"))
      ]);
      return {
        storedEmojisEtag: o.target.result,
        storedMessagesEtag: i.target.result
      };
    }
    async setMeta(e) {
      const t = this.db.transaction("meta", "readwrite"), o = t.objectStore("meta");
      return new Promise((i) => {
        t.oncomplete = i, Object.keys(e).filter(Boolean).forEach((a) => {
          o.put(e[a], a);
        });
      });
    }
    async getHash() {
      const t = this.db.transaction("meta", "readonly").objectStore("meta");
      return (await this.waitForRequest(t.get("hash"))).target.result;
    }
    async isPopulated() {
      const t = this.db.transaction("category", "readonly").objectStore("category");
      return (await this.waitForRequest(t.count())).target.result > 0;
    }
    async populate({
      groups: e,
      emojis: t,
      emojisEtag: o,
      messagesEtag: i,
      hash: r
    }) {
      await this.removeAllObjects("category", "emoji");
      const a = [
        this.addObjects("category", e),
        this.addObjects("emoji", t),
        this.setMeta({ emojisEtag: o, messagesEtag: i, hash: r })
      ];
      await Promise.all(a);
    }
    async getCategories(e) {
      var a;
      const o = this.db.transaction("category", "readonly").objectStore("category");
      let r = (await this.waitForRequest(o.getAll())).target.result.filter((n) => n.key !== "component");
      if (e.showRecents && r.unshift({ key: "recents", order: -1 }), (a = e.custom) != null && a.length && r.push({ key: "custom", order: 10 }), e.categories) {
        const n = e.categories;
        r = r.filter((l) => n.includes(l.key)), r.sort((l, m) => n.indexOf(l.key) - n.indexOf(m.key));
      } else
        r.sort((n, l) => n.order - l.order);
      return r;
    }
    async getEmojis(e, t) {
      const r = this.db.transaction("emoji", "readonly").objectStore("emoji").index("category"), l = (await this.waitForRequest(r.getAll(e.order))).target.result.filter((m) => m.version <= t).sort((m, d) => m.order != null && d.order != null ? m.order - d.order : 0).map(x);
      return N(l, t);
    }
    async searchEmojis(e, t, o, i) {
      const r = [];
      return new Promise((a, n) => {
        const d = this.db.transaction("emoji", "readonly").objectStore("emoji").openCursor();
        d.addEventListener("success", (h) => {
          var de;
          const H = (de = h.target) == null ? void 0 : de.result;
          if (!H)
            return a([
              ...N(r, o),
              ...t.filter((Me) => B(Me, e))
            ]);
          const K = H.value;
          B(K, e, i) && K.version <= o && r.push(x(K)), H.continue();
        }), d.addEventListener("error", (h) => {
          n(h);
        });
      });
    }
    async waitForRequest(e) {
      return new Promise((t, o) => {
        e.onsuccess = t, e.onerror = o;
      });
    }
    withTransaction(e, t = "readwrite", o) {
      return new Promise((i, r) => {
        const a = this.db.transaction(e, t);
        a.oncomplete = i, a.onerror = r, o(a);
      });
    }
    async removeAllObjects(...e) {
      const t = this.db.transaction(e, "readwrite"), o = e.map((i) => t.objectStore(i));
      await Promise.all(o.map((i) => this.waitForRequest(i.clear())));
    }
    async addObjects(e, t) {
      return this.withTransaction(e, "readwrite", (o) => {
        const i = o.objectStore(e);
        t.forEach((r) => {
          i.add(r);
        });
      });
    }
  };
  function $e() {
    let s = {};
    return {
      getItem: (e) => s[e],
      setItem: (e, t) => s[e] = t,
      length: Object.keys(s).length,
      clear: () => s = {},
      key: (e) => Object.keys(s)[e],
      removeItem: (e) => delete s[e]
    };
  }
  var Ae = class {
  };
  var G = "PicMo:recents";
  var Ie = class extends Ae {
    constructor(e) {
      super(), this.storage = e;
    }
    clear() {
      this.storage.removeItem(G);
    }
    getRecents(e) {
      var t;
      try {
        return JSON.parse((t = this.storage.getItem(G)) != null ? t : "[]").slice(0, e);
      } catch (e2) {
        return [];
      }
    }
    addOrUpdateRecent(e, t) {
      const o = [
        e,
        ...this.getRecents(t).filter((i) => i.hexcode !== e.hexcode)
      ].slice(0, t);
      try {
        this.storage.setItem(G, JSON.stringify(o));
      } catch (e2) {
        console.warn("storage is not available, recent emojis will not be saved");
      }
    }
  };
  var zt = class extends Ie {
    constructor() {
      super(qe() ? localStorage : $e());
    }
  };
  var Lt = {
    dataStore: Le,
    theme: ot,
    animate: true,
    showCategoryTabs: true,
    showPreview: true,
    showRecents: true,
    showSearch: true,
    showVariants: true,
    emojisPerRow: 8,
    visibleRows: 6,
    emojiVersion: "auto",
    i18n: ze,
    locale: "en",
    maxRecents: 50,
    custom: []
  };
  function $t(s = {}) {
    return __spreadProps(__spreadValues(__spreadValues({}, Lt), s), {
      renderer: s.renderer || new Ft(),
      recentsProvider: s.recentsProvider || new zt()
    });
  }
  var v;
  var C;
  var D;
  var z;
  var oe;
  var le = class {
    constructor() {
      f(this, C);
      f(this, z);
      f(this, v, /* @__PURE__ */ new Map());
    }
    on(e, t, o) {
      g(this, z, oe).call(this, e, t, o);
    }
    once(e, t, o) {
      g(this, z, oe).call(this, e, t, o, true);
    }
    off(e, t) {
      const o = g(this, C, D).call(this, e);
      y(this, v).set(e, o.filter((i) => i.handler !== t));
    }
    emit(e, ...t) {
      g(this, C, D).call(this, e).forEach((i) => {
        i.handler.apply(i.context, t), i.once && this.off(e, i.handler);
      });
    }
    removeAll() {
      y(this, v).clear();
    }
  };
  v = /* @__PURE__ */ new WeakMap(), C = /* @__PURE__ */ new WeakSet(), D = function(e) {
    return y(this, v).has(e) || y(this, v).set(e, []), y(this, v).get(e);
  }, z = /* @__PURE__ */ new WeakSet(), oe = function(e, t, o, i = false) {
    g(this, C, D).call(this, e).push({ context: o, handler: t, once: i });
  };
  var At = {
    injectStyles: true
  };
  var It = class extends le {
  };
  var Tt = class extends le {
  };
  var ie = p(
    "emojiCategory",
    "categoryName",
    "noRecents",
    "recentEmojis"
  );
  var he = class extends c {
    constructor({ template: e, category: t, showVariants: o, lazyLoader: i }) {
      super({ template: e, classes: ie }), this.baseUIElements = {
        categoryName: c.byClass(ie.categoryName)
      }, this.category = t, this.showVariants = o, this.lazyLoader = i;
    }
    setActive(e, t, o) {
      this.emojiContainer.setActive(e, t, o);
    }
  };
  var Rt = new u(({ classes: s, emoji: e }) => `
  <button
    type="button"
    class="${s.emojiButton}"
    title="${e.label}"
    data-emoji="${e.emoji}"
    tabindex="-1">
    <div data-placeholder="emojiContent"></div>
  </button>
`);
  var Mt = p("emojiButton");
  var Te = class extends c {
    constructor({ emoji: e, lazyLoader: t, category: o }) {
      super({ template: Rt, classes: Mt }), this.emoji = e, this.lazyLoader = t, this.category = o;
    }
    initialize() {
      this.uiEvents = [
        c.uiEvent("focus", this.handleFocus)
      ], super.initialize();
    }
    handleFocus() {
      this.category && this.events.emit("focus:change", this.category);
    }
    activateFocus(e) {
      this.el.tabIndex = 0, e && this.el.focus();
    }
    deactivateFocus() {
      this.el.tabIndex = -1;
    }
    renderSync() {
      return super.renderSync({
        emoji: this.emoji,
        emojiContent: this.renderer.doRender(this.emoji, this.lazyLoader)
      });
    }
  };
  var Vt = class {
    constructor(e, t, o = 0, i = 0, r = false) {
      this.events = new le(), this.keyHandlers = {
        ArrowLeft: this.focusPrevious.bind(this),
        ArrowRight: this.focusNext.bind(this),
        ArrowUp: this.focusUp.bind(this),
        ArrowDown: this.focusDown.bind(this)
      }, this.rowCount = Math.ceil(t / e), this.columnCount = e, this.focusedRow = o, this.focusedColumn = i, this.emojiCount = t, this.wrap = r, this.handleKeyDown = this.handleKeyDown.bind(this);
    }
    destroy() {
      this.events.removeAll();
    }
    on(e, t) {
      this.events.on(e, t);
    }
    handleKeyDown(e) {
      e.key in this.keyHandlers && (e.preventDefault(), this.keyHandlers[e.key]());
    }
    setCell(e, t, o = true) {
      const i = this.getIndex();
      this.focusedRow = e, t !== void 0 && (this.focusedColumn = Math.min(this.columnCount, t)), (this.focusedRow >= this.rowCount || this.getIndex() >= this.emojiCount) && (this.focusedRow = this.rowCount - 1, this.focusedColumn = this.emojiCount % this.columnCount - 1), this.events.emit("focus:change", { from: i, to: this.getIndex(), performFocus: o });
    }
    setFocusedIndex(e, t = true) {
      const o = Math.floor(e / this.columnCount), i = e % this.columnCount;
      this.setCell(o, i, t);
    }
    focusNext() {
      this.focusedColumn < this.columnCount - 1 && this.getIndex() < this.emojiCount - 1 ? this.setCell(this.focusedRow, this.focusedColumn + 1) : this.focusedRow < this.rowCount - 1 ? this.setCell(this.focusedRow + 1, 0) : this.wrap ? this.setCell(0, 0) : this.events.emit("focus:overflow", 0);
    }
    focusPrevious() {
      this.focusedColumn > 0 ? this.setCell(this.focusedRow, this.focusedColumn - 1) : this.focusedRow > 0 ? this.setCell(this.focusedRow - 1, this.columnCount - 1) : this.wrap ? this.setCell(this.rowCount - 1, this.columnCount - 1) : this.events.emit("focus:underflow", this.columnCount - 1);
    }
    focusUp() {
      this.focusedRow > 0 ? this.setCell(this.focusedRow - 1, this.focusedColumn) : this.events.emit("focus:underflow", this.focusedColumn);
    }
    focusDown() {
      this.focusedRow < this.rowCount - 1 ? this.setCell(this.focusedRow + 1, this.focusedColumn) : this.events.emit("focus:overflow", this.focusedColumn);
    }
    focusToIndex(e) {
      this.setCell(Math.floor(e / this.columnCount), e % this.columnCount);
    }
    getIndex() {
      return this.focusedRow * this.columnCount + this.focusedColumn;
    }
    getCell() {
      return { row: this.focusedRow, column: this.focusedColumn };
    }
    getRowCount() {
      return this.rowCount;
    }
  };
  var Dt = new u(({ classes: s }) => `
  <div class="${s.emojiContainer}">
    <div data-placeholder="emojis"></div>
  </div>
`);
  var Bt = p("emojiContainer");
  var $ = class extends c {
    constructor({ emojis: e, showVariants: t, preview: o = true, lazyLoader: i, category: r, fullHeight: a = false }) {
      super({ template: Dt, classes: Bt }), this.fullHeight = false, this.showVariants = t, this.lazyLoader = i, this.preview = o, this.emojis = e, this.category = r, this.fullHeight = a, this.setFocus = this.setFocus.bind(this), this.triggerNextCategory = this.triggerNextCategory.bind(this), this.triggerPreviousCategory = this.triggerPreviousCategory.bind(this);
    }
    initialize() {
      this.grid = new Vt(this.options.emojisPerRow, this.emojiCount, 0, 0, !this.category), this.grid.on("focus:change", this.setFocus), this.grid.on("focus:overflow", this.triggerNextCategory), this.grid.on("focus:underflow", this.triggerPreviousCategory), this.uiEvents = [
        c.uiEvent("click", this.selectEmoji),
        c.uiEvent("keydown", this.grid.handleKeyDown)
      ], this.preview && this.uiEvents.push(
        c.uiEvent("mouseover", this.showPreview),
        c.uiEvent("mouseout", this.hidePreview),
        c.uiEvent("focus", this.showPreview, { capture: true }),
        c.uiEvent("blur", this.hidePreview, { capture: true })
      ), super.initialize();
    }
    setFocusedView(e, t) {
      if (!!e)
        if (typeof e == "string") {
          const o = this.emojis.findIndex((i) => i.emoji === e);
          this.grid.setFocusedIndex(o, false), setTimeout(() => {
            var n, l, m, d;
            const i = this.emojiViews[o].el;
            i.scrollIntoView();
            const r = (n = i.parentElement) == null ? void 0 : n.previousElementSibling, a = (m = (l = i.parentElement) == null ? void 0 : l.parentElement) == null ? void 0 : m.parentElement;
            a.scrollTop -= (d = r == null ? void 0 : r.offsetHeight) != null ? d : 0;
          });
        } else
          e.row === "first" || e.row === 0 ? this.grid.setCell(0, e.offset, t) : e.row === "last" && this.grid.setCell(this.grid.getRowCount() - 1, e.offset, t);
    }
    setActive(e, t, o) {
      var i;
      e ? this.setFocusedView(t, o) : (i = this.emojiViews[this.grid.getIndex()]) == null || i.deactivateFocus();
    }
    renderSync() {
      return this.emojiViews = this.emojis.map(
        (e) => this.viewFactory.create(Te, {
          emoji: e,
          category: this.category,
          lazyLoader: this.lazyLoader,
          renderer: this.renderer
        })
      ), this.emojiElements = this.emojiViews.map((e) => e.renderSync()), super.renderSync({
        emojis: this.emojiElements,
        i18n: this.i18n
      });
    }
    destroy() {
      super.destroy(), this.emojiViews.forEach((e) => e.destroy()), this.grid.destroy();
    }
    triggerPreviousCategory(e) {
      this.events.emit("category:previous", e);
    }
    triggerNextCategory(e) {
      this.category && this.events.emit("category:next", e);
    }
    setFocus({ from: e, to: t, performFocus: o }) {
      var i, r;
      (i = this.emojiViews[e]) == null || i.deactivateFocus(), (r = this.emojiViews[t]) == null || r.activateFocus(o);
    }
    selectEmoji(e) {
      e.stopPropagation();
      const t = q(e, this.emojis);
      t && this.events.emit("emoji:select", {
        emoji: t,
        showVariants: this.showVariants
      });
    }
    showPreview(e) {
      const o = e.target.closest("button"), i = o == null ? void 0 : o.firstElementChild, r = q(e, this.emojis);
      r && this.events.emit("preview:show", r, i == null ? void 0 : i.cloneNode(true));
    }
    hidePreview(e) {
      q(e, this.emojis) && this.events.emit("preview:hide");
    }
    get emojiCount() {
      return this.emojis.length;
    }
  };
  var Nt = new u(({ classes: s, category: e, pickerId: t, icon: o, i18n: i }) => `
  <section class="${s.emojiCategory}" role="tabpanel" aria-labelledby="${t}-category-${e.key}">
    <h3 data-category="${e.key}" class="${s.categoryName}">
      <i data-icon="${o}"></i>
      ${i.get(`categories.${e.key}`, e.message || e.key)}
    </h3>
    <div data-view="emojis" data-render="sync"></div>
  </section>
`);
  var Ot = class extends he {
    constructor({ category: e, showVariants: t, lazyLoader: o, emojiVersion: i }) {
      super({ category: e, showVariants: t, lazyLoader: o, template: Nt }), this.showVariants = t, this.lazyLoader = o, this.emojiVersion = i;
    }
    initialize() {
      this.uiElements = __spreadValues({}, this.baseUIElements), super.initialize();
    }
    async render() {
      await this.emojiDataPromise;
      const e = await this.emojiData.getEmojis(this.category, this.emojiVersion);
      return this.emojiContainer = this.viewFactory.create($, {
        emojis: e,
        showVariants: this.showVariants,
        lazyLoader: this.lazyLoader,
        category: this.category.key
      }), super.render({
        category: this.category,
        emojis: this.emojiContainer,
        emojiCount: e.length,
        icon: O[this.category.key]
      });
    }
  };
  var Ht = class extends $ {
    constructor({ category: e, emojis: t, preview: o = true, lazyLoader: i }) {
      super({ category: e, emojis: t, showVariants: false, preview: o, lazyLoader: i });
    }
    async addOrUpdate(e) {
      const t = this.el.querySelector(`[data-emoji="${e.emoji}"]`);
      t && (this.el.removeChild(t), this.emojis = this.emojis.filter((i) => i !== e));
      const o = this.viewFactory.create(Te, { emoji: e });
      if (this.el.insertBefore(o.renderSync(), this.el.firstChild), this.emojis = [
        e,
        ...this.emojis.filter((i) => i !== e)
      ], this.emojis.length > this.options.maxRecents) {
        this.emojis = this.emojis.slice(0, this.options.maxRecents);
        const i = this.el.childElementCount - this.options.maxRecents;
        for (let r = 0; r < i; r++)
          this.el.lastElementChild && this.el.removeChild(this.el.lastElementChild);
      }
    }
  };
  var Kt = new u(({ emojiCount: s, classes: e, category: t, pickerId: o, icon: i, i18n: r }) => `
  <section class="${e.emojiCategory}" role="tabpanel" aria-labelledby="${o}-category-${t.key}">
    <h3 data-category="${t.key}" class="${e.categoryName}">
      <i data-icon="${i}"></i>
      ${r.get(`categories.${t.key}`, t.message || t.key)}
    </h3>
    <div data-empty="${s === 0}" class="${e.recentEmojis}">
      <div data-view="emojis" data-render="sync"></div>
    </div>
    <div class="${e.noRecents}">
      ${r.get("recents.none")}
    </div>
  </section>
`, { mode: "async" });
  var Ut = class extends he {
    constructor({ category: e, lazyLoader: t, provider: o }) {
      super({ category: e, showVariants: false, lazyLoader: t, template: Kt }), this.provider = o;
    }
    initialize() {
      this.uiElements = __spreadProps(__spreadValues({}, this.baseUIElements), {
        recents: c.byClass(ie.recentEmojis)
      }), this.appEvents = {
        "recent:add": this.addRecent
      }, super.initialize();
    }
    async addRecent(e) {
      await this.emojiContainer.addOrUpdate(e), this.ui.recents.dataset.empty = "false";
    }
    async render() {
      var t;
      const e = (t = this.provider) == null ? void 0 : t.getRecents(this.options.maxRecents);
      return this.emojiContainer = this.viewFactory.create(Ht, {
        emojis: e,
        showVariants: false,
        lazyLoader: this.lazyLoader,
        category: this.category.key
      }), await super.render({
        category: this.category,
        emojis: this.emojiContainer,
        emojiCount: e.length,
        icon: O[this.category.key]
      }), this.el;
    }
  };
  var qt = new u(({ classes: s, category: e, pickerId: t, icon: o, i18n: i }) => `
  <section class="${s.emojiCategory}" role="tabpanel" aria-labelledby="${t}-category-${e.key}">
    <h3 data-category="${e.key}" class="${s.categoryName}">
      <i data-icon="${o}"></i>
      ${i.get(`categories.${e.key}`, e.message || e.key)}
    </h3>
    <div data-view="emojis" data-render="sync"></div>
  </section>
`);
  var Wt = class extends he {
    constructor({ category: e, lazyLoader: t }) {
      super({ template: qt, showVariants: false, lazyLoader: t, category: e });
    }
    initialize() {
      this.uiElements = __spreadValues({}, this.baseUIElements), super.initialize();
    }
    async render() {
      return this.emojiContainer = this.viewFactory.create($, {
        emojis: this.customEmojis,
        showVariants: this.showVariants,
        lazyLoader: this.lazyLoader,
        category: this.category.key
      }), super.render({
        category: this.category,
        emojis: this.emojiContainer,
        emojiCount: this.customEmojis.length,
        icon: O[this.category.key]
      });
    }
  };
  var Re = class {
    constructor() {
      this.elements = /* @__PURE__ */ new Map();
    }
    lazyLoad(e, t) {
      return this.elements.set(e, t), e;
    }
    observe(e) {
      if (window.IntersectionObserver) {
        const t = new IntersectionObserver(
          (o) => {
            o.filter((i) => i.intersectionRatio > 0).map((i) => i.target).forEach((i) => {
              const r = this.elements.get(i);
              r == null || r(), t.unobserve(i);
            });
          },
          {
            root: e
          }
        );
        this.elements.forEach((o, i) => {
          t.observe(i);
        });
      } else
        this.elements.forEach((t) => {
          t();
        });
    }
  };
  var ye = p("emojiArea");
  var Gt = new u(({ classes: s }) => `
  <div class="${s.emojiArea}">
    <div data-placeholder="emojis"></div>
  </div>
`, { mode: "async" });
  var Jt = {
    recents: Ut,
    custom: Wt
  };
  function Zt(s) {
    return Jt[s.key] || Ot;
  }
  function Yt(s) {
    return !s || s === "button" ? {
      row: "first",
      offset: 0
    } : s;
  }
  var Qt = class extends c {
    constructor({ categoryTabs: e, categories: t, emojiVersion: o }) {
      super({ template: Gt, classes: ye }), this.selectedCategory = 0, this.scrollListenerState = "active", this.lazyLoader = new Re(), this.categoryTabs = e, this.categories = t, this.emojiVersion = o, this.handleScroll = He(this.handleScroll.bind(this), 100);
    }
    initialize() {
      this.appEvents = {
        "category:select": this.handleCategorySelect,
        "category:previous": this.focusPreviousCategory,
        "category:next": this.focusNextCategory,
        "focus:change": this.updateFocusedCategory
      }, this.uiElements = { emojis: c.byClass(ye.emojiArea) }, this.uiEvents = [c.uiEvent("scroll", this.handleScroll)], super.initialize();
    }
    get focusableEmoji() {
      return this.el.querySelector('[tabindex="0"]');
    }
    async render() {
      this.emojiCategories = this.categories.map(this.createCategory, this);
      const e = {};
      return this.categories.forEach((t, o) => {
        e[`emojis-${t.key}`] = this.emojiCategories[o];
      }), await super.render({
        emojis: await Promise.all(this.emojiCategories.map((t) => t.render()))
      }), this.lazyLoader.observe(this.el), this.el;
    }
    destroy() {
      super.destroy(), this.emojiCategories.forEach((e) => {
        var t;
        (t = this.observer) == null || t.unobserve(e.el), e.destroy();
      });
    }
    handleCategorySelect(e, t) {
      this.el.style.overflow = "hidden", this.selectCategory(e, t), this.el.style.overflow = "auto";
    }
    createCategory(e) {
      const t = Zt(e);
      return this.viewFactory.create(t, {
        category: e,
        showVariants: true,
        lazyLoader: this.lazyLoader,
        emojiVersion: this.emojiVersion,
        provider: this.options.recentsProvider
      });
    }
    determineInitialCategory() {
      var e;
      return this.options.initialCategory && this.categories.find((t) => t.key === this.options.initialCategory) ? this.options.initialCategory : (e = this.categories.find((t) => t.key !== "recents")) == null ? void 0 : e.key;
    }
    determineFocusTarget(e) {
      const t = this.emojiCategories.find((o) => o.category.key === e);
      return this.options.initialEmoji && (t == null ? void 0 : t.el.querySelector(`[data-emoji="${this.options.initialEmoji}"]`)) ? this.options.initialEmoji : "button";
    }
    reset(e = true) {
      this.events.emit("preview:hide");
      const t = this.determineInitialCategory();
      t && (this.selectCategory(t, {
        focus: this.determineFocusTarget(t),
        performFocus: e,
        scroll: "jump"
      }), this.selectedCategory = this.getCategoryIndex(t));
    }
    getCategoryIndex(e) {
      return this.categories.findIndex((t) => t.key === e);
    }
    focusPreviousCategory(e) {
      this.selectedCategory > 0 && this.focusCategory(this.selectedCategory - 1, { row: "last", offset: e != null ? e : this.options.emojisPerRow });
    }
    focusNextCategory(e) {
      this.selectedCategory < this.categories.length - 1 && this.focusCategory(this.selectedCategory + 1, { row: "first", offset: e != null ? e : 0 });
    }
    focusCategory(e, t) {
      this.selectCategory(e, {
        focus: t,
        performFocus: true
      });
    }
    async selectCategory(e, t = {}) {
      var l;
      this.scrollListenerState = "suspend";
      const { focus: o, performFocus: i, scroll: r } = __spreadValues({
        performFocus: false
      }, t);
      this.emojiCategories[this.selectedCategory].setActive(false);
      const a = this.selectedCategory = typeof e == "number" ? e : this.getCategoryIndex(e);
      (l = this.categoryTabs) == null || l.setActiveTab(this.selectedCategory, {
        performFocus: i,
        scroll: o === "button"
      });
      const n = this.emojiCategories[a].el.offsetTop;
      this.emojiCategories[a].setActive(true, Yt(o), o !== "button" && i), r && (this.el.scrollTop = n), this.scrollListenerState = "resume";
    }
    updateFocusedCategory(e) {
      var t;
      this.categories[this.selectedCategory].key !== e && (this.scrollListenerState = "suspend", this.selectedCategory = this.getCategoryIndex(e), (t = this.categoryTabs) == null || t.setActiveTab(this.selectedCategory, {
        changeFocusable: false,
        performFocus: false
      }), this.scrollListenerState = "resume");
    }
    handleScroll() {
      if (this.scrollListenerState === "suspend" || !this.categoryTabs)
        return;
      if (this.scrollListenerState === "resume") {
        this.scrollListenerState = "active";
        return;
      }
      const e = this.el.scrollTop, t = this.el.scrollHeight - this.el.offsetHeight, o = this.emojiCategories.findIndex((r, a) => {
        var n;
        return e < ((n = this.emojiCategories[a + 1]) == null ? void 0 : n.el.offsetTop);
      }), i = {
        changeFocusable: false,
        performFocus: false,
        scroll: false
      };
      e === 0 ? this.categoryTabs.setActiveTab(0, i) : Math.floor(e) === Math.floor(t) || o < 0 ? this.categoryTabs.setActiveTab(this.categories.length - 1, i) : this.categoryTabs.setActiveTab(o, i);
    }
  };
  var Xt = new u(({ classList: s, classes: e, icon: t, message: o }) => `
<div class="${s}" role="alert">
  <div class="${e.iconContainer}"><i data-size="10x" data-icon="${t}"></i></div>
  <h3 class="${e.title}">${o}</h3>
</div>
`);
  var fe = p("error", "iconContainer", "title");
  var re = class extends c {
    constructor({ message: e, icon: t = "warning", template: o = Xt, className: i }) {
      super({ template: o, classes: fe }), this.message = e, this.icon = t, this.className = i;
    }
    renderSync() {
      const e = [fe.error, this.className].join(" ").trim();
      return super.renderSync({ message: this.message, icon: this.icon, classList: e });
    }
  };
  var es = new u(({ classList: s, classes: e, icon: t, i18n: o, message: i }) => `
  <div class="${s}" role="alert">
    <div class="${e.icon}"><i data-size="10x" data-icon="${t}"></i></div>
    <h3 class="${e.title}">${i}</h3>
    <button type="button">${o.get("retry")}</button>
  </div>
`);
  var ts = p("dataError");
  var ss = class extends re {
    constructor({ message: e }) {
      super({ message: e, template: es, className: ts.dataError });
    }
    initialize() {
      this.uiElements = { retryButton: "button" }, this.uiEvents = [c.childEvent("retryButton", "click", this.onRetry)], super.initialize();
    }
    async onRetry() {
      this.emojiData ? await this.emojiData.delete() : await this.options.dataStore.deleteDatabase(this.options.locale), this.events.emit("reinitialize");
      const e = await ce(this.options.locale, this.options.dataStore, this.options.messages, this.options.emojiData, this.emojiData);
      this.viewFactory.setEmojiData(e), this.events.emit("data:ready", e);
    }
  };
  var j = p(
    "preview",
    "previewEmoji",
    "previewName",
    "tagList",
    "tag"
  );
  var os = new u(({ classes: s, tag: e }) => `
  <li class="${s.tag}">${e}</li>
`);
  var is = new u(({ classes: s }) => `
  <div class="${s.preview}">
    <div class="${s.previewEmoji}"></div>
    <div class="${s.previewName}"></div>
    <ul class="${s.tagList}"></ul>
  </div>
`);
  var rs = class extends c {
    constructor() {
      super({ template: is, classes: j });
    }
    initialize() {
      this.uiElements = {
        emoji: c.byClass(j.previewEmoji),
        name: c.byClass(j.previewName),
        tagList: c.byClass(j.tagList)
      }, this.appEvents = {
        "preview:show": this.showPreview,
        "preview:hide": this.hidePreview
      }, super.initialize();
    }
    showPreview(e, t) {
      if (w(this.ui.emoji, t), this.ui.name.textContent = e.label, e.tags) {
        this.ui.tagList.style.display = "flex";
        const o = e.tags.map((i) => os.renderSync({ tag: i, classes: j }));
        w(this.ui.tagList, ...o);
      }
    }
    hidePreview() {
      V(this.ui.emoji), V(this.ui.name), V(this.ui.tagList);
    }
  };
  var as = new u(({ classes: s, i18n: e }) => `
  <button title="${e.get("search.clear")}" class="${s.clearSearchButton}">
    <i data-icon="xmark"></i>
  </button>
`);
  var ns = new u(({ classes: s, i18n: e }) => `
<div class="${s.searchContainer}">
  <input class="${s.searchField}" placeholder="${e.get("search")}">
  <span class="${s.searchAccessory}"></span>
</div>
`, { mode: "async" });
  var _ = p(
    "searchContainer",
    "searchField",
    "clearButton",
    "searchAccessory",
    "clearSearchButton",
    "notFound"
  );
  var cs = class extends c {
    constructor({ categories: e, emojiVersion: t }) {
      super({ template: ns, classes: _ }), this.categories = e.filter((o) => o.key !== "recents"), this.emojiVersion = t, this.search = Ke(this.search.bind(this), 100);
    }
    initialize() {
      this.uiElements = {
        searchField: c.byClass(_.searchField),
        searchAccessory: c.byClass(_.searchAccessory)
      }, this.uiEvents = [
        c.childEvent("searchField", "keydown", this.onKeyDown),
        c.childEvent("searchField", "input", this.onSearchInput)
      ], super.initialize();
    }
    async render() {
      return await super.render(), this.searchIcon = Pe("search"), this.notFoundMessage = this.viewFactory.create(re, {
        message: this.i18n.get("search.notFound"),
        className: _.notFound,
        icon: "sad"
      }), this.notFoundMessage.renderSync(), this.errorMessage = this.viewFactory.create(re, { message: this.i18n.get("search.error") }), this.errorMessage.renderSync(), this.clearSearchButton = as.render({
        classes: _,
        i18n: this.i18n
      }), this.clearSearchButton.addEventListener("click", (e) => this.onClearSearch(e)), this.searchField = this.ui.searchField, this.showSearchIcon(), this.el;
    }
    showSearchIcon() {
      this.showSearchAccessory(this.searchIcon);
    }
    showClearSearchButton() {
      this.showSearchAccessory(this.clearSearchButton);
    }
    showSearchAccessory(e) {
      w(this.ui.searchAccessory, e);
    }
    clear() {
      this.searchField.value = "", this.showSearchIcon();
    }
    focus() {
      this.searchField.focus();
    }
    onClearSearch(e) {
      var t;
      e.stopPropagation(), this.searchField.value = "", (t = this.resultsContainer) == null || t.destroy(), this.resultsContainer = null, this.showSearchIcon(), this.events.emit("content:show"), this.searchField.focus();
    }
    handleResultsKeydown(e) {
      this.resultsContainer && e.key === "Escape" && this.onClearSearch(e);
    }
    onKeyDown(e) {
      var t;
      e.key === "Escape" && this.searchField.value ? this.onClearSearch(e) : (e.key === "Enter" || e.key === "ArrowDown") && this.resultsContainer && (e.preventDefault(), (t = this.resultsContainer.el.querySelector('[tabindex="0"]')) == null || t.focus());
    }
    onSearchInput(e) {
      this.searchField.value ? (this.showClearSearchButton(), this.search()) : this.onClearSearch(e);
    }
    async search() {
      var e;
      if (!!this.searchField.value)
        try {
          const t = await this.emojiData.searchEmojis(
            this.searchField.value,
            this.customEmojis,
            this.emojiVersion,
            this.categories
          );
          if (this.events.emit("preview:hide"), t.length) {
            const o = new Re();
            this.resultsContainer = this.viewFactory.create($, {
              emojis: t,
              fullHeight: true,
              showVariants: true,
              lazyLoader: o
            }), this.resultsContainer.renderSync(), (e = this.resultsContainer) != null && e.el && (o.observe(this.resultsContainer.el), this.resultsContainer.setActive(true, { row: 0, offset: 0 }, false), this.resultsContainer.el.addEventListener("keydown", (i) => this.handleResultsKeydown(i)), this.events.emit("content:show", this.resultsContainer));
          } else
            this.events.emit("content:show", this.notFoundMessage);
        } catch (e2) {
          this.events.emit("content:show", this.errorMessage);
        }
    }
  };
  var ls = new u(({ classes: s }) => `
  <div class="${s.variantOverlay}">
    <div class="${s.variantPopup}">
      <div data-view="emojis" data-render="sync"></div>
    </div>
  </div>
`);
  var ve = p(
    "variantOverlay",
    "variantPopup"
  );
  var J = {
    easing: "ease-in-out",
    duration: 250,
    fill: "both"
  };
  var we = {
    opacity: [0, 1]
  };
  var be = {
    opacity: [0, 1],
    transform: ["scale3d(0.8, 0.8, 0.8)", "scale3d(1, 1, 1)"]
  };
  var hs = class extends c {
    constructor({ emoji: e, parent: t }) {
      super({ template: ls, classes: ve, parent: t }), this.focusedEmojiIndex = 0, this.focusTrap = new st(), this.animateShow = () => Promise.all([
        I(this.el, we, J, this.options),
        I(this.ui.popup, be, J, this.options)
      ]), this.emoji = e;
    }
    initialize() {
      this.uiElements = {
        popup: c.byClass(ve.variantPopup)
      }, this.uiEvents = [
        c.uiEvent("click", this.handleClick),
        c.uiEvent("keydown", this.handleKeydown)
      ], super.initialize();
    }
    animateHide() {
      const e = __spreadProps(__spreadValues({}, J), { direction: "reverse" });
      return Promise.all([
        I(this.el, we, e, this.options),
        I(this.ui.popup, be, e, this.options)
      ]);
    }
    async hide() {
      await this.animateHide(), this.events.emit("variantPopup:hide");
    }
    handleKeydown(e) {
      e.key === "Escape" && (this.hide(), e.stopPropagation());
    }
    handleClick(e) {
      this.ui.popup.contains(e.target) || this.hide();
    }
    getEmoji(e) {
      return this.renderedEmojis[e];
    }
    setFocusedEmoji(e) {
      const t = this.getEmoji(this.focusedEmojiIndex);
      t.tabIndex = -1, this.focusedEmojiIndex = e;
      const o = this.getEmoji(this.focusedEmojiIndex);
      o.tabIndex = 0, o.focus();
    }
    destroy() {
      this.emojiContainer.destroy(), this.focusTrap.deactivate(), super.destroy();
    }
    renderSync() {
      const e = __spreadProps(__spreadValues({}, this.emoji), {
        skins: null
      }), t = (this.emoji.skins || []).map((i) => __spreadProps(__spreadValues({}, i), {
        label: this.emoji.label,
        tags: this.emoji.tags
      })), o = [e, ...t];
      return this.emojiContainer = this.viewFactory.create($, {
        emojis: o,
        preview: false
      }), super.renderSync({ emojis: this.emojiContainer }), o.length < this.options.emojisPerRow && this.el.style.setProperty("--emojis-per-row", o.length.toString()), this.el;
    }
    activate() {
      this.emojiContainer.setActive(true, { row: 0, offset: 0 }, true), this.focusTrap.activate(this.el);
    }
  };
  var ds = new u(({ classes: s, i18n: e, category: t, pickerId: o, icon: i }) => `
<li class="${s.categoryTab}">
  <button
    aria-selected="false"
    role="tab"
    class="${s.categoryButton}"
    tabindex="-1"
    title="${e.get(`categories.${t.key}`, t.message || t.key)}"
    type="button"
    data-category="${t.key}"
    id="${o}-category-${t.key}"
  >
    <i data-icon="${i}"></i>
</li>
`);
  var Z = p(
    "categoryTab",
    "categoryTabActive",
    "categoryButton"
  );
  var ms = class extends c {
    constructor({ category: e, icon: t }) {
      super({ template: ds, classes: Z }), this.isActive = false, this.category = e, this.icon = t;
    }
    initialize() {
      this.uiElements = {
        button: c.byClass(Z.categoryButton)
      }, this.uiEvents = [
        c.childEvent("button", "click", this.selectCategory),
        c.childEvent("button", "focus", this.selectCategory)
      ], super.initialize();
    }
    renderSync() {
      return super.renderSync({
        category: this.category,
        icon: this.icon
      }), this.ui.button.ariaSelected = "false", this.el;
    }
    setActive(e, t = {}) {
      const { changeFocusable: o, performFocus: i, scroll: r } = __spreadValues({
        changeFocusable: true,
        performFocus: true,
        scroll: true
      }, t);
      this.el.classList.toggle(Z.categoryTabActive, e), o && (this.ui.button.tabIndex = e ? 0 : -1, this.ui.button.ariaSelected = e.toString()), e && i && (this.ui.button.focus(), r && this.events.emit("category:select", this.category.key, { scroll: "animate", focus: "button", performFocus: false })), this.isActive = e;
    }
    selectCategory() {
      this.isActive || this.events.emit("category:select", this.category.key, { scroll: "animate", focus: "button", performFocus: true });
    }
  };
  var us = new u(({ classes: s }) => `
  <div class="${s.categoryButtonsContainer}">
    <ul role="tablist" class="${s.categoryButtons}">
      <div data-placeholder="tabs"></div>
    </ul>
  </div>
`);
  var ps = p("categoryButtons", "categoryButtonsContainer");
  var gs = class extends c {
    constructor({ categories: e }) {
      super({ template: us, classes: ps }), this.activeCategoryIndex = 0, this.categories = e;
    }
    initialize() {
      this.keyBindings = {
        ArrowLeft: this.stepSelectedTab(-1),
        ArrowRight: this.stepSelectedTab(1)
      }, this.uiEvents = [
        c.uiEvent("scroll", this.checkOverflow)
      ], super.initialize();
    }
    checkOverflow() {
      const e = Math.abs(this.el.scrollLeft - (this.el.scrollWidth - this.el.offsetWidth)) > 1, t = this.el.scrollLeft > 0;
      this.el.className = "categoryButtonsContainer", t && e ? this.el.classList.add("has-overflow-both") : t ? this.el.classList.add("has-overflow-left") : e && this.el.classList.add("has-overflow-right");
    }
    renderSync() {
      return this.tabViews = this.categories.map((e) => this.viewFactory.create(ms, { category: e, icon: O[e.key] })), super.renderSync({
        tabs: this.tabViews.map((e) => e.renderSync())
      }), this.el;
    }
    get currentCategory() {
      return this.categories[this.activeCategoryIndex];
    }
    get currentTabView() {
      return this.tabViews[this.activeCategoryIndex];
    }
    setActiveTab(e, t = {}) {
      this.checkOverflow();
      const o = this.currentTabView, i = this.tabViews[e];
      o.setActive(false, t), i.setActive(true, t), this.activeCategoryIndex = e;
    }
    getTargetCategory(e) {
      return e < 0 ? this.categories.length - 1 : e >= this.categories.length ? 0 : e;
    }
    stepSelectedTab(e) {
      return () => {
        const t = this.activeCategoryIndex + e;
        this.setActiveTab(this.getTargetCategory(t), {
          changeFocusable: true,
          performFocus: true
        });
      };
    }
  };
  var ys = [
    { version: 15, emoji: String.fromCodePoint(129768) },
    { version: 14, emoji: String.fromCodePoint(128733) },
    { version: 13, emoji: String.fromCodePoint(129729) },
    { version: 12, emoji: String.fromCodePoint(129449) },
    { version: 11, emoji: String.fromCodePoint(129463) },
    { version: 5, emoji: String.fromCodePoint(129322) },
    { version: 4, emoji: String.fromCodePoint(9877) },
    { version: 3, emoji: String.fromCodePoint(129314) },
    { version: 2, emoji: String.fromCodePoint(128488) },
    { version: 1, emoji: String.fromCodePoint(128512) }
  ];
  function fs() {
    var e;
    const s = ys.find((t) => vs(t.emoji));
    return (e = s == null ? void 0 : s.version) != null ? e : 1;
  }
  function vs(s) {
    const e = document.createElement("canvas").getContext("2d");
    if (e)
      return e.textBaseline = "top", e.font = "32px Arial", e.fillText(s, 0, 0), e.getImageData(16, 16, 1, 1).data[0] !== 0;
  }
  function Y(s, e) {
    return Array.from({ length: s }, () => e).join("");
  }
  function ws({ showHeader: s, classes: e }) {
    return s ? `
    <header class="${e.header}">
      <div data-view="search"></div>
      <div data-view="categoryTabs" data-render="sync"></div>
    </header>
  ` : "";
  }
  function bs(s) {
    const { classes: e, theme: t, className: o = "" } = s;
    return `
    <div class="picmo__picker ${e.picker} ${t} ${o}">
      ${ws(s)}
      <div class="${e.content}">
        <div data-view="emojiArea"></div>
      </div>
      <div data-view="preview"></div>
    </div>
  `;
  }
  function Cs(s) {
    const { emojiCount: e, classes: t, theme: o, className: i, categoryCount: r } = s, a = ({ showSearch: d, classes: h }) => d ? `
    <div class="${h.searchSkeleton}">
      <div class="${h.searchInput} ${h.placeholder}"></div>
    </div>
  ` : "", n = ({ showCategoryTabs: d, classes: h }) => d ? `
    <div class="${h.categoryTabsSkeleton}">
      ${Y(r, `<div class="${h.placeholder} ${h.categoryTab}"></div>`)}
    </div>
  ` : "", l = ({ showHeader: d, classes: h }) => d ? `
    <header class="${h.headerSkeleton}">
      ${a(s)}
      ${n(s)}
    </header>
  ` : "", m = ({ showPreview: d, classes: h }) => d ? `
    <div class="${h.previewSkeleton}">
      <div class="${h.placeholder} ${h.previewEmoji}"></div>
      <div class="${h.placeholder} ${h.previewName}"></div>
      <ul class="${h.tagList}">
        ${Y(3, `<li class="${h.placeholder} ${h.tag}"></li>`)}
      </ul>
    </div>
  ` : "";
    return `
    <div class="picmo__picker ${t.skeleton} ${t.picker} ${o} ${i}">
      ${l(s)}
      <div class="${t.contentSkeleton}">
        <div class="${t.placeholder} ${t.categoryName}"></div>
        <div class="${t.emojiGrid}">
          ${Y(e, `<div class="${t.placeholder} ${t.emoji}"></div>`)}
        </div>
      </div>
      ${m(s)}
    </div>
  `;
  }
  var js = new u((s) => s.isLoaded ? bs(s) : Cs(s));
  var T = p(
    "picker",
    "skeleton",
    "placeholder",
    "searchSkeleton",
    "searchInput",
    "categoryTabsSkeleton",
    "headerSkeleton",
    "categoryTab",
    "contentSkeleton",
    "categoryName",
    "emojiGrid",
    "emoji",
    "previewSkeleton",
    "previewEmoji",
    "previewName",
    "tagList",
    "tag",
    "overlay",
    "content",
    "fullHeight",
    "pluginContainer",
    "header"
  );
  var R = {
    emojisPerRow: "--emojis-per-row",
    visibleRows: "--row-count",
    emojiSize: "--emoji-size"
  };
  var _s = class extends c {
    constructor() {
      super({ template: js, classes: T }), this.pickerReady = false, this.externalEvents = new Tt(), this.updaters = {
        styleProperty: (e) => (t) => this.el.style.setProperty(R[e], t.toString()),
        theme: (e) => {
          const t = this.options.theme, o = this.el.closest(`.${t}`);
          this.el.classList.remove(t), o == null || o.classList.remove(t), this.el.classList.add(e), o == null || o.classList.add(e);
        },
        className: (e) => {
          this.options.className && this.el.classList.remove(this.options.className), this.el.classList.add(e);
        },
        emojisPerRow: this.updateStyleProperty.bind(this, "emojisPerRow"),
        emojiSize: this.updateStyleProperty.bind(this, "emojiSize"),
        visibleRows: this.updateStyleProperty.bind(this, "visibleRows")
      };
    }
    initialize() {
      this.uiElements = {
        pickerContent: c.byClass(T.content),
        header: c.byClass(T.header)
      }, this.uiEvents = [
        c.uiEvent("keydown", this.handleKeyDown)
      ], this.appEvents = {
        error: this.onError,
        reinitialize: this.reinitialize,
        "data:ready": this.onDataReady,
        "content:show": this.showContent,
        "variantPopup:hide": this.hideVariantPopup,
        "emoji:select": this.selectEmoji
      }, super.initialize(), this.options.recentsProvider;
    }
    destroy() {
      var e, t;
      super.destroy(), (e = this.search) == null || e.destroy(), this.emojiArea.destroy(), (t = this.categoryTabs) == null || t.destroy(), this.events.removeAll(), this.externalEvents.removeAll();
    }
    clearRecents() {
      this.options.recentsProvider.clear();
    }
    addEventListener(e, t) {
      this.externalEvents.on(e, t);
    }
    removeEventListener(e, t) {
      this.externalEvents.off(e, t);
    }
    initializePickerView() {
      this.pickerReady && (this.showContent(), this.emojiArea.reset(false));
    }
    handleKeyDown(e) {
      const t = e.ctrlKey || e.metaKey;
      e.key === "s" && t && this.search && (e.preventDefault(), this.search.focus());
    }
    buildChildViews() {
      return this.options.showPreview && (this.preview = this.viewFactory.create(rs)), this.options.showSearch && (this.search = this.viewFactory.create(cs, {
        categories: this.categories,
        emojiVersion: this.emojiVersion
      })), this.options.showCategoryTabs && (this.categoryTabs = this.viewFactory.create(gs, {
        categories: this.categories
      })), this.currentView = this.emojiArea = this.viewFactory.create(Qt, {
        categoryTabs: this.categoryTabs,
        categories: this.categories,
        emojiVersion: this.emojiVersion
      }), [this.preview, this.search, this.emojiArea, this.categoryTabs];
    }
    setStyleProperties() {
      this.options.showSearch || this.el.style.setProperty("--search-height-full", "0px"), this.options.showCategoryTabs || (this.el.style.setProperty("--category-tabs-height", "0px"), this.el.style.setProperty("--category-tabs-offset", "0px")), this.options.showPreview || this.el.style.setProperty("--emoji-preview-height-full", "0px"), Object.keys(R).forEach((e) => {
        this.options[e] && this.el.style.setProperty(R[e], this.options[e].toString());
      });
    }
    updateStyleProperty(e, t) {
      this.el.style.setProperty(R[e], t.toString());
    }
    reinitialize() {
      this.renderSync();
    }
    onError(e) {
      const t = this.viewFactory.createWithOptions({ data: false }, ss, { message: this.i18n.get("error.load") }), o = this.el.offsetHeight || 375;
      throw this.el.style.height = `${o}px`, w(this.el, t.renderSync()), e;
    }
    async onDataReady(e) {
      const t = this.el;
      try {
        e ? this.emojiData = e : await this.emojiDataPromise, this.options.emojiVersion === "auto" ? this.emojiVersion = fs() || parseFloat(Ve) : this.emojiVersion = this.options.emojiVersion, this.categories = await this.emojiData.getCategories(this.options);
        const [o, i, r, a] = this.buildChildViews();
        await super.render({
          isLoaded: true,
          search: i,
          categoryTabs: a,
          emojiArea: r,
          preview: o,
          showHeader: Boolean(this.search || this.categoryTabs),
          theme: this.options.theme,
          className: this.options.className
        }), this.el.style.setProperty("--category-count", this.categories.length.toString()), this.pickerReady = true, t.replaceWith(this.el), this.setStyleProperties(), this.initializePickerView(), this.setInitialFocus(), this.externalEvents.emit("data:ready");
      } catch (o) {
        this.events.emit("error", o);
      }
    }
    renderSync() {
      var t;
      let e = ((t = this.options.categories) == null ? void 0 : t.length) || 10;
      if (this.options.showRecents && (e += 1), super.renderSync({
        isLoaded: false,
        theme: this.options.theme,
        className: this.options.className,
        showSearch: this.options.showSearch,
        showPreview: this.options.showPreview,
        showCategoryTabs: this.options.showCategoryTabs,
        showHeader: this.options.showSearch || this.options.showCategoryTabs,
        emojiCount: this.options.emojisPerRow * this.options.visibleRows,
        categoryCount: e
      }), this.el.style.setProperty("--category-count", e.toString()), !this.options.rootElement)
        throw new Error("Picker must be given a root element via the rootElement option");
      return w(this.options.rootElement, this.el), this.setStyleProperties(), this.pickerReady && this.initializePickerView(), this.el;
    }
    getInitialFocusTarget() {
      if (typeof this.options.autoFocus < "u")
        switch (this.options.autoFocus) {
          case "emojis":
            return this.emojiArea.focusableEmoji;
          case "search":
            return this.search;
          case "auto":
            return this.search || this.emojiArea.focusableEmoji;
          default:
            return null;
        }
      if (this.options.autoFocusSearch === true)
        return console.warn("options.autoFocusSearch is deprecated, please use options.focusTarget instead"), this.search;
    }
    setInitialFocus() {
      var e;
      !this.pickerReady || (e = this.getInitialFocusTarget()) == null || e.focus();
    }
    reset(e = true) {
      var t;
      this.pickerReady && (this.emojiArea.reset(e), this.showContent(this.emojiArea)), (t = this.search) == null || t.clear(), this.hideVariantPopup();
    }
    showContent(e = this.emojiArea) {
      var t, o;
      e !== this.currentView && (this.currentView !== this.emojiArea && ((t = this.currentView) == null || t.destroy()), this.ui.pickerContent.classList.toggle(T.fullHeight, e !== this.emojiArea), w(this.ui.pickerContent, e.el), this.currentView = e, e === this.emojiArea ? (this.emojiArea.reset(), this.categoryTabs && this.ui.header.appendChild(this.categoryTabs.el)) : (o = this.categoryTabs) == null || o.el.remove());
    }
    hideVariantPopup() {
      var e;
      (e = this.variantPopup) == null || e.destroy();
    }
    isPickerClick(e) {
      var r, a;
      const t = e.target, o = this.el.contains(t), i = (a = (r = this.variantPopup) == null ? void 0 : r.el) == null ? void 0 : a.contains(t);
      return o || i;
    }
    async selectEmoji({ emoji: e }) {
      var t, o;
      ((t = e.skins) == null ? void 0 : t.length) && this.options.showVariants && !this.isVariantPopupOpen ? this.showVariantPopup(e) : (await ((o = this.variantPopup) == null ? void 0 : o.animateHide()), this.events.emit("variantPopup:hide"), await this.emitEmoji(e));
    }
    get isVariantPopupOpen() {
      return this.variantPopup && !this.variantPopup.isDestroyed;
    }
    async showVariantPopup(e) {
      const t = document.activeElement;
      this.events.once("variantPopup:hide", () => {
        t == null || t.focus();
      }), this.variantPopup = this.viewFactory.create(hs, { emoji: e, parent: this.el }), this.el.appendChild(this.variantPopup.renderSync()), this.variantPopup.activate();
    }
    async emitEmoji(e) {
      this.externalEvents.emit("emoji:select", await this.renderer.doEmit(e)), this.options.recentsProvider.addOrUpdateRecent(e, this.options.maxRecents), this.events.emit("recent:add", e);
    }
    updateOptions(e) {
      Object.keys(e).forEach((t) => {
        this.updaters[t](e[t]);
      }), Object.assign(this.options, e);
    }
  };
  var ks = class {
    constructor({ events: e, i18n: t, renderer: o, emojiData: i, options: r, customEmojis: a = [], pickerId: n }) {
      this.events = e, this.i18n = t, this.renderer = o, this.emojiData = i, this.options = r, this.customEmojis = a, this.pickerId = n;
    }
    setEmojiData(e) {
      this.emojiData = Promise.resolve(e);
    }
    createWithOptions(e = {}, t, ...o) {
      const i = new t(...o);
      return i.setPickerId(this.pickerId), i.setEvents(this.events), i.setI18n(this.i18n), i.setRenderer(this.renderer), e.data !== false && i.setEmojiData(this.emojiData), i.setOptions(this.options), i.setCustomEmojis(this.customEmojis), i.viewFactory = this, i.initialize(), i;
    }
    create(e, ...t) {
      return this.createWithOptions({}, e, ...t);
    }
  };
  var L;
  var xs = class {
    constructor(e = {}) {
      f(this, L, void 0);
      A(this, L, new Map(Object.entries(e)));
    }
    get(e, t = e) {
      return y(this, L).get(e) || t;
    }
  };
  L = /* @__PURE__ */ new WeakMap();
  function Es(s, e) {
    e === void 0 && (e = {});
    var t = e.insertAt;
    if (!(!s || typeof document > "u")) {
      var o = document.head || document.getElementsByTagName("head")[0], i = document.createElement("style");
      i.type = "text/css", t === "top" && o.firstChild ? o.insertBefore(i, o.firstChild) : o.appendChild(i), i.styleSheet ? i.styleSheet.cssText = s : i.appendChild(document.createTextNode(s));
    }
  }
  function Ss() {
    let s = false;
    return function(t) {
      At.injectStyles && !s && (Es(t), s = true);
    };
  }
  var Fs = `.picmo__picker .picmo__icon{width:1.25em;height:1em;fill:currentColor}.picmo__icon-small{font-size:.8em}.picmo__icon-medium{font-size:1em}.picmo__icon-large{font-size:1.25em}.picmo__icon-2x{font-size:2em}.picmo__icon-3x{font-size:3em}.picmo__icon-4x{font-size:4em}.picmo__icon-5x{font-size:5em}.picmo__icon-8x{font-size:8em}.picmo__icon-10x{font-size:10em}.picmo__light,.picmo__auto{color-scheme:light;--accent-color: #4f46e5;--background-color: #f9fafb;--border-color: #cccccc;--category-name-background-color: #f9fafb;--category-name-button-color: #999999;--category-name-text-color: hsl(214, 30%, 50%);--category-tab-active-background-color: rgba(255, 255, 255, .6);--category-tab-active-color: var(--accent-color);--category-tab-color: #666;--category-tab-highlight-background-color: rgba(0, 0, 0, .15);--error-color-dark: hsl(0, 100%, 45%);--error-color: hsl(0, 100%, 40%);--focus-indicator-background-color: hsl(198, 65%, 85%);--focus-indicator-color: #333333;--hover-background-color: #c7d2fe;--placeholder-background-color: #cccccc;--search-background-color: #f9fafb;--search-focus-background-color: #ffffff;--search-icon-color: #999999;--search-placeholder-color: #71717a;--secondary-background-color: #e2e8f0;--secondary-text-color: #666666;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #000000;--variant-popup-background-color: #ffffff}.picmo__dark{color-scheme:dark;--accent-color: #A580F9;--background-color: #333333;--border-color: #666666;--category-name-background-color: #333333;--category-name-button-color: #eeeeee;--category-name-text-color: #ffffff;--category-tab-active-background-color: #000000;--category-tab-active-color: var(--accent-color);--category-tab-color: #cccccc;--category-tab-highlight-background-color: #4A4A4A;--error-color-dark: hsl(0, 7%, 3%);--error-color: hsl(0, 30%, 60%);--focus-indicator-background-color: hsl(0, 0%, 50%);--focus-indicator-color: #999999;--hover-background-color: hsla(0, 0%, 40%, .85);--image-placeholder-color: #ffffff;--placeholder-background-color: #666666;--search-background-color: #71717a;--search-focus-background-color: #52525b;--search-icon-color: #cccccc;--search-placeholder-color: #d4d4d8;--secondary-background-color: #000000;--secondary-text-color: #999999;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #ffffff;--variant-popup-background-color: #333333}@media (prefers-color-scheme: dark){.picmo__auto{color-scheme:dark;--accent-color: #A580F9;--background-color: #333333;--border-color: #666666;--category-name-background-color: #333333;--category-name-button-color: #eeeeee;--category-name-text-color: #ffffff;--category-tab-active-background-color: #000000;--category-tab-active-color: var(--accent-color);--category-tab-color: #cccccc;--category-tab-highlight-background-color: #4A4A4A;--error-color-dark: hsl(0, 7%, 3%);--error-color: hsl(0, 30%, 60%);--focus-indicator-background-color: hsl(0, 0%, 50%);--focus-indicator-color: #999999;--hover-background-color: hsla(0, 0%, 40%, .85);--image-placeholder-color: #ffffff;--placeholder-background-color: #666666;--search-background-color: #71717a;--search-focus-background-color: #52525b;--search-icon-color: #cccccc;--search-placeholder-color: #d4d4d8;--secondary-background-color: #000000;--secondary-text-color: #999999;--tag-background-color: rgba(162, 190, 245, .3);--text-color: #ffffff;--variant-popup-background-color: #333333}}.picmo__picker .picmo__categoryButtonsContainer{overflow:auto;padding:2px 0}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-right{mask-image:linear-gradient(270deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%);-webkit-mask-image:linear-gradient(270deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%)}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-left{mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%);-webkit-mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%)}.picmo__picker .picmo__categoryButtonsContainer.picmo__has-overflow-both{mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%,rgba(255,255,255,1) 90%,rgba(255,255,255,0) 100%);-webkit-mask-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 10%,rgba(255,255,255,1) 90%,rgba(255,255,255,0) 100%)}.picmo__picker .picmo__categoryButtons{display:flex;flex-direction:row;gap:var(--tab-gap);margin:0;padding:0 .5em;align-items:center;height:var(--category-tabs-height);box-sizing:border-box;width:100%;justify-content:space-between;position:relative;list-style-type:none;justify-self:center;max-width:min(23.55rem,calc(var(--category-count, 1) * 2.5rem))}.picmo__picker .picmo__categoryButtons .picmo__categoryTab{display:flex;align-items:center;transition:all .1s;width:2em}.picmo__picker .picmo__categoryButtons .picmo__categoryTab.picmo__categoryTabActive .picmo__categoryButton{color:var(--category-tab-active-color);background:linear-gradient(rgba(255,255,255,.75) 0%,rgba(255,255,255,.75) 100%),linear-gradient(var(--category-tab-active-color) 0%,var(--category-tab-active-color) 100%);border:2px solid var(--category-tab-active-color)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab.picmo__categoryTabActive .picmo__categoryButton:hover{background-color:var(--category-tab-active-background-color)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton{border-radius:5px;background:transparent;border:2px solid transparent;color:var(--category-tab-color);cursor:pointer;padding:2px;vertical-align:middle;display:flex;align-items:center;justify-content:center;font-size:1.2rem;width:1.6em;height:1.6em;transition:all .1s}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton:is(img){width:var(--category-tab-size);height:var(--category-tab-size)}.picmo__picker .picmo__categoryButtons .picmo__categoryTab button.picmo__categoryButton:hover{background:var(--category-tab-highlight-background-color)}.picmo__dataError [data-icon]{opacity:.8}@keyframes appear{0%{opacity:0}to{opacity:.8}}@keyframes appear-grow{0%{opacity:0;transform:scale(.8)}to{opacity:.8;transform:scale(1)}}.picmo__picker .picmo__error{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--secondary-text-color)}.picmo__picker .picmo__error .picmo__iconContainer{opacity:.8;animation:appear-grow .25s cubic-bezier(.175,.885,.32,1.275);--color-primary: var(--error-color);--color-secondary: var(--error-color-dark)}.picmo__picker .picmo__error .picmo__title{animation:appear .25s;animation-delay:50ms;animation-fill-mode:both}.picmo__picker .picmo__error button{padding:8px 16px;cursor:pointer;background:var(--background-color);border:1px solid var(--text-color);border-radius:5px;color:var(--text-color)}.picmo__picker .picmo__error button:hover{background:var(--text-color);color:var(--background-color)}.picmo__emojiButton{background:transparent;border:none;border-radius:15px;cursor:pointer;display:flex;font-family:var(--emoji-font);font-size:var(--emoji-size);height:100%;justify-content:center;align-items:center;margin:0;overflow:hidden;padding:0;width:100%}.picmo__emojiButton:hover{background:var(--hover-background-color)}.picmo__emojiButton:focus{border-radius:0;background:var(--focus-indicator-background-color);outline:1px solid var(--focus-indicator-color)}.picmo__picker .picmo__emojiArea{height:var(--emoji-area-height);overflow-y:auto;position:relative}.picmo__picker .picmo__emojiCategory{position:relative}.picmo__picker .picmo__emojiCategory .picmo__categoryName{font-size:.9em;padding:.5rem;margin:0;background:var(--category-name-background-color);color:var(--category-name-text-color);top:0;z-index:1;display:grid;gap:4px;grid-template-columns:auto 1fr auto;align-items:center;line-height:1;box-sizing:border-box;height:var(--category-name-height);justify-content:flex-start;text-transform:uppercase}.picmo__picker .picmo__emojiCategory .picmo__categoryName button{background:transparent;border:none;display:flex;align-items:center;cursor:pointer;color:var(--category-name-button-color)}.picmo__picker .picmo__emojiCategory .picmo__categoryName button:hover{opacity:1}.picmo__picker .picmo__emojiCategory .picmo__noRecents{color:var(--secondary-text-color);grid-column:1 / span var(--emojis-per-row);font-size:.9em;text-align:center;display:flex;align-items:center;justify-content:center;min-height:calc(var(--emoji-size) * var(--emoji-size-multiplier))}.picmo__picker .picmo__emojiCategory .picmo__recentEmojis[data-empty=true]{display:none}:is(.picmo__picker .picmo__emojiCategory) .picmo__recentEmojis[data-empty=false]+div{display:none}.picmo__picker .picmo__emojiContainer{display:grid;justify-content:space-between;gap:1px;padding:0 .5em;grid-template-columns:repeat(var(--emojis-per-row),calc(var(--emoji-size) * var(--emoji-size-multiplier)));grid-auto-rows:calc(var(--emoji-size) * var(--emoji-size-multiplier));align-items:center;justify-items:center}.picmo__picker.picmo__picker{--border-radius: 5px;--emoji-area-height: calc( (var(--row-count) * var(--emoji-size) * var(--emoji-size-multiplier)) + var(--category-name-height) );--content-height: var(--emoji-area-height);--emojis-per-row: 8;--row-count: 6;--emoji-preview-margin: 4px;--emoji-preview-height: calc(var(--emoji-preview-size) + 1em + 1px);--emoji-preview-height-full: calc(var(--emoji-preview-height) + var(--emoji-preview-margin));--emoji-preview-size: 2.75em;--emoji-size: 2rem;--emoji-size-multiplier: 1.3;--content-margin: 8px;--category-tabs-height:calc(1.5em + 9px);--category-tabs-offset: 8px;--category-tab-size: 1.2rem;--category-name-height: 2rem;--category-name-padding-y: 6px;--search-height: 2em;--search-margin: .5em;--search-margin-bottom: 4px;--search-height-full: calc(var(--search-height) + var(--search-margin) + var(--search-margin-bottom));--overlay-background-color: rgba(0, 0, 0, .8);--emoji-font: "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji";--ui-font: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;--ui-font-size: 16px;--picker-width: calc(var(--emojis-per-row) * var(--emoji-size) * var(--emoji-size-multiplier) + 2.75rem);--preview-background-color: var(--secondary-background-color);background:var(--background-color);border-radius:var(--border-radius);border:1px solid var(--border-color);font-family:var(--ui-font);font-size:var(--ui-font-size);overflow:hidden;position:relative;width:var(--picker-width);display:grid;gap:8px}.picmo__picker.picmo__picker>*{font-family:var(--ui-font)}.picmo__picker.picmo__skeleton{background:var(--background-color);border-radius:var(--border-radius);border:1px solid var(--border-color);font-family:var(--ui-font);width:var(--picker-width);color:var(--secondary-text-color)}.picmo__picker.picmo__skeleton *{box-sizing:border-box}.picmo__picker.picmo__skeleton .picmo__placeholder{background:var(--placeholder-background-color);position:relative;overflow:hidden}.picmo__picker.picmo__skeleton .picmo__placeholder:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);background-image:linear-gradient(90deg,rgba(255,255,255,0) 0,rgba(255,255,255,.2) 20%,rgba(255,255,255,.5) 60%,rgba(255,255,255,0) 100%);animation:shine 2s infinite;content:""}.picmo__picker.picmo__skeleton .picmo__headerSkeleton{background-color:var(--secondary-background-color);padding-top:8px;padding-bottom:8px;display:flex;flex-direction:column;overflow:hidden;gap:8px;border-bottom:1px solid var(--border-color);width:var(--picker-width)}.picmo__picker.picmo__skeleton .picmo__searchSkeleton{padding:0 8px;height:var(--search-height)}.picmo__picker.picmo__skeleton .picmo__searchSkeleton .picmo__searchInput{width:100%;height:28px;border-radius:3px}.picmo__picker.picmo__skeleton .picmo__categoryTabsSkeleton{height:var(--category-tabs-height);display:flex;flex-direction:row;align-items:center;justify-self:center;width:calc(2rem * var(--category-count, 1))}.picmo__picker.picmo__skeleton .picmo__categoryTabsSkeleton .picmo__categoryTab{width:25px;height:25px;padding:2px;border-radius:5px;margin:.25em}.picmo__picker.picmo__skeleton .picmo__contentSkeleton{height:var(--content-height);padding-right:8px;opacity:.7}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__categoryName{width:50%;height:1rem;margin:.5rem;box-sizing:border-box}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__emojiGrid{display:grid;justify-content:space-between;gap:1px;padding:0 .5em;grid-template-columns:repeat(var(--emojis-per-row),calc(var(--emoji-size) * var(--emoji-size-multiplier)));grid-auto-rows:calc(var(--emoji-size) * var(--emoji-size-multiplier));align-items:center;justify-items:center;width:var(--picker-width)}.picmo__picker.picmo__skeleton .picmo__contentSkeleton .picmo__emojiGrid .picmo__emoji{width:var(--emoji-size);height:var(--emoji-size);border-radius:50%}.picmo__picker.picmo__skeleton .picmo__previewSkeleton{height:var(--emoji-preview-height);border-top:1px solid var(--border-color);display:grid;align-items:center;padding:.5em;gap:6px;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;grid-template-areas:"emoji name" "emoji tags"}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__previewEmoji{grid-area:emoji;border-radius:50%;width:var(--emoji-preview-size);height:var(--emoji-preview-size)}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__previewName{grid-area:name;height:.8em;width:80%}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__tagList{grid-area:tags;list-style-type:none;display:flex;flex-direction:row;padding:0;margin:0}.picmo__picker.picmo__skeleton .picmo__previewSkeleton .picmo__tagList .picmo__tag{border-radius:3px;padding:2px 8px;margin-right:.25em;height:1em;width:20%}.picmo__overlay{background:rgba(0,0,0,.75);height:100%;left:0;position:fixed;top:0;width:100%;z-index:1000}.picmo__content{position:relative;overflow:hidden;height:var(--content-height)}.picmo__content.picmo__fullHeight{height:calc(var(--content-height) + var(--category-tabs-height) + var(--category-tabs-offset));overflow-y:auto}.picmo__pluginContainer{margin:.5em;display:flex;flex-direction:row}.picmo__header{background-color:var(--secondary-background-color);padding-top:8px;padding-bottom:8px;display:grid;gap:8px;border-bottom:1px solid var(--border-color)}@media (prefers-reduced-motion: reduce){.picmo__placeholder{background:var(--placeholder-background-color);position:relative;overflow:hidden}.picmo__placeholder:after{display:none}}.picmo__picker .picmo__preview{border-top:1px solid var(--border-color);display:grid;align-items:center;gap:6px;grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;grid-template-areas:"emoji name" "emoji tags";height:var(--emoji-preview-height);box-sizing:border-box;padding:.5em;position:relative;background:var(--preview-background-color)}.picmo__picker .picmo__preview .picmo__previewEmoji{grid-area:emoji;font-size:var(--emoji-preview-size);font-family:var(--emoji-font);width:1.25em;display:flex;align-items:center;justify-content:center}.picmo__picker .picmo__preview .picmo__previewName{grid-area:name;color:var(--text-color);font-size:.8em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}.picmo__picker .picmo__preview .picmo__tagList{grid-area:tags;list-style-type:none;display:flex;flex-direction:row;padding:0;margin:0;font-size:.75em;overflow:hidden}.picmo__picker .picmo__preview .picmo__tag{border-radius:3px;background:var(--tag-background-color);color:var(--text-color);padding:2px 8px;margin-right:.25em;white-space:nowrap}.picmo__picker .picmo__preview .picmo__tag:last-child{margin-right:0}.picmo__picker .picmo__searchContainer{display:flex;height:var(--search-height);box-sizing:border-box;padding:0 8px;position:relative}.picmo__picker .picmo__searchContainer .picmo__searchField{background:var(--search-background-color);border-radius:3px;border:none;box-sizing:border-box;color:var(--text-color);font-size:.9em;outline:none;padding:.5em 2.25em .5em .5em;width:100%}.picmo__picker .picmo__searchContainer .picmo__searchField:focus{background:var(--search-focus-background-color)}.picmo__picker .picmo__searchContainer .picmo__searchField::placeholder{color:var(--search-placeholder-color)}.picmo__picker .picmo__searchContainer .picmo__searchAccessory{color:var(--search-icon-color);height:100%;position:absolute;right:1em;top:0;width:1.25rem;display:flex;align-items:center}.picmo__picker .picmo__searchContainer .picmo__searchAccessory svg{fill:var(--search-icon-color)}.picmo__picker .picmo__searchContainer .picmo__clearButton{border:0;color:var(--search-icon-color);background:transparent;cursor:pointer}.picmo__picker .picmo__searchContainer .picmo__clearSearchButton{cursor:pointer;border:none;background:transparent;color:var(--search-icon-color);font-size:1em;width:100%;height:100%;display:flex;align-items:center;padding:0}.picmo__picker .picmo__searchContainer .picmo__notFound [data-icon]{fill:#f3e265}.picmo__picker .picmo__variantOverlay{background:var(--overlay-background-color);border-radius:5px;display:flex;flex-direction:column;height:100%;justify-content:center;left:0;position:absolute;top:0;width:100%;z-index:1}.picmo__picker .picmo__variantOverlay .picmo__variantPopup{background:var(--variant-popup-background-color);border-radius:5px;margin:.5em;padding:.5em;text-align:center;user-select:none;display:flex;align-items:center;justify-content:center}.picmo__customEmoji{width:1em;height:1em}@keyframes shine{to{transform:translate(100%)}}.picmo__picker .picmo__imagePlaceholder{width:2rem;height:2rem;border-radius:50%}.picmo__placeholder{background:#DDDBDD;position:relative}.picmo__placeholder:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);background-image:linear-gradient(90deg,rgba(255,255,255,0) 0,rgba(255,255,255,.2) 20%,rgba(255,255,255,.5) 60%,rgba(255,255,255,0) 100%);animation:shine 2s infinite;content:""}
`;
  function Ps(s) {
    return ce(s.locale, s.dataStore, s.messages, s.emojiData);
  }
  var zs = 0;
  var M;
  function Ls() {
    return `picmo-${Date.now()}-${zs++}`;
  }
  var $s = Ss();
  function Hs(s) {
    $s(Fs);
    const e = $t(s), t = ((e == null ? void 0 : e.custom) || []).map((n) => __spreadProps(__spreadValues({}, n), {
      custom: true,
      tags: ["custom", ...n.tags || []]
    })), o = new It();
    M || (M = Ps(e));
    const i = new xs(e.i18n);
    M.then((n) => {
      o.emit("data:ready", n);
    }).catch((n) => {
      o.emit("error", n);
    });
    const a = new ks({
      events: o,
      i18n: i,
      customEmojis: t,
      renderer: e.renderer,
      options: e,
      emojiData: M,
      pickerId: Ls()
    }).create(_s);
    return a.renderSync(), a;
  }

  // js/app.js
  var rootElement = document.querySelector("#reaction");
  var picker = Hs({ rootElement });
  picker.addEventListener("emoji:select", (event) => {
    console.log("Emoji selected:", event.emoji);
  });
  var csrfToken = document.querySelector("meta[name='csrf-token']").getAttribute("content");
  var liveSocket = new LiveSocket("/live", Socket, { params: { _csrf_token: csrfToken } });
  import_topbar.default.config({ barColors: { 0: "#29d" }, shadowColor: "rgba(0, 0, 0, .3)" });
  window.addEventListener("phx:page-loading-start", (_info) => import_topbar.default.show(300));
  window.addEventListener("phx:page-loading-stop", (_info) => import_topbar.default.hide());
  liveSocket.connect();
  window.liveSocket = liveSocket;
  if (document.getElementById("file-form")) {
    let url = "https://sweetipfs.herokuapp.com/";
    document.getElementById("file-form").onsubmit = function(event) {
      event.preventDefault();
      let formData = new FormData();
      formData.append("upload", document.getElementById("upload").files[0]);
      let xhr = new XMLHttpRequest();
      xhr.open("POST", url + "create", true);
      xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
          console.log("Image uploaded successfully.");
          let ipfscid = xhr.responseText;
          console.log("The file was upload to ipfscid " + ipfscid);
          if (document.getElementById("item_ipfscids")) {
            document.getElementById("item_ipfscids").value = ipfscid;
          }
          if (document.getElementById("user_ipfscids")) {
            document.getElementById("user_ipfscids").value = ipfscid;
          }
          var image = document.createElement("img");
          image.setAttribute("src", url + "/read?ipfscid=" + ipfscid);
          document.getElementById("imageholder").appendChild(image);
        }
      };
      xhr.send(formData);
    };
  }
})();
/**
 * @license MIT
 * topbar 2.0.0, 2023-02-04
 * https://buunguyen.github.io/topbar
 * Copyright (c) 2021 Buu Nguyen
 */
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vYXNzZXRzL3ZlbmRvci90b3BiYXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2h0bWwvcHJpdi9zdGF0aWMvcGhvZW5peF9odG1sLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC91dGlscy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvY29uc3RhbnRzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9wdXNoLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC90aW1lci5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvY2hhbm5lbC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvYWpheC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXgvYXNzZXRzL2pzL3Bob2VuaXgvbG9uZ3BvbGwuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4L2Fzc2V0cy9qcy9waG9lbml4L3ByZXNlbmNlLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9zZXJpYWxpemVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peC9hc3NldHMvanMvcGhvZW5peC9zb2NrZXQuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvY29uc3RhbnRzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2VudHJ5X3VwbG9hZGVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3V0aWxzLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2Jyb3dzZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZG9tLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L3VwbG9hZF9lbnRyeS5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9saXZlX3VwbG9hZGVyLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2FyaWEuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvaG9va3MuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvZG9tX3Bvc3RfbW9ycGhfcmVzdG9yZXIuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvbm9kZV9tb2R1bGVzL21vcnBoZG9tL2Rpc3QvbW9ycGhkb20tZXNtLmpzIiwgIi4uLy4uLy4uL2RlcHMvcGhvZW5peF9saXZlX3ZpZXcvYXNzZXRzL2pzL3Bob2VuaXhfbGl2ZV92aWV3L2RvbV9wYXRjaC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9yZW5kZXJlZC5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy92aWV3X2hvb2suanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvanMuanMiLCAiLi4vLi4vLi4vZGVwcy9waG9lbml4X2xpdmVfdmlldy9hc3NldHMvanMvcGhvZW5peF9saXZlX3ZpZXcvdmlldy5qcyIsICIuLi8uLi8uLi9kZXBzL3Bob2VuaXhfbGl2ZV92aWV3L2Fzc2V0cy9qcy9waG9lbml4X2xpdmVfdmlldy9saXZlX3NvY2tldC5qcyIsICIuLi8uLi8uLi9hc3NldHMvanMvYXBwLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvZW1vamliYXNlL2VzbS9pbmRleC5qcyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy91dGlsLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2RhdGEvRGF0YVN0b3JlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3J1bGVzLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2RhdGEvSW5NZW1vcnlTdG9yZS50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9kYXRhL2Vtb2ppRGF0YS50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9mb2N1c1RyYXAudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvdGhlbWVzLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL3ZpZXcudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvaWNvbnMvY2xvY2stc29saWQuc3ZnP3JhdyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9pY29ucy9mbGFnLXNvbGlkLnN2Zz9yYXciLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvaWNvbnMvZmFjZS1mcm93bi1vcGVuLXNvbGlkLnN2Zz9yYXciLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvaWNvbnMvZ2FtZXBhZC1zb2xpZC5zdmc/cmF3IiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2ljb25zL2xpZ2h0YnVsYi1zb2xpZC5zdmc/cmF3IiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2ljb25zL211Zy1zYXVjZXItc29saWQuc3ZnP3JhdyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9pY29ucy9wbGFuZS1zb2xpZC5zdmc/cmF3IiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2ljb25zL3JvYm90LXNvbGlkLnN2Zz9yYXciLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvaWNvbnMvZmFjZS1zYWQtdGVhci1zb2xpZC5zdmc/cmF3IiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2ljb25zL21hZ25pZnlpbmctZ2xhc3Mtc29saWQuc3ZnP3JhdyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9pY29ucy9mYWNlLWdyaW4tc29saWQuc3ZnP3JhdyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9pY29ucy9pY29ucy1zb2xpZC5zdmc/cmF3IiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2ljb25zL3RyZWUtc29saWQuc3ZnP3JhdyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9pY29ucy91c2VyLWdyb3VwLXNvbGlkLnN2Zz9yYXciLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvaWNvbnMvdHJpYW5nbGUtZXhjbGFtYXRpb24tc29saWQuc3ZnP3JhdyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9pY29ucy94bWFyay1zb2xpZC5zdmc/cmF3IiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2ljb25zL2luZGV4LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL1RlbXBsYXRlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL0ltYWdlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3JlbmRlcmVycy9yZW5kZXJlci50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9yZW5kZXJlcnMvbmF0aXZlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2kxOG4vbGFuZy1lbi50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9kYXRhL0luZGV4ZWREYlN0b3JlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3dlYlN0b3JhZ2VTaGltLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3JlY2VudHMvUmVjZW50c1Byb3ZpZGVyLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3JlY2VudHMvV2ViU3RvcmFnZVByb3ZpZGVyLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3JlY2VudHMvTG9jYWxTdG9yYWdlUHJvdmlkZXIudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvb3B0aW9ucy50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9ldmVudHMudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvZ2xvYmFsQ29uZmlnLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL0FwcEV2ZW50cy50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9FeHRlcm5hbEV2ZW50cy50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy92aWV3cy9CYXNlRW1vamlDYXRlZ29yeS50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy92aWV3cy9FbW9qaS50ZW1wbGF0ZS50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy92aWV3cy9FbW9qaS50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9mb2N1c0dyaWQudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvdmlld3MvRW1vamlDb250YWluZXIudGVtcGxhdGUudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvdmlld3MvRW1vamlDb250YWluZXIudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvdmlld3MvRW1vamlDYXRlZ29yeS50ZW1wbGF0ZS50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy92aWV3cy9FbW9qaUNhdGVnb3J5LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL1JlY2VudEVtb2ppQ29udGFpbmVyLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL1JlY2VudEVtb2ppQ2F0ZWdvcnkudGVtcGxhdGUudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvdmlld3MvUmVjZW50RW1vamlDYXRlZ29yeS50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy92aWV3cy9DdXN0b21FbW9qaUNhdGVnb3J5LnRlbXBsYXRlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL0N1c3RvbUVtb2ppQ2F0ZWdvcnkudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvTGF6eUxvYWRlci50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy92aWV3cy9FbW9qaUFyZWEudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvdmlld3MvRXJyb3JNZXNzYWdlLnRlbXBsYXRlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL0Vycm9yTWVzc2FnZS50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy92aWV3cy9EYXRhRXJyb3IudGVtcGxhdGUudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvdmlld3MvRGF0YUVycm9yLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL1ByZXZpZXcudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvdmlld3MvU2VhcmNoLnRlbXBsYXRlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL1NlYXJjaC50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy92aWV3cy9WYXJpYW50UG9wdXAudGVtcGxhdGUudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvdmlld3MvVmFyaWFudFBvcHVwLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL0NhdGVnb3J5VGFiLnRlbXBsYXRlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL0NhdGVnb3J5VGFiLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL0NhdGVnb3J5VGFicy50ZW1wbGF0ZS50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy92aWV3cy9DYXRlZ29yeVRhYnMudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvZW1vamlTdXBwb3J0LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL0Vtb2ppUGlja2VyLnRlbXBsYXRlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdzL0Vtb2ppUGlja2VyLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3ZpZXdGYWN0b3J5LnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2kxOG4vYnVuZGxlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvc3R5bGUtaW5qZWN0L2Rpc3Qvc3R5bGUtaW5qZWN0LmVzLmpzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2luamVjdFN0eWxlcy50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9jcmVhdGVQaWNrZXIudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvaTE4bi9sYW5nLWRlLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2kxOG4vbGFuZy1maS50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9pMThuL2xhbmctZnIudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvaTE4bi9sYW5nLW5sLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL2kxOG4vbGFuZy1uby50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9pMThuL2xhbmctc3YudHMiLCAiLi4vLi4vLi4vYXNzZXRzL2pzL25vZGVfbW9kdWxlcy9waWNtby9zcmMvcmVjZW50cy9TZXNzaW9uU3RvcmFnZVByb3ZpZGVyLnRzIiwgIi4uLy4uLy4uL2Fzc2V0cy9qcy9ub2RlX21vZHVsZXMvcGljbW8vc3JjL3JlY2VudHMvSW5NZW1vcnlQcm92aWRlci50cyIsICIuLi8uLi8uLi9hc3NldHMvanMvbm9kZV9tb2R1bGVzL3BpY21vL3NyYy9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBAbGljZW5zZSBNSVRcbiAqIHRvcGJhciAyLjAuMCwgMjAyMy0wMi0wNFxuICogaHR0cHM6Ly9idXVuZ3V5ZW4uZ2l0aHViLmlvL3RvcGJhclxuICogQ29weXJpZ2h0IChjKSAyMDIxIEJ1dSBOZ3V5ZW5cbiAqL1xuKGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50KSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC8xNTc5NjcxXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxhc3RUaW1lID0gMDtcbiAgICB2YXIgdmVuZG9ycyA9IFtcIm1zXCIsIFwibW96XCIsIFwid2Via2l0XCIsIFwib1wiXTtcbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3gpIHtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPVxuICAgICAgICB3aW5kb3dbdmVuZG9yc1t4XSArIFwiUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID1cbiAgICAgICAgd2luZG93W3ZlbmRvcnNbeF0gKyBcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCJdIHx8XG4gICAgICAgIHdpbmRvd1t2ZW5kb3JzW3hdICsgXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07XG4gICAgfVxuICAgIGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSlcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGN1cnJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpO1xuICAgICAgICB2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FsbGJhY2soY3VyclRpbWUgKyB0aW1lVG9DYWxsKTtcbiAgICAgICAgfSwgdGltZVRvQ2FsbCk7XG4gICAgICAgIGxhc3RUaW1lID0gY3VyclRpbWUgKyB0aW1lVG9DYWxsO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIGlmICghd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKVxuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgICB9O1xuICB9KSgpO1xuXG4gIHZhciBjYW52YXMsXG4gICAgY3VycmVudFByb2dyZXNzLFxuICAgIHNob3dpbmcsXG4gICAgcHJvZ3Jlc3NUaW1lcklkID0gbnVsbCxcbiAgICBmYWRlVGltZXJJZCA9IG51bGwsXG4gICAgZGVsYXlUaW1lcklkID0gbnVsbCxcbiAgICBhZGRFdmVudCA9IGZ1bmN0aW9uIChlbGVtLCB0eXBlLCBoYW5kbGVyKSB7XG4gICAgICBpZiAoZWxlbS5hZGRFdmVudExpc3RlbmVyKSBlbGVtLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgICAgZWxzZSBpZiAoZWxlbS5hdHRhY2hFdmVudCkgZWxlbS5hdHRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCBoYW5kbGVyKTtcbiAgICAgIGVsc2UgZWxlbVtcIm9uXCIgKyB0eXBlXSA9IGhhbmRsZXI7XG4gICAgfSxcbiAgICBvcHRpb25zID0ge1xuICAgICAgYXV0b1J1bjogdHJ1ZSxcbiAgICAgIGJhclRoaWNrbmVzczogMyxcbiAgICAgIGJhckNvbG9yczoge1xuICAgICAgICAwOiBcInJnYmEoMjYsICAxODgsIDE1NiwgLjkpXCIsXG4gICAgICAgIFwiLjI1XCI6IFwicmdiYSg1MiwgIDE1MiwgMjE5LCAuOSlcIixcbiAgICAgICAgXCIuNTBcIjogXCJyZ2JhKDI0MSwgMTk2LCAxNSwgIC45KVwiLFxuICAgICAgICBcIi43NVwiOiBcInJnYmEoMjMwLCAxMjYsIDM0LCAgLjkpXCIsXG4gICAgICAgIFwiMS4wXCI6IFwicmdiYSgyMTEsIDg0LCAgMCwgICAuOSlcIixcbiAgICAgIH0sXG4gICAgICBzaGFkb3dCbHVyOiAxMCxcbiAgICAgIHNoYWRvd0NvbG9yOiBcInJnYmEoMCwgICAwLCAgIDAsICAgLjYpXCIsXG4gICAgICBjbGFzc05hbWU6IG51bGwsXG4gICAgfSxcbiAgICByZXBhaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gb3B0aW9ucy5iYXJUaGlja25lc3MgKiA1OyAvLyBuZWVkIHNwYWNlIGZvciBzaGFkb3dcblxuICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICBjdHguc2hhZG93Qmx1ciA9IG9wdGlvbnMuc2hhZG93Qmx1cjtcbiAgICAgIGN0eC5zaGFkb3dDb2xvciA9IG9wdGlvbnMuc2hhZG93Q29sb3I7XG5cbiAgICAgIHZhciBsaW5lR3JhZGllbnQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgY2FudmFzLndpZHRoLCAwKTtcbiAgICAgIGZvciAodmFyIHN0b3AgaW4gb3B0aW9ucy5iYXJDb2xvcnMpXG4gICAgICAgIGxpbmVHcmFkaWVudC5hZGRDb2xvclN0b3Aoc3RvcCwgb3B0aW9ucy5iYXJDb2xvcnNbc3RvcF0pO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IG9wdGlvbnMuYmFyVGhpY2tuZXNzO1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgY3R4Lm1vdmVUbygwLCBvcHRpb25zLmJhclRoaWNrbmVzcyAvIDIpO1xuICAgICAgY3R4LmxpbmVUbyhcbiAgICAgICAgTWF0aC5jZWlsKGN1cnJlbnRQcm9ncmVzcyAqIGNhbnZhcy53aWR0aCksXG4gICAgICAgIG9wdGlvbnMuYmFyVGhpY2tuZXNzIC8gMlxuICAgICAgKTtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGxpbmVHcmFkaWVudDtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9LFxuICAgIGNyZWF0ZUNhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICB2YXIgc3R5bGUgPSBjYW52YXMuc3R5bGU7XG4gICAgICBzdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcbiAgICAgIHN0eWxlLnRvcCA9IHN0eWxlLmxlZnQgPSBzdHlsZS5yaWdodCA9IHN0eWxlLm1hcmdpbiA9IHN0eWxlLnBhZGRpbmcgPSAwO1xuICAgICAgc3R5bGUuekluZGV4ID0gMTAwMDAxO1xuICAgICAgc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgaWYgKG9wdGlvbnMuY2xhc3NOYW1lKSBjYW52YXMuY2xhc3NMaXN0LmFkZChvcHRpb25zLmNsYXNzTmFtZSk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgICBhZGRFdmVudCh3aW5kb3csIFwicmVzaXplXCIsIHJlcGFpbnQpO1xuICAgIH0sXG4gICAgdG9wYmFyID0ge1xuICAgICAgY29uZmlnOiBmdW5jdGlvbiAob3B0cykge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0cylcbiAgICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBvcHRpb25zW2tleV0gPSBvcHRzW2tleV07XG4gICAgICB9LFxuICAgICAgc2hvdzogZnVuY3Rpb24gKGRlbGF5KSB7XG4gICAgICAgIGlmIChzaG93aW5nKSByZXR1cm47XG4gICAgICAgIGlmIChkZWxheSkge1xuICAgICAgICAgIGlmIChkZWxheVRpbWVySWQpIHJldHVybjtcbiAgICAgICAgICBkZWxheVRpbWVySWQgPSBzZXRUaW1lb3V0KCgpID0+IHRvcGJhci5zaG93KCksIGRlbGF5KTtcbiAgICAgICAgfSBlbHNlICB7XG4gICAgICAgICAgc2hvd2luZyA9IHRydWU7XG4gICAgICAgICAgaWYgKGZhZGVUaW1lcklkICE9PSBudWxsKSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoZmFkZVRpbWVySWQpO1xuICAgICAgICAgIGlmICghY2FudmFzKSBjcmVhdGVDYW52YXMoKTtcbiAgICAgICAgICBjYW52YXMuc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgICAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgdG9wYmFyLnByb2dyZXNzKDApO1xuICAgICAgICAgIGlmIChvcHRpb25zLmF1dG9SdW4pIHtcbiAgICAgICAgICAgIChmdW5jdGlvbiBsb29wKCkge1xuICAgICAgICAgICAgICBwcm9ncmVzc1RpbWVySWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuICAgICAgICAgICAgICB0b3BiYXIucHJvZ3Jlc3MoXG4gICAgICAgICAgICAgICAgXCIrXCIgKyAwLjA1ICogTWF0aC5wb3coMSAtIE1hdGguc3FydChjdXJyZW50UHJvZ3Jlc3MpLCAyKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwcm9ncmVzczogZnVuY3Rpb24gKHRvKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdG8gPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBjdXJyZW50UHJvZ3Jlc3M7XG4gICAgICAgIGlmICh0eXBlb2YgdG8gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICB0byA9XG4gICAgICAgICAgICAodG8uaW5kZXhPZihcIitcIikgPj0gMCB8fCB0by5pbmRleE9mKFwiLVwiKSA+PSAwXG4gICAgICAgICAgICAgID8gY3VycmVudFByb2dyZXNzXG4gICAgICAgICAgICAgIDogMCkgKyBwYXJzZUZsb2F0KHRvKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50UHJvZ3Jlc3MgPSB0byA+IDEgPyAxIDogdG87XG4gICAgICAgIHJlcGFpbnQoKTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9ncmVzcztcbiAgICAgIH0sXG4gICAgICBoaWRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChkZWxheVRpbWVySWQpO1xuICAgICAgICBkZWxheVRpbWVySWQgPSBudWxsO1xuICAgICAgICBpZiAoIXNob3dpbmcpIHJldHVybjtcbiAgICAgICAgc2hvd2luZyA9IGZhbHNlO1xuICAgICAgICBpZiAocHJvZ3Jlc3NUaW1lcklkICE9IG51bGwpIHtcbiAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUocHJvZ3Jlc3NUaW1lcklkKTtcbiAgICAgICAgICBwcm9ncmVzc1RpbWVySWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIChmdW5jdGlvbiBsb29wKCkge1xuICAgICAgICAgIGlmICh0b3BiYXIucHJvZ3Jlc3MoXCIrLjFcIikgPj0gMSkge1xuICAgICAgICAgICAgY2FudmFzLnN0eWxlLm9wYWNpdHkgLT0gMC4wNTtcbiAgICAgICAgICAgIGlmIChjYW52YXMuc3R5bGUub3BhY2l0eSA8PSAwLjA1KSB7XG4gICAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgIGZhZGVUaW1lcklkID0gbnVsbDtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmYWRlVGltZXJJZCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gICAgICAgIH0pKCk7XG4gICAgICB9LFxuICAgIH07XG5cbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB0b3BiYXI7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRvcGJhcjtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnRvcGJhciA9IHRvcGJhcjtcbiAgfVxufS5jYWxsKHRoaXMsIHdpbmRvdywgZG9jdW1lbnQpKTtcbiIsICJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgUG9seWZpbGxFdmVudCA9IGV2ZW50Q29uc3RydWN0b3IoKTtcblxuICBmdW5jdGlvbiBldmVudENvbnN0cnVjdG9yKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB3aW5kb3cuQ3VzdG9tRXZlbnQ7XG4gICAgLy8gSUU8PTkgU3VwcG9ydFxuICAgIGZ1bmN0aW9uIEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMpIHtcbiAgICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7YnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IHVuZGVmaW5lZH07XG4gICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgICBldnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICAgICAgcmV0dXJuIGV2dDtcbiAgICB9XG4gICAgQ3VzdG9tRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcbiAgICByZXR1cm4gQ3VzdG9tRXZlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBidWlsZEhpZGRlbklucHV0KG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgIGlucHV0Lm5hbWUgPSBuYW1lO1xuICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2xpY2soZWxlbWVudCwgdGFyZ2V0TW9kaWZpZXJLZXkpIHtcbiAgICB2YXIgdG8gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdG9cIiksXG4gICAgICAgIG1ldGhvZCA9IGJ1aWxkSGlkZGVuSW5wdXQoXCJfbWV0aG9kXCIsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tZXRob2RcIikpLFxuICAgICAgICBjc3JmID0gYnVpbGRIaWRkZW5JbnB1dChcIl9jc3JmX3Rva2VuXCIsIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jc3JmXCIpKSxcbiAgICAgICAgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpLFxuICAgICAgICBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXG4gICAgICAgIHRhcmdldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpO1xuXG4gICAgZm9ybS5tZXRob2QgPSAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1ldGhvZFwiKSA9PT0gXCJnZXRcIikgPyBcImdldFwiIDogXCJwb3N0XCI7XG4gICAgZm9ybS5hY3Rpb24gPSB0bztcbiAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIGlmICh0YXJnZXQpIGZvcm0udGFyZ2V0ID0gdGFyZ2V0O1xuICAgIGVsc2UgaWYgKHRhcmdldE1vZGlmaWVyS2V5KSBmb3JtLnRhcmdldCA9IFwiX2JsYW5rXCI7XG5cbiAgICBmb3JtLmFwcGVuZENoaWxkKGNzcmYpO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQobWV0aG9kKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuXG4gICAgLy8gSW5zZXJ0IGEgYnV0dG9uIGFuZCBjbGljayBpdCBpbnN0ZWFkIG9mIHVzaW5nIGBmb3JtLnN1Ym1pdGBcbiAgICAvLyBiZWNhdXNlIHRoZSBgc3VibWl0YCBmdW5jdGlvbiBkb2VzIG5vdCBlbWl0IGEgYHN1Ym1pdGAgZXZlbnQuXG4gICAgc3VibWl0LnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgIGZvcm0uYXBwZW5kQ2hpbGQoc3VibWl0KTtcbiAgICBzdWJtaXQuY2xpY2soKTtcbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgIHZhciBlbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXG4gICAgd2hpbGUgKGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgIHZhciBwaG9lbml4TGlua0V2ZW50ID0gbmV3IFBvbHlmaWxsRXZlbnQoJ3Bob2VuaXgubGluay5jbGljaycsIHtcbiAgICAgICAgXCJidWJibGVzXCI6IHRydWUsIFwiY2FuY2VsYWJsZVwiOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFlbGVtZW50LmRpc3BhdGNoRXZlbnQocGhvZW5peExpbmtFdmVudCkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWV0aG9kXCIpKSB7XG4gICAgICAgIGhhbmRsZUNsaWNrKGVsZW1lbnQsIGUubWV0YUtleSB8fCBlLnNoaWZ0S2V5KTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgfVxuICAgIH1cbiAgfSwgZmFsc2UpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwaG9lbml4LmxpbmsuY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBtZXNzYWdlID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jb25maXJtXCIpO1xuICAgIGlmKG1lc3NhZ2UgJiYgIXdpbmRvdy5jb25maXJtKG1lc3NhZ2UpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LCBmYWxzZSk7XG59KSgpO1xuIiwgIi8vIHdyYXBzIHZhbHVlIGluIGNsb3N1cmUgb3IgcmV0dXJucyBjbG9zdXJlXG5leHBvcnQgbGV0IGNsb3N1cmUgPSAodmFsdWUpID0+IHtcbiAgaWYodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpe1xuICAgIHJldHVybiB2YWx1ZVxuICB9IGVsc2Uge1xuICAgIGxldCBjbG9zdXJlID0gZnVuY3Rpb24gKCl7IHJldHVybiB2YWx1ZSB9XG4gICAgcmV0dXJuIGNsb3N1cmVcbiAgfVxufVxuIiwgImV4cG9ydCBjb25zdCBnbG9iYWxTZWxmID0gdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogbnVsbFxuZXhwb3J0IGNvbnN0IHBoeFdpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiBudWxsXG5leHBvcnQgY29uc3QgZ2xvYmFsID0gZ2xvYmFsU2VsZiB8fCBwaHhXaW5kb3cgfHwgZ2xvYmFsXG5leHBvcnQgY29uc3QgREVGQVVMVF9WU04gPSBcIjIuMC4wXCJcbmV4cG9ydCBjb25zdCBTT0NLRVRfU1RBVEVTID0ge2Nvbm5lY3Rpbmc6IDAsIG9wZW46IDEsIGNsb3Npbmc6IDIsIGNsb3NlZDogM31cbmV4cG9ydCBjb25zdCBERUZBVUxUX1RJTUVPVVQgPSAxMDAwMFxuZXhwb3J0IGNvbnN0IFdTX0NMT1NFX05PUk1BTCA9IDEwMDBcbmV4cG9ydCBjb25zdCBDSEFOTkVMX1NUQVRFUyA9IHtcbiAgY2xvc2VkOiBcImNsb3NlZFwiLFxuICBlcnJvcmVkOiBcImVycm9yZWRcIixcbiAgam9pbmVkOiBcImpvaW5lZFwiLFxuICBqb2luaW5nOiBcImpvaW5pbmdcIixcbiAgbGVhdmluZzogXCJsZWF2aW5nXCIsXG59XG5leHBvcnQgY29uc3QgQ0hBTk5FTF9FVkVOVFMgPSB7XG4gIGNsb3NlOiBcInBoeF9jbG9zZVwiLFxuICBlcnJvcjogXCJwaHhfZXJyb3JcIixcbiAgam9pbjogXCJwaHhfam9pblwiLFxuICByZXBseTogXCJwaHhfcmVwbHlcIixcbiAgbGVhdmU6IFwicGh4X2xlYXZlXCJcbn1cblxuZXhwb3J0IGNvbnN0IFRSQU5TUE9SVFMgPSB7XG4gIGxvbmdwb2xsOiBcImxvbmdwb2xsXCIsXG4gIHdlYnNvY2tldDogXCJ3ZWJzb2NrZXRcIlxufVxuZXhwb3J0IGNvbnN0IFhIUl9TVEFURVMgPSB7XG4gIGNvbXBsZXRlOiA0XG59XG4iLCAiLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgUHVzaFxuICogQHBhcmFtIHtDaGFubmVsfSBjaGFubmVsIC0gVGhlIENoYW5uZWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIFRoZSBldmVudCwgZm9yIGV4YW1wbGUgYFwicGh4X2pvaW5cImBcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIC0gVGhlIHBheWxvYWQsIGZvciBleGFtcGxlIGB7dXNlcl9pZDogMTIzfWBcbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IC0gVGhlIHB1c2ggdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHVzaCB7XG4gIGNvbnN0cnVjdG9yKGNoYW5uZWwsIGV2ZW50LCBwYXlsb2FkLCB0aW1lb3V0KXtcbiAgICB0aGlzLmNoYW5uZWwgPSBjaGFubmVsXG4gICAgdGhpcy5ldmVudCA9IGV2ZW50XG4gICAgdGhpcy5wYXlsb2FkID0gcGF5bG9hZCB8fCBmdW5jdGlvbiAoKXsgcmV0dXJuIHt9IH1cbiAgICB0aGlzLnJlY2VpdmVkUmVzcCA9IG51bGxcbiAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBudWxsXG4gICAgdGhpcy5yZWNIb29rcyA9IFtdXG4gICAgdGhpcy5zZW50ID0gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZW91dFxuICAgKi9cbiAgcmVzZW5kKHRpbWVvdXQpe1xuICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXRcbiAgICB0aGlzLnJlc2V0KClcbiAgICB0aGlzLnNlbmQoKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBzZW5kKCl7XG4gICAgaWYodGhpcy5oYXNSZWNlaXZlZChcInRpbWVvdXRcIikpeyByZXR1cm4gfVxuICAgIHRoaXMuc3RhcnRUaW1lb3V0KClcbiAgICB0aGlzLnNlbnQgPSB0cnVlXG4gICAgdGhpcy5jaGFubmVsLnNvY2tldC5wdXNoKHtcbiAgICAgIHRvcGljOiB0aGlzLmNoYW5uZWwudG9waWMsXG4gICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgIHBheWxvYWQ6IHRoaXMucGF5bG9hZCgpLFxuICAgICAgcmVmOiB0aGlzLnJlZixcbiAgICAgIGpvaW5fcmVmOiB0aGlzLmNoYW5uZWwuam9pblJlZigpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHN0YXR1c1xuICAgKiBAcGFyYW0geyp9IGNhbGxiYWNrXG4gICAqL1xuICByZWNlaXZlKHN0YXR1cywgY2FsbGJhY2spe1xuICAgIGlmKHRoaXMuaGFzUmVjZWl2ZWQoc3RhdHVzKSl7XG4gICAgICBjYWxsYmFjayh0aGlzLnJlY2VpdmVkUmVzcC5yZXNwb25zZSlcbiAgICB9XG5cbiAgICB0aGlzLnJlY0hvb2tzLnB1c2goe3N0YXR1cywgY2FsbGJhY2t9KVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc2V0KCl7XG4gICAgdGhpcy5jYW5jZWxSZWZFdmVudCgpXG4gICAgdGhpcy5yZWYgPSBudWxsXG4gICAgdGhpcy5yZWZFdmVudCA9IG51bGxcbiAgICB0aGlzLnJlY2VpdmVkUmVzcCA9IG51bGxcbiAgICB0aGlzLnNlbnQgPSBmYWxzZVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtYXRjaFJlY2VpdmUoe3N0YXR1cywgcmVzcG9uc2UsIF9yZWZ9KXtcbiAgICB0aGlzLnJlY0hvb2tzLmZpbHRlcihoID0+IGguc3RhdHVzID09PSBzdGF0dXMpXG4gICAgICAuZm9yRWFjaChoID0+IGguY2FsbGJhY2socmVzcG9uc2UpKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjYW5jZWxSZWZFdmVudCgpe1xuICAgIGlmKCF0aGlzLnJlZkV2ZW50KXsgcmV0dXJuIH1cbiAgICB0aGlzLmNoYW5uZWwub2ZmKHRoaXMucmVmRXZlbnQpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhbmNlbFRpbWVvdXQoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0VGltZXIpXG4gICAgdGhpcy50aW1lb3V0VGltZXIgPSBudWxsXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0VGltZW91dCgpe1xuICAgIGlmKHRoaXMudGltZW91dFRpbWVyKXsgdGhpcy5jYW5jZWxUaW1lb3V0KCkgfVxuICAgIHRoaXMucmVmID0gdGhpcy5jaGFubmVsLnNvY2tldC5tYWtlUmVmKClcbiAgICB0aGlzLnJlZkV2ZW50ID0gdGhpcy5jaGFubmVsLnJlcGx5RXZlbnROYW1lKHRoaXMucmVmKVxuXG4gICAgdGhpcy5jaGFubmVsLm9uKHRoaXMucmVmRXZlbnQsIHBheWxvYWQgPT4ge1xuICAgICAgdGhpcy5jYW5jZWxSZWZFdmVudCgpXG4gICAgICB0aGlzLmNhbmNlbFRpbWVvdXQoKVxuICAgICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBwYXlsb2FkXG4gICAgICB0aGlzLm1hdGNoUmVjZWl2ZShwYXlsb2FkKVxuICAgIH0pXG5cbiAgICB0aGlzLnRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmlnZ2VyKFwidGltZW91dFwiLCB7fSlcbiAgICB9LCB0aGlzLnRpbWVvdXQpXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhc1JlY2VpdmVkKHN0YXR1cyl7XG4gICAgcmV0dXJuIHRoaXMucmVjZWl2ZWRSZXNwICYmIHRoaXMucmVjZWl2ZWRSZXNwLnN0YXR1cyA9PT0gc3RhdHVzXG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRyaWdnZXIoc3RhdHVzLCByZXNwb25zZSl7XG4gICAgdGhpcy5jaGFubmVsLnRyaWdnZXIodGhpcy5yZWZFdmVudCwge3N0YXR1cywgcmVzcG9uc2V9KVxuICB9XG59XG4iLCAiLyoqXG4gKlxuICogQ3JlYXRlcyBhIHRpbWVyIHRoYXQgYWNjZXB0cyBhIGB0aW1lckNhbGNgIGZ1bmN0aW9uIHRvIHBlcmZvcm1cbiAqIGNhbGN1bGF0ZWQgdGltZW91dCByZXRyaWVzLCBzdWNoIGFzIGV4cG9uZW50aWFsIGJhY2tvZmYuXG4gKlxuICogQGV4YW1wbGVcbiAqIGxldCByZWNvbm5lY3RUaW1lciA9IG5ldyBUaW1lcigoKSA9PiB0aGlzLmNvbm5lY3QoKSwgZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDUwMDAsIDEwMDAwXVt0cmllcyAtIDFdIHx8IDEwMDAwXG4gKiB9KVxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgMTAwMFxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgNTAwMFxuICogcmVjb25uZWN0VGltZXIucmVzZXQoKVxuICogcmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCkgLy8gZmlyZXMgYWZ0ZXIgMTAwMFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0aW1lckNhbGNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZXIge1xuICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgdGltZXJDYWxjKXtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tcbiAgICB0aGlzLnRpbWVyQ2FsYyA9IHRpbWVyQ2FsY1xuICAgIHRoaXMudGltZXIgPSBudWxsXG4gICAgdGhpcy50cmllcyA9IDBcbiAgfVxuXG4gIHJlc2V0KCl7XG4gICAgdGhpcy50cmllcyA9IDBcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcilcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIGFueSBwcmV2aW91cyBzY2hlZHVsZVRpbWVvdXQgYW5kIHNjaGVkdWxlcyBjYWxsYmFja1xuICAgKi9cbiAgc2NoZWR1bGVUaW1lb3V0KCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpXG5cbiAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRyaWVzID0gdGhpcy50cmllcyArIDFcbiAgICAgIHRoaXMuY2FsbGJhY2soKVxuICAgIH0sIHRoaXMudGltZXJDYWxjKHRoaXMudHJpZXMgKyAxKSlcbiAgfVxufVxuIiwgImltcG9ydCB7Y2xvc3VyZX0gZnJvbSBcIi4vdXRpbHNcIlxuaW1wb3J0IHtcbiAgQ0hBTk5FTF9FVkVOVFMsXG4gIENIQU5ORUxfU1RBVEVTLFxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgUHVzaCBmcm9tIFwiLi9wdXNoXCJcbmltcG9ydCBUaW1lciBmcm9tIFwiLi90aW1lclwiXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY1xuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKX0gcGFyYW1zXG4gKiBAcGFyYW0ge1NvY2tldH0gc29ja2V0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYW5uZWwge1xuICBjb25zdHJ1Y3Rvcih0b3BpYywgcGFyYW1zLCBzb2NrZXQpe1xuICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5jbG9zZWRcbiAgICB0aGlzLnRvcGljID0gdG9waWNcbiAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUocGFyYW1zIHx8IHt9KVxuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0XG4gICAgdGhpcy5iaW5kaW5ncyA9IFtdXG4gICAgdGhpcy5iaW5kaW5nUmVmID0gMFxuICAgIHRoaXMudGltZW91dCA9IHRoaXMuc29ja2V0LnRpbWVvdXRcbiAgICB0aGlzLmpvaW5lZE9uY2UgPSBmYWxzZVxuICAgIHRoaXMuam9pblB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5qb2luLCB0aGlzLnBhcmFtcywgdGhpcy50aW1lb3V0KVxuICAgIHRoaXMucHVzaEJ1ZmZlciA9IFtdXG4gICAgdGhpcy5zdGF0ZUNoYW5nZVJlZnMgPSBbXVxuXG4gICAgdGhpcy5yZWpvaW5UaW1lciA9IG5ldyBUaW1lcigoKSA9PiB7XG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW4oKSB9XG4gICAgfSwgdGhpcy5zb2NrZXQucmVqb2luQWZ0ZXJNcylcbiAgICB0aGlzLnN0YXRlQ2hhbmdlUmVmcy5wdXNoKHRoaXMuc29ja2V0Lm9uRXJyb3IoKCkgPT4gdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpKSlcbiAgICB0aGlzLnN0YXRlQ2hhbmdlUmVmcy5wdXNoKHRoaXMuc29ja2V0Lm9uT3BlbigoKSA9PiB7XG4gICAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICAgIGlmKHRoaXMuaXNFcnJvcmVkKCkpeyB0aGlzLnJlam9pbigpIH1cbiAgICB9KVxuICAgIClcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJva1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuam9pbmVkXG4gICAgICB0aGlzLnJlam9pblRpbWVyLnJlc2V0KClcbiAgICAgIHRoaXMucHVzaEJ1ZmZlci5mb3JFYWNoKHB1c2hFdmVudCA9PiBwdXNoRXZlbnQuc2VuZCgpKVxuICAgICAgdGhpcy5wdXNoQnVmZmVyID0gW11cbiAgICB9KVxuICAgIHRoaXMuam9pblB1c2gucmVjZWl2ZShcImVycm9yXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLm9uQ2xvc2UoKCkgPT4ge1xuICAgICAgdGhpcy5yZWpvaW5UaW1lci5yZXNldCgpXG4gICAgICBpZih0aGlzLnNvY2tldC5oYXNMb2dnZXIoKSkgdGhpcy5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBgY2xvc2UgJHt0aGlzLnRvcGljfSAke3RoaXMuam9pblJlZigpfWApXG4gICAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkXG4gICAgICB0aGlzLnNvY2tldC5yZW1vdmUodGhpcylcbiAgICB9KVxuICAgIHRoaXMub25FcnJvcihyZWFzb24gPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGVycm9yICR7dGhpcy50b3BpY31gLCByZWFzb24pXG4gICAgICBpZih0aGlzLmlzSm9pbmluZygpKXsgdGhpcy5qb2luUHVzaC5yZXNldCgpIH1cbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICBpZih0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKSB9XG4gICAgfSlcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IHtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIGB0aW1lb3V0ICR7dGhpcy50b3BpY30gKCR7dGhpcy5qb2luUmVmKCl9KWAsIHRoaXMuam9pblB1c2gudGltZW91dClcbiAgICAgIGxldCBsZWF2ZVB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5sZWF2ZSwgY2xvc3VyZSh7fSksIHRoaXMudGltZW91dClcbiAgICAgIGxlYXZlUHVzaC5zZW5kKClcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5lcnJvcmVkXG4gICAgICB0aGlzLmpvaW5QdXNoLnJlc2V0KClcbiAgICAgIGlmKHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkpeyB0aGlzLnJlam9pblRpbWVyLnNjaGVkdWxlVGltZW91dCgpIH1cbiAgICB9KVxuICAgIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMucmVwbHksIChwYXlsb2FkLCByZWYpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlcih0aGlzLnJlcGx5RXZlbnROYW1lKHJlZiksIHBheWxvYWQpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBKb2luIHRoZSBjaGFubmVsXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gdGltZW91dFxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIGpvaW4odGltZW91dCA9IHRoaXMudGltZW91dCl7XG4gICAgaWYodGhpcy5qb2luZWRPbmNlKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInRyaWVkIHRvIGpvaW4gbXVsdGlwbGUgdGltZXMuICdqb2luJyBjYW4gb25seSBiZSBjYWxsZWQgYSBzaW5nbGUgdGltZSBwZXIgY2hhbm5lbCBpbnN0YW5jZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgICB0aGlzLmpvaW5lZE9uY2UgPSB0cnVlXG4gICAgICB0aGlzLnJlam9pbigpXG4gICAgICByZXR1cm4gdGhpcy5qb2luUHVzaFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIb29rIGludG8gY2hhbm5lbCBjbG9zZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25DbG9zZShjYWxsYmFjayl7XG4gICAgdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5jbG9zZSwgY2FsbGJhY2spXG4gIH1cblxuICAvKipcbiAgICogSG9vayBpbnRvIGNoYW5uZWwgZXJyb3JzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbkVycm9yKGNhbGxiYWNrKXtcbiAgICByZXR1cm4gdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5lcnJvciwgcmVhc29uID0+IGNhbGxiYWNrKHJlYXNvbikpXG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlcyBvbiBjaGFubmVsIGV2ZW50c1xuICAgKlxuICAgKiBTdWJzY3JpcHRpb24gcmV0dXJucyBhIHJlZiBjb3VudGVyLCB3aGljaCBjYW4gYmUgdXNlZCBsYXRlciB0b1xuICAgKiB1bnN1YnNjcmliZSB0aGUgZXhhY3QgZXZlbnQgbGlzdGVuZXJcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgcmVmMSA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19zdHVmZilcbiAgICogY29uc3QgcmVmMiA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19vdGhlcl9zdHVmZilcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiLCByZWYxKVxuICAgKiAvLyBTaW5jZSB1bnN1YnNjcmlwdGlvbiwgZG9fc3R1ZmYgd29uJ3QgZmlyZSxcbiAgICogLy8gd2hpbGUgZG9fb3RoZXJfc3R1ZmYgd2lsbCBrZWVwIGZpcmluZyBvbiB0aGUgXCJldmVudFwiXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiBAcmV0dXJucyB7aW50ZWdlcn0gcmVmXG4gICAqL1xuICBvbihldmVudCwgY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLmJpbmRpbmdSZWYrK1xuICAgIHRoaXMuYmluZGluZ3MucHVzaCh7ZXZlbnQsIHJlZiwgY2FsbGJhY2t9KVxuICAgIHJldHVybiByZWZcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnN1YnNjcmliZXMgb2ZmIG9mIGNoYW5uZWwgZXZlbnRzXG4gICAqXG4gICAqIFVzZSB0aGUgcmVmIHJldHVybmVkIGZyb20gYSBjaGFubmVsLm9uKCkgdG8gdW5zdWJzY3JpYmUgb25lXG4gICAqIGhhbmRsZXIsIG9yIHBhc3Mgbm90aGluZyBmb3IgdGhlIHJlZiB0byB1bnN1YnNjcmliZSBhbGxcbiAgICogaGFuZGxlcnMgZm9yIHRoZSBnaXZlbiBldmVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gVW5zdWJzY3JpYmUgdGhlIGRvX3N0dWZmIGhhbmRsZXJcbiAgICogY29uc3QgcmVmMSA9IGNoYW5uZWwub24oXCJldmVudFwiLCBkb19zdHVmZilcbiAgICogY2hhbm5lbC5vZmYoXCJldmVudFwiLCByZWYxKVxuICAgKlxuICAgKiAvLyBVbnN1YnNjcmliZSBhbGwgaGFuZGxlcnMgZnJvbSBldmVudFxuICAgKiBjaGFubmVsLm9mZihcImV2ZW50XCIpXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IHJlZlxuICAgKi9cbiAgb2ZmKGV2ZW50LCByZWYpe1xuICAgIHRoaXMuYmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmZpbHRlcigoYmluZCkgPT4ge1xuICAgICAgcmV0dXJuICEoYmluZC5ldmVudCA9PT0gZXZlbnQgJiYgKHR5cGVvZiByZWYgPT09IFwidW5kZWZpbmVkXCIgfHwgcmVmID09PSBiaW5kLnJlZikpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FuUHVzaCgpeyByZXR1cm4gdGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSAmJiB0aGlzLmlzSm9pbmVkKCkgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIG1lc3NhZ2UgYGV2ZW50YCB0byBwaG9lbml4IHdpdGggdGhlIHBheWxvYWQgYHBheWxvYWRgLlxuICAgKiBQaG9lbml4IHJlY2VpdmVzIHRoaXMgaW4gdGhlIGBoYW5kbGVfaW4oZXZlbnQsIHBheWxvYWQsIHNvY2tldClgXG4gICAqIGZ1bmN0aW9uLiBpZiBwaG9lbml4IHJlcGxpZXMgb3IgaXQgdGltZXMgb3V0IChkZWZhdWx0IDEwMDAwbXMpLFxuICAgKiB0aGVuIG9wdGlvbmFsbHkgdGhlIHJlcGx5IGNhbiBiZSByZWNlaXZlZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY2hhbm5lbC5wdXNoKFwiZXZlbnRcIilcbiAgICogICAucmVjZWl2ZShcIm9rXCIsIHBheWxvYWQgPT4gY29uc29sZS5sb2coXCJwaG9lbml4IHJlcGxpZWQ6XCIsIHBheWxvYWQpKVxuICAgKiAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgZXJyID0+IGNvbnNvbGUubG9nKFwicGhvZW5peCBlcnJvcmVkXCIsIGVycikpXG4gICAqICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IGNvbnNvbGUubG9nKFwidGltZWQgb3V0IHB1c2hpbmdcIikpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW3RpbWVvdXRdXG4gICAqIEByZXR1cm5zIHtQdXNofVxuICAgKi9cbiAgcHVzaChldmVudCwgcGF5bG9hZCwgdGltZW91dCA9IHRoaXMudGltZW91dCl7XG4gICAgcGF5bG9hZCA9IHBheWxvYWQgfHwge31cbiAgICBpZighdGhpcy5qb2luZWRPbmNlKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdHJpZWQgdG8gcHVzaCAnJHtldmVudH0nIHRvICcke3RoaXMudG9waWN9JyBiZWZvcmUgam9pbmluZy4gVXNlIGNoYW5uZWwuam9pbigpIGJlZm9yZSBwdXNoaW5nIGV2ZW50c2ApXG4gICAgfVxuICAgIGxldCBwdXNoRXZlbnQgPSBuZXcgUHVzaCh0aGlzLCBldmVudCwgZnVuY3Rpb24gKCl7IHJldHVybiBwYXlsb2FkIH0sIHRpbWVvdXQpXG4gICAgaWYodGhpcy5jYW5QdXNoKCkpe1xuICAgICAgcHVzaEV2ZW50LnNlbmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBwdXNoRXZlbnQuc3RhcnRUaW1lb3V0KClcbiAgICAgIHRoaXMucHVzaEJ1ZmZlci5wdXNoKHB1c2hFdmVudClcbiAgICB9XG5cbiAgICByZXR1cm4gcHVzaEV2ZW50XG4gIH1cblxuICAvKiogTGVhdmVzIHRoZSBjaGFubmVsXG4gICAqXG4gICAqIFVuc3Vic2NyaWJlcyBmcm9tIHNlcnZlciBldmVudHMsIGFuZFxuICAgKiBpbnN0cnVjdHMgY2hhbm5lbCB0byB0ZXJtaW5hdGUgb24gc2VydmVyXG4gICAqXG4gICAqIFRyaWdnZXJzIG9uQ2xvc2UoKSBob29rc1xuICAgKlxuICAgKiBUbyByZWNlaXZlIGxlYXZlIGFja25vd2xlZGdlbWVudHMsIHVzZSB0aGUgYHJlY2VpdmVgXG4gICAqIGhvb2sgdG8gYmluZCB0byB0aGUgc2VydmVyIGFjaywgaWU6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNoYW5uZWwubGVhdmUoKS5yZWNlaXZlKFwib2tcIiwgKCkgPT4gYWxlcnQoXCJsZWZ0IVwiKSApXG4gICAqXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gdGltZW91dFxuICAgKiBAcmV0dXJucyB7UHVzaH1cbiAgICovXG4gIGxlYXZlKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIHRoaXMucmVqb2luVGltZXIucmVzZXQoKVxuICAgIHRoaXMuam9pblB1c2guY2FuY2VsVGltZW91dCgpXG5cbiAgICB0aGlzLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMubGVhdmluZ1xuICAgIGxldCBvbkNsb3NlID0gKCkgPT4ge1xuICAgICAgaWYodGhpcy5zb2NrZXQuaGFzTG9nZ2VyKCkpIHRoaXMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgYGxlYXZlICR7dGhpcy50b3BpY31gKVxuICAgICAgdGhpcy50cmlnZ2VyKENIQU5ORUxfRVZFTlRTLmNsb3NlLCBcImxlYXZlXCIpXG4gICAgfVxuICAgIGxldCBsZWF2ZVB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5sZWF2ZSwgY2xvc3VyZSh7fSksIHRpbWVvdXQpXG4gICAgbGVhdmVQdXNoLnJlY2VpdmUoXCJva1wiLCAoKSA9PiBvbkNsb3NlKCkpXG4gICAgICAucmVjZWl2ZShcInRpbWVvdXRcIiwgKCkgPT4gb25DbG9zZSgpKVxuICAgIGxlYXZlUHVzaC5zZW5kKClcbiAgICBpZighdGhpcy5jYW5QdXNoKCkpeyBsZWF2ZVB1c2gudHJpZ2dlcihcIm9rXCIsIHt9KSB9XG5cbiAgICByZXR1cm4gbGVhdmVQdXNoXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGFibGUgbWVzc2FnZSBob29rXG4gICAqXG4gICAqIFJlY2VpdmVzIGFsbCBldmVudHMgZm9yIHNwZWNpYWxpemVkIG1lc3NhZ2UgaGFuZGxpbmdcbiAgICogYmVmb3JlIGRpc3BhdGNoaW5nIHRvIHRoZSBjaGFubmVsIGNhbGxiYWNrcy5cbiAgICpcbiAgICogTXVzdCByZXR1cm4gdGhlIHBheWxvYWQsIG1vZGlmaWVkIG9yIHVubW9kaWZpZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkXG4gICAqIEBwYXJhbSB7aW50ZWdlcn0gcmVmXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBvbk1lc3NhZ2UoX2V2ZW50LCBwYXlsb2FkLCBfcmVmKXsgcmV0dXJuIHBheWxvYWQgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNNZW1iZXIodG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luUmVmKXtcbiAgICBpZih0aGlzLnRvcGljICE9PSB0b3BpYyl7IHJldHVybiBmYWxzZSB9XG5cbiAgICBpZihqb2luUmVmICYmIGpvaW5SZWYgIT09IHRoaXMuam9pblJlZigpKXtcbiAgICAgIGlmKHRoaXMuc29ja2V0Lmhhc0xvZ2dlcigpKSB0aGlzLnNvY2tldC5sb2coXCJjaGFubmVsXCIsIFwiZHJvcHBpbmcgb3V0ZGF0ZWQgbWVzc2FnZVwiLCB7dG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luUmVmfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgam9pblJlZigpeyByZXR1cm4gdGhpcy5qb2luUHVzaC5yZWYgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVqb2luKHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpe1xuICAgIGlmKHRoaXMuaXNMZWF2aW5nKCkpeyByZXR1cm4gfVxuICAgIHRoaXMuc29ja2V0LmxlYXZlT3BlblRvcGljKHRoaXMudG9waWMpXG4gICAgdGhpcy5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmpvaW5pbmdcbiAgICB0aGlzLmpvaW5QdXNoLnJlc2VuZCh0aW1lb3V0KVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5SZWYpe1xuICAgIGxldCBoYW5kbGVkUGF5bG9hZCA9IHRoaXMub25NZXNzYWdlKGV2ZW50LCBwYXlsb2FkLCByZWYsIGpvaW5SZWYpXG4gICAgaWYocGF5bG9hZCAmJiAhaGFuZGxlZFBheWxvYWQpeyB0aHJvdyBuZXcgRXJyb3IoXCJjaGFubmVsIG9uTWVzc2FnZSBjYWxsYmFja3MgbXVzdCByZXR1cm4gdGhlIHBheWxvYWQsIG1vZGlmaWVkIG9yIHVubW9kaWZpZWRcIikgfVxuXG4gICAgbGV0IGV2ZW50QmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmZpbHRlcihiaW5kID0+IGJpbmQuZXZlbnQgPT09IGV2ZW50KVxuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGV2ZW50QmluZGluZ3MubGVuZ3RoOyBpKyspe1xuICAgICAgbGV0IGJpbmQgPSBldmVudEJpbmRpbmdzW2ldXG4gICAgICBiaW5kLmNhbGxiYWNrKGhhbmRsZWRQYXlsb2FkLCByZWYsIGpvaW5SZWYgfHwgdGhpcy5qb2luUmVmKCkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXBseUV2ZW50TmFtZShyZWYpeyByZXR1cm4gYGNoYW5fcmVwbHlfJHtyZWZ9YCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0Nsb3NlZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuY2xvc2VkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzRXJyb3JlZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZCB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0pvaW5lZCgpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuam9pbmVkIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzSm9pbmluZygpeyByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuam9pbmluZyB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0xlYXZpbmcoKXsgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmxlYXZpbmcgfVxufVxuIiwgImltcG9ydCB7XG4gIGdsb2JhbCxcbiAgWEhSX1NUQVRFU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBamF4IHtcblxuICBzdGF0aWMgcmVxdWVzdChtZXRob2QsIGVuZFBvaW50LCBhY2NlcHQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIGlmKGdsb2JhbC5YRG9tYWluUmVxdWVzdCl7XG4gICAgICBsZXQgcmVxID0gbmV3IGdsb2JhbC5YRG9tYWluUmVxdWVzdCgpIC8vIElFOCwgSUU5XG4gICAgICByZXR1cm4gdGhpcy54ZG9tYWluUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCByZXEgPSBuZXcgZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0KCkgLy8gSUU3KywgRmlyZWZveCwgQ2hyb21lLCBPcGVyYSwgU2FmYXJpXG4gICAgICByZXR1cm4gdGhpcy54aHJSZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB4ZG9tYWluUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIHJlcS50aW1lb3V0ID0gdGltZW91dFxuICAgIHJlcS5vcGVuKG1ldGhvZCwgZW5kUG9pbnQpXG4gICAgcmVxLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGxldCByZXNwb25zZSA9IHRoaXMucGFyc2VKU09OKHJlcS5yZXNwb25zZVRleHQpXG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSlcbiAgICB9XG4gICAgaWYob250aW1lb3V0KXsgcmVxLm9udGltZW91dCA9IG9udGltZW91dCB9XG5cbiAgICAvLyBXb3JrIGFyb3VuZCBidWcgaW4gSUU5IHRoYXQgcmVxdWlyZXMgYW4gYXR0YWNoZWQgb25wcm9ncmVzcyBoYW5kbGVyXG4gICAgcmVxLm9ucHJvZ3Jlc3MgPSAoKSA9PiB7IH1cblxuICAgIHJlcS5zZW5kKGJvZHkpXG4gICAgcmV0dXJuIHJlcVxuICB9XG5cbiAgc3RhdGljIHhoclJlcXVlc3QocmVxLCBtZXRob2QsIGVuZFBvaW50LCBhY2NlcHQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spe1xuICAgIHJlcS5vcGVuKG1ldGhvZCwgZW5kUG9pbnQsIHRydWUpXG4gICAgcmVxLnRpbWVvdXQgPSB0aW1lb3V0XG4gICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgYWNjZXB0KVxuICAgIHJlcS5vbmVycm9yID0gKCkgPT4gY2FsbGJhY2sgJiYgY2FsbGJhY2sobnVsbClcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYocmVxLnJlYWR5U3RhdGUgPT09IFhIUl9TVEFURVMuY29tcGxldGUgJiYgY2FsbGJhY2spe1xuICAgICAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLnBhcnNlSlNPTihyZXEucmVzcG9uc2VUZXh0KVxuICAgICAgICBjYWxsYmFjayhyZXNwb25zZSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYob250aW1lb3V0KXsgcmVxLm9udGltZW91dCA9IG9udGltZW91dCB9XG5cbiAgICByZXEuc2VuZChib2R5KVxuICAgIHJldHVybiByZXFcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZUpTT04ocmVzcCl7XG4gICAgaWYoIXJlc3AgfHwgcmVzcCA9PT0gXCJcIil7IHJldHVybiBudWxsIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwKVxuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhcImZhaWxlZCB0byBwYXJzZSBKU09OIHJlc3BvbnNlXCIsIHJlc3ApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBzZXJpYWxpemUob2JqLCBwYXJlbnRLZXkpe1xuICAgIGxldCBxdWVyeVN0ciA9IFtdXG4gICAgZm9yKHZhciBrZXkgaW4gb2JqKXtcbiAgICAgIGlmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKXsgY29udGludWUgfVxuICAgICAgbGV0IHBhcmFtS2V5ID0gcGFyZW50S2V5ID8gYCR7cGFyZW50S2V5fVske2tleX1dYCA6IGtleVxuICAgICAgbGV0IHBhcmFtVmFsID0gb2JqW2tleV1cbiAgICAgIGlmKHR5cGVvZiBwYXJhbVZhbCA9PT0gXCJvYmplY3RcIil7XG4gICAgICAgIHF1ZXJ5U3RyLnB1c2godGhpcy5zZXJpYWxpemUocGFyYW1WYWwsIHBhcmFtS2V5KSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXJ5U3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtS2V5KSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtVmFsKSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5U3RyLmpvaW4oXCImXCIpXG4gIH1cblxuICBzdGF0aWMgYXBwZW5kUGFyYW1zKHVybCwgcGFyYW1zKXtcbiAgICBpZihPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCA9PT0gMCl7IHJldHVybiB1cmwgfVxuXG4gICAgbGV0IHByZWZpeCA9IHVybC5tYXRjaCgvXFw/LykgPyBcIiZcIiA6IFwiP1wiXG4gICAgcmV0dXJuIGAke3VybH0ke3ByZWZpeH0ke3RoaXMuc2VyaWFsaXplKHBhcmFtcyl9YFxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgU09DS0VUX1NUQVRFUyxcbiAgVFJBTlNQT1JUU1xufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgQWpheCBmcm9tIFwiLi9hamF4XCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9uZ1BvbGwge1xuXG4gIGNvbnN0cnVjdG9yKGVuZFBvaW50KXtcbiAgICB0aGlzLmVuZFBvaW50ID0gbnVsbFxuICAgIHRoaXMudG9rZW4gPSBudWxsXG4gICAgdGhpcy5za2lwSGVhcnRiZWF0ID0gdHJ1ZVxuICAgIHRoaXMucmVxcyA9IG5ldyBTZXQoKVxuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IGZhbHNlXG4gICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBudWxsXG4gICAgdGhpcy5jdXJyZW50QmF0Y2hUaW1lciA9IG51bGxcbiAgICB0aGlzLmJhdGNoQnVmZmVyID0gW11cbiAgICB0aGlzLm9ub3BlbiA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICB0aGlzLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgdGhpcy5vbmNsb3NlID0gZnVuY3Rpb24gKCl7IH0gLy8gbm9vcFxuICAgIHRoaXMucG9sbEVuZHBvaW50ID0gdGhpcy5ub3JtYWxpemVFbmRwb2ludChlbmRQb2ludClcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmdcbiAgICB0aGlzLnBvbGwoKVxuICB9XG5cbiAgbm9ybWFsaXplRW5kcG9pbnQoZW5kUG9pbnQpe1xuICAgIHJldHVybiAoZW5kUG9pbnRcbiAgICAgIC5yZXBsYWNlKFwid3M6Ly9cIiwgXCJodHRwOi8vXCIpXG4gICAgICAucmVwbGFjZShcIndzczovL1wiLCBcImh0dHBzOi8vXCIpXG4gICAgICAucmVwbGFjZShuZXcgUmVnRXhwKFwiKC4qKVxcL1wiICsgVFJBTlNQT1JUUy53ZWJzb2NrZXQpLCBcIiQxL1wiICsgVFJBTlNQT1JUUy5sb25ncG9sbCkpXG4gIH1cblxuICBlbmRwb2ludFVSTCgpe1xuICAgIHJldHVybiBBamF4LmFwcGVuZFBhcmFtcyh0aGlzLnBvbGxFbmRwb2ludCwge3Rva2VuOiB0aGlzLnRva2VufSlcbiAgfVxuXG4gIGNsb3NlQW5kUmV0cnkoY29kZSwgcmVhc29uLCB3YXNDbGVhbil7XG4gICAgdGhpcy5jbG9zZShjb2RlLCByZWFzb24sIHdhc0NsZWFuKVxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZ1xuICB9XG5cbiAgb250aW1lb3V0KCl7XG4gICAgdGhpcy5vbmVycm9yKFwidGltZW91dFwiKVxuICAgIHRoaXMuY2xvc2VBbmRSZXRyeSgxMDA1LCBcInRpbWVvdXRcIiwgZmFsc2UpXG4gIH1cblxuICBpc0FjdGl2ZSgpeyByZXR1cm4gdGhpcy5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLm9wZW4gfHwgdGhpcy5yZWFkeVN0YXRlID09PSBTT0NLRVRfU1RBVEVTLmNvbm5lY3RpbmcgfVxuXG4gIHBvbGwoKXtcbiAgICB0aGlzLmFqYXgoXCJHRVRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIG51bGwsICgpID0+IHRoaXMub250aW1lb3V0KCksIHJlc3AgPT4ge1xuICAgICAgaWYocmVzcCl7XG4gICAgICAgIHZhciB7c3RhdHVzLCB0b2tlbiwgbWVzc2FnZXN9ID0gcmVzcFxuICAgICAgICB0aGlzLnRva2VuID0gdG9rZW5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXR1cyA9IDBcbiAgICAgIH1cblxuICAgICAgc3dpdGNoKHN0YXR1cyl7XG4gICAgICAgIGNhc2UgMjAwOlxuICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2gobXNnID0+IHtcbiAgICAgICAgICAgIC8vIFRhc2tzIGFyZSB3aGF0IHRoaW5ncyBsaWtlIGV2ZW50IGhhbmRsZXJzLCBzZXRUaW1lb3V0IGNhbGxiYWNrcyxcbiAgICAgICAgICAgIC8vIHByb21pc2UgcmVzb2x2ZXMgYW5kIG1vcmUgYXJlIHJ1biB3aXRoaW4uXG4gICAgICAgICAgICAvLyBJbiBtb2Rlcm4gYnJvd3NlcnMsIHRoZXJlIGFyZSB0d28gZGlmZmVyZW50IGtpbmRzIG9mIHRhc2tzLFxuICAgICAgICAgICAgLy8gbWljcm90YXNrcyBhbmQgbWFjcm90YXNrcy5cbiAgICAgICAgICAgIC8vIE1pY3JvdGFza3MgYXJlIG1haW5seSB1c2VkIGZvciBQcm9taXNlcywgd2hpbGUgbWFjcm90YXNrcyBhcmVcbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIGV2ZXJ5dGhpbmcgZWxzZS5cbiAgICAgICAgICAgIC8vIE1pY3JvdGFza3MgYWx3YXlzIGhhdmUgcHJpb3JpdHkgb3ZlciBtYWNyb3Rhc2tzLiBJZiB0aGUgSlMgZW5naW5lXG4gICAgICAgICAgICAvLyBpcyBsb29raW5nIGZvciBhIHRhc2sgdG8gcnVuLCBpdCB3aWxsIGFsd2F5cyB0cnkgdG8gZW1wdHkgdGhlXG4gICAgICAgICAgICAvLyBtaWNyb3Rhc2sgcXVldWUgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcnVuIGFueXRoaW5nIGZyb20gdGhlXG4gICAgICAgICAgICAvLyBtYWNyb3Rhc2sgcXVldWUuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gRm9yIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0LCBtZXNzYWdlcyBhbHdheXMgYXJyaXZlIGluIHRoZWlyIG93blxuICAgICAgICAgICAgLy8gZXZlbnQuIFRoaXMgbWVhbnMgdGhhdCBpZiBhbnkgcHJvbWlzZXMgYXJlIHJlc29sdmVkIGZyb20gd2l0aGluLFxuICAgICAgICAgICAgLy8gdGhlaXIgY2FsbGJhY2tzIHdpbGwgYWx3YXlzIGZpbmlzaCBleGVjdXRpb24gYnkgdGhlIHRpbWUgdGhlXG4gICAgICAgICAgICAvLyBuZXh0IG1lc3NhZ2UgZXZlbnQgaGFuZGxlciBpcyBydW4uXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gZW11bGF0ZSB0aGlzIGJlaGF2aW91ciwgd2UgbmVlZCB0byBtYWtlIHN1cmUgZWFjaFxuICAgICAgICAgICAgLy8gb25tZXNzYWdlIGhhbmRsZXIgaXMgcnVuIHdpdGhpbiBpdHMgb3duIG1hY3JvdGFzay5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5vbm1lc3NhZ2Uoe2RhdGE6IG1zZ30pLCAwKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5wb2xsKClcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDIwNDpcbiAgICAgICAgICB0aGlzLnBvbGwoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDEwOlxuICAgICAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMub3BlblxuICAgICAgICAgIHRoaXMub25vcGVuKHt9KVxuICAgICAgICAgIHRoaXMucG9sbCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0MDM6XG4gICAgICAgICAgdGhpcy5vbmVycm9yKDQwMylcbiAgICAgICAgICB0aGlzLmNsb3NlKDEwMDgsIFwiZm9yYmlkZGVuXCIsIGZhbHNlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSA1MDA6XG4gICAgICAgICAgdGhpcy5vbmVycm9yKDUwMClcbiAgICAgICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAxMSwgXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgNTAwKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgdW5oYW5kbGVkIHBvbGwgc3RhdHVzICR7c3RhdHVzfWApXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHdlIGNvbGxlY3QgYWxsIHB1c2hlcyB3aXRoaW4gdGhlIGN1cnJlbnQgZXZlbnQgbG9vcCBieVxuICAvLyBzZXRUaW1lb3V0IDAsIHdoaWNoIG9wdGltaXplcyBiYWNrLXRvLWJhY2sgcHJvY2VkdXJhbFxuICAvLyBwdXNoZXMgYWdhaW5zdCBhbiBlbXB0eSBidWZmZXJcbiAgc2VuZChib2R5KXtcbiAgICBpZih0aGlzLmN1cnJlbnRCYXRjaCl7XG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaC5wdXNoKGJvZHkpXG4gICAgfSBlbHNlIGlmKHRoaXMuYXdhaXRpbmdCYXRjaEFjayl7XG4gICAgICB0aGlzLmJhdGNoQnVmZmVyLnB1c2goYm9keSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50QmF0Y2ggPSBbYm9keV1cbiAgICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaFNlbmQodGhpcy5jdXJyZW50QmF0Y2gpXG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoID0gbnVsbFxuICAgICAgfSwgMClcbiAgICB9XG4gIH1cblxuICBiYXRjaFNlbmQobWVzc2FnZXMpe1xuICAgIHRoaXMuYXdhaXRpbmdCYXRjaEFjayA9IHRydWVcbiAgICB0aGlzLmFqYXgoXCJQT1NUXCIsIFwiYXBwbGljYXRpb24veC1uZGpzb25cIiwgbWVzc2FnZXMuam9pbihcIlxcblwiKSwgKCkgPT4gdGhpcy5vbmVycm9yKFwidGltZW91dFwiKSwgcmVzcCA9PiB7XG4gICAgICB0aGlzLmF3YWl0aW5nQmF0Y2hBY2sgPSBmYWxzZVxuICAgICAgaWYoIXJlc3AgfHwgcmVzcC5zdGF0dXMgIT09IDIwMCl7XG4gICAgICAgIHRoaXMub25lcnJvcihyZXNwICYmIHJlc3Auc3RhdHVzKVxuICAgICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoMTAxMSwgXCJpbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIiwgZmFsc2UpXG4gICAgICB9IGVsc2UgaWYodGhpcy5iYXRjaEJ1ZmZlci5sZW5ndGggPiAwKXtcbiAgICAgICAgdGhpcy5iYXRjaFNlbmQodGhpcy5iYXRjaEJ1ZmZlcilcbiAgICAgICAgdGhpcy5iYXRjaEJ1ZmZlciA9IFtdXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNsb3NlKGNvZGUsIHJlYXNvbiwgd2FzQ2xlYW4pe1xuICAgIGZvcihsZXQgcmVxIG9mIHRoaXMucmVxcyl7IHJlcS5hYm9ydCgpIH1cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNsb3NlZFxuICAgIGxldCBvcHRzID0gT2JqZWN0LmFzc2lnbih7Y29kZTogMTAwMCwgcmVhc29uOiB1bmRlZmluZWQsIHdhc0NsZWFuOiB0cnVlfSwge2NvZGUsIHJlYXNvbiwgd2FzQ2xlYW59KVxuICAgIHRoaXMuYmF0Y2hCdWZmZXIgPSBbXVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmN1cnJlbnRCYXRjaFRpbWVyKVxuICAgIHRoaXMuY3VycmVudEJhdGNoVGltZXIgPSBudWxsXG4gICAgaWYodHlwZW9mKENsb3NlRXZlbnQpICE9PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgIHRoaXMub25jbG9zZShuZXcgQ2xvc2VFdmVudChcImNsb3NlXCIsIG9wdHMpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uY2xvc2Uob3B0cylcbiAgICB9XG4gIH1cblxuICBhamF4KG1ldGhvZCwgY29udGVudFR5cGUsIGJvZHksIG9uQ2FsbGVyVGltZW91dCwgY2FsbGJhY2spe1xuICAgIGxldCByZXFcbiAgICBsZXQgb250aW1lb3V0ID0gKCkgPT4ge1xuICAgICAgdGhpcy5yZXFzLmRlbGV0ZShyZXEpXG4gICAgICBvbkNhbGxlclRpbWVvdXQoKVxuICAgIH1cbiAgICByZXEgPSBBamF4LnJlcXVlc3QobWV0aG9kLCB0aGlzLmVuZHBvaW50VVJMKCksIGNvbnRlbnRUeXBlLCBib2R5LCB0aGlzLnRpbWVvdXQsIG9udGltZW91dCwgcmVzcCA9PiB7XG4gICAgICB0aGlzLnJlcXMuZGVsZXRlKHJlcSlcbiAgICAgIGlmKHRoaXMuaXNBY3RpdmUoKSl7IGNhbGxiYWNrKHJlc3ApIH1cbiAgICB9KVxuICAgIHRoaXMucmVxcy5hZGQocmVxKVxuICB9XG59XG4iLCAiLyoqXG4gKiBJbml0aWFsaXplcyB0aGUgUHJlc2VuY2VcbiAqIEBwYXJhbSB7Q2hhbm5lbH0gY2hhbm5lbCAtIFRoZSBDaGFubmVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIFRoZSBvcHRpb25zLFxuICogICAgICAgIGZvciBleGFtcGxlIGB7ZXZlbnRzOiB7c3RhdGU6IFwic3RhdGVcIiwgZGlmZjogXCJkaWZmXCJ9fWBcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlc2VuY2Uge1xuXG4gIGNvbnN0cnVjdG9yKGNoYW5uZWwsIG9wdHMgPSB7fSl7XG4gICAgbGV0IGV2ZW50cyA9IG9wdHMuZXZlbnRzIHx8IHtzdGF0ZTogXCJwcmVzZW5jZV9zdGF0ZVwiLCBkaWZmOiBcInByZXNlbmNlX2RpZmZcIn1cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbFxuICAgIHRoaXMuam9pblJlZiA9IG51bGxcbiAgICB0aGlzLmNhbGxlciA9IHtcbiAgICAgIG9uSm9pbjogZnVuY3Rpb24gKCl7IH0sXG4gICAgICBvbkxlYXZlOiBmdW5jdGlvbiAoKXsgfSxcbiAgICAgIG9uU3luYzogZnVuY3Rpb24gKCl7IH1cbiAgICB9XG5cbiAgICB0aGlzLmNoYW5uZWwub24oZXZlbnRzLnN0YXRlLCBuZXdTdGF0ZSA9PiB7XG4gICAgICBsZXQge29uSm9pbiwgb25MZWF2ZSwgb25TeW5jfSA9IHRoaXMuY2FsbGVyXG5cbiAgICAgIHRoaXMuam9pblJlZiA9IHRoaXMuY2hhbm5lbC5qb2luUmVmKClcbiAgICAgIHRoaXMuc3RhdGUgPSBQcmVzZW5jZS5zeW5jU3RhdGUodGhpcy5zdGF0ZSwgbmV3U3RhdGUsIG9uSm9pbiwgb25MZWF2ZSlcblxuICAgICAgdGhpcy5wZW5kaW5nRGlmZnMuZm9yRWFjaChkaWZmID0+IHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNEaWZmKHRoaXMuc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSlcbiAgICAgIH0pXG4gICAgICB0aGlzLnBlbmRpbmdEaWZmcyA9IFtdXG4gICAgICBvblN5bmMoKVxuICAgIH0pXG5cbiAgICB0aGlzLmNoYW5uZWwub24oZXZlbnRzLmRpZmYsIGRpZmYgPT4ge1xuICAgICAgbGV0IHtvbkpvaW4sIG9uTGVhdmUsIG9uU3luY30gPSB0aGlzLmNhbGxlclxuXG4gICAgICBpZih0aGlzLmluUGVuZGluZ1N5bmNTdGF0ZSgpKXtcbiAgICAgICAgdGhpcy5wZW5kaW5nRGlmZnMucHVzaChkaWZmKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFByZXNlbmNlLnN5bmNEaWZmKHRoaXMuc3RhdGUsIGRpZmYsIG9uSm9pbiwgb25MZWF2ZSlcbiAgICAgICAgb25TeW5jKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgb25Kb2luKGNhbGxiYWNrKXsgdGhpcy5jYWxsZXIub25Kb2luID0gY2FsbGJhY2sgfVxuXG4gIG9uTGVhdmUoY2FsbGJhY2speyB0aGlzLmNhbGxlci5vbkxlYXZlID0gY2FsbGJhY2sgfVxuXG4gIG9uU3luYyhjYWxsYmFjayl7IHRoaXMuY2FsbGVyLm9uU3luYyA9IGNhbGxiYWNrIH1cblxuICBsaXN0KGJ5KXsgcmV0dXJuIFByZXNlbmNlLmxpc3QodGhpcy5zdGF0ZSwgYnkpIH1cblxuICBpblBlbmRpbmdTeW5jU3RhdGUoKXtcbiAgICByZXR1cm4gIXRoaXMuam9pblJlZiB8fCAodGhpcy5qb2luUmVmICE9PSB0aGlzLmNoYW5uZWwuam9pblJlZigpKVxuICB9XG5cbiAgLy8gbG93ZXItbGV2ZWwgcHVibGljIHN0YXRpYyBBUElcblxuICAvKipcbiAgICogVXNlZCB0byBzeW5jIHRoZSBsaXN0IG9mIHByZXNlbmNlcyBvbiB0aGUgc2VydmVyXG4gICAqIHdpdGggdGhlIGNsaWVudCdzIHN0YXRlLiBBbiBvcHRpb25hbCBgb25Kb2luYCBhbmQgYG9uTGVhdmVgIGNhbGxiYWNrIGNhblxuICAgKiBiZSBwcm92aWRlZCB0byByZWFjdCB0byBjaGFuZ2VzIGluIHRoZSBjbGllbnQncyBsb2NhbCBwcmVzZW5jZXMgYWNyb3NzXG4gICAqIGRpc2Nvbm5lY3RzIGFuZCByZWNvbm5lY3RzIHdpdGggdGhlIHNlcnZlci5cbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIHN5bmNTdGF0ZShjdXJyZW50U3RhdGUsIG5ld1N0YXRlLCBvbkpvaW4sIG9uTGVhdmUpe1xuICAgIGxldCBzdGF0ZSA9IHRoaXMuY2xvbmUoY3VycmVudFN0YXRlKVxuICAgIGxldCBqb2lucyA9IHt9XG4gICAgbGV0IGxlYXZlcyA9IHt9XG5cbiAgICB0aGlzLm1hcChzdGF0ZSwgKGtleSwgcHJlc2VuY2UpID0+IHtcbiAgICAgIGlmKCFuZXdTdGF0ZVtrZXldKXtcbiAgICAgICAgbGVhdmVzW2tleV0gPSBwcmVzZW5jZVxuICAgICAgfVxuICAgIH0pXG4gICAgdGhpcy5tYXAobmV3U3RhdGUsIChrZXksIG5ld1ByZXNlbmNlKSA9PiB7XG4gICAgICBsZXQgY3VycmVudFByZXNlbmNlID0gc3RhdGVba2V5XVxuICAgICAgaWYoY3VycmVudFByZXNlbmNlKXtcbiAgICAgICAgbGV0IG5ld1JlZnMgPSBuZXdQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBjdXJSZWZzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLm1hcChtID0+IG0ucGh4X3JlZilcbiAgICAgICAgbGV0IGpvaW5lZE1ldGFzID0gbmV3UHJlc2VuY2UubWV0YXMuZmlsdGVyKG0gPT4gY3VyUmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwKVxuICAgICAgICBsZXQgbGVmdE1ldGFzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLmZpbHRlcihtID0+IG5ld1JlZnMuaW5kZXhPZihtLnBoeF9yZWYpIDwgMClcbiAgICAgICAgaWYoam9pbmVkTWV0YXMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlXG4gICAgICAgICAgam9pbnNba2V5XS5tZXRhcyA9IGpvaW5lZE1ldGFzXG4gICAgICAgIH1cbiAgICAgICAgaWYobGVmdE1ldGFzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGxlYXZlc1trZXldID0gdGhpcy5jbG9uZShjdXJyZW50UHJlc2VuY2UpXG4gICAgICAgICAgbGVhdmVzW2tleV0ubWV0YXMgPSBsZWZ0TWV0YXNcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgam9pbnNba2V5XSA9IG5ld1ByZXNlbmNlXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gdGhpcy5zeW5jRGlmZihzdGF0ZSwge2pvaW5zOiBqb2lucywgbGVhdmVzOiBsZWF2ZXN9LCBvbkpvaW4sIG9uTGVhdmUpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogVXNlZCB0byBzeW5jIGEgZGlmZiBvZiBwcmVzZW5jZSBqb2luIGFuZCBsZWF2ZVxuICAgKiBldmVudHMgZnJvbSB0aGUgc2VydmVyLCBhcyB0aGV5IGhhcHBlbi4gTGlrZSBgc3luY1N0YXRlYCwgYHN5bmNEaWZmYFxuICAgKiBhY2NlcHRzIG9wdGlvbmFsIGBvbkpvaW5gIGFuZCBgb25MZWF2ZWAgY2FsbGJhY2tzIHRvIHJlYWN0IHRvIGEgdXNlclxuICAgKiBqb2luaW5nIG9yIGxlYXZpbmcgZnJvbSBhIGRldmljZS5cbiAgICpcbiAgICogQHJldHVybnMge1ByZXNlbmNlfVxuICAgKi9cbiAgc3RhdGljIHN5bmNEaWZmKHN0YXRlLCBkaWZmLCBvbkpvaW4sIG9uTGVhdmUpe1xuICAgIGxldCB7am9pbnMsIGxlYXZlc30gPSB0aGlzLmNsb25lKGRpZmYpXG4gICAgaWYoIW9uSm9pbil7IG9uSm9pbiA9IGZ1bmN0aW9uICgpeyB9IH1cbiAgICBpZighb25MZWF2ZSl7IG9uTGVhdmUgPSBmdW5jdGlvbiAoKXsgfSB9XG5cbiAgICB0aGlzLm1hcChqb2lucywgKGtleSwgbmV3UHJlc2VuY2UpID0+IHtcbiAgICAgIGxldCBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldXG4gICAgICBzdGF0ZVtrZXldID0gdGhpcy5jbG9uZShuZXdQcmVzZW5jZSlcbiAgICAgIGlmKGN1cnJlbnRQcmVzZW5jZSl7XG4gICAgICAgIGxldCBqb2luZWRSZWZzID0gc3RhdGVba2V5XS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICAgIGxldCBjdXJNZXRhcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5maWx0ZXIobSA9PiBqb2luZWRSZWZzLmluZGV4T2YobS5waHhfcmVmKSA8IDApXG4gICAgICAgIHN0YXRlW2tleV0ubWV0YXMudW5zaGlmdCguLi5jdXJNZXRhcylcbiAgICAgIH1cbiAgICAgIG9uSm9pbihrZXksIGN1cnJlbnRQcmVzZW5jZSwgbmV3UHJlc2VuY2UpXG4gICAgfSlcbiAgICB0aGlzLm1hcChsZWF2ZXMsIChrZXksIGxlZnRQcmVzZW5jZSkgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRQcmVzZW5jZSA9IHN0YXRlW2tleV1cbiAgICAgIGlmKCFjdXJyZW50UHJlc2VuY2UpeyByZXR1cm4gfVxuICAgICAgbGV0IHJlZnNUb1JlbW92ZSA9IGxlZnRQcmVzZW5jZS5tZXRhcy5tYXAobSA9PiBtLnBoeF9yZWYpXG4gICAgICBjdXJyZW50UHJlc2VuY2UubWV0YXMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gcmVmc1RvUmVtb3ZlLmluZGV4T2YocC5waHhfcmVmKSA8IDBcbiAgICAgIH0pXG4gICAgICBvbkxlYXZlKGtleSwgY3VycmVudFByZXNlbmNlLCBsZWZ0UHJlc2VuY2UpXG4gICAgICBpZihjdXJyZW50UHJlc2VuY2UubWV0YXMubGVuZ3RoID09PSAwKXtcbiAgICAgICAgZGVsZXRlIHN0YXRlW2tleV1cbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBzdGF0ZVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFycmF5IG9mIHByZXNlbmNlcywgd2l0aCBzZWxlY3RlZCBtZXRhZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHByZXNlbmNlc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjaG9vc2VyXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcmVzZW5jZX1cbiAgICovXG4gIHN0YXRpYyBsaXN0KHByZXNlbmNlcywgY2hvb3Nlcil7XG4gICAgaWYoIWNob29zZXIpeyBjaG9vc2VyID0gZnVuY3Rpb24gKGtleSwgcHJlcyl7IHJldHVybiBwcmVzIH0gfVxuXG4gICAgcmV0dXJuIHRoaXMubWFwKHByZXNlbmNlcywgKGtleSwgcHJlc2VuY2UpID0+IHtcbiAgICAgIHJldHVybiBjaG9vc2VyKGtleSwgcHJlc2VuY2UpXG4gICAgfSlcbiAgfVxuXG4gIC8vIHByaXZhdGVcblxuICBzdGF0aWMgbWFwKG9iaiwgZnVuYyl7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubWFwKGtleSA9PiBmdW5jKGtleSwgb2JqW2tleV0pKVxuICB9XG5cbiAgc3RhdGljIGNsb25lKG9iail7IHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpIH1cbn1cbiIsICIvKiBUaGUgZGVmYXVsdCBzZXJpYWxpemVyIGZvciBlbmNvZGluZyBhbmQgZGVjb2RpbmcgbWVzc2FnZXMgKi9cbmltcG9ydCB7XG4gIENIQU5ORUxfRVZFTlRTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgSEVBREVSX0xFTkdUSDogMSxcbiAgTUVUQV9MRU5HVEg6IDQsXG4gIEtJTkRTOiB7cHVzaDogMCwgcmVwbHk6IDEsIGJyb2FkY2FzdDogMn0sXG5cbiAgZW5jb2RlKG1zZywgY2FsbGJhY2spe1xuICAgIGlmKG1zZy5wYXlsb2FkLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sodGhpcy5iaW5hcnlFbmNvZGUobXNnKSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHBheWxvYWQgPSBbbXNnLmpvaW5fcmVmLCBtc2cucmVmLCBtc2cudG9waWMsIG1zZy5ldmVudCwgbXNnLnBheWxvYWRdXG4gICAgICByZXR1cm4gY2FsbGJhY2soSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpXG4gICAgfVxuICB9LFxuXG4gIGRlY29kZShyYXdQYXlsb2FkLCBjYWxsYmFjayl7XG4gICAgaWYocmF3UGF5bG9hZC5jb25zdHJ1Y3RvciA9PT0gQXJyYXlCdWZmZXIpe1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXMuYmluYXJ5RGVjb2RlKHJhd1BheWxvYWQpKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgW2pvaW5fcmVmLCByZWYsIHRvcGljLCBldmVudCwgcGF5bG9hZF0gPSBKU09OLnBhcnNlKHJhd1BheWxvYWQpXG4gICAgICByZXR1cm4gY2FsbGJhY2soe2pvaW5fcmVmLCByZWYsIHRvcGljLCBldmVudCwgcGF5bG9hZH0pXG4gICAgfVxuICB9LFxuXG4gIC8vIHByaXZhdGVcblxuICBiaW5hcnlFbmNvZGUobWVzc2FnZSl7XG4gICAgbGV0IHtqb2luX3JlZiwgcmVmLCBldmVudCwgdG9waWMsIHBheWxvYWR9ID0gbWVzc2FnZVxuICAgIGxldCBtZXRhTGVuZ3RoID0gdGhpcy5NRVRBX0xFTkdUSCArIGpvaW5fcmVmLmxlbmd0aCArIHJlZi5sZW5ndGggKyB0b3BpYy5sZW5ndGggKyBldmVudC5sZW5ndGhcbiAgICBsZXQgaGVhZGVyID0gbmV3IEFycmF5QnVmZmVyKHRoaXMuSEVBREVSX0xFTkdUSCArIG1ldGFMZW5ndGgpXG4gICAgbGV0IHZpZXcgPSBuZXcgRGF0YVZpZXcoaGVhZGVyKVxuICAgIGxldCBvZmZzZXQgPSAwXG5cbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0aGlzLktJTkRTLnB1c2gpIC8vIGtpbmRcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBqb2luX3JlZi5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgcmVmLmxlbmd0aClcbiAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCB0b3BpYy5sZW5ndGgpXG4gICAgdmlldy5zZXRVaW50OChvZmZzZXQrKywgZXZlbnQubGVuZ3RoKVxuICAgIEFycmF5LmZyb20oam9pbl9yZWYsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKHJlZiwgY2hhciA9PiB2aWV3LnNldFVpbnQ4KG9mZnNldCsrLCBjaGFyLmNoYXJDb2RlQXQoMCkpKVxuICAgIEFycmF5LmZyb20odG9waWMsIGNoYXIgPT4gdmlldy5zZXRVaW50OChvZmZzZXQrKywgY2hhci5jaGFyQ29kZUF0KDApKSlcbiAgICBBcnJheS5mcm9tKGV2ZW50LCBjaGFyID0+IHZpZXcuc2V0VWludDgob2Zmc2V0KyssIGNoYXIuY2hhckNvZGVBdCgwKSkpXG5cbiAgICB2YXIgY29tYmluZWQgPSBuZXcgVWludDhBcnJheShoZWFkZXIuYnl0ZUxlbmd0aCArIHBheWxvYWQuYnl0ZUxlbmd0aClcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkoaGVhZGVyKSwgMClcbiAgICBjb21iaW5lZC5zZXQobmV3IFVpbnQ4QXJyYXkocGF5bG9hZCksIGhlYWRlci5ieXRlTGVuZ3RoKVxuXG4gICAgcmV0dXJuIGNvbWJpbmVkLmJ1ZmZlclxuICB9LFxuXG4gIGJpbmFyeURlY29kZShidWZmZXIpe1xuICAgIGxldCB2aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcilcbiAgICBsZXQga2luZCA9IHZpZXcuZ2V0VWludDgoMClcbiAgICBsZXQgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpXG4gICAgc3dpdGNoKGtpbmQpe1xuICAgICAgY2FzZSB0aGlzLktJTkRTLnB1c2g6IHJldHVybiB0aGlzLmRlY29kZVB1c2goYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgICAgY2FzZSB0aGlzLktJTkRTLnJlcGx5OiByZXR1cm4gdGhpcy5kZWNvZGVSZXBseShidWZmZXIsIHZpZXcsIGRlY29kZXIpXG4gICAgICBjYXNlIHRoaXMuS0lORFMuYnJvYWRjYXN0OiByZXR1cm4gdGhpcy5kZWNvZGVCcm9hZGNhc3QoYnVmZmVyLCB2aWV3LCBkZWNvZGVyKVxuICAgIH1cbiAgfSxcblxuICBkZWNvZGVQdXNoKGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IGpvaW5SZWZTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDIpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoMylcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgdGhpcy5NRVRBX0xFTkdUSCAtIDEgLy8gcHVzaGVzIGhhdmUgbm8gcmVmXG4gICAgbGV0IGpvaW5SZWYgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBqb2luUmVmU2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgam9pblJlZlNpemVcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcbiAgICByZXR1cm4ge2pvaW5fcmVmOiBqb2luUmVmLCByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhfVxuICB9LFxuXG4gIGRlY29kZVJlcGx5KGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IGpvaW5SZWZTaXplID0gdmlldy5nZXRVaW50OCgxKVxuICAgIGxldCByZWZTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCB0b3BpY1NpemUgPSB2aWV3LmdldFVpbnQ4KDMpXG4gICAgbGV0IGV2ZW50U2l6ZSA9IHZpZXcuZ2V0VWludDgoNClcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5IRUFERVJfTEVOR1RIICsgdGhpcy5NRVRBX0xFTkdUSFxuICAgIGxldCBqb2luUmVmID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgam9pblJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGpvaW5SZWZTaXplXG4gICAgbGV0IHJlZiA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIHJlZlNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHJlZlNpemVcbiAgICBsZXQgdG9waWMgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyB0b3BpY1NpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIHRvcGljU2l6ZVxuICAgIGxldCBldmVudCA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGV2ZW50U2l6ZSkpXG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgZXZlbnRTaXplXG4gICAgbGV0IGRhdGEgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBidWZmZXIuYnl0ZUxlbmd0aClcbiAgICBsZXQgcGF5bG9hZCA9IHtzdGF0dXM6IGV2ZW50LCByZXNwb25zZTogZGF0YX1cbiAgICByZXR1cm4ge2pvaW5fcmVmOiBqb2luUmVmLCByZWY6IHJlZiwgdG9waWM6IHRvcGljLCBldmVudDogQ0hBTk5FTF9FVkVOVFMucmVwbHksIHBheWxvYWQ6IHBheWxvYWR9XG4gIH0sXG5cbiAgZGVjb2RlQnJvYWRjYXN0KGJ1ZmZlciwgdmlldywgZGVjb2Rlcil7XG4gICAgbGV0IHRvcGljU2l6ZSA9IHZpZXcuZ2V0VWludDgoMSlcbiAgICBsZXQgZXZlbnRTaXplID0gdmlldy5nZXRVaW50OCgyKVxuICAgIGxldCBvZmZzZXQgPSB0aGlzLkhFQURFUl9MRU5HVEggKyAyXG4gICAgbGV0IHRvcGljID0gZGVjb2Rlci5kZWNvZGUoYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdG9waWNTaXplKSlcbiAgICBvZmZzZXQgPSBvZmZzZXQgKyB0b3BpY1NpemVcbiAgICBsZXQgZXZlbnQgPSBkZWNvZGVyLmRlY29kZShidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBldmVudFNpemUpKVxuICAgIG9mZnNldCA9IG9mZnNldCArIGV2ZW50U2l6ZVxuICAgIGxldCBkYXRhID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgYnVmZmVyLmJ5dGVMZW5ndGgpXG5cbiAgICByZXR1cm4ge2pvaW5fcmVmOiBudWxsLCByZWY6IG51bGwsIHRvcGljOiB0b3BpYywgZXZlbnQ6IGV2ZW50LCBwYXlsb2FkOiBkYXRhfVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgZ2xvYmFsLFxuICBwaHhXaW5kb3csXG4gIENIQU5ORUxfRVZFTlRTLFxuICBERUZBVUxUX1RJTUVPVVQsXG4gIERFRkFVTFRfVlNOLFxuICBTT0NLRVRfU1RBVEVTLFxuICBUUkFOU1BPUlRTLFxuICBXU19DTE9TRV9OT1JNQUxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvc3VyZVxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBBamF4IGZyb20gXCIuL2FqYXhcIlxuaW1wb3J0IENoYW5uZWwgZnJvbSBcIi4vY2hhbm5lbFwiXG5pbXBvcnQgTG9uZ1BvbGwgZnJvbSBcIi4vbG9uZ3BvbGxcIlxuaW1wb3J0IFNlcmlhbGl6ZXIgZnJvbSBcIi4vc2VyaWFsaXplclwiXG5pbXBvcnQgVGltZXIgZnJvbSBcIi4vdGltZXJcIlxuXG4vKiogSW5pdGlhbGl6ZXMgdGhlIFNvY2tldCAqXG4gKlxuICogRm9yIElFOCBzdXBwb3J0IHVzZSBhbiBFUzUtc2hpbSAoaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zL2VzNS1zaGltKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbmRQb2ludCAtIFRoZSBzdHJpbmcgV2ViU29ja2V0IGVuZHBvaW50LCBpZSwgYFwid3M6Ly9leGFtcGxlLmNvbS9zb2NrZXRcImAsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwid3NzOi8vZXhhbXBsZS5jb21cImBcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXCIvc29ja2V0XCJgIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnRyYW5zcG9ydF0gLSBUaGUgV2Vic29ja2V0IFRyYW5zcG9ydCwgZm9yIGV4YW1wbGUgV2ViU29ja2V0IG9yIFBob2VuaXguTG9uZ1BvbGwuXG4gKlxuICogRGVmYXVsdHMgdG8gV2ViU29ja2V0IHdpdGggYXV0b21hdGljIExvbmdQb2xsIGZhbGxiYWNrLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMuZW5jb2RlXSAtIFRoZSBmdW5jdGlvbiB0byBlbmNvZGUgb3V0Z29pbmcgbWVzc2FnZXMuXG4gKlxuICogRGVmYXVsdHMgdG8gSlNPTiBlbmNvZGVyLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLmRlY29kZV0gLSBUaGUgZnVuY3Rpb24gdG8gZGVjb2RlIGluY29taW5nIG1lc3NhZ2VzLlxuICpcbiAqIERlZmF1bHRzIHRvIEpTT046XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogKHBheWxvYWQsIGNhbGxiYWNrKSA9PiBjYWxsYmFjayhKU09OLnBhcnNlKHBheWxvYWQpKVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXRdIC0gVGhlIGRlZmF1bHQgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gdHJpZ2dlciBwdXNoIHRpbWVvdXRzLlxuICpcbiAqIERlZmF1bHRzIGBERUZBVUxUX1RJTUVPVVRgXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNc10gLSBUaGUgbWlsbGlzZWMgaW50ZXJ2YWwgdG8gc2VuZCBhIGhlYXJ0YmVhdCBtZXNzYWdlXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMucmVjb25uZWN0QWZ0ZXJNc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtaWxsaXNlY1xuICogc29ja2V0IHJlY29ubmVjdCBpbnRlcnZhbC5cbiAqXG4gKiBEZWZhdWx0cyB0byBzdGVwcGVkIGJhY2tvZmYgb2Y6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICogfVxuICogYGBgYFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5yZWpvaW5BZnRlck1zXSAtIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1pbGxpc2VjXG4gKiByZWpvaW4gaW50ZXJ2YWwgZm9yIGluZGl2aWR1YWwgY2hhbm5lbHMuXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogZnVuY3Rpb24odHJpZXMpe1xuICogICByZXR1cm4gWzEwMDAsIDIwMDAsIDUwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbiAqIH1cbiAqIGBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5sb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLCBpZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBmdW5jdGlvbihraW5kLCBtc2csIGRhdGEpIHtcbiAqICAgY29uc29sZS5sb2coYCR7a2luZH06ICR7bXNnfWAsIGRhdGEpXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubG9uZ3BvbGxlclRpbWVvdXRdIC0gVGhlIG1heGltdW0gdGltZW91dCBvZiBhIGxvbmcgcG9sbCBBSkFYIHJlcXVlc3QuXG4gKlxuICogRGVmYXVsdHMgdG8gMjBzIChkb3VibGUgdGhlIHNlcnZlciBsb25nIHBvbGwgdGltZXIpLlxuICpcbiAqIEBwYXJhbSB7KE9iamVjdHxmdW5jdGlvbil9IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgcGFyYW1zIHRvIHBhc3Mgd2hlbiBjb25uZWN0aW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmluYXJ5VHlwZV0gLSBUaGUgYmluYXJ5IHR5cGUgdG8gdXNlIGZvciBiaW5hcnkgV2ViU29ja2V0IGZyYW1lcy5cbiAqXG4gKiBEZWZhdWx0cyB0byBcImFycmF5YnVmZmVyXCJcbiAqXG4gKiBAcGFyYW0ge3Zzbn0gW29wdHMudnNuXSAtIFRoZSBzZXJpYWxpemVyJ3MgcHJvdG9jb2wgdmVyc2lvbiB0byBzZW5kIG9uIGNvbm5lY3QuXG4gKlxuICogRGVmYXVsdHMgdG8gREVGQVVMVF9WU04uXG4qL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU29ja2V0IHtcbiAgY29uc3RydWN0b3IoZW5kUG9pbnQsIG9wdHMgPSB7fSl7XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyA9IHtvcGVuOiBbXSwgY2xvc2U6IFtdLCBlcnJvcjogW10sIG1lc3NhZ2U6IFtdfVxuICAgIHRoaXMuY2hhbm5lbHMgPSBbXVxuICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgdGhpcy5yZWYgPSAwXG4gICAgdGhpcy50aW1lb3V0ID0gb3B0cy50aW1lb3V0IHx8IERFRkFVTFRfVElNRU9VVFxuICAgIHRoaXMudHJhbnNwb3J0ID0gb3B0cy50cmFuc3BvcnQgfHwgZ2xvYmFsLldlYlNvY2tldCB8fCBMb25nUG9sbFxuICAgIHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9ucyA9IDBcbiAgICB0aGlzLmRlZmF1bHRFbmNvZGVyID0gU2VyaWFsaXplci5lbmNvZGUuYmluZChTZXJpYWxpemVyKVxuICAgIHRoaXMuZGVmYXVsdERlY29kZXIgPSBTZXJpYWxpemVyLmRlY29kZS5iaW5kKFNlcmlhbGl6ZXIpXG4gICAgdGhpcy5jbG9zZVdhc0NsZWFuID0gZmFsc2VcbiAgICB0aGlzLmJpbmFyeVR5cGUgPSBvcHRzLmJpbmFyeVR5cGUgfHwgXCJhcnJheWJ1ZmZlclwiXG4gICAgdGhpcy5jb25uZWN0Q2xvY2sgPSAxXG4gICAgaWYodGhpcy50cmFuc3BvcnQgIT09IExvbmdQb2xsKXtcbiAgICAgIHRoaXMuZW5jb2RlID0gb3B0cy5lbmNvZGUgfHwgdGhpcy5kZWZhdWx0RW5jb2RlclxuICAgICAgdGhpcy5kZWNvZGUgPSBvcHRzLmRlY29kZSB8fCB0aGlzLmRlZmF1bHREZWNvZGVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5jb2RlID0gdGhpcy5kZWZhdWx0RW5jb2RlclxuICAgICAgdGhpcy5kZWNvZGUgPSB0aGlzLmRlZmF1bHREZWNvZGVyXG4gICAgfVxuICAgIGxldCBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gbnVsbFxuICAgIGlmKHBoeFdpbmRvdyAmJiBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7XG4gICAgICBwaHhXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIF9lID0+IHtcbiAgICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPSB0aGlzLmNvbm5lY3RDbG9ja1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcGh4V2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBfZSA9PiB7XG4gICAgICAgIGlmKGF3YWl0aW5nQ29ubmVjdGlvbk9uUGFnZVNob3cgPT09IHRoaXMuY29ubmVjdENsb2NrKXtcbiAgICAgICAgICBhd2FpdGluZ0Nvbm5lY3Rpb25PblBhZ2VTaG93ID0gbnVsbFxuICAgICAgICAgIHRoaXMuY29ubmVjdCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcyA9IG9wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNcyB8fCAzMDAwMFxuICAgIHRoaXMucmVqb2luQWZ0ZXJNcyA9ICh0cmllcykgPT4ge1xuICAgICAgaWYob3B0cy5yZWpvaW5BZnRlck1zKXtcbiAgICAgICAgcmV0dXJuIG9wdHMucmVqb2luQWZ0ZXJNcyh0cmllcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbMTAwMCwgMjAwMCwgNTAwMF1bdHJpZXMgLSAxXSB8fCAxMDAwMFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlY29ubmVjdEFmdGVyTXMgPSAodHJpZXMpID0+IHtcbiAgICAgIGlmKG9wdHMucmVjb25uZWN0QWZ0ZXJNcyl7XG4gICAgICAgIHJldHVybiBvcHRzLnJlY29ubmVjdEFmdGVyTXModHJpZXMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gWzEwLCA1MCwgMTAwLCAxNTAsIDIwMCwgMjUwLCA1MDAsIDEwMDAsIDIwMDBdW3RyaWVzIC0gMV0gfHwgNTAwMFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxvZ2dlciA9IG9wdHMubG9nZ2VyIHx8IG51bGxcbiAgICB0aGlzLmxvbmdwb2xsZXJUaW1lb3V0ID0gb3B0cy5sb25ncG9sbGVyVGltZW91dCB8fCAyMDAwMFxuICAgIHRoaXMucGFyYW1zID0gY2xvc3VyZShvcHRzLnBhcmFtcyB8fCB7fSlcbiAgICB0aGlzLmVuZFBvaW50ID0gYCR7ZW5kUG9pbnR9LyR7VFJBTlNQT1JUUy53ZWJzb2NrZXR9YFxuICAgIHRoaXMudnNuID0gb3B0cy52c24gfHwgREVGQVVMVF9WU05cbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVvdXRUaW1lciA9IG51bGxcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gbnVsbFxuICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbmV3IFRpbWVyKCgpID0+IHtcbiAgICAgIHRoaXMudGVhcmRvd24oKCkgPT4gdGhpcy5jb25uZWN0KCkpXG4gICAgfSwgdGhpcy5yZWNvbm5lY3RBZnRlck1zKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIExvbmdQb2xsIHRyYW5zcG9ydCByZWZlcmVuY2VcbiAgICovXG4gIGdldExvbmdQb2xsVHJhbnNwb3J0KCl7IHJldHVybiBMb25nUG9sbCB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIGFuZCByZXBsYWNlcyB0aGUgYWN0aXZlIHRyYW5zcG9ydFxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXdUcmFuc3BvcnQgLSBUaGUgbmV3IHRyYW5zcG9ydCBjbGFzcyB0byBpbnN0YW50aWF0ZVxuICAgKlxuICAgKi9cbiAgcmVwbGFjZVRyYW5zcG9ydChuZXdUcmFuc3BvcnQpe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy5zZW5kQnVmZmVyID0gW11cbiAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgdGhpcy5jb25uLmNsb3NlKClcbiAgICAgIHRoaXMuY29ubiA9IG51bGxcbiAgICB9XG4gICAgdGhpcy50cmFuc3BvcnQgPSBuZXdUcmFuc3BvcnRcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzb2NrZXQgcHJvdG9jb2xcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHByb3RvY29sKCl7IHJldHVybiBsb2NhdGlvbi5wcm90b2NvbC5tYXRjaCgvXmh0dHBzLykgPyBcIndzc1wiIDogXCJ3c1wiIH1cblxuICAvKipcbiAgICogVGhlIGZ1bGx5IHF1YWxpZmllZCBzb2NrZXQgdXJsXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBlbmRQb2ludFVSTCgpe1xuICAgIGxldCB1cmkgPSBBamF4LmFwcGVuZFBhcmFtcyhcbiAgICAgIEFqYXguYXBwZW5kUGFyYW1zKHRoaXMuZW5kUG9pbnQsIHRoaXMucGFyYW1zKCkpLCB7dnNuOiB0aGlzLnZzbn0pXG4gICAgaWYodXJpLmNoYXJBdCgwKSAhPT0gXCIvXCIpeyByZXR1cm4gdXJpIH1cbiAgICBpZih1cmkuY2hhckF0KDEpID09PSBcIi9cIil7IHJldHVybiBgJHt0aGlzLnByb3RvY29sKCl9OiR7dXJpfWAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMucHJvdG9jb2woKX06Ly8ke2xvY2F0aW9uLmhvc3R9JHt1cml9YFxuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3RzIHRoZSBzb2NrZXRcbiAgICpcbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DbG9zZUV2ZW50I1N0YXR1c19jb2RlcyBmb3IgdmFsaWQgc3RhdHVzIGNvZGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIE9wdGlvbmFsIGNhbGxiYWNrIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBzb2NrZXQgaXMgZGlzY29ubmVjdGVkLlxuICAgKiBAcGFyYW0ge2ludGVnZXJ9IGNvZGUgLSBBIHN0YXR1cyBjb2RlIGZvciBkaXNjb25uZWN0aW9uIChPcHRpb25hbCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBBIHRleHR1YWwgZGVzY3JpcHRpb24gb2YgdGhlIHJlYXNvbiB0byBkaXNjb25uZWN0LiAoT3B0aW9uYWwpXG4gICAqL1xuICBkaXNjb25uZWN0KGNhbGxiYWNrLCBjb2RlLCByZWFzb24pe1xuICAgIHRoaXMuY29ubmVjdENsb2NrKytcbiAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSB0cnVlXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy50ZWFyZG93bihjYWxsYmFjaywgY29kZSwgcmVhc29uKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgcGFyYW1zIHRvIHNlbmQgd2hlbiBjb25uZWN0aW5nLCBmb3IgZXhhbXBsZSBge3VzZXJfaWQ6IHVzZXJUb2tlbn1gXG4gICAqXG4gICAqIFBhc3NpbmcgcGFyYW1zIHRvIGNvbm5lY3QgaXMgZGVwcmVjYXRlZDsgcGFzcyB0aGVtIGluIHRoZSBTb2NrZXQgY29uc3RydWN0b3IgaW5zdGVhZDpcbiAgICogYG5ldyBTb2NrZXQoXCIvc29ja2V0XCIsIHtwYXJhbXM6IHt1c2VyX2lkOiB1c2VyVG9rZW59fSlgLlxuICAgKi9cbiAgY29ubmVjdChwYXJhbXMpe1xuICAgIGlmKHBhcmFtcyl7XG4gICAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKFwicGFzc2luZyBwYXJhbXMgdG8gY29ubmVjdCBpcyBkZXByZWNhdGVkLiBJbnN0ZWFkIHBhc3MgOnBhcmFtcyB0byB0aGUgU29ja2V0IGNvbnN0cnVjdG9yXCIpXG4gICAgICB0aGlzLnBhcmFtcyA9IGNsb3N1cmUocGFyYW1zKVxuICAgIH1cbiAgICBpZih0aGlzLmNvbm4peyByZXR1cm4gfVxuXG4gICAgdGhpcy5jb25uZWN0Q2xvY2srK1xuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5jb25uID0gbmV3IHRoaXMudHJhbnNwb3J0KHRoaXMuZW5kUG9pbnRVUkwoKSlcbiAgICB0aGlzLmNvbm4uYmluYXJ5VHlwZSA9IHRoaXMuYmluYXJ5VHlwZVxuICAgIHRoaXMuY29ubi50aW1lb3V0ID0gdGhpcy5sb25ncG9sbGVyVGltZW91dFxuICAgIHRoaXMuY29ubi5vbm9wZW4gPSAoKSA9PiB0aGlzLm9uQ29ubk9wZW4oKVxuICAgIHRoaXMuY29ubi5vbmVycm9yID0gZXJyb3IgPT4gdGhpcy5vbkNvbm5FcnJvcihlcnJvcilcbiAgICB0aGlzLmNvbm4ub25tZXNzYWdlID0gZXZlbnQgPT4gdGhpcy5vbkNvbm5NZXNzYWdlKGV2ZW50KVxuICAgIHRoaXMuY29ubi5vbmNsb3NlID0gZXZlbnQgPT4gdGhpcy5vbkNvbm5DbG9zZShldmVudClcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dzIHRoZSBtZXNzYWdlLiBPdmVycmlkZSBgdGhpcy5sb2dnZXJgIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLiBub29wcyBieSBkZWZhdWx0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBraW5kXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtc2dcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICovXG4gIGxvZyhraW5kLCBtc2csIGRhdGEpeyB0aGlzLmxvZ2dlcihraW5kLCBtc2csIGRhdGEpIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIGEgbG9nZ2VyIGhhcyBiZWVuIHNldCBvbiB0aGlzIHNvY2tldC5cbiAgICovXG4gIGhhc0xvZ2dlcigpeyByZXR1cm4gdGhpcy5sb2dnZXIgIT09IG51bGwgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIG9wZW4gZXZlbnRzXG4gICAqXG4gICAqIEBleGFtcGxlIHNvY2tldC5vbk9wZW4oZnVuY3Rpb24oKXsgY29uc29sZS5pbmZvKFwidGhlIHNvY2tldCB3YXMgb3BlbmVkXCIpIH0pXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbk9wZW4oY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3Mub3Blbi5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBjbG9zZSBldmVudHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ2xvc2UoY2FsbGJhY2spe1xuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBjYWxsYmFja3MgZm9yIGNvbm5lY3Rpb24gZXJyb3IgZXZlbnRzXG4gICAqXG4gICAqIEBleGFtcGxlIHNvY2tldC5vbkVycm9yKGZ1bmN0aW9uKGVycm9yKXsgYWxlcnQoXCJBbiBlcnJvciBvY2N1cnJlZFwiKSB9KVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25FcnJvcihjYWxsYmFjayl7XG4gICAgbGV0IHJlZiA9IHRoaXMubWFrZVJlZigpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5wdXNoKFtyZWYsIGNhbGxiYWNrXSlcbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGNhbGxiYWNrcyBmb3IgY29ubmVjdGlvbiBtZXNzYWdlIGV2ZW50c1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgb25NZXNzYWdlKGNhbGxiYWNrKXtcbiAgICBsZXQgcmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2UucHVzaChbcmVmLCBjYWxsYmFja10pXG4gICAgcmV0dXJuIHJlZlxuICB9XG5cbiAgLyoqXG4gICAqIFBpbmdzIHRoZSBzZXJ2ZXIgYW5kIGludm9rZXMgdGhlIGNhbGxiYWNrIHdpdGggdGhlIFJUVCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwaW5nIHdhcyBwdXNoZWQgb3IgZmFsc2UgaWYgdW5hYmxlIHRvIGJlIHB1c2hlZC5cbiAgICovXG4gIHBpbmcoY2FsbGJhY2spe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gZmFsc2UgfVxuICAgIGxldCByZWYgPSB0aGlzLm1ha2VSZWYoKVxuICAgIGxldCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgdGhpcy5wdXNoKHt0b3BpYzogXCJwaG9lbml4XCIsIGV2ZW50OiBcImhlYXJ0YmVhdFwiLCBwYXlsb2FkOiB7fSwgcmVmOiByZWZ9KVxuICAgIGxldCBvbk1zZ1JlZiA9IHRoaXMub25NZXNzYWdlKG1zZyA9PiB7XG4gICAgICBpZihtc2cucmVmID09PSByZWYpe1xuICAgICAgICB0aGlzLm9mZihbb25Nc2dSZWZdKVxuICAgICAgICBjYWxsYmFjayhEYXRlLm5vdygpIC0gc3RhcnRUaW1lKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBjbGVhckhlYXJ0YmVhdHMoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lcilcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIpXG4gIH1cblxuICBvbkNvbm5PcGVuKCl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGNvbm5lY3RlZCB0byAke3RoaXMuZW5kUG9pbnRVUkwoKX1gKVxuICAgIHRoaXMuY2xvc2VXYXNDbGVhbiA9IGZhbHNlXG4gICAgdGhpcy5lc3RhYmxpc2hlZENvbm5lY3Rpb25zKytcbiAgICB0aGlzLmZsdXNoU2VuZEJ1ZmZlcigpXG4gICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpXG4gICAgdGhpcy5yZXNldEhlYXJ0YmVhdCgpXG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLmZvckVhY2goKFssIGNhbGxiYWNrXSkgPT4gY2FsbGJhY2soKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBoZWFydGJlYXRUaW1lb3V0KCl7XG4gICAgaWYodGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmKXtcbiAgICAgIHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZiA9IG51bGxcbiAgICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpeyB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImhlYXJ0YmVhdCB0aW1lb3V0LiBBdHRlbXB0aW5nIHRvIHJlLWVzdGFibGlzaCBjb25uZWN0aW9uXCIpIH1cbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgICB0aGlzLmNsb3NlV2FzQ2xlYW4gPSBmYWxzZVxuICAgICAgdGhpcy50ZWFyZG93bigoKSA9PiB0aGlzLnJlY29ubmVjdFRpbWVyLnNjaGVkdWxlVGltZW91dCgpLCBXU19DTE9TRV9OT1JNQUwsIFwiaGVhcnRiZWF0IHRpbWVvdXRcIilcbiAgICB9XG4gIH1cblxuICByZXNldEhlYXJ0YmVhdCgpe1xuICAgIGlmKHRoaXMuY29ubiAmJiB0aGlzLmNvbm4uc2tpcEhlYXJ0YmVhdCl7IHJldHVybiB9XG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRIZWFydGJlYXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICB9XG5cbiAgdGVhcmRvd24oY2FsbGJhY2ssIGNvZGUsIHJlYXNvbil7XG4gICAgaWYoIXRoaXMuY29ubil7XG4gICAgICByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKVxuICAgIH1cblxuICAgIHRoaXMud2FpdEZvckJ1ZmZlckRvbmUoKCkgPT4ge1xuICAgICAgaWYodGhpcy5jb25uKXtcbiAgICAgICAgaWYoY29kZSl7IHRoaXMuY29ubi5jbG9zZShjb2RlLCByZWFzb24gfHwgXCJcIikgfSBlbHNlIHsgdGhpcy5jb25uLmNsb3NlKCkgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLndhaXRGb3JTb2NrZXRDbG9zZWQoKCkgPT4ge1xuICAgICAgICBpZih0aGlzLmNvbm4pe1xuICAgICAgICAgIHRoaXMuY29ubi5vbm9wZW4gPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9uZXJyb3IgPSBmdW5jdGlvbiAoKXsgfSAvLyBub29wXG4gICAgICAgICAgdGhpcy5jb25uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4ub25jbG9zZSA9IGZ1bmN0aW9uICgpeyB9IC8vIG5vb3BcbiAgICAgICAgICB0aGlzLmNvbm4gPSBudWxsXG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICB3YWl0Rm9yQnVmZmVyRG9uZShjYWxsYmFjaywgdHJpZXMgPSAxKXtcbiAgICBpZih0cmllcyA9PT0gNSB8fCAhdGhpcy5jb25uIHx8ICF0aGlzLmNvbm4uYnVmZmVyZWRBbW91bnQpe1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLndhaXRGb3JCdWZmZXJEb25lKGNhbGxiYWNrLCB0cmllcyArIDEpXG4gICAgfSwgMTUwICogdHJpZXMpXG4gIH1cblxuICB3YWl0Rm9yU29ja2V0Q2xvc2VkKGNhbGxiYWNrLCB0cmllcyA9IDEpe1xuICAgIGlmKHRyaWVzID09PSA1IHx8ICF0aGlzLmNvbm4gfHwgdGhpcy5jb25uLnJlYWR5U3RhdGUgPT09IFNPQ0tFVF9TVEFURVMuY2xvc2VkKXtcbiAgICAgIGNhbGxiYWNrKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy53YWl0Rm9yU29ja2V0Q2xvc2VkKGNhbGxiYWNrLCB0cmllcyArIDEpXG4gICAgfSwgMTUwICogdHJpZXMpXG4gIH1cblxuICBvbkNvbm5DbG9zZShldmVudCl7XG4gICAgbGV0IGNsb3NlQ29kZSA9IGV2ZW50ICYmIGV2ZW50LmNvZGVcbiAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImNsb3NlXCIsIGV2ZW50KVxuICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgdGhpcy5jbGVhckhlYXJ0YmVhdHMoKVxuICAgIGlmKCF0aGlzLmNsb3NlV2FzQ2xlYW4gJiYgY2xvc2VDb2RlICE9PSAxMDAwKXtcbiAgICAgIHRoaXMucmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KClcbiAgICB9XG4gICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5jbG9zZS5mb3JFYWNoKChbLCBjYWxsYmFja10pID0+IGNhbGxiYWNrKGV2ZW50KSlcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25Db25uRXJyb3IoZXJyb3Ipe1xuICAgIGlmKHRoaXMuaGFzTG9nZ2VyKCkpIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIGVycm9yKVxuICAgIGxldCB0cmFuc3BvcnRCZWZvcmUgPSB0aGlzLnRyYW5zcG9ydFxuICAgIGxldCBlc3RhYmxpc2hlZEJlZm9yZSA9IHRoaXMuZXN0YWJsaXNoZWRDb25uZWN0aW9uc1xuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuZXJyb3IuZm9yRWFjaCgoWywgY2FsbGJhY2tdKSA9PiB7XG4gICAgICBjYWxsYmFjayhlcnJvciwgdHJhbnNwb3J0QmVmb3JlLCBlc3RhYmxpc2hlZEJlZm9yZSlcbiAgICB9KVxuICAgIGlmKHRyYW5zcG9ydEJlZm9yZSA9PT0gdGhpcy50cmFuc3BvcnQgfHwgZXN0YWJsaXNoZWRCZWZvcmUgPiAwKXtcbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyQ2hhbkVycm9yKCl7XG4gICAgdGhpcy5jaGFubmVscy5mb3JFYWNoKGNoYW5uZWwgPT4ge1xuICAgICAgaWYoIShjaGFubmVsLmlzRXJyb3JlZCgpIHx8IGNoYW5uZWwuaXNMZWF2aW5nKCkgfHwgY2hhbm5lbC5pc0Nsb3NlZCgpKSl7XG4gICAgICAgIGNoYW5uZWwudHJpZ2dlcihDSEFOTkVMX0VWRU5UUy5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBjb25uZWN0aW9uU3RhdGUoKXtcbiAgICBzd2l0Y2godGhpcy5jb25uICYmIHRoaXMuY29ubi5yZWFkeVN0YXRlKXtcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nOiByZXR1cm4gXCJjb25uZWN0aW5nXCJcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5vcGVuOiByZXR1cm4gXCJvcGVuXCJcbiAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jbG9zaW5nOiByZXR1cm4gXCJjbG9zaW5nXCJcbiAgICAgIGRlZmF1bHQ6IHJldHVybiBcImNsb3NlZFwiXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNDb25uZWN0ZWQoKXsgcmV0dXJuIHRoaXMuY29ubmVjdGlvblN0YXRlKCkgPT09IFwib3BlblwiIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHtDaGFubmVsfVxuICAgKi9cbiAgcmVtb3ZlKGNoYW5uZWwpe1xuICAgIHRoaXMub2ZmKGNoYW5uZWwuc3RhdGVDaGFuZ2VSZWZzKVxuICAgIHRoaXMuY2hhbm5lbHMgPSB0aGlzLmNoYW5uZWxzLmZpbHRlcihjID0+IGMuam9pblJlZigpICE9PSBjaGFubmVsLmpvaW5SZWYoKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGBvbk9wZW5gLCBgb25DbG9zZWAsIGBvbkVycm9yLGAgYW5kIGBvbk1lc3NhZ2VgIHJlZ2lzdHJhdGlvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7cmVmc30gLSBsaXN0IG9mIHJlZnMgcmV0dXJuZWQgYnkgY2FsbHMgdG9cbiAgICogICAgICAgICAgICAgICAgIGBvbk9wZW5gLCBgb25DbG9zZWAsIGBvbkVycm9yLGAgYW5kIGBvbk1lc3NhZ2VgXG4gICAqL1xuICBvZmYocmVmcyl7XG4gICAgZm9yKGxldCBrZXkgaW4gdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcyl7XG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW2tleV0gPSB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzW2tleV0uZmlsdGVyKChbcmVmXSkgPT4ge1xuICAgICAgICByZXR1cm4gcmVmcy5pbmRleE9mKHJlZikgPT09IC0xXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWF0ZXMgYSBuZXcgY2hhbm5lbCBmb3IgdGhlIGdpdmVuIHRvcGljXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BpY1xuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhblBhcmFtcyAtIFBhcmFtZXRlcnMgZm9yIHRoZSBjaGFubmVsXG4gICAqIEByZXR1cm5zIHtDaGFubmVsfVxuICAgKi9cbiAgY2hhbm5lbCh0b3BpYywgY2hhblBhcmFtcyA9IHt9KXtcbiAgICBsZXQgY2hhbiA9IG5ldyBDaGFubmVsKHRvcGljLCBjaGFuUGFyYW1zLCB0aGlzKVxuICAgIHRoaXMuY2hhbm5lbHMucHVzaChjaGFuKVxuICAgIHJldHVybiBjaGFuXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICovXG4gIHB1c2goZGF0YSl7XG4gICAgaWYodGhpcy5oYXNMb2dnZXIoKSl7XG4gICAgICBsZXQge3RvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZn0gPSBkYXRhXG4gICAgICB0aGlzLmxvZyhcInB1c2hcIiwgYCR7dG9waWN9ICR7ZXZlbnR9ICgke2pvaW5fcmVmfSwgJHtyZWZ9KWAsIHBheWxvYWQpXG4gICAgfVxuXG4gICAgaWYodGhpcy5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgIHRoaXMuZW5jb2RlKGRhdGEsIHJlc3VsdCA9PiB0aGlzLmNvbm4uc2VuZChyZXN1bHQpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbmRCdWZmZXIucHVzaCgoKSA9PiB0aGlzLmVuY29kZShkYXRhLCByZXN1bHQgPT4gdGhpcy5jb25uLnNlbmQocmVzdWx0KSkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbmV4dCBtZXNzYWdlIHJlZiwgYWNjb3VudGluZyBmb3Igb3ZlcmZsb3dzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBtYWtlUmVmKCl7XG4gICAgbGV0IG5ld1JlZiA9IHRoaXMucmVmICsgMVxuICAgIGlmKG5ld1JlZiA9PT0gdGhpcy5yZWYpeyB0aGlzLnJlZiA9IDAgfSBlbHNlIHsgdGhpcy5yZWYgPSBuZXdSZWYgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVmLnRvU3RyaW5nKClcbiAgfVxuXG4gIHNlbmRIZWFydGJlYXQoKXtcbiAgICBpZih0aGlzLnBlbmRpbmdIZWFydGJlYXRSZWYgJiYgIXRoaXMuaXNDb25uZWN0ZWQoKSl7IHJldHVybiB9XG4gICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gdGhpcy5tYWtlUmVmKClcbiAgICB0aGlzLnB1c2goe3RvcGljOiBcInBob2VuaXhcIiwgZXZlbnQ6IFwiaGVhcnRiZWF0XCIsIHBheWxvYWQ6IHt9LCByZWY6IHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZn0pXG4gICAgdGhpcy5oZWFydGJlYXRUaW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuaGVhcnRiZWF0VGltZW91dCgpLCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpXG4gIH1cblxuICBmbHVzaFNlbmRCdWZmZXIoKXtcbiAgICBpZih0aGlzLmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5zZW5kQnVmZmVyLmxlbmd0aCA+IDApe1xuICAgICAgdGhpcy5zZW5kQnVmZmVyLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soKSlcbiAgICAgIHRoaXMuc2VuZEJ1ZmZlciA9IFtdXG4gICAgfVxuICB9XG5cbiAgb25Db25uTWVzc2FnZShyYXdNZXNzYWdlKXtcbiAgICB0aGlzLmRlY29kZShyYXdNZXNzYWdlLmRhdGEsIG1zZyA9PiB7XG4gICAgICBsZXQge3RvcGljLCBldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZn0gPSBtc2dcbiAgICAgIGlmKHJlZiAmJiByZWYgPT09IHRoaXMucGVuZGluZ0hlYXJ0YmVhdFJlZil7XG4gICAgICAgIHRoaXMuY2xlYXJIZWFydGJlYXRzKClcbiAgICAgICAgdGhpcy5wZW5kaW5nSGVhcnRiZWF0UmVmID0gbnVsbFxuICAgICAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNlbmRIZWFydGJlYXQoKSwgdGhpcy5oZWFydGJlYXRJbnRlcnZhbE1zKVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmhhc0xvZ2dlcigpKSB0aGlzLmxvZyhcInJlY2VpdmVcIiwgYCR7cGF5bG9hZC5zdGF0dXMgfHwgXCJcIn0gJHt0b3BpY30gJHtldmVudH0gJHtyZWYgJiYgXCIoXCIgKyByZWYgKyBcIilcIiB8fCBcIlwifWAsIHBheWxvYWQpXG5cbiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNoYW5uZWxzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY29uc3QgY2hhbm5lbCA9IHRoaXMuY2hhbm5lbHNbaV1cbiAgICAgICAgaWYoIWNoYW5uZWwuaXNNZW1iZXIodG9waWMsIGV2ZW50LCBwYXlsb2FkLCBqb2luX3JlZikpeyBjb250aW51ZSB9XG4gICAgICAgIGNoYW5uZWwudHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmLCBqb2luX3JlZilcbiAgICAgIH1cblxuICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZS5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGxldCBbLCBjYWxsYmFja10gPSB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLm1lc3NhZ2VbaV1cbiAgICAgICAgY2FsbGJhY2sobXNnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBsZWF2ZU9wZW5Ub3BpYyh0b3BpYyl7XG4gICAgbGV0IGR1cENoYW5uZWwgPSB0aGlzLmNoYW5uZWxzLmZpbmQoYyA9PiBjLnRvcGljID09PSB0b3BpYyAmJiAoYy5pc0pvaW5lZCgpIHx8IGMuaXNKb2luaW5nKCkpKVxuICAgIGlmKGR1cENoYW5uZWwpe1xuICAgICAgaWYodGhpcy5oYXNMb2dnZXIoKSkgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgYGxlYXZpbmcgZHVwbGljYXRlIHRvcGljIFwiJHt0b3BpY31cImApXG4gICAgICBkdXBDaGFubmVsLmxlYXZlKClcbiAgICB9XG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgQ09OU0VDVVRJVkVfUkVMT0FEUyA9IFwiY29uc2VjdXRpdmUtcmVsb2Fkc1wiXG5leHBvcnQgY29uc3QgTUFYX1JFTE9BRFMgPSAxMFxuZXhwb3J0IGNvbnN0IFJFTE9BRF9KSVRURVJfTUlOID0gNTAwMFxuZXhwb3J0IGNvbnN0IFJFTE9BRF9KSVRURVJfTUFYID0gMTAwMDBcbmV4cG9ydCBjb25zdCBGQUlMU0FGRV9KSVRURVIgPSAzMDAwMFxuZXhwb3J0IGNvbnN0IFBIWF9FVkVOVF9DTEFTU0VTID0gW1xuICBcInBoeC1jbGljay1sb2FkaW5nXCIsIFwicGh4LWNoYW5nZS1sb2FkaW5nXCIsIFwicGh4LXN1Ym1pdC1sb2FkaW5nXCIsXG4gIFwicGh4LWtleWRvd24tbG9hZGluZ1wiLCBcInBoeC1rZXl1cC1sb2FkaW5nXCIsIFwicGh4LWJsdXItbG9hZGluZ1wiLCBcInBoeC1mb2N1cy1sb2FkaW5nXCJcbl1cbmV4cG9ydCBjb25zdCBQSFhfQ09NUE9ORU5UID0gXCJkYXRhLXBoeC1jb21wb25lbnRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MSVZFX0xJTksgPSBcImRhdGEtcGh4LWxpbmtcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19TVEFUSUMgPSBcInRyYWNrLXN0YXRpY1wiXG5leHBvcnQgY29uc3QgUEhYX0xJTktfU1RBVEUgPSBcImRhdGEtcGh4LWxpbmstc3RhdGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUYgPSBcImRhdGEtcGh4LXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1JFRl9TUkMgPSBcImRhdGEtcGh4LXJlZi1zcmNcIlxuZXhwb3J0IGNvbnN0IFBIWF9UUkFDS19VUExPQURTID0gXCJ0cmFjay11cGxvYWRzXCJcbmV4cG9ydCBjb25zdCBQSFhfVVBMT0FEX1JFRiA9IFwiZGF0YS1waHgtdXBsb2FkLXJlZlwiXG5leHBvcnQgY29uc3QgUEhYX1BSRUZMSUdIVEVEX1JFRlMgPSBcImRhdGEtcGh4LXByZWZsaWdodGVkLXJlZnNcIlxuZXhwb3J0IGNvbnN0IFBIWF9ET05FX1JFRlMgPSBcImRhdGEtcGh4LWRvbmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0RST1BfVEFSR0VUID0gXCJkcm9wLXRhcmdldFwiXG5leHBvcnQgY29uc3QgUEhYX0FDVElWRV9FTlRSWV9SRUZTID0gXCJkYXRhLXBoeC1hY3RpdmUtcmVmc1wiXG5leHBvcnQgY29uc3QgUEhYX0xJVkVfRklMRV9VUERBVEVEID0gXCJwaHg6bGl2ZS1maWxlOnVwZGF0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9TS0lQID0gXCJkYXRhLXBoeC1za2lwXCJcbmV4cG9ydCBjb25zdCBQSFhfUFJVTkUgPSBcImRhdGEtcGh4LXBydW5lXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFHRV9MT0FESU5HID0gXCJwYWdlLWxvYWRpbmdcIlxuZXhwb3J0IGNvbnN0IFBIWF9DT05ORUNURURfQ0xBU1MgPSBcInBoeC1jb25uZWN0ZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9MT0FESU5HX0NMQVNTID0gXCJwaHgtbG9hZGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX05PX0ZFRURCQUNLX0NMQVNTID0gXCJwaHgtbm8tZmVlZGJhY2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9FUlJPUl9DTEFTUyA9IFwicGh4LWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTID0gXCJwaHgtY2xpZW50LWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTID0gXCJwaHgtc2VydmVyLWVycm9yXCJcbmV4cG9ydCBjb25zdCBQSFhfUEFSRU5UX0lEID0gXCJkYXRhLXBoeC1wYXJlbnQtaWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9NQUlOID0gXCJkYXRhLXBoeC1tYWluXCJcbmV4cG9ydCBjb25zdCBQSFhfUk9PVF9JRCA9IFwiZGF0YS1waHgtcm9vdC1pZFwiXG5leHBvcnQgY29uc3QgUEhYX1ZJRVdQT1JUX1RPUCA9IFwidmlld3BvcnQtdG9wXCJcbmV4cG9ydCBjb25zdCBQSFhfVklFV1BPUlRfQk9UVE9NID0gXCJ2aWV3cG9ydC1ib3R0b21cIlxuZXhwb3J0IGNvbnN0IFBIWF9UUklHR0VSX0FDVElPTiA9IFwidHJpZ2dlci1hY3Rpb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9GRUVEQkFDS19GT1IgPSBcImZlZWRiYWNrLWZvclwiXG5leHBvcnQgY29uc3QgUEhYX0hBU19GT0NVU0VEID0gXCJwaHgtaGFzLWZvY3VzZWRcIlxuZXhwb3J0IGNvbnN0IEZPQ1VTQUJMRV9JTlBVVFMgPSBbXCJ0ZXh0XCIsIFwidGV4dGFyZWFcIiwgXCJudW1iZXJcIiwgXCJlbWFpbFwiLCBcInBhc3N3b3JkXCIsIFwic2VhcmNoXCIsIFwidGVsXCIsIFwidXJsXCIsIFwiZGF0ZVwiLCBcInRpbWVcIiwgXCJkYXRldGltZS1sb2NhbFwiLCBcImNvbG9yXCIsIFwicmFuZ2VcIl1cbmV4cG9ydCBjb25zdCBDSEVDS0FCTEVfSU5QVVRTID0gW1wiY2hlY2tib3hcIiwgXCJyYWRpb1wiXVxuZXhwb3J0IGNvbnN0IFBIWF9IQVNfU1VCTUlUVEVEID0gXCJwaHgtaGFzLXN1Ym1pdHRlZFwiXG5leHBvcnQgY29uc3QgUEhYX1NFU1NJT04gPSBcImRhdGEtcGh4LXNlc3Npb25cIlxuZXhwb3J0IGNvbnN0IFBIWF9WSUVXX1NFTEVDVE9SID0gYFske1BIWF9TRVNTSU9OfV1gXG5leHBvcnQgY29uc3QgUEhYX1NUSUNLWSA9IFwiZGF0YS1waHgtc3RpY2t5XCJcbmV4cG9ydCBjb25zdCBQSFhfU1RBVElDID0gXCJkYXRhLXBoeC1zdGF0aWNcIlxuZXhwb3J0IGNvbnN0IFBIWF9SRUFET05MWSA9IFwiZGF0YS1waHgtcmVhZG9ubHlcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFRCA9IFwiZGF0YS1waHgtZGlzYWJsZWRcIlxuZXhwb3J0IGNvbnN0IFBIWF9ESVNBQkxFX1dJVEggPSBcImRpc2FibGUtd2l0aFwiXG5leHBvcnQgY29uc3QgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFID0gXCJkYXRhLXBoeC1kaXNhYmxlLXdpdGgtcmVzdG9yZVwiXG5leHBvcnQgY29uc3QgUEhYX0hPT0sgPSBcImhvb2tcIlxuZXhwb3J0IGNvbnN0IFBIWF9ERUJPVU5DRSA9IFwiZGVib3VuY2VcIlxuZXhwb3J0IGNvbnN0IFBIWF9USFJPVFRMRSA9IFwidGhyb3R0bGVcIlxuZXhwb3J0IGNvbnN0IFBIWF9VUERBVEUgPSBcInVwZGF0ZVwiXG5leHBvcnQgY29uc3QgUEhYX1NUUkVBTSA9IFwic3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfU1RSRUFNX1JFRiA9IFwiZGF0YS1waHgtc3RyZWFtXCJcbmV4cG9ydCBjb25zdCBQSFhfS0VZID0gXCJrZXlcIlxuZXhwb3J0IGNvbnN0IFBIWF9QUklWQVRFID0gXCJwaHhQcml2YXRlXCJcbmV4cG9ydCBjb25zdCBQSFhfQVVUT19SRUNPVkVSID0gXCJhdXRvLXJlY292ZXJcIlxuZXhwb3J0IGNvbnN0IFBIWF9MVl9ERUJVRyA9IFwicGh4OmxpdmUtc29ja2V0OmRlYnVnXCJcbmV4cG9ydCBjb25zdCBQSFhfTFZfUFJPRklMRSA9IFwicGh4OmxpdmUtc29ja2V0OnByb2ZpbGluZ1wiXG5leHBvcnQgY29uc3QgUEhYX0xWX0xBVEVOQ1lfU0lNID0gXCJwaHg6bGl2ZS1zb2NrZXQ6bGF0ZW5jeS1zaW1cIlxuZXhwb3J0IGNvbnN0IFBIWF9QUk9HUkVTUyA9IFwicHJvZ3Jlc3NcIlxuZXhwb3J0IGNvbnN0IFBIWF9NT1VOVEVEID0gXCJtb3VudGVkXCJcbmV4cG9ydCBjb25zdCBMT0FERVJfVElNRU9VVCA9IDFcbmV4cG9ydCBjb25zdCBCRUZPUkVfVU5MT0FEX0xPQURFUl9USU1FT1VUID0gMjAwXG5leHBvcnQgY29uc3QgQklORElOR19QUkVGSVggPSBcInBoeC1cIlxuZXhwb3J0IGNvbnN0IFBVU0hfVElNRU9VVCA9IDMwMDAwXG5leHBvcnQgY29uc3QgTElOS19IRUFERVIgPSBcIngtcmVxdWVzdGVkLXdpdGhcIlxuZXhwb3J0IGNvbnN0IFJFU1BPTlNFX1VSTF9IRUFERVIgPSBcIngtcmVzcG9uc2UtdXJsXCJcbmV4cG9ydCBjb25zdCBERUJPVU5DRV9UUklHR0VSID0gXCJkZWJvdW5jZS10cmlnZ2VyXCJcbmV4cG9ydCBjb25zdCBUSFJPVFRMRUQgPSBcInRocm90dGxlZFwiXG5leHBvcnQgY29uc3QgREVCT1VOQ0VfUFJFVl9LRVkgPSBcImRlYm91bmNlLXByZXYta2V5XCJcbmV4cG9ydCBjb25zdCBERUZBVUxUUyA9IHtcbiAgZGVib3VuY2U6IDMwMCxcbiAgdGhyb3R0bGU6IDMwMFxufVxuXG4vLyBSZW5kZXJlZFxuZXhwb3J0IGNvbnN0IERZTkFNSUNTID0gXCJkXCJcbmV4cG9ydCBjb25zdCBTVEFUSUMgPSBcInNcIlxuZXhwb3J0IGNvbnN0IENPTVBPTkVOVFMgPSBcImNcIlxuZXhwb3J0IGNvbnN0IEVWRU5UUyA9IFwiZVwiXG5leHBvcnQgY29uc3QgUkVQTFkgPSBcInJcIlxuZXhwb3J0IGNvbnN0IFRJVExFID0gXCJ0XCJcbmV4cG9ydCBjb25zdCBURU1QTEFURVMgPSBcInBcIlxuZXhwb3J0IGNvbnN0IFNUUkVBTSA9IFwic3RyZWFtXCJcbiIsICJpbXBvcnQge1xuICBsb2dFcnJvclxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVudHJ5VXBsb2FkZXIge1xuICBjb25zdHJ1Y3RvcihlbnRyeSwgY2h1bmtTaXplLCBsaXZlU29ja2V0KXtcbiAgICB0aGlzLmxpdmVTb2NrZXQgPSBsaXZlU29ja2V0XG4gICAgdGhpcy5lbnRyeSA9IGVudHJ5XG4gICAgdGhpcy5vZmZzZXQgPSAwXG4gICAgdGhpcy5jaHVua1NpemUgPSBjaHVua1NpemVcbiAgICB0aGlzLmNodW5rVGltZXIgPSBudWxsXG4gICAgdGhpcy51cGxvYWRDaGFubmVsID0gbGl2ZVNvY2tldC5jaGFubmVsKGBsdnU6JHtlbnRyeS5yZWZ9YCwge3Rva2VuOiBlbnRyeS5tZXRhZGF0YSgpfSlcbiAgfVxuXG4gIGVycm9yKHJlYXNvbil7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuY2h1bmtUaW1lcilcbiAgICB0aGlzLnVwbG9hZENoYW5uZWwubGVhdmUoKVxuICAgIHRoaXMuZW50cnkuZXJyb3IocmVhc29uKVxuICB9XG5cbiAgdXBsb2FkKCl7XG4gICAgdGhpcy51cGxvYWRDaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMuZXJyb3IocmVhc29uKSlcbiAgICB0aGlzLnVwbG9hZENoYW5uZWwuam9pbigpXG4gICAgICAucmVjZWl2ZShcIm9rXCIsIF9kYXRhID0+IHRoaXMucmVhZE5leHRDaHVuaygpKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCByZWFzb24gPT4gdGhpcy5lcnJvcihyZWFzb24pKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLm9mZnNldCA+PSB0aGlzLmVudHJ5LmZpbGUuc2l6ZSB9XG5cbiAgcmVhZE5leHRDaHVuaygpe1xuICAgIGxldCByZWFkZXIgPSBuZXcgd2luZG93LkZpbGVSZWFkZXIoKVxuICAgIGxldCBibG9iID0gdGhpcy5lbnRyeS5maWxlLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmNodW5rU2l6ZSArIHRoaXMub2Zmc2V0KVxuICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4ge1xuICAgICAgaWYoZS50YXJnZXQuZXJyb3IgPT09IG51bGwpe1xuICAgICAgICB0aGlzLm9mZnNldCArPSBlLnRhcmdldC5yZXN1bHQuYnl0ZUxlbmd0aFxuICAgICAgICB0aGlzLnB1c2hDaHVuayhlLnRhcmdldC5yZXN1bHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbG9nRXJyb3IoXCJSZWFkIGVycm9yOiBcIiArIGUudGFyZ2V0LmVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgfVxuXG4gIHB1c2hDaHVuayhjaHVuayl7XG4gICAgaWYoIXRoaXMudXBsb2FkQ2hhbm5lbC5pc0pvaW5lZCgpKXsgcmV0dXJuIH1cbiAgICB0aGlzLnVwbG9hZENoYW5uZWwucHVzaChcImNodW5rXCIsIGNodW5rKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZW50cnkucHJvZ3Jlc3MoKHRoaXMub2Zmc2V0IC8gdGhpcy5lbnRyeS5maWxlLnNpemUpICogMTAwKVxuICAgICAgICBpZighdGhpcy5pc0RvbmUoKSl7XG4gICAgICAgICAgdGhpcy5jaHVua1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlYWROZXh0Q2h1bmsoKSwgdGhpcy5saXZlU29ja2V0LmdldExhdGVuY3lTaW0oKSB8fCAwKVxuICAgICAgICB9XG4gICAgICB9KVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgUEhYX1ZJRVdfU0VMRUNUT1Jcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IEVudHJ5VXBsb2FkZXIgZnJvbSBcIi4vZW50cnlfdXBsb2FkZXJcIlxuXG5leHBvcnQgbGV0IGxvZ0Vycm9yID0gKG1zZywgb2JqKSA9PiBjb25zb2xlLmVycm9yICYmIGNvbnNvbGUuZXJyb3IobXNnLCBvYmopXG5cbmV4cG9ydCBsZXQgaXNDaWQgPSAoY2lkKSA9PiB7XG4gIGxldCB0eXBlID0gdHlwZW9mKGNpZClcbiAgcmV0dXJuIHR5cGUgPT09IFwibnVtYmVyXCIgfHwgKHR5cGUgPT09IFwic3RyaW5nXCIgJiYgL14oMHxbMS05XVxcZCopJC8udGVzdChjaWQpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0RHVwbGljYXRlSWRzKCl7XG4gIGxldCBpZHMgPSBuZXcgU2V0KClcbiAgbGV0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIipbaWRdXCIpXG4gIGZvcihsZXQgaSA9IDAsIGxlbiA9IGVsZW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKXtcbiAgICBpZihpZHMuaGFzKGVsZW1zW2ldLmlkKSl7XG4gICAgICBjb25zb2xlLmVycm9yKGBNdWx0aXBsZSBJRHMgZGV0ZWN0ZWQ6ICR7ZWxlbXNbaV0uaWR9LiBFbnN1cmUgdW5pcXVlIGVsZW1lbnQgaWRzLmApXG4gICAgfSBlbHNlIHtcbiAgICAgIGlkcy5hZGQoZWxlbXNbaV0uaWQpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBsZXQgZGVidWcgPSAodmlldywga2luZCwgbXNnLCBvYmopID0+IHtcbiAgaWYodmlldy5saXZlU29ja2V0LmlzRGVidWdFbmFibGVkKCkpe1xuICAgIGNvbnNvbGUubG9nKGAke3ZpZXcuaWR9ICR7a2luZH06ICR7bXNnfSAtIGAsIG9iailcbiAgfVxufVxuXG4vLyB3cmFwcyB2YWx1ZSBpbiBjbG9zdXJlIG9yIHJldHVybnMgY2xvc3VyZVxuZXhwb3J0IGxldCBjbG9zdXJlID0gKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiID8gdmFsIDogZnVuY3Rpb24gKCl7IHJldHVybiB2YWwgfVxuXG5leHBvcnQgbGV0IGNsb25lID0gKG9iaikgPT4geyByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKSB9XG5cbmV4cG9ydCBsZXQgY2xvc2VzdFBoeEJpbmRpbmcgPSAoZWwsIGJpbmRpbmcsIGJvcmRlckVsKSA9PiB7XG4gIGRvIHtcbiAgICBpZihlbC5tYXRjaGVzKGBbJHtiaW5kaW5nfV1gKSAmJiAhZWwuZGlzYWJsZWQpeyByZXR1cm4gZWwgfVxuICAgIGVsID0gZWwucGFyZW50RWxlbWVudCB8fCBlbC5wYXJlbnROb2RlXG4gIH0gd2hpbGUoZWwgIT09IG51bGwgJiYgZWwubm9kZVR5cGUgPT09IDEgJiYgISgoYm9yZGVyRWwgJiYgYm9yZGVyRWwuaXNTYW1lTm9kZShlbCkpIHx8IGVsLm1hdGNoZXMoUEhYX1ZJRVdfU0VMRUNUT1IpKSlcbiAgcmV0dXJuIG51bGxcbn1cblxuZXhwb3J0IGxldCBpc09iamVjdCA9IChvYmopID0+IHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmICEob2JqIGluc3RhbmNlb2YgQXJyYXkpXG59XG5cbmV4cG9ydCBsZXQgaXNFcXVhbE9iaiA9IChvYmoxLCBvYmoyKSA9PiBKU09OLnN0cmluZ2lmeShvYmoxKSA9PT0gSlNPTi5zdHJpbmdpZnkob2JqMilcblxuZXhwb3J0IGxldCBpc0VtcHR5ID0gKG9iaikgPT4ge1xuICBmb3IobGV0IHggaW4gb2JqKXsgcmV0dXJuIGZhbHNlIH1cbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGxldCBtYXliZSA9IChlbCwgY2FsbGJhY2spID0+IGVsICYmIGNhbGxiYWNrKGVsKVxuXG5leHBvcnQgbGV0IGNoYW5uZWxVcGxvYWRlciA9IGZ1bmN0aW9uIChlbnRyaWVzLCBvbkVycm9yLCByZXNwLCBsaXZlU29ja2V0KXtcbiAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICBsZXQgZW50cnlVcGxvYWRlciA9IG5ldyBFbnRyeVVwbG9hZGVyKGVudHJ5LCByZXNwLmNvbmZpZy5jaHVua19zaXplLCBsaXZlU29ja2V0KVxuICAgIGVudHJ5VXBsb2FkZXIudXBsb2FkKClcbiAgfSlcbn1cbiIsICJsZXQgQnJvd3NlciA9IHtcbiAgY2FuUHVzaFN0YXRlKCl7IHJldHVybiAodHlwZW9mIChoaXN0b3J5LnB1c2hTdGF0ZSkgIT09IFwidW5kZWZpbmVkXCIpIH0sXG5cbiAgZHJvcExvY2FsKGxvY2FsU3RvcmFnZSwgbmFtZXNwYWNlLCBzdWJrZXkpe1xuICAgIHJldHVybiBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmxvY2FsS2V5KG5hbWVzcGFjZSwgc3Via2V5KSlcbiAgfSxcblxuICB1cGRhdGVMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5LCBpbml0aWFsLCBmdW5jKXtcbiAgICBsZXQgY3VycmVudCA9IHRoaXMuZ2V0TG9jYWwobG9jYWxTdG9yYWdlLCBuYW1lc3BhY2UsIHN1YmtleSlcbiAgICBsZXQga2V5ID0gdGhpcy5sb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSlcbiAgICBsZXQgbmV3VmFsID0gY3VycmVudCA9PT0gbnVsbCA/IGluaXRpYWwgOiBmdW5jKGN1cnJlbnQpXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShuZXdWYWwpKVxuICAgIHJldHVybiBuZXdWYWxcbiAgfSxcblxuICBnZXRMb2NhbChsb2NhbFN0b3JhZ2UsIG5hbWVzcGFjZSwgc3Via2V5KXtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmxvY2FsS2V5KG5hbWVzcGFjZSwgc3Via2V5KSkpXG4gIH0sXG5cbiAgdXBkYXRlQ3VycmVudFN0YXRlKGNhbGxiYWNrKXtcbiAgICBpZighdGhpcy5jYW5QdXNoU3RhdGUoKSl7IHJldHVybiB9XG4gICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoY2FsbGJhY2soaGlzdG9yeS5zdGF0ZSB8fCB7fSksIFwiXCIsIHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICB9LFxuXG4gIHB1c2hTdGF0ZShraW5kLCBtZXRhLCB0byl7XG4gICAgaWYodGhpcy5jYW5QdXNoU3RhdGUoKSl7XG4gICAgICBpZih0byAhPT0gd2luZG93LmxvY2F0aW9uLmhyZWYpe1xuICAgICAgICBpZihtZXRhLnR5cGUgPT0gXCJyZWRpcmVjdFwiICYmIG1ldGEuc2Nyb2xsKXtcbiAgICAgICAgICAvLyBJZiB3ZSdyZSByZWRpcmVjdGluZyBzdG9yZSB0aGUgY3VycmVudCBzY3JvbGxZIGZvciB0aGUgY3VycmVudCBoaXN0b3J5IHN0YXRlLlxuICAgICAgICAgIGxldCBjdXJyZW50U3RhdGUgPSBoaXN0b3J5LnN0YXRlIHx8IHt9XG4gICAgICAgICAgY3VycmVudFN0YXRlLnNjcm9sbCA9IG1ldGEuc2Nyb2xsXG4gICAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoY3VycmVudFN0YXRlLCBcIlwiLCB3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBtZXRhLnNjcm9sbCAvLyBPbmx5IHN0b3JlIHRoZSBzY3JvbGwgaW4gdGhlIHJlZGlyZWN0IGNhc2UuXG4gICAgICAgIGhpc3Rvcnlba2luZCArIFwiU3RhdGVcIl0obWV0YSwgXCJcIiwgdG8gfHwgbnVsbCkgLy8gSUUgd2lsbCBjb2VyY2UgdW5kZWZpbmVkIHRvIHN0cmluZ1xuICAgICAgICBsZXQgaGFzaEVsID0gdGhpcy5nZXRIYXNoVGFyZ2V0RWwod2luZG93LmxvY2F0aW9uLmhhc2gpXG5cbiAgICAgICAgaWYoaGFzaEVsKXtcbiAgICAgICAgICBoYXNoRWwuc2Nyb2xsSW50b1ZpZXcoKVxuICAgICAgICB9IGVsc2UgaWYobWV0YS50eXBlID09PSBcInJlZGlyZWN0XCIpe1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGwoMCwgMClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZGlyZWN0KHRvKVxuICAgIH1cbiAgfSxcblxuICBzZXRDb29raWUobmFtZSwgdmFsdWUpe1xuICAgIGRvY3VtZW50LmNvb2tpZSA9IGAke25hbWV9PSR7dmFsdWV9YFxuICB9LFxuXG4gIGdldENvb2tpZShuYW1lKXtcbiAgICByZXR1cm4gZG9jdW1lbnQuY29va2llLnJlcGxhY2UobmV3IFJlZ0V4cChgKD86KD86XnwuKjtcXHMqKSR7bmFtZX1cXHMqXFw9XFxzKihbXjtdKikuKiQpfF4uKiRgKSwgXCIkMVwiKVxuICB9LFxuXG4gIHJlZGlyZWN0KHRvVVJMLCBmbGFzaCl7XG4gICAgaWYoZmxhc2gpeyBCcm93c2VyLnNldENvb2tpZShcIl9fcGhvZW5peF9mbGFzaF9fXCIsIGZsYXNoICsgXCI7IG1heC1hZ2U9NjAwMDA7IHBhdGg9L1wiKSB9XG4gICAgd2luZG93LmxvY2F0aW9uID0gdG9VUkxcbiAgfSxcblxuICBsb2NhbEtleShuYW1lc3BhY2UsIHN1YmtleSl7IHJldHVybiBgJHtuYW1lc3BhY2V9LSR7c3Via2V5fWAgfSxcblxuICBnZXRIYXNoVGFyZ2V0RWwobWF5YmVIYXNoKXtcbiAgICBsZXQgaGFzaCA9IG1heWJlSGFzaC50b1N0cmluZygpLnN1YnN0cmluZygxKVxuICAgIGlmKGhhc2ggPT09IFwiXCIpeyByZXR1cm4gfVxuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChoYXNoKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBhW25hbWU9XCIke2hhc2h9XCJdYClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCcm93c2VyXG4iLCAiaW1wb3J0IHtcbiAgQ0hFQ0tBQkxFX0lOUFVUUyxcbiAgREVCT1VOQ0VfUFJFVl9LRVksXG4gIERFQk9VTkNFX1RSSUdHRVIsXG4gIEZPQ1VTQUJMRV9JTlBVVFMsXG4gIFBIWF9DT01QT05FTlQsXG4gIFBIWF9FVkVOVF9DTEFTU0VTLFxuICBQSFhfSEFTX0ZPQ1VTRUQsXG4gIFBIWF9IQVNfU1VCTUlUVEVELFxuICBQSFhfTUFJTixcbiAgUEhYX05PX0ZFRURCQUNLX0NMQVNTLFxuICBQSFhfUEFSRU5UX0lELFxuICBQSFhfUFJJVkFURSxcbiAgUEhYX1JFRixcbiAgUEhYX1JFRl9TUkMsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NUQVRJQyxcbiAgUEhYX1VQTE9BRF9SRUYsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfU1RJQ0tZLFxuICBUSFJPVFRMRURcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5sZXQgRE9NID0ge1xuICBieUlkKGlkKXsgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSB8fCBsb2dFcnJvcihgbm8gaWQgZm91bmQgZm9yICR7aWR9YCkgfSxcblxuICByZW1vdmVDbGFzcyhlbCwgY2xhc3NOYW1lKXtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSlcbiAgICBpZihlbC5jbGFzc0xpc3QubGVuZ3RoID09PSAwKXsgZWwucmVtb3ZlQXR0cmlidXRlKFwiY2xhc3NcIikgfVxuICB9LFxuXG4gIGFsbChub2RlLCBxdWVyeSwgY2FsbGJhY2spe1xuICAgIGlmKCFub2RlKXsgcmV0dXJuIFtdIH1cbiAgICBsZXQgYXJyYXkgPSBBcnJheS5mcm9tKG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSkpXG4gICAgcmV0dXJuIGNhbGxiYWNrID8gYXJyYXkuZm9yRWFjaChjYWxsYmFjaykgOiBhcnJheVxuICB9LFxuXG4gIGNoaWxkTm9kZUxlbmd0aChodG1sKXtcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuY2hpbGRFbGVtZW50Q291bnRcbiAgfSxcblxuICBpc1VwbG9hZElucHV0KGVsKXsgcmV0dXJuIGVsLnR5cGUgPT09IFwiZmlsZVwiICYmIGVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRikgIT09IG51bGwgfSxcblxuICBmaW5kVXBsb2FkSW5wdXRzKG5vZGUpeyByZXR1cm4gdGhpcy5hbGwobm9kZSwgYGlucHV0W3R5cGU9XCJmaWxlXCJdWyR7UEhYX1VQTE9BRF9SRUZ9XWApIH0sXG5cbiAgZmluZENvbXBvbmVudE5vZGVMaXN0KG5vZGUsIGNpZCl7XG4gICAgcmV0dXJuIHRoaXMuZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KHRoaXMuYWxsKG5vZGUsIGBbJHtQSFhfQ09NUE9ORU5UfT1cIiR7Y2lkfVwiXWApLCBub2RlKVxuICB9LFxuXG4gIGlzUGh4RGVzdHJveWVkKG5vZGUpe1xuICAgIHJldHVybiBub2RlLmlkICYmIERPTS5wcml2YXRlKG5vZGUsIFwiZGVzdHJveWVkXCIpID8gdHJ1ZSA6IGZhbHNlXG4gIH0sXG5cbiAgd2FudHNOZXdUYWIoZSl7XG4gICAgbGV0IHdhbnRzTmV3VGFiID0gZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkgfHwgZS5tZXRhS2V5IHx8IChlLmJ1dHRvbiAmJiBlLmJ1dHRvbiA9PT0gMSlcbiAgICBsZXQgaXNEb3dubG9hZCA9IChlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50ICYmIGUudGFyZ2V0Lmhhc0F0dHJpYnV0ZShcImRvd25sb2FkXCIpKVxuICAgIGxldCBpc1RhcmdldEJsYW5rID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwidGFyZ2V0XCIpID09PSBcIl9ibGFua1wiXG4gICAgcmV0dXJuIHdhbnRzTmV3VGFiIHx8IGlzVGFyZ2V0QmxhbmsgfHwgaXNEb3dubG9hZFxuICB9LFxuXG4gIGlzVW5sb2FkYWJsZUZvcm1TdWJtaXQoZSl7XG4gICAgcmV0dXJuICFlLmRlZmF1bHRQcmV2ZW50ZWQgJiYgIXRoaXMud2FudHNOZXdUYWIoZSlcbiAgfSxcblxuICBpc05ld1BhZ2VDbGljayhlLCBjdXJyZW50TG9jYXRpb24pe1xuICAgIGxldCBocmVmID0gZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCA/IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIikgOiBudWxsXG4gICAgbGV0IHVybFxuXG4gICAgaWYoZS5kZWZhdWx0UHJldmVudGVkIHx8IGhyZWYgPT09IG51bGwgfHwgdGhpcy53YW50c05ld1RhYihlKSl7IHJldHVybiBmYWxzZSB9XG4gICAgaWYoaHJlZi5zdGFydHNXaXRoKFwibWFpbHRvOlwiKSB8fCBocmVmLnN0YXJ0c1dpdGgoXCJ0ZWw6XCIpKXsgcmV0dXJuIGZhbHNlIH1cblxuICAgIHRyeSB7XG4gICAgICB1cmwgPSBuZXcgVVJMKGhyZWYpXG4gICAgfSBjYXRjaChlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB1cmwgPSBuZXcgVVJMKGhyZWYsIGN1cnJlbnRMb2NhdGlvbilcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAvLyBiYWQgVVJMLCBmYWxsYmFjayB0byBsZXQgYnJvd3NlciB0cnkgaXQgYXMgZXh0ZXJuYWxcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZih1cmwuaG9zdCA9PT0gY3VycmVudExvY2F0aW9uLmhvc3QgJiYgdXJsLnByb3RvY29sID09PSBjdXJyZW50TG9jYXRpb24ucHJvdG9jb2wpe1xuICAgICAgaWYodXJsLnBhdGhuYW1lID09PSBjdXJyZW50TG9jYXRpb24ucGF0aG5hbWUgJiYgdXJsLnNlYXJjaCA9PT0gY3VycmVudExvY2F0aW9uLnNlYXJjaCl7XG4gICAgICAgIHJldHVybiB1cmwuaGFzaCA9PT0gXCJcIiAmJiAhdXJsLmhyZWYuZW5kc1dpdGgoXCIjXCIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cmwucHJvdG9jb2wuc3RhcnRzV2l0aChcImh0dHBcIilcbiAgfSxcblxuICBtYXJrUGh4Q2hpbGREZXN0cm95ZWQoZWwpe1xuICAgIGlmKHRoaXMuaXNQaHhDaGlsZChlbCkpeyBlbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIFwiXCIpIH1cbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIFwiZGVzdHJveWVkXCIsIHRydWUpXG4gIH0sXG5cbiAgZmluZFBoeENoaWxkcmVuSW5GcmFnbWVudChodG1sLCBwYXJlbnRJZCl7XG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFxuICAgIHJldHVybiB0aGlzLmZpbmRQaHhDaGlsZHJlbih0ZW1wbGF0ZS5jb250ZW50LCBwYXJlbnRJZClcbiAgfSxcblxuICBpc0lnbm9yZWQoZWwsIHBoeFVwZGF0ZSl7XG4gICAgcmV0dXJuIChlbC5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSB8fCBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBoeC11cGRhdGVcIikpID09PSBcImlnbm9yZVwiXG4gIH0sXG5cbiAgaXNQaHhVcGRhdGUoZWwsIHBoeFVwZGF0ZSwgdXBkYXRlVHlwZXMpe1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUgJiYgdXBkYXRlVHlwZXMuaW5kZXhPZihlbC5nZXRBdHRyaWJ1dGUocGh4VXBkYXRlKSkgPj0gMFxuICB9LFxuXG4gIGZpbmRQaHhTdGlja3koZWwpeyByZXR1cm4gdGhpcy5hbGwoZWwsIGBbJHtQSFhfU1RJQ0tZfV1gKSB9LFxuXG4gIGZpbmRQaHhDaGlsZHJlbihlbCwgcGFyZW50SWQpe1xuICAgIHJldHVybiB0aGlzLmFsbChlbCwgYCR7UEhYX1ZJRVdfU0VMRUNUT1J9WyR7UEhYX1BBUkVOVF9JRH09XCIke3BhcmVudElkfVwiXWApXG4gIH0sXG5cbiAgZmluZFBhcmVudENJRHMobm9kZSwgY2lkcyl7XG4gICAgbGV0IGluaXRpYWwgPSBuZXcgU2V0KGNpZHMpXG4gICAgbGV0IHBhcmVudENpZHMgPVxuICAgICAgY2lkcy5yZWR1Y2UoKGFjYywgY2lkKSA9PiB7XG4gICAgICAgIGxldCBzZWxlY3RvciA9IGBbJHtQSFhfQ09NUE9ORU5UfT1cIiR7Y2lkfVwiXSBbJHtQSFhfQ09NUE9ORU5UfV1gXG5cbiAgICAgICAgdGhpcy5maWx0ZXJXaXRoaW5TYW1lTGl2ZVZpZXcodGhpcy5hbGwobm9kZSwgc2VsZWN0b3IpLCBub2RlKVxuICAgICAgICAgIC5tYXAoZWwgPT4gcGFyc2VJbnQoZWwuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpKSlcbiAgICAgICAgICAuZm9yRWFjaChjaGlsZENJRCA9PiBhY2MuZGVsZXRlKGNoaWxkQ0lEKSlcblxuICAgICAgICByZXR1cm4gYWNjXG4gICAgICB9LCBpbml0aWFsKVxuXG4gICAgcmV0dXJuIHBhcmVudENpZHMuc2l6ZSA9PT0gMCA/IG5ldyBTZXQoY2lkcykgOiBwYXJlbnRDaWRzXG4gIH0sXG5cbiAgZmlsdGVyV2l0aGluU2FtZUxpdmVWaWV3KG5vZGVzLCBwYXJlbnQpe1xuICAgIGlmKHBhcmVudC5xdWVyeVNlbGVjdG9yKFBIWF9WSUVXX1NFTEVDVE9SKSl7XG4gICAgICByZXR1cm4gbm9kZXMuZmlsdGVyKGVsID0+IHRoaXMud2l0aGluU2FtZUxpdmVWaWV3KGVsLCBwYXJlbnQpKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbm9kZXNcbiAgICB9XG4gIH0sXG5cbiAgd2l0aGluU2FtZUxpdmVWaWV3KG5vZGUsIHBhcmVudCl7XG4gICAgd2hpbGUobm9kZSA9IG5vZGUucGFyZW50Tm9kZSl7XG4gICAgICBpZihub2RlLmlzU2FtZU5vZGUocGFyZW50KSl7IHJldHVybiB0cnVlIH1cbiAgICAgIGlmKG5vZGUuZ2V0QXR0cmlidXRlKFBIWF9TRVNTSU9OKSAhPT0gbnVsbCl7IHJldHVybiBmYWxzZSB9XG4gICAgfVxuICB9LFxuXG4gIHByaXZhdGUoZWwsIGtleSl7IHJldHVybiBlbFtQSFhfUFJJVkFURV0gJiYgZWxbUEhYX1BSSVZBVEVdW2tleV0gfSxcblxuICBkZWxldGVQcml2YXRlKGVsLCBrZXkpeyBlbFtQSFhfUFJJVkFURV0gJiYgZGVsZXRlIChlbFtQSFhfUFJJVkFURV1ba2V5XSkgfSxcblxuICBwdXRQcml2YXRlKGVsLCBrZXksIHZhbHVlKXtcbiAgICBpZighZWxbUEhYX1BSSVZBVEVdKXsgZWxbUEhYX1BSSVZBVEVdID0ge30gfVxuICAgIGVsW1BIWF9QUklWQVRFXVtrZXldID0gdmFsdWVcbiAgfSxcblxuICB1cGRhdGVQcml2YXRlKGVsLCBrZXksIGRlZmF1bHRWYWwsIHVwZGF0ZUZ1bmMpe1xuICAgIGxldCBleGlzdGluZyA9IHRoaXMucHJpdmF0ZShlbCwga2V5KVxuICAgIGlmKGV4aXN0aW5nID09PSB1bmRlZmluZWQpe1xuICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBrZXksIHVwZGF0ZUZ1bmMoZGVmYXVsdFZhbCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHV0UHJpdmF0ZShlbCwga2V5LCB1cGRhdGVGdW5jKGV4aXN0aW5nKSlcbiAgICB9XG4gIH0sXG5cbiAgY29weVByaXZhdGVzKHRhcmdldCwgc291cmNlKXtcbiAgICBpZihzb3VyY2VbUEhYX1BSSVZBVEVdKXtcbiAgICAgIHRhcmdldFtQSFhfUFJJVkFURV0gPSBzb3VyY2VbUEhYX1BSSVZBVEVdXG4gICAgfVxuICB9LFxuXG4gIHB1dFRpdGxlKHN0cil7XG4gICAgbGV0IHRpdGxlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwidGl0bGVcIilcbiAgICBpZih0aXRsZUVsKXtcbiAgICAgIGxldCB7cHJlZml4LCBzdWZmaXh9ID0gdGl0bGVFbC5kYXRhc2V0XG4gICAgICBkb2N1bWVudC50aXRsZSA9IGAke3ByZWZpeCB8fCBcIlwifSR7c3RyfSR7c3VmZml4IHx8IFwiXCJ9YFxuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC50aXRsZSA9IHN0clxuICAgIH1cbiAgfSxcblxuICBkZWJvdW5jZShlbCwgZXZlbnQsIHBoeERlYm91bmNlLCBkZWZhdWx0RGVib3VuY2UsIHBoeFRocm90dGxlLCBkZWZhdWx0VGhyb3R0bGUsIGFzeW5jRmlsdGVyLCBjYWxsYmFjayl7XG4gICAgbGV0IGRlYm91bmNlID0gZWwuZ2V0QXR0cmlidXRlKHBoeERlYm91bmNlKVxuICAgIGxldCB0aHJvdHRsZSA9IGVsLmdldEF0dHJpYnV0ZShwaHhUaHJvdHRsZSlcblxuICAgIGlmKGRlYm91bmNlID09PSBcIlwiKXsgZGVib3VuY2UgPSBkZWZhdWx0RGVib3VuY2UgfVxuICAgIGlmKHRocm90dGxlID09PSBcIlwiKXsgdGhyb3R0bGUgPSBkZWZhdWx0VGhyb3R0bGUgfVxuICAgIGxldCB2YWx1ZSA9IGRlYm91bmNlIHx8IHRocm90dGxlXG4gICAgc3dpdGNoKHZhbHVlKXtcbiAgICAgIGNhc2UgbnVsbDogcmV0dXJuIGNhbGxiYWNrKClcblxuICAgICAgY2FzZSBcImJsdXJcIjpcbiAgICAgICAgaWYodGhpcy5vbmNlKGVsLCBcImRlYm91bmNlLWJsdXJcIikpe1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IGNhbGxiYWNrKCkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGxldCB0aW1lb3V0ID0gcGFyc2VJbnQodmFsdWUpXG4gICAgICAgIGxldCB0cmlnZ2VyID0gKCkgPT4gdGhyb3R0bGUgPyB0aGlzLmRlbGV0ZVByaXZhdGUoZWwsIFRIUk9UVExFRCkgOiBjYWxsYmFjaygpXG4gICAgICAgIGxldCBjdXJyZW50Q3ljbGUgPSB0aGlzLmluY0N5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSLCB0cmlnZ2VyKVxuICAgICAgICBpZihpc05hTih0aW1lb3V0KSl7IHJldHVybiBsb2dFcnJvcihgaW52YWxpZCB0aHJvdHRsZS9kZWJvdW5jZSB2YWx1ZTogJHt2YWx1ZX1gKSB9XG4gICAgICAgIGlmKHRocm90dGxlKXtcbiAgICAgICAgICBsZXQgbmV3S2V5RG93biA9IGZhbHNlXG4gICAgICAgICAgaWYoZXZlbnQudHlwZSA9PT0gXCJrZXlkb3duXCIpe1xuICAgICAgICAgICAgbGV0IHByZXZLZXkgPSB0aGlzLnByaXZhdGUoZWwsIERFQk9VTkNFX1BSRVZfS0VZKVxuICAgICAgICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBERUJPVU5DRV9QUkVWX0tFWSwgZXZlbnQua2V5KVxuICAgICAgICAgICAgbmV3S2V5RG93biA9IHByZXZLZXkgIT09IGV2ZW50LmtleVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmKCFuZXdLZXlEb3duICYmIHRoaXMucHJpdmF0ZShlbCwgVEhST1RUTEVEKSl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICAgICAgdGhpcy5wdXRQcml2YXRlKGVsLCBUSFJPVFRMRUQsIHRydWUpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgaWYoYXN5bmNGaWx0ZXIoKSl7IHRoaXMudHJpZ2dlckN5Y2xlKGVsLCBERUJPVU5DRV9UUklHR0VSKSB9XG4gICAgICAgICAgICB9LCB0aW1lb3V0KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmKGFzeW5jRmlsdGVyKCkpeyB0aGlzLnRyaWdnZXJDeWNsZShlbCwgREVCT1VOQ0VfVFJJR0dFUiwgY3VycmVudEN5Y2xlKSB9XG4gICAgICAgICAgfSwgdGltZW91dClcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmb3JtID0gZWwuZm9ybVxuICAgICAgICBpZihmb3JtICYmIHRoaXMub25jZShmb3JtLCBcImJpbmQtZGVib3VuY2VcIikpe1xuICAgICAgICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBBcnJheS5mcm9tKChuZXcgRm9ybURhdGEoZm9ybSkpLmVudHJpZXMoKSwgKFtuYW1lXSkgPT4ge1xuICAgICAgICAgICAgICBsZXQgaW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYFtuYW1lPVwiJHtuYW1lfVwiXWApXG4gICAgICAgICAgICAgIHRoaXMuaW5jQ3ljbGUoaW5wdXQsIERFQk9VTkNFX1RSSUdHRVIpXG4gICAgICAgICAgICAgIHRoaXMuZGVsZXRlUHJpdmF0ZShpbnB1dCwgVEhST1RUTEVEKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMub25jZShlbCwgXCJiaW5kLWRlYm91bmNlXCIpKXtcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCAoKSA9PiB0aGlzLnRyaWdnZXJDeWNsZShlbCwgREVCT1VOQ0VfVFJJR0dFUikpXG4gICAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdHJpZ2dlckN5Y2xlKGVsLCBrZXksIGN1cnJlbnRDeWNsZSl7XG4gICAgbGV0IFtjeWNsZSwgdHJpZ2dlcl0gPSB0aGlzLnByaXZhdGUoZWwsIGtleSlcbiAgICBpZighY3VycmVudEN5Y2xlKXsgY3VycmVudEN5Y2xlID0gY3ljbGUgfVxuICAgIGlmKGN1cnJlbnRDeWNsZSA9PT0gY3ljbGUpe1xuICAgICAgdGhpcy5pbmNDeWNsZShlbCwga2V5KVxuICAgICAgdHJpZ2dlcigpXG4gICAgfVxuICB9LFxuXG4gIG9uY2UoZWwsIGtleSl7XG4gICAgaWYodGhpcy5wcml2YXRlKGVsLCBrZXkpID09PSB0cnVlKXsgcmV0dXJuIGZhbHNlIH1cbiAgICB0aGlzLnB1dFByaXZhdGUoZWwsIGtleSwgdHJ1ZSlcbiAgICByZXR1cm4gdHJ1ZVxuICB9LFxuXG4gIGluY0N5Y2xlKGVsLCBrZXksIHRyaWdnZXIgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgbGV0IFtjdXJyZW50Q3ljbGVdID0gdGhpcy5wcml2YXRlKGVsLCBrZXkpIHx8IFswLCB0cmlnZ2VyXVxuICAgIGN1cnJlbnRDeWNsZSsrXG4gICAgdGhpcy5wdXRQcml2YXRlKGVsLCBrZXksIFtjdXJyZW50Q3ljbGUsIHRyaWdnZXJdKVxuICAgIHJldHVybiBjdXJyZW50Q3ljbGVcbiAgfSxcblxuICBtYXliZUFkZFByaXZhdGVIb29rcyhlbCwgcGh4Vmlld3BvcnRUb3AsIHBoeFZpZXdwb3J0Qm90dG9tKXtcbiAgICBpZihlbC5oYXNBdHRyaWJ1dGUgJiYgKGVsLmhhc0F0dHJpYnV0ZShwaHhWaWV3cG9ydFRvcCkgfHwgZWwuaGFzQXR0cmlidXRlKHBoeFZpZXdwb3J0Qm90dG9tKSkpe1xuICAgICAgZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1waHgtaG9va1wiLCBcIlBob2VuaXguSW5maW5pdGVTY3JvbGxcIilcbiAgICB9XG4gIH0sXG5cbiAgbWF5YmVIaWRlRmVlZGJhY2soY29udGFpbmVyLCBpbnB1dCwgcGh4RmVlZGJhY2tGb3Ipe1xuICAgIGlmKCEodGhpcy5wcml2YXRlKGlucHV0LCBQSFhfSEFTX0ZPQ1VTRUQpIHx8IHRoaXMucHJpdmF0ZShpbnB1dCwgUEhYX0hBU19TVUJNSVRURUQpKSl7XG4gICAgICBsZXQgZmVlZGJhY2tzID0gW2lucHV0Lm5hbWVdXG4gICAgICBpZihpbnB1dC5uYW1lLmVuZHNXaXRoKFwiW11cIikpeyBmZWVkYmFja3MucHVzaChpbnB1dC5uYW1lLnNsaWNlKDAsIC0yKSkgfVxuICAgICAgbGV0IHNlbGVjdG9yID0gZmVlZGJhY2tzLm1hcChmID0+IGBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2Z9XCJdYCkuam9pbihcIiwgXCIpXG4gICAgICBET00uYWxsKGNvbnRhaW5lciwgc2VsZWN0b3IsIGVsID0+IGVsLmNsYXNzTGlzdC5hZGQoUEhYX05PX0ZFRURCQUNLX0NMQVNTKSlcbiAgICB9XG4gIH0sXG5cbiAgcmVzZXRGb3JtKGZvcm0sIHBoeEZlZWRiYWNrRm9yKXtcbiAgICBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgbGV0IHF1ZXJ5ID0gYFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXQuaWR9XCJdLFxuICAgICAgICAgICAgICAgICAgIFske3BoeEZlZWRiYWNrRm9yfT1cIiR7aW5wdXQubmFtZX1cIl0sXG4gICAgICAgICAgICAgICAgICAgWyR7cGh4RmVlZGJhY2tGb3J9PVwiJHtpbnB1dC5uYW1lLnJlcGxhY2UoL1xcW1xcXSQvLCBcIlwiKX1cIl1gXG5cbiAgICAgIHRoaXMuZGVsZXRlUHJpdmF0ZShpbnB1dCwgUEhYX0hBU19GT0NVU0VEKVxuICAgICAgdGhpcy5kZWxldGVQcml2YXRlKGlucHV0LCBQSFhfSEFTX1NVQk1JVFRFRClcbiAgICAgIHRoaXMuYWxsKGRvY3VtZW50LCBxdWVyeSwgZmVlZGJhY2tFbCA9PiB7XG4gICAgICAgIGZlZWRiYWNrRWwuY2xhc3NMaXN0LmFkZChQSFhfTk9fRkVFREJBQ0tfQ0xBU1MpXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgc2hvd0Vycm9yKGlucHV0RWwsIHBoeEZlZWRiYWNrRm9yKXtcbiAgICBpZihpbnB1dEVsLmlkIHx8IGlucHV0RWwubmFtZSl7XG4gICAgICB0aGlzLmFsbChpbnB1dEVsLmZvcm0sIGBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0RWwuaWR9XCJdLCBbJHtwaHhGZWVkYmFja0Zvcn09XCIke2lucHV0RWwubmFtZX1cIl1gLCAoZWwpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyhlbCwgUEhYX05PX0ZFRURCQUNLX0NMQVNTKVxuICAgICAgfSlcbiAgICB9XG4gIH0sXG5cbiAgaXNQaHhDaGlsZChub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRClcbiAgfSxcblxuICBpc1BoeFN0aWNreShub2RlKXtcbiAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoUEhYX1NUSUNLWSkgIT09IG51bGxcbiAgfSxcblxuICBmaXJzdFBoeENoaWxkKGVsKXtcbiAgICByZXR1cm4gdGhpcy5pc1BoeENoaWxkKGVsKSA/IGVsIDogdGhpcy5hbGwoZWwsIGBbJHtQSFhfUEFSRU5UX0lEfV1gKVswXVxuICB9LFxuXG4gIGRpc3BhdGNoRXZlbnQodGFyZ2V0LCBuYW1lLCBvcHRzID0ge30pe1xuICAgIGxldCBidWJibGVzID0gb3B0cy5idWJibGVzID09PSB1bmRlZmluZWQgPyB0cnVlIDogISFvcHRzLmJ1YmJsZXNcbiAgICBsZXQgZXZlbnRPcHRzID0ge2J1YmJsZXM6IGJ1YmJsZXMsIGNhbmNlbGFibGU6IHRydWUsIGRldGFpbDogb3B0cy5kZXRhaWwgfHwge319XG4gICAgbGV0IGV2ZW50ID0gbmFtZSA9PT0gXCJjbGlja1wiID8gbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiLCBldmVudE9wdHMpIDogbmV3IEN1c3RvbUV2ZW50KG5hbWUsIGV2ZW50T3B0cylcbiAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudClcbiAgfSxcblxuICBjbG9uZU5vZGUobm9kZSwgaHRtbCl7XG4gICAgaWYodHlwZW9mIChodG1sKSA9PT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUodHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNsb25lZCA9IG5vZGUuY2xvbmVOb2RlKGZhbHNlKVxuICAgICAgY2xvbmVkLmlubmVySFRNTCA9IGh0bWxcbiAgICAgIHJldHVybiBjbG9uZWRcbiAgICB9XG4gIH0sXG5cbiAgbWVyZ2VBdHRycyh0YXJnZXQsIHNvdXJjZSwgb3B0cyA9IHt9KXtcbiAgICBsZXQgZXhjbHVkZSA9IG9wdHMuZXhjbHVkZSB8fCBbXVxuICAgIGxldCBpc0lnbm9yZWQgPSBvcHRzLmlzSWdub3JlZFxuICAgIGxldCBzb3VyY2VBdHRycyA9IHNvdXJjZS5hdHRyaWJ1dGVzXG4gICAgZm9yKGxldCBpID0gc291cmNlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgICAgbGV0IG5hbWUgPSBzb3VyY2VBdHRyc1tpXS5uYW1lXG4gICAgICBpZihleGNsdWRlLmluZGV4T2YobmFtZSkgPCAwKXsgdGFyZ2V0LnNldEF0dHJpYnV0ZShuYW1lLCBzb3VyY2UuZ2V0QXR0cmlidXRlKG5hbWUpKSB9XG4gICAgfVxuXG4gICAgbGV0IHRhcmdldEF0dHJzID0gdGFyZ2V0LmF0dHJpYnV0ZXNcbiAgICBmb3IobGV0IGkgPSB0YXJnZXRBdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7XG4gICAgICBsZXQgbmFtZSA9IHRhcmdldEF0dHJzW2ldLm5hbWVcbiAgICAgIGlmKGlzSWdub3JlZCl7XG4gICAgICAgIGlmKG5hbWUuc3RhcnRzV2l0aChcImRhdGEtXCIpICYmICFzb3VyY2UuaGFzQXR0cmlidXRlKG5hbWUpKXsgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShuYW1lKSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZighc291cmNlLmhhc0F0dHJpYnV0ZShuYW1lKSl7IHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUobmFtZSkgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBtZXJnZUZvY3VzZWRJbnB1dCh0YXJnZXQsIHNvdXJjZSl7XG4gICAgLy8gc2tpcCBzZWxlY3RzIGJlY2F1c2UgRkYgd2lsbCByZXNldCBoaWdobGlnaHRlZCBpbmRleCBmb3IgYW55IHNldEF0dHJpYnV0ZVxuICAgIGlmKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTFNlbGVjdEVsZW1lbnQpKXsgRE9NLm1lcmdlQXR0cnModGFyZ2V0LCBzb3VyY2UsIHtleGNsdWRlOiBbXCJ2YWx1ZVwiXX0pIH1cbiAgICBpZihzb3VyY2UucmVhZE9ubHkpe1xuICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKVxuICAgIH1cbiAgfSxcblxuICBoYXNTZWxlY3Rpb25SYW5nZShlbCl7XG4gICAgcmV0dXJuIGVsLnNldFNlbGVjdGlvblJhbmdlICYmIChlbC50eXBlID09PSBcInRleHRcIiB8fCBlbC50eXBlID09PSBcInRleHRhcmVhXCIpXG4gIH0sXG5cbiAgcmVzdG9yZUZvY3VzKGZvY3VzZWQsIHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpe1xuICAgIGlmKCFET00uaXNUZXh0dWFsSW5wdXQoZm9jdXNlZCkpeyByZXR1cm4gfVxuICAgIGxldCB3YXNGb2N1c2VkID0gZm9jdXNlZC5tYXRjaGVzKFwiOmZvY3VzXCIpXG4gICAgaWYoZm9jdXNlZC5yZWFkT25seSl7IGZvY3VzZWQuYmx1cigpIH1cbiAgICBpZighd2FzRm9jdXNlZCl7IGZvY3VzZWQuZm9jdXMoKSB9XG4gICAgaWYodGhpcy5oYXNTZWxlY3Rpb25SYW5nZShmb2N1c2VkKSl7XG4gICAgICBmb2N1c2VkLnNldFNlbGVjdGlvblJhbmdlKHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQpXG4gICAgfVxuICB9LFxuXG4gIGlzRm9ybUlucHV0KGVsKXsgcmV0dXJuIC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaS50ZXN0KGVsLnRhZ05hbWUpICYmIGVsLnR5cGUgIT09IFwiYnV0dG9uXCIgfSxcblxuICBzeW5jQXR0cnNUb1Byb3BzKGVsKXtcbiAgICBpZihlbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgQ0hFQ0tBQkxFX0lOUFVUUy5pbmRleE9mKGVsLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSkgPj0gMCl7XG4gICAgICBlbC5jaGVja2VkID0gZWwuZ2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiKSAhPT0gbnVsbFxuICAgIH1cbiAgfSxcblxuICBpc1RleHR1YWxJbnB1dChlbCl7IHJldHVybiBGT0NVU0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZSkgPj0gMCB9LFxuXG4gIGlzTm93VHJpZ2dlckZvcm1FeHRlcm5hbChlbCwgcGh4VHJpZ2dlckV4dGVybmFsKXtcbiAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlICYmIGVsLmdldEF0dHJpYnV0ZShwaHhUcmlnZ2VyRXh0ZXJuYWwpICE9PSBudWxsXG4gIH0sXG5cbiAgc3luY1BlbmRpbmdSZWYoZnJvbUVsLCB0b0VsLCBkaXNhYmxlV2l0aCl7XG4gICAgbGV0IHJlZiA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1JFRilcbiAgICBpZihyZWYgPT09IG51bGwpeyByZXR1cm4gdHJ1ZSB9XG4gICAgbGV0IHJlZlNyYyA9IGZyb21FbC5nZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMpXG5cbiAgICBpZihET00uaXNGb3JtSW5wdXQoZnJvbUVsKSB8fCBmcm9tRWwuZ2V0QXR0cmlidXRlKGRpc2FibGVXaXRoKSAhPT0gbnVsbCl7XG4gICAgICBpZihET00uaXNVcGxvYWRJbnB1dChmcm9tRWwpKXsgRE9NLm1lcmdlQXR0cnMoZnJvbUVsLCB0b0VsLCB7aXNJZ25vcmVkOiB0cnVlfSkgfVxuICAgICAgRE9NLnB1dFByaXZhdGUoZnJvbUVsLCBQSFhfUkVGLCB0b0VsKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIFBIWF9FVkVOVF9DTEFTU0VTLmZvckVhY2goY2xhc3NOYW1lID0+IHtcbiAgICAgICAgZnJvbUVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpICYmIHRvRWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpXG4gICAgICB9KVxuICAgICAgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRiwgcmVmKVxuICAgICAgdG9FbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMsIHJlZlNyYylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9LFxuXG4gIGNsZWFuQ2hpbGROb2Rlcyhjb250YWluZXIsIHBoeFVwZGF0ZSl7XG4gICAgaWYoRE9NLmlzUGh4VXBkYXRlKGNvbnRhaW5lciwgcGh4VXBkYXRlLCBbXCJhcHBlbmRcIiwgXCJwcmVwZW5kXCJdKSl7XG4gICAgICBsZXQgdG9SZW1vdmUgPSBbXVxuICAgICAgY29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChjaGlsZE5vZGUgPT4ge1xuICAgICAgICBpZighY2hpbGROb2RlLmlkKXtcbiAgICAgICAgICAvLyBTa2lwIHdhcm5pbmcgaWYgaXQncyBhbiBlbXB0eSB0ZXh0IG5vZGUgKGUuZy4gYSBuZXctbGluZSlcbiAgICAgICAgICBsZXQgaXNFbXB0eVRleHROb2RlID0gY2hpbGROb2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBjaGlsZE5vZGUubm9kZVZhbHVlLnRyaW0oKSA9PT0gXCJcIlxuICAgICAgICAgIGlmKCFpc0VtcHR5VGV4dE5vZGUpe1xuICAgICAgICAgICAgbG9nRXJyb3IoXCJvbmx5IEhUTUwgZWxlbWVudCB0YWdzIHdpdGggYW4gaWQgYXJlIGFsbG93ZWQgaW5zaWRlIGNvbnRhaW5lcnMgd2l0aCBwaHgtdXBkYXRlLlxcblxcblwiICtcbiAgICAgICAgICAgICAgYHJlbW92aW5nIGlsbGVnYWwgbm9kZTogXCIkeyhjaGlsZE5vZGUub3V0ZXJIVE1MIHx8IGNoaWxkTm9kZS5ub2RlVmFsdWUpLnRyaW0oKX1cIlxcblxcbmApXG4gICAgICAgICAgfVxuICAgICAgICAgIHRvUmVtb3ZlLnB1c2goY2hpbGROb2RlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgdG9SZW1vdmUuZm9yRWFjaChjaGlsZE5vZGUgPT4gY2hpbGROb2RlLnJlbW92ZSgpKVxuICAgIH1cbiAgfSxcblxuICByZXBsYWNlUm9vdENvbnRhaW5lcihjb250YWluZXIsIHRhZ05hbWUsIGF0dHJzKXtcbiAgICBsZXQgcmV0YWluZWRBdHRycyA9IG5ldyBTZXQoW1wiaWRcIiwgUEhYX1NFU1NJT04sIFBIWF9TVEFUSUMsIFBIWF9NQUlOLCBQSFhfUk9PVF9JRF0pXG4gICAgaWYoY29udGFpbmVyLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtcbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmF0dHJpYnV0ZXMpXG4gICAgICAgIC5maWx0ZXIoYXR0ciA9PiAhcmV0YWluZWRBdHRycy5oYXMoYXR0ci5uYW1lLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAuZm9yRWFjaChhdHRyID0+IGNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKSlcblxuICAgICAgT2JqZWN0LmtleXMoYXR0cnMpXG4gICAgICAgIC5maWx0ZXIobmFtZSA9PiAhcmV0YWluZWRBdHRycy5oYXMobmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICAgLmZvckVhY2goYXR0ciA9PiBjb250YWluZXIuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJzW2F0dHJdKSlcblxuICAgICAgcmV0dXJuIGNvbnRhaW5lclxuXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZXdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpXG4gICAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChhdHRyID0+IG5ld0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cnNbYXR0cl0pKVxuICAgICAgcmV0YWluZWRBdHRycy5mb3JFYWNoKGF0dHIgPT4gbmV3Q29udGFpbmVyLnNldEF0dHJpYnV0ZShhdHRyLCBjb250YWluZXIuZ2V0QXR0cmlidXRlKGF0dHIpKSlcbiAgICAgIG5ld0NvbnRhaW5lci5pbm5lckhUTUwgPSBjb250YWluZXIuaW5uZXJIVE1MXG4gICAgICBjb250YWluZXIucmVwbGFjZVdpdGgobmV3Q29udGFpbmVyKVxuICAgICAgcmV0dXJuIG5ld0NvbnRhaW5lclxuICAgIH1cbiAgfSxcblxuICBnZXRTdGlja3koZWwsIG5hbWUsIGRlZmF1bHRWYWwpe1xuICAgIGxldCBvcCA9IChET00ucHJpdmF0ZShlbCwgXCJzdGlja3lcIikgfHwgW10pLmZpbmQoKFtleGlzdGluZ05hbWUsIF0pID0+IG5hbWUgPT09IGV4aXN0aW5nTmFtZSlcbiAgICBpZihvcCl7XG4gICAgICBsZXQgW19uYW1lLCBfb3AsIHN0YXNoZWRSZXN1bHRdID0gb3BcbiAgICAgIHJldHVybiBzdGFzaGVkUmVzdWx0XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0eXBlb2YoZGVmYXVsdFZhbCkgPT09IFwiZnVuY3Rpb25cIiA/IGRlZmF1bHRWYWwoKSA6IGRlZmF1bHRWYWxcbiAgICB9XG4gIH0sXG5cbiAgZGVsZXRlU3RpY2t5KGVsLCBuYW1lKXtcbiAgICB0aGlzLnVwZGF0ZVByaXZhdGUoZWwsIFwic3RpY2t5XCIsIFtdLCBvcHMgPT4ge1xuICAgICAgcmV0dXJuIG9wcy5maWx0ZXIoKFtleGlzdGluZ05hbWUsIF9dKSA9PiBleGlzdGluZ05hbWUgIT09IG5hbWUpXG4gICAgfSlcbiAgfSxcblxuICBwdXRTdGlja3koZWwsIG5hbWUsIG9wKXtcbiAgICBsZXQgc3Rhc2hlZFJlc3VsdCA9IG9wKGVsKVxuICAgIHRoaXMudXBkYXRlUHJpdmF0ZShlbCwgXCJzdGlja3lcIiwgW10sIG9wcyA9PiB7XG4gICAgICBsZXQgZXhpc3RpbmdJbmRleCA9IG9wcy5maW5kSW5kZXgoKFtleGlzdGluZ05hbWUsIF0pID0+IG5hbWUgPT09IGV4aXN0aW5nTmFtZSlcbiAgICAgIGlmKGV4aXN0aW5nSW5kZXggPj0gMCl7XG4gICAgICAgIG9wc1tleGlzdGluZ0luZGV4XSA9IFtuYW1lLCBvcCwgc3Rhc2hlZFJlc3VsdF1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wcy5wdXNoKFtuYW1lLCBvcCwgc3Rhc2hlZFJlc3VsdF0pXG4gICAgICB9XG4gICAgICByZXR1cm4gb3BzXG4gICAgfSlcbiAgfSxcblxuICBhcHBseVN0aWNreU9wZXJhdGlvbnMoZWwpe1xuICAgIGxldCBvcHMgPSBET00ucHJpdmF0ZShlbCwgXCJzdGlja3lcIilcbiAgICBpZighb3BzKXsgcmV0dXJuIH1cblxuICAgIG9wcy5mb3JFYWNoKChbbmFtZSwgb3AsIF9zdGFzaGVkXSkgPT4gdGhpcy5wdXRTdGlja3koZWwsIG5hbWUsIG9wKSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBET00iLCAiaW1wb3J0IHtcbiAgUEhYX0FDVElWRV9FTlRSWV9SRUZTLFxuICBQSFhfTElWRV9GSUxFX1VQREFURUQsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGNoYW5uZWxVcGxvYWRlcixcbiAgbG9nRXJyb3Jcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVcGxvYWRFbnRyeSB7XG4gIHN0YXRpYyBpc0FjdGl2ZShmaWxlRWwsIGZpbGUpe1xuICAgIGxldCBpc05ldyA9IGZpbGUuX3BoeFJlZiA9PT0gdW5kZWZpbmVkXG4gICAgbGV0IGFjdGl2ZVJlZnMgPSBmaWxlRWwuZ2V0QXR0cmlidXRlKFBIWF9BQ1RJVkVfRU5UUllfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgbGV0IGlzQWN0aXZlID0gYWN0aXZlUmVmcy5pbmRleE9mKExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpKSA+PSAwXG4gICAgcmV0dXJuIGZpbGUuc2l6ZSA+IDAgJiYgKGlzTmV3IHx8IGlzQWN0aXZlKVxuICB9XG5cbiAgc3RhdGljIGlzUHJlZmxpZ2h0ZWQoZmlsZUVsLCBmaWxlKXtcbiAgICBsZXQgcHJlZmxpZ2h0ZWRSZWZzID0gZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfUFJFRkxJR0hURURfUkVGUykuc3BsaXQoXCIsXCIpXG4gICAgbGV0IGlzUHJlZmxpZ2h0ZWQgPSBwcmVmbGlnaHRlZFJlZnMuaW5kZXhPZihMaXZlVXBsb2FkZXIuZ2VuRmlsZVJlZihmaWxlKSkgPj0gMFxuICAgIHJldHVybiBpc1ByZWZsaWdodGVkICYmIHRoaXMuaXNBY3RpdmUoZmlsZUVsLCBmaWxlKVxuICB9XG5cbiAgY29uc3RydWN0b3IoZmlsZUVsLCBmaWxlLCB2aWV3KXtcbiAgICB0aGlzLnJlZiA9IExpdmVVcGxvYWRlci5nZW5GaWxlUmVmKGZpbGUpXG4gICAgdGhpcy5maWxlRWwgPSBmaWxlRWxcbiAgICB0aGlzLmZpbGUgPSBmaWxlXG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMubWV0YSA9IG51bGxcbiAgICB0aGlzLl9pc0NhbmNlbGxlZCA9IGZhbHNlXG4gICAgdGhpcy5faXNEb25lID0gZmFsc2VcbiAgICB0aGlzLl9wcm9ncmVzcyA9IDBcbiAgICB0aGlzLl9sYXN0UHJvZ3Jlc3NTZW50ID0gLTFcbiAgICB0aGlzLl9vbkRvbmUgPSBmdW5jdGlvbiAoKXsgfVxuICAgIHRoaXMuX29uRWxVcGRhdGVkID0gdGhpcy5vbkVsVXBkYXRlZC5iaW5kKHRoaXMpXG4gICAgdGhpcy5maWxlRWwuYWRkRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICB9XG5cbiAgbWV0YWRhdGEoKXsgcmV0dXJuIHRoaXMubWV0YSB9XG5cbiAgcHJvZ3Jlc3MocHJvZ3Jlc3Mpe1xuICAgIHRoaXMuX3Byb2dyZXNzID0gTWF0aC5mbG9vcihwcm9ncmVzcylcbiAgICBpZih0aGlzLl9wcm9ncmVzcyA+IHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQpe1xuICAgICAgaWYodGhpcy5fcHJvZ3Jlc3MgPj0gMTAwKXtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSAxMDBcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzU2VudCA9IDEwMFxuICAgICAgICB0aGlzLl9pc0RvbmUgPSB0cnVlXG4gICAgICAgIHRoaXMudmlldy5wdXNoRmlsZVByb2dyZXNzKHRoaXMuZmlsZUVsLCB0aGlzLnJlZiwgMTAwLCAoKSA9PiB7XG4gICAgICAgICAgTGl2ZVVwbG9hZGVyLnVudHJhY2tGaWxlKHRoaXMuZmlsZUVsLCB0aGlzLmZpbGUpXG4gICAgICAgICAgdGhpcy5fb25Eb25lKClcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzc1NlbnQgPSB0aGlzLl9wcm9ncmVzc1xuICAgICAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHRoaXMuX3Byb2dyZXNzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNhbmNlbCgpe1xuICAgIHRoaXMuX2lzQ2FuY2VsbGVkID0gdHJ1ZVxuICAgIHRoaXMuX2lzRG9uZSA9IHRydWVcbiAgICB0aGlzLl9vbkRvbmUoKVxuICB9XG5cbiAgaXNEb25lKCl7IHJldHVybiB0aGlzLl9pc0RvbmUgfVxuXG4gIGVycm9yKHJlYXNvbiA9IFwiZmFpbGVkXCIpe1xuICAgIHRoaXMuZmlsZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoUEhYX0xJVkVfRklMRV9VUERBVEVELCB0aGlzLl9vbkVsVXBkYXRlZClcbiAgICB0aGlzLnZpZXcucHVzaEZpbGVQcm9ncmVzcyh0aGlzLmZpbGVFbCwgdGhpcy5yZWYsIHtlcnJvcjogcmVhc29ufSlcbiAgICBMaXZlVXBsb2FkZXIuY2xlYXJGaWxlcyh0aGlzLmZpbGVFbClcbiAgfVxuXG4gIC8vcHJpdmF0ZVxuXG4gIG9uRG9uZShjYWxsYmFjayl7XG4gICAgdGhpcy5fb25Eb25lID0gKCkgPT4ge1xuICAgICAgdGhpcy5maWxlRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihQSFhfTElWRV9GSUxFX1VQREFURUQsIHRoaXMuX29uRWxVcGRhdGVkKVxuICAgICAgY2FsbGJhY2soKVxuICAgIH1cbiAgfVxuXG4gIG9uRWxVcGRhdGVkKCl7XG4gICAgbGV0IGFjdGl2ZVJlZnMgPSB0aGlzLmZpbGVFbC5nZXRBdHRyaWJ1dGUoUEhYX0FDVElWRV9FTlRSWV9SRUZTKS5zcGxpdChcIixcIilcbiAgICBpZihhY3RpdmVSZWZzLmluZGV4T2YodGhpcy5yZWYpID09PSAtMSl7IHRoaXMuY2FuY2VsKCkgfVxuICB9XG5cbiAgdG9QcmVmbGlnaHRQYXlsb2FkKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhc3RfbW9kaWZpZWQ6IHRoaXMuZmlsZS5sYXN0TW9kaWZpZWQsXG4gICAgICBuYW1lOiB0aGlzLmZpbGUubmFtZSxcbiAgICAgIHJlbGF0aXZlX3BhdGg6IHRoaXMuZmlsZS53ZWJraXRSZWxhdGl2ZVBhdGgsXG4gICAgICBzaXplOiB0aGlzLmZpbGUuc2l6ZSxcbiAgICAgIHR5cGU6IHRoaXMuZmlsZS50eXBlLFxuICAgICAgcmVmOiB0aGlzLnJlZlxuICAgIH1cbiAgfVxuXG4gIHVwbG9hZGVyKHVwbG9hZGVycyl7XG4gICAgaWYodGhpcy5tZXRhLnVwbG9hZGVyKXtcbiAgICAgIGxldCBjYWxsYmFjayA9IHVwbG9hZGVyc1t0aGlzLm1ldGEudXBsb2FkZXJdIHx8IGxvZ0Vycm9yKGBubyB1cGxvYWRlciBjb25maWd1cmVkIGZvciAke3RoaXMubWV0YS51cGxvYWRlcn1gKVxuICAgICAgcmV0dXJuIHtuYW1lOiB0aGlzLm1ldGEudXBsb2FkZXIsIGNhbGxiYWNrOiBjYWxsYmFja31cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtuYW1lOiBcImNoYW5uZWxcIiwgY2FsbGJhY2s6IGNoYW5uZWxVcGxvYWRlcn1cbiAgICB9XG4gIH1cblxuICB6aXBQb3N0RmxpZ2h0KHJlc3Ape1xuICAgIHRoaXMubWV0YSA9IHJlc3AuZW50cmllc1t0aGlzLnJlZl1cbiAgICBpZighdGhpcy5tZXRhKXsgbG9nRXJyb3IoYG5vIHByZWZsaWdodCB1cGxvYWQgcmVzcG9uc2UgcmV0dXJuZWQgd2l0aCByZWYgJHt0aGlzLnJlZn1gLCB7aW5wdXQ6IHRoaXMuZmlsZUVsLCByZXNwb25zZTogcmVzcH0pIH1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIFBIWF9ET05FX1JFRlMsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQge1xufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBET00gZnJvbSBcIi4vZG9tXCJcbmltcG9ydCBVcGxvYWRFbnRyeSBmcm9tIFwiLi91cGxvYWRfZW50cnlcIlxuXG5sZXQgbGl2ZVVwbG9hZGVyRmlsZVJlZiA9IDBcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVVwbG9hZGVyIHtcbiAgc3RhdGljIGdlbkZpbGVSZWYoZmlsZSl7XG4gICAgbGV0IHJlZiA9IGZpbGUuX3BoeFJlZlxuICAgIGlmKHJlZiAhPT0gdW5kZWZpbmVkKXtcbiAgICAgIHJldHVybiByZWZcbiAgICB9IGVsc2Uge1xuICAgICAgZmlsZS5fcGh4UmVmID0gKGxpdmVVcGxvYWRlckZpbGVSZWYrKykudG9TdHJpbmcoKVxuICAgICAgcmV0dXJuIGZpbGUuX3BoeFJlZlxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRFbnRyeURhdGFVUkwoaW5wdXRFbCwgcmVmLCBjYWxsYmFjayl7XG4gICAgbGV0IGZpbGUgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpLmZpbmQoZmlsZSA9PiB0aGlzLmdlbkZpbGVSZWYoZmlsZSkgPT09IHJlZilcbiAgICBjYWxsYmFjayhVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpKVxuICB9XG5cbiAgc3RhdGljIGhhc1VwbG9hZHNJblByb2dyZXNzKGZvcm1FbCl7XG4gICAgbGV0IGFjdGl2ZSA9IDBcbiAgICBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSAhPT0gaW5wdXQuZ2V0QXR0cmlidXRlKFBIWF9ET05FX1JFRlMpKXtcbiAgICAgICAgYWN0aXZlKytcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBhY3RpdmUgPiAwXG4gIH1cblxuICBzdGF0aWMgc2VyaWFsaXplVXBsb2FkcyhpbnB1dEVsKXtcbiAgICBsZXQgZmlsZXMgPSB0aGlzLmFjdGl2ZUZpbGVzKGlucHV0RWwpXG4gICAgbGV0IGZpbGVEYXRhID0ge31cbiAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgbGV0IGVudHJ5ID0ge3BhdGg6IGlucHV0RWwubmFtZX1cbiAgICAgIGxldCB1cGxvYWRSZWYgPSBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRilcbiAgICAgIGZpbGVEYXRhW3VwbG9hZFJlZl0gPSBmaWxlRGF0YVt1cGxvYWRSZWZdIHx8IFtdXG4gICAgICBlbnRyeS5yZWYgPSB0aGlzLmdlbkZpbGVSZWYoZmlsZSlcbiAgICAgIGVudHJ5Lmxhc3RfbW9kaWZpZWQgPSBmaWxlLmxhc3RNb2RpZmllZFxuICAgICAgZW50cnkubmFtZSA9IGZpbGUubmFtZSB8fCBlbnRyeS5yZWZcbiAgICAgIGVudHJ5LnJlbGF0aXZlX3BhdGggPSBmaWxlLndlYmtpdFJlbGF0aXZlUGF0aFxuICAgICAgZW50cnkudHlwZSA9IGZpbGUudHlwZVxuICAgICAgZW50cnkuc2l6ZSA9IGZpbGUuc2l6ZVxuICAgICAgZmlsZURhdGFbdXBsb2FkUmVmXS5wdXNoKGVudHJ5KVxuICAgIH0pXG4gICAgcmV0dXJuIGZpbGVEYXRhXG4gIH1cblxuICBzdGF0aWMgY2xlYXJGaWxlcyhpbnB1dEVsKXtcbiAgICBpbnB1dEVsLnZhbHVlID0gbnVsbFxuICAgIGlucHV0RWwucmVtb3ZlQXR0cmlidXRlKFBIWF9VUExPQURfUkVGKVxuICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgW10pXG4gIH1cblxuICBzdGF0aWMgdW50cmFja0ZpbGUoaW5wdXRFbCwgZmlsZSl7XG4gICAgRE9NLnB1dFByaXZhdGUoaW5wdXRFbCwgXCJmaWxlc1wiLCBET00ucHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIpLmZpbHRlcihmID0+ICFPYmplY3QuaXMoZiwgZmlsZSkpKVxuICB9XG5cbiAgc3RhdGljIHRyYWNrRmlsZXMoaW5wdXRFbCwgZmlsZXMsIGRhdGFUcmFuc2Zlcil7XG4gICAgaWYoaW5wdXRFbC5nZXRBdHRyaWJ1dGUoXCJtdWx0aXBsZVwiKSAhPT0gbnVsbCl7XG4gICAgICBsZXQgbmV3RmlsZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiAhdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKS5maW5kKGYgPT4gT2JqZWN0LmlzKGYsIGZpbGUpKSlcbiAgICAgIERPTS5wdXRQcml2YXRlKGlucHV0RWwsIFwiZmlsZXNcIiwgdGhpcy5hY3RpdmVGaWxlcyhpbnB1dEVsKS5jb25jYXQobmV3RmlsZXMpKVxuICAgICAgaW5wdXRFbC52YWx1ZSA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmVzZXQgaW5wdXRFbCBmaWxlcyB0byBhbGlnbiBvdXRwdXQgd2l0aCBwcm9ncmFtbWF0aWMgY2hhbmdlcyAoaS5lLiBkcmFnIGFuZCBkcm9wKVxuICAgICAgaWYoZGF0YVRyYW5zZmVyICYmIGRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGggPiAwKXsgaW5wdXRFbC5maWxlcyA9IGRhdGFUcmFuc2Zlci5maWxlcyB9XG4gICAgICBET00ucHV0UHJpdmF0ZShpbnB1dEVsLCBcImZpbGVzXCIsIGZpbGVzKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhY3RpdmVGaWxlSW5wdXRzKGZvcm1FbCl7XG4gICAgbGV0IGZpbGVJbnB1dHMgPSBET00uZmluZFVwbG9hZElucHV0cyhmb3JtRWwpXG4gICAgcmV0dXJuIEFycmF5LmZyb20oZmlsZUlucHV0cykuZmlsdGVyKGVsID0+IGVsLmZpbGVzICYmIHRoaXMuYWN0aXZlRmlsZXMoZWwpLmxlbmd0aCA+IDApXG4gIH1cblxuICBzdGF0aWMgYWN0aXZlRmlsZXMoaW5wdXQpe1xuICAgIHJldHVybiAoRE9NLnByaXZhdGUoaW5wdXQsIFwiZmlsZXNcIikgfHwgW10pLmZpbHRlcihmID0+IFVwbG9hZEVudHJ5LmlzQWN0aXZlKGlucHV0LCBmKSlcbiAgfVxuXG4gIHN0YXRpYyBpbnB1dHNBd2FpdGluZ1ByZWZsaWdodChmb3JtRWwpe1xuICAgIGxldCBmaWxlSW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHMoZm9ybUVsKVxuICAgIHJldHVybiBBcnJheS5mcm9tKGZpbGVJbnB1dHMpLmZpbHRlcihpbnB1dCA9PiB0aGlzLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXQpLmxlbmd0aCA+IDApXG4gIH1cblxuICBzdGF0aWMgZmlsZXNBd2FpdGluZ1ByZWZsaWdodChpbnB1dCl7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlRmlsZXMoaW5wdXQpLmZpbHRlcihmID0+ICFVcGxvYWRFbnRyeS5pc1ByZWZsaWdodGVkKGlucHV0LCBmKSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGlucHV0RWwsIHZpZXcsIG9uQ29tcGxldGUpe1xuICAgIHRoaXMudmlldyA9IHZpZXdcbiAgICB0aGlzLm9uQ29tcGxldGUgPSBvbkNvbXBsZXRlXG4gICAgdGhpcy5fZW50cmllcyA9XG4gICAgICBBcnJheS5mcm9tKExpdmVVcGxvYWRlci5maWxlc0F3YWl0aW5nUHJlZmxpZ2h0KGlucHV0RWwpIHx8IFtdKVxuICAgICAgICAubWFwKGZpbGUgPT4gbmV3IFVwbG9hZEVudHJ5KGlucHV0RWwsIGZpbGUsIHZpZXcpKVxuXG4gICAgdGhpcy5udW1FbnRyaWVzSW5Qcm9ncmVzcyA9IHRoaXMuX2VudHJpZXMubGVuZ3RoXG4gIH1cblxuICBlbnRyaWVzKCl7IHJldHVybiB0aGlzLl9lbnRyaWVzIH1cblxuICBpbml0QWRhcHRlclVwbG9hZChyZXNwLCBvbkVycm9yLCBsaXZlU29ja2V0KXtcbiAgICB0aGlzLl9lbnRyaWVzID1cbiAgICAgIHRoaXMuX2VudHJpZXMubWFwKGVudHJ5ID0+IHtcbiAgICAgICAgZW50cnkuemlwUG9zdEZsaWdodChyZXNwKVxuICAgICAgICBlbnRyeS5vbkRvbmUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMubnVtRW50cmllc0luUHJvZ3Jlc3MtLVxuICAgICAgICAgIGlmKHRoaXMubnVtRW50cmllc0luUHJvZ3Jlc3MgPT09IDApeyB0aGlzLm9uQ29tcGxldGUoKSB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBlbnRyeVxuICAgICAgfSlcblxuICAgIGxldCBncm91cGVkRW50cmllcyA9IHRoaXMuX2VudHJpZXMucmVkdWNlKChhY2MsIGVudHJ5KSA9PiB7XG4gICAgICBsZXQge25hbWUsIGNhbGxiYWNrfSA9IGVudHJ5LnVwbG9hZGVyKGxpdmVTb2NrZXQudXBsb2FkZXJzKVxuICAgICAgYWNjW25hbWVdID0gYWNjW25hbWVdIHx8IHtjYWxsYmFjazogY2FsbGJhY2ssIGVudHJpZXM6IFtdfVxuICAgICAgYWNjW25hbWVdLmVudHJpZXMucHVzaChlbnRyeSlcbiAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7fSlcblxuICAgIGZvcihsZXQgbmFtZSBpbiBncm91cGVkRW50cmllcyl7XG4gICAgICBsZXQge2NhbGxiYWNrLCBlbnRyaWVzfSA9IGdyb3VwZWRFbnRyaWVzW25hbWVdXG4gICAgICBjYWxsYmFjayhlbnRyaWVzLCBvbkVycm9yLCByZXNwLCBsaXZlU29ja2V0KVxuICAgIH1cbiAgfVxufVxuIiwgImxldCBBUklBID0ge1xuICBmb2N1c01haW4oKXtcbiAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW4gaDEsIG1haW4sIGgxXCIpXG4gICAgaWYodGFyZ2V0KXtcbiAgICAgIGxldCBvcmlnVGFiSW5kZXggPSB0YXJnZXQudGFiSW5kZXhcbiAgICAgIHRhcmdldC50YWJJbmRleCA9IC0xXG4gICAgICB0YXJnZXQuZm9jdXMoKVxuICAgICAgdGFyZ2V0LnRhYkluZGV4ID0gb3JpZ1RhYkluZGV4XG4gICAgfVxuICB9LFxuXG4gIGFueU9mKGluc3RhbmNlLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZmluZChuYW1lID0+IGluc3RhbmNlIGluc3RhbmNlb2YgbmFtZSkgfSxcblxuICBpc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KXtcbiAgICByZXR1cm4oXG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudCAmJiBlbC5yZWwgIT09IFwiaWdub3JlXCIpIHx8XG4gICAgICAoZWwgaW5zdGFuY2VvZiBIVE1MQXJlYUVsZW1lbnQgJiYgZWwuaHJlZiAhPT0gdW5kZWZpbmVkKSB8fFxuICAgICAgKCFlbC5kaXNhYmxlZCAmJiAodGhpcy5hbnlPZihlbCwgW0hUTUxJbnB1dEVsZW1lbnQsIEhUTUxTZWxlY3RFbGVtZW50LCBIVE1MVGV4dEFyZWFFbGVtZW50LCBIVE1MQnV0dG9uRWxlbWVudF0pKSkgfHxcbiAgICAgIChlbCBpbnN0YW5jZW9mIEhUTUxJRnJhbWVFbGVtZW50KSB8fFxuICAgICAgKGVsLnRhYkluZGV4ID4gMCB8fCAoIWludGVyYWN0aXZlT25seSAmJiBlbC50YWJJbmRleCA9PT0gMCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSAhPT0gbnVsbCAmJiBlbC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKSAhPT0gXCJ0cnVlXCIpKVxuICAgIClcbiAgfSxcblxuICBhdHRlbXB0Rm9jdXMoZWwsIGludGVyYWN0aXZlT25seSl7XG4gICAgaWYodGhpcy5pc0ZvY3VzYWJsZShlbCwgaW50ZXJhY3RpdmVPbmx5KSl7IHRyeXsgZWwuZm9jdXMoKSB9IGNhdGNoKGUpe30gfVxuICAgIHJldHVybiAhIWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pc1NhbWVOb2RlKGVsKVxuICB9LFxuXG4gIGZvY3VzRmlyc3RJbnRlcmFjdGl2ZShlbCl7XG4gICAgbGV0IGNoaWxkID0gZWwuZmlyc3RFbGVtZW50Q2hpbGRcbiAgICB3aGlsZShjaGlsZCl7XG4gICAgICBpZih0aGlzLmF0dGVtcHRGb2N1cyhjaGlsZCwgdHJ1ZSkgfHwgdGhpcy5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoY2hpbGQsIHRydWUpKXtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nXG4gICAgfVxuICB9LFxuXG4gIGZvY3VzRmlyc3QoZWwpe1xuICAgIGxldCBjaGlsZCA9IGVsLmZpcnN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNGaXJzdChjaGlsZCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH0sXG5cbiAgZm9jdXNMYXN0KGVsKXtcbiAgICBsZXQgY2hpbGQgPSBlbC5sYXN0RWxlbWVudENoaWxkXG4gICAgd2hpbGUoY2hpbGQpe1xuICAgICAgaWYodGhpcy5hdHRlbXB0Rm9jdXMoY2hpbGQpIHx8IHRoaXMuZm9jdXNMYXN0KGNoaWxkKSl7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICBjaGlsZCA9IGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmdcbiAgICB9XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEFSSUEiLCAiaW1wb3J0IHtcbiAgUEhYX0FDVElWRV9FTlRSWV9SRUZTLFxuICBQSFhfTElWRV9GSUxFX1VQREFURUQsXG4gIFBIWF9QUkVGTElHSFRFRF9SRUZTLFxuICBQSFhfVVBMT0FEX1JFRlxufSBmcm9tIFwiLi9jb25zdGFudHNcIlxuXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IEFSSUEgZnJvbSBcIi4vYXJpYVwiXG5cbmxldCBIb29rcyA9IHtcbiAgTGl2ZUZpbGVVcGxvYWQ6IHtcbiAgICBhY3RpdmVSZWZzKCl7IHJldHVybiB0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfQUNUSVZFX0VOVFJZX1JFRlMpIH0sXG5cbiAgICBwcmVmbGlnaHRlZFJlZnMoKXsgcmV0dXJuIHRoaXMuZWwuZ2V0QXR0cmlidXRlKFBIWF9QUkVGTElHSFRFRF9SRUZTKSB9LFxuXG4gICAgbW91bnRlZCgpeyB0aGlzLnByZWZsaWdodGVkV2FzID0gdGhpcy5wcmVmbGlnaHRlZFJlZnMoKSB9LFxuXG4gICAgdXBkYXRlZCgpe1xuICAgICAgbGV0IG5ld1ByZWZsaWdodHMgPSB0aGlzLnByZWZsaWdodGVkUmVmcygpXG4gICAgICBpZih0aGlzLnByZWZsaWdodGVkV2FzICE9PSBuZXdQcmVmbGlnaHRzKXtcbiAgICAgICAgdGhpcy5wcmVmbGlnaHRlZFdhcyA9IG5ld1ByZWZsaWdodHNcbiAgICAgICAgaWYobmV3UHJlZmxpZ2h0cyA9PT0gXCJcIil7XG4gICAgICAgICAgdGhpcy5fX3ZpZXcuY2FuY2VsU3VibWl0KHRoaXMuZWwuZm9ybSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmFjdGl2ZVJlZnMoKSA9PT0gXCJcIil7IHRoaXMuZWwudmFsdWUgPSBudWxsIH1cbiAgICAgIHRoaXMuZWwuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoUEhYX0xJVkVfRklMRV9VUERBVEVEKSlcbiAgICB9XG4gIH0sXG5cbiAgTGl2ZUltZ1ByZXZpZXc6IHtcbiAgICBtb3VudGVkKCl7XG4gICAgICB0aGlzLnJlZiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1waHgtZW50cnktcmVmXCIpXG4gICAgICB0aGlzLmlucHV0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRikpXG4gICAgICBMaXZlVXBsb2FkZXIuZ2V0RW50cnlEYXRhVVJMKHRoaXMuaW5wdXRFbCwgdGhpcy5yZWYsIHVybCA9PiB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsXG4gICAgICAgIHRoaXMuZWwuc3JjID0gdXJsXG4gICAgICB9KVxuICAgIH0sXG4gICAgZGVzdHJveWVkKCl7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMudXJsKVxuICAgIH1cbiAgfSxcbiAgRm9jdXNXcmFwOiB7XG4gICAgbW91bnRlZCgpe1xuICAgICAgdGhpcy5mb2N1c1N0YXJ0ID0gdGhpcy5lbC5maXJzdEVsZW1lbnRDaGlsZFxuICAgICAgdGhpcy5mb2N1c0VuZCA9IHRoaXMuZWwubGFzdEVsZW1lbnRDaGlsZFxuICAgICAgdGhpcy5mb2N1c1N0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiBBUklBLmZvY3VzTGFzdCh0aGlzLmVsKSlcbiAgICAgIHRoaXMuZm9jdXNFbmQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IEFSSUEuZm9jdXNGaXJzdCh0aGlzLmVsKSlcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcInBoeDpzaG93LWVuZFwiLCAoKSA9PiB0aGlzLmVsLmZvY3VzKCkpXG4gICAgICBpZih3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKS5kaXNwbGF5ICE9PSBcIm5vbmVcIil7XG4gICAgICAgIEFSSUEuZm9jdXNGaXJzdCh0aGlzLmVsKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5sZXQgc2Nyb2xsVG9wID0gKCkgPT4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcFxubGV0IHdpbkhlaWdodCA9ICgpID0+IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG5cbmxldCBpc0F0Vmlld3BvcnRUb3AgPSAoZWwpID0+IHtcbiAgbGV0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICByZXR1cm4gcmVjdC50b3AgPj0gMCAmJiByZWN0LmxlZnQgPj0gMCAmJiByZWN0LnRvcCA8PSB3aW5IZWlnaHQoKVxufVxuXG5sZXQgaXNBdFZpZXdwb3J0Qm90dG9tID0gKGVsKSA9PiB7XG4gIGxldCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgcmV0dXJuIHJlY3QucmlnaHQgPj0gMCAmJiByZWN0LmxlZnQgPj0gMCAmJiByZWN0LmJvdHRvbSA8PSB3aW5IZWlnaHQoKVxufVxuXG5sZXQgaXNXaXRoaW5WaWV3cG9ydCA9IChlbCkgPT4ge1xuICBsZXQgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gIHJldHVybiByZWN0LnRvcCA+PSAwICYmIHJlY3QubGVmdCA+PSAwICYmIHJlY3QudG9wIDw9IHdpbkhlaWdodCgpXG59XG5cbkhvb2tzLkluZmluaXRlU2Nyb2xsID0ge1xuICBtb3VudGVkKCl7XG4gICAgbGV0IHNjcm9sbEJlZm9yZSA9IHNjcm9sbFRvcCgpXG4gICAgbGV0IHRvcE92ZXJyYW4gPSBmYWxzZVxuICAgIGxldCB0aHJvdHRsZUludGVydmFsID0gNTAwXG4gICAgbGV0IHBlbmRpbmdPcCA9IG51bGxcblxuICAgIGxldCBvblRvcE92ZXJydW4gPSB0aGlzLnRocm90dGxlKHRocm90dGxlSW50ZXJ2YWwsICh0b3BFdmVudCwgZmlyc3RDaGlsZCkgPT4ge1xuICAgICAgcGVuZGluZ09wID0gKCkgPT4gdHJ1ZVxuICAgICAgdGhpcy5saXZlU29ja2V0LmV4ZWNKU0hvb2tQdXNoKHRoaXMuZWwsIHRvcEV2ZW50LCB7aWQ6IGZpcnN0Q2hpbGQuaWQsIF9vdmVycmFuOiB0cnVlfSwgKCkgPT4ge1xuICAgICAgICBwZW5kaW5nT3AgPSBudWxsXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBsZXQgb25GaXJzdENoaWxkQXRUb3AgPSB0aGlzLnRocm90dGxlKHRocm90dGxlSW50ZXJ2YWwsICh0b3BFdmVudCwgZmlyc3RDaGlsZCkgPT4ge1xuICAgICAgcGVuZGluZ09wID0gKCkgPT4gZmlyc3RDaGlsZC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IFwic3RhcnRcIn0pXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTSG9va1B1c2godGhpcy5lbCwgdG9wRXZlbnQsIHtpZDogZmlyc3RDaGlsZC5pZH0sICgpID0+IHtcbiAgICAgICAgcGVuZGluZ09wID0gbnVsbFxuICAgICAgICBpZighaXNXaXRoaW5WaWV3cG9ydChmaXJzdENoaWxkKSl7IGZpcnN0Q2hpbGQuc2Nyb2xsSW50b1ZpZXcoe2Jsb2NrOiBcInN0YXJ0XCJ9KSB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBsZXQgb25MYXN0Q2hpbGRBdEJvdHRvbSA9IHRoaXMudGhyb3R0bGUodGhyb3R0bGVJbnRlcnZhbCwgKGJvdHRvbUV2ZW50LCBsYXN0Q2hpbGQpID0+IHtcbiAgICAgIHBlbmRpbmdPcCA9ICgpID0+IGxhc3RDaGlsZC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6IFwiZW5kXCJ9KVxuICAgICAgdGhpcy5saXZlU29ja2V0LmV4ZWNKU0hvb2tQdXNoKHRoaXMuZWwsIGJvdHRvbUV2ZW50LCB7aWQ6IGxhc3RDaGlsZC5pZH0sICgpID0+IHtcbiAgICAgICAgcGVuZGluZ09wID0gbnVsbFxuICAgICAgICBpZighaXNXaXRoaW5WaWV3cG9ydChsYXN0Q2hpbGQpKXsgbGFzdENoaWxkLnNjcm9sbEludG9WaWV3KHtibG9jazogXCJlbmRcIn0pIH1cbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMub25TY3JvbGwgPSAoZSkgPT4ge1xuICAgICAgbGV0IHNjcm9sbE5vdyA9IHNjcm9sbFRvcCgpXG5cbiAgICAgIGlmKHBlbmRpbmdPcCl7XG4gICAgICAgIHNjcm9sbEJlZm9yZSA9IHNjcm9sbE5vd1xuICAgICAgICByZXR1cm4gcGVuZGluZ09wKClcbiAgICAgIH1cbiAgICAgIGxldCByZWN0ID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgbGV0IHRvcEV2ZW50ID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUodGhpcy5saXZlU29ja2V0LmJpbmRpbmcoXCJ2aWV3cG9ydC10b3BcIikpXG4gICAgICBsZXQgYm90dG9tRXZlbnQgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSh0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhcInZpZXdwb3J0LWJvdHRvbVwiKSlcbiAgICAgIGxldCBsYXN0Q2hpbGQgPSB0aGlzLmVsLmxhc3RFbGVtZW50Q2hpbGRcbiAgICAgIGxldCBmaXJzdENoaWxkID0gdGhpcy5lbC5maXJzdEVsZW1lbnRDaGlsZFxuICAgICAgbGV0IGlzU2Nyb2xsaW5nVXAgPSBzY3JvbGxOb3cgPCBzY3JvbGxCZWZvcmVcbiAgICAgIGxldCBpc1Njcm9sbGluZ0Rvd24gPSBzY3JvbGxOb3cgPiBzY3JvbGxCZWZvcmVcblxuICAgICAgLy8gZWwgb3ZlcnJhbiB3aGlsZSBzY3JvbGxpbmcgdXBcbiAgICAgIGlmKGlzU2Nyb2xsaW5nVXAgJiYgdG9wRXZlbnQgJiYgIXRvcE92ZXJyYW4gJiYgcmVjdC50b3AgPj0gMCl7XG4gICAgICAgIHRvcE92ZXJyYW4gPSB0cnVlXG4gICAgICAgIG9uVG9wT3ZlcnJ1bih0b3BFdmVudCwgZmlyc3RDaGlsZClcbiAgICAgIH0gZWxzZSBpZihpc1Njcm9sbGluZ0Rvd24gJiYgdG9wT3ZlcnJhbiAmJiByZWN0LnRvcCA8PSAwKXtcbiAgICAgICAgdG9wT3ZlcnJhbiA9IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGlmKHRvcEV2ZW50ICYmIGlzU2Nyb2xsaW5nVXAgJiYgaXNBdFZpZXdwb3J0VG9wKGZpcnN0Q2hpbGQpKXtcbiAgICAgICAgb25GaXJzdENoaWxkQXRUb3AodG9wRXZlbnQsIGZpcnN0Q2hpbGQpXG4gICAgICB9IGVsc2UgaWYoYm90dG9tRXZlbnQgJiYgaXNTY3JvbGxpbmdEb3duICYmIGlzQXRWaWV3cG9ydEJvdHRvbShsYXN0Q2hpbGQpKXtcbiAgICAgICAgb25MYXN0Q2hpbGRBdEJvdHRvbShib3R0b21FdmVudCwgbGFzdENoaWxkKVxuICAgICAgfVxuICAgICAgc2Nyb2xsQmVmb3JlID0gc2Nyb2xsTm93XG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHRoaXMub25TY3JvbGwpXG4gIH0sXG4gIGRlc3Ryb3llZCgpeyB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLm9uU2Nyb2xsKSB9LFxuXG4gIHRocm90dGxlKGludGVydmFsLCBjYWxsYmFjayl7XG4gICAgbGV0IGxhc3RDYWxsQXQgPSAwXG4gICAgbGV0IHRpbWVyXG5cbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgIGxldCBub3cgPSBEYXRlLm5vdygpXG4gICAgICBsZXQgcmVtYWluaW5nVGltZSA9IGludGVydmFsIC0gKG5vdyAtIGxhc3RDYWxsQXQpXG5cbiAgICAgIGlmKHJlbWFpbmluZ1RpbWUgPD0gMCB8fCByZW1haW5pbmdUaW1lID4gaW50ZXJ2YWwpe1xuICAgICAgICBpZih0aW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgICAgICB0aW1lciA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICBsYXN0Q2FsbEF0ID0gbm93XG4gICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpXG4gICAgICB9IGVsc2UgaWYoIXRpbWVyKXtcbiAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBsYXN0Q2FsbEF0ID0gRGF0ZS5ub3coKVxuICAgICAgICAgIHRpbWVyID0gbnVsbFxuICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpXG4gICAgICAgIH0sIHJlbWFpbmluZ1RpbWUpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBIb29rc1xuIiwgImltcG9ydCB7XG4gIG1heWJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBET01Qb3N0TW9ycGhSZXN0b3JlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lckJlZm9yZSwgY29udGFpbmVyQWZ0ZXIsIHVwZGF0ZVR5cGUpe1xuICAgIGxldCBpZHNCZWZvcmUgPSBuZXcgU2V0KClcbiAgICBsZXQgaWRzQWZ0ZXIgPSBuZXcgU2V0KFsuLi5jb250YWluZXJBZnRlci5jaGlsZHJlbl0ubWFwKGNoaWxkID0+IGNoaWxkLmlkKSlcblxuICAgIGxldCBlbGVtZW50c1RvTW9kaWZ5ID0gW11cblxuICAgIEFycmF5LmZyb20oY29udGFpbmVyQmVmb3JlLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgIGlmKGNoaWxkLmlkKXsgLy8gYWxsIG9mIG91ciBjaGlsZHJlbiBzaG91bGQgYmUgZWxlbWVudHMgd2l0aCBpZHNcbiAgICAgICAgaWRzQmVmb3JlLmFkZChjaGlsZC5pZClcbiAgICAgICAgaWYoaWRzQWZ0ZXIuaGFzKGNoaWxkLmlkKSl7XG4gICAgICAgICAgbGV0IHByZXZpb3VzRWxlbWVudElkID0gY2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlkXG4gICAgICAgICAgZWxlbWVudHNUb01vZGlmeS5wdXNoKHtlbGVtZW50SWQ6IGNoaWxkLmlkLCBwcmV2aW91c0VsZW1lbnRJZDogcHJldmlvdXNFbGVtZW50SWR9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIHRoaXMuY29udGFpbmVySWQgPSBjb250YWluZXJBZnRlci5pZFxuICAgIHRoaXMudXBkYXRlVHlwZSA9IHVwZGF0ZVR5cGVcbiAgICB0aGlzLmVsZW1lbnRzVG9Nb2RpZnkgPSBlbGVtZW50c1RvTW9kaWZ5XG4gICAgdGhpcy5lbGVtZW50SWRzVG9BZGQgPSBbLi4uaWRzQWZ0ZXJdLmZpbHRlcihpZCA9PiAhaWRzQmVmb3JlLmhhcyhpZCkpXG4gIH1cblxuICAvLyBXZSBkbyB0aGUgZm9sbG93aW5nIHRvIG9wdGltaXplIGFwcGVuZC9wcmVwZW5kIG9wZXJhdGlvbnM6XG4gIC8vICAgMSkgVHJhY2sgaWRzIG9mIG1vZGlmaWVkIGVsZW1lbnRzICYgb2YgbmV3IGVsZW1lbnRzXG4gIC8vICAgMikgQWxsIHRoZSBtb2RpZmllZCBlbGVtZW50cyBhcmUgcHV0IGJhY2sgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24gaW4gdGhlIERPTSB0cmVlXG4gIC8vICAgICAgYnkgc3RvcmluZyB0aGUgaWQgb2YgdGhlaXIgcHJldmlvdXMgc2libGluZ1xuICAvLyAgIDMpIE5ldyBlbGVtZW50cyBhcmUgZ29pbmcgdG8gYmUgcHV0IGluIHRoZSByaWdodCBwbGFjZSBieSBtb3JwaGRvbSBkdXJpbmcgYXBwZW5kLlxuICAvLyAgICAgIEZvciBwcmVwZW5kLCB3ZSBtb3ZlIHRoZW0gdG8gdGhlIGZpcnN0IHBvc2l0aW9uIGluIHRoZSBjb250YWluZXJcbiAgcGVyZm9ybSgpe1xuICAgIGxldCBjb250YWluZXIgPSBET00uYnlJZCh0aGlzLmNvbnRhaW5lcklkKVxuICAgIHRoaXMuZWxlbWVudHNUb01vZGlmeS5mb3JFYWNoKGVsZW1lbnRUb01vZGlmeSA9PiB7XG4gICAgICBpZihlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpe1xuICAgICAgICBtYXliZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50VG9Nb2RpZnkucHJldmlvdXNFbGVtZW50SWQpLCBwcmV2aW91c0VsZW0gPT4ge1xuICAgICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICAgIGxldCBpc0luUmlnaHRQbGFjZSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZyAmJiBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaWQgPT0gcHJldmlvdXNFbGVtLmlkXG4gICAgICAgICAgICBpZighaXNJblJpZ2h0UGxhY2Upe1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW0uaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgZWxlbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgY29udGFpbmVyXG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRUb01vZGlmeS5lbGVtZW50SWQpLCBlbGVtID0+IHtcbiAgICAgICAgICBsZXQgaXNJblJpZ2h0UGxhY2UgPSBlbGVtLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgPT0gbnVsbFxuICAgICAgICAgIGlmKCFpc0luUmlnaHRQbGFjZSl7XG4gICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCBlbGVtKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYodGhpcy51cGRhdGVUeXBlID09IFwicHJlcGVuZFwiKXtcbiAgICAgIHRoaXMuZWxlbWVudElkc1RvQWRkLnJldmVyc2UoKS5mb3JFYWNoKGVsZW1JZCA9PiB7XG4gICAgICAgIG1heWJlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1JZCksIGVsZW0gPT4gY29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgZWxlbSkpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwgInZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFID0gMTE7XG5cbmZ1bmN0aW9uIG1vcnBoQXR0cnMoZnJvbU5vZGUsIHRvTm9kZSkge1xuICAgIHZhciB0b05vZGVBdHRycyA9IHRvTm9kZS5hdHRyaWJ1dGVzO1xuICAgIHZhciBhdHRyO1xuICAgIHZhciBhdHRyTmFtZTtcbiAgICB2YXIgYXR0ck5hbWVzcGFjZVVSSTtcbiAgICB2YXIgYXR0clZhbHVlO1xuICAgIHZhciBmcm9tVmFsdWU7XG5cbiAgICAvLyBkb2N1bWVudC1mcmFnbWVudHMgZG9udCBoYXZlIGF0dHJpYnV0ZXMgc28gbGV0cyBub3QgZG8gYW55dGhpbmdcbiAgICBpZiAodG9Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFIHx8IGZyb21Ob2RlLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIGF0dHJpYnV0ZXMgb24gb3JpZ2luYWwgRE9NIGVsZW1lbnRcbiAgICBmb3IgKHZhciBpID0gdG9Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgYXR0ciA9IHRvTm9kZUF0dHJzW2ldO1xuICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTtcbiAgICAgICAgYXR0ck5hbWVzcGFjZVVSSSA9IGF0dHIubmFtZXNwYWNlVVJJO1xuICAgICAgICBhdHRyVmFsdWUgPSBhdHRyLnZhbHVlO1xuXG4gICAgICAgIGlmIChhdHRyTmFtZXNwYWNlVVJJKSB7XG4gICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubG9jYWxOYW1lIHx8IGF0dHJOYW1lO1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlTlMoYXR0ck5hbWVzcGFjZVVSSSwgYXR0ck5hbWUpO1xuXG4gICAgICAgICAgICBpZiAoZnJvbVZhbHVlICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5wcmVmaXggPT09ICd4bWxucycpe1xuICAgICAgICAgICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHIubmFtZTsgLy8gSXQncyBub3QgYWxsb3dlZCB0byBzZXQgYW4gYXR0cmlidXRlIHdpdGggdGhlIFhNTE5TIG5hbWVzcGFjZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGB4bWxuc2AgcHJlZml4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnNldEF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbVZhbHVlID0gZnJvbU5vZGUuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKTtcblxuICAgICAgICAgICAgaWYgKGZyb21WYWx1ZSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZnJvbU5vZGUuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFueSBleHRyYSBhdHRyaWJ1dGVzIGZvdW5kIG9uIHRoZSBvcmlnaW5hbCBET00gZWxlbWVudCB0aGF0XG4gICAgLy8gd2VyZW4ndCBmb3VuZCBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQuXG4gICAgdmFyIGZyb21Ob2RlQXR0cnMgPSBmcm9tTm9kZS5hdHRyaWJ1dGVzO1xuXG4gICAgZm9yICh2YXIgZCA9IGZyb21Ob2RlQXR0cnMubGVuZ3RoIC0gMTsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgYXR0ciA9IGZyb21Ob2RlQXR0cnNbZF07XG4gICAgICAgIGF0dHJOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICBhdHRyTmFtZXNwYWNlVVJJID0gYXR0ci5uYW1lc3BhY2VVUkk7XG5cbiAgICAgICAgaWYgKGF0dHJOYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICAgIGF0dHJOYW1lID0gYXR0ci5sb2NhbE5hbWUgfHwgYXR0ck5hbWU7XG5cbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICAgIGZyb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZU5TKGF0dHJOYW1lc3BhY2VVUkksIGF0dHJOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdG9Ob2RlLmhhc0F0dHJpYnV0ZShhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBmcm9tTm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgcmFuZ2U7IC8vIENyZWF0ZSBhIHJhbmdlIG9iamVjdCBmb3IgZWZmaWNlbnRseSByZW5kZXJpbmcgc3RyaW5ncyB0byBlbGVtZW50cy5cbnZhciBOU19YSFRNTCA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJztcblxudmFyIGRvYyA9IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBkb2N1bWVudDtcbnZhciBIQVNfVEVNUExBVEVfU1VQUE9SVCA9ICEhZG9jICYmICdjb250ZW50JyBpbiBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbnZhciBIQVNfUkFOR0VfU1VQUE9SVCA9ICEhZG9jICYmIGRvYy5jcmVhdGVSYW5nZSAmJiAnY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JyBpbiBkb2MuY3JlYXRlUmFuZ2UoKTtcblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gc3RyO1xuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVJhbmdlKHN0cikge1xuICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgcmFuZ2UgPSBkb2MuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZShkb2MuYm9keSk7XG4gICAgfVxuXG4gICAgdmFyIGZyYWdtZW50ID0gcmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHN0cik7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVdyYXAoc3RyKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTtcbiAgICBmcmFnbWVudC5pbm5lckhUTUwgPSBzdHI7XG4gICAgcmV0dXJuIGZyYWdtZW50LmNoaWxkTm9kZXNbMF07XG59XG5cbi8qKlxuICogVGhpcyBpcyBhYm91dCB0aGUgc2FtZVxuICogdmFyIGh0bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHN0ciwgJ3RleHQvaHRtbCcpO1xuICogcmV0dXJuIGh0bWwuYm9keS5maXJzdENoaWxkO1xuICpcbiAqIEBtZXRob2QgdG9FbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cbmZ1bmN0aW9uIHRvRWxlbWVudChzdHIpIHtcbiAgICBzdHIgPSBzdHIudHJpbSgpO1xuICAgIGlmIChIQVNfVEVNUExBVEVfU1VQUE9SVCkge1xuICAgICAgLy8gYXZvaWQgcmVzdHJpY3Rpb25zIG9uIGNvbnRlbnQgZm9yIHRoaW5ncyBsaWtlIGA8dHI+PHRoPkhpPC90aD48L3RyPmAgd2hpY2hcbiAgICAgIC8vIGNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCBkb2Vzbid0IHN1cHBvcnRcbiAgICAgIC8vIDx0ZW1wbGF0ZT4gc3VwcG9ydCBub3QgYXZhaWxhYmxlIGluIElFXG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tVGVtcGxhdGUoc3RyKTtcbiAgICB9IGVsc2UgaWYgKEhBU19SQU5HRV9TVVBQT1JUKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tUmFuZ2Uoc3RyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlRnJhZ21lbnRGcm9tV3JhcChzdHIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0d28gbm9kZSdzIG5hbWVzIGFyZSB0aGUgc2FtZS5cbiAqXG4gKiBOT1RFOiBXZSBkb24ndCBib3RoZXIgY2hlY2tpbmcgYG5hbWVzcGFjZVVSSWAgYmVjYXVzZSB5b3Ugd2lsbCBuZXZlciBmaW5kIHR3byBIVE1MIGVsZW1lbnRzIHdpdGggdGhlIHNhbWVcbiAqICAgICAgIG5vZGVOYW1lIGFuZCBkaWZmZXJlbnQgbmFtZXNwYWNlIFVSSXMuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGIgVGhlIHRhcmdldCBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBjb21wYXJlTm9kZU5hbWVzKGZyb21FbCwgdG9FbCkge1xuICAgIHZhciBmcm9tTm9kZU5hbWUgPSBmcm9tRWwubm9kZU5hbWU7XG4gICAgdmFyIHRvTm9kZU5hbWUgPSB0b0VsLm5vZGVOYW1lO1xuICAgIHZhciBmcm9tQ29kZVN0YXJ0LCB0b0NvZGVTdGFydDtcblxuICAgIGlmIChmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZnJvbUNvZGVTdGFydCA9IGZyb21Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuICAgIHRvQ29kZVN0YXJ0ID0gdG9Ob2RlTmFtZS5jaGFyQ29kZUF0KDApO1xuXG4gICAgLy8gSWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIGEgdmlydHVhbCBET00gbm9kZSBvciBTVkcgbm9kZSB0aGVuIHdlIG1heVxuICAgIC8vIG5lZWQgdG8gbm9ybWFsaXplIHRoZSB0YWcgbmFtZSBiZWZvcmUgY29tcGFyaW5nLiBOb3JtYWwgSFRNTCBlbGVtZW50cyB0aGF0IGFyZVxuICAgIC8vIGluIHRoZSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIlxuICAgIC8vIGFyZSBjb252ZXJ0ZWQgdG8gdXBwZXIgY2FzZVxuICAgIGlmIChmcm9tQ29kZVN0YXJ0IDw9IDkwICYmIHRvQ29kZVN0YXJ0ID49IDk3KSB7IC8vIGZyb20gaXMgdXBwZXIgYW5kIHRvIGlzIGxvd2VyXG4gICAgICAgIHJldHVybiBmcm9tTm9kZU5hbWUgPT09IHRvTm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICB9IGVsc2UgaWYgKHRvQ29kZVN0YXJ0IDw9IDkwICYmIGZyb21Db2RlU3RhcnQgPj0gOTcpIHsgLy8gdG8gaXMgdXBwZXIgYW5kIGZyb20gaXMgbG93ZXJcbiAgICAgICAgcmV0dXJuIHRvTm9kZU5hbWUgPT09IGZyb21Ob2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGVsZW1lbnQsIG9wdGlvbmFsbHkgd2l0aCBhIGtub3duIG5hbWVzcGFjZSBVUkkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdGhlIGVsZW1lbnQgbmFtZSwgZS5nLiAnZGl2JyBvciAnc3ZnJ1xuICogQHBhcmFtIHtzdHJpbmd9IFtuYW1lc3BhY2VVUkldIHRoZSBlbGVtZW50J3MgbmFtZXNwYWNlIFVSSSwgaS5lLiB0aGUgdmFsdWUgb2ZcbiAqIGl0cyBgeG1sbnNgIGF0dHJpYnV0ZSBvciBpdHMgaW5mZXJyZWQgbmFtZXNwYWNlLlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnROUyhuYW1lLCBuYW1lc3BhY2VVUkkpIHtcbiAgICByZXR1cm4gIW5hbWVzcGFjZVVSSSB8fCBuYW1lc3BhY2VVUkkgPT09IE5TX1hIVE1MID9cbiAgICAgICAgZG9jLmNyZWF0ZUVsZW1lbnQobmFtZSkgOlxuICAgICAgICBkb2MuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZVVSSSwgbmFtZSk7XG59XG5cbi8qKlxuICogQ29waWVzIHRoZSBjaGlsZHJlbiBvZiBvbmUgRE9NIGVsZW1lbnQgdG8gYW5vdGhlciBET00gZWxlbWVudFxuICovXG5mdW5jdGlvbiBtb3ZlQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgdmFyIGN1ckNoaWxkID0gZnJvbUVsLmZpcnN0Q2hpbGQ7XG4gICAgd2hpbGUgKGN1ckNoaWxkKSB7XG4gICAgICAgIHZhciBuZXh0Q2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgdG9FbC5hcHBlbmRDaGlsZChjdXJDaGlsZCk7XG4gICAgICAgIGN1ckNoaWxkID0gbmV4dENoaWxkO1xuICAgIH1cbiAgICByZXR1cm4gdG9FbDtcbn1cblxuZnVuY3Rpb24gc3luY0Jvb2xlYW5BdHRyUHJvcChmcm9tRWwsIHRvRWwsIG5hbWUpIHtcbiAgICBpZiAoZnJvbUVsW25hbWVdICE9PSB0b0VsW25hbWVdKSB7XG4gICAgICAgIGZyb21FbFtuYW1lXSA9IHRvRWxbbmFtZV07XG4gICAgICAgIGlmIChmcm9tRWxbbmFtZV0pIHtcbiAgICAgICAgICAgIGZyb21FbC5zZXRBdHRyaWJ1dGUobmFtZSwgJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIHNwZWNpYWxFbEhhbmRsZXJzID0ge1xuICAgIE9QVElPTjogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHZhciBwYXJlbnROb2RlID0gZnJvbUVsLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50TmFtZSA9IHBhcmVudE5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnROYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Tm9kZSA9IHBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICBwYXJlbnROYW1lID0gcGFyZW50Tm9kZSAmJiBwYXJlbnROb2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyZW50TmFtZSA9PT0gJ1NFTEVDVCcgJiYgIXBhcmVudE5vZGUuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyb21FbC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgJiYgIXRvRWwuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgTVMgRWRnZSBidWcgd2hlcmUgdGhlICdzZWxlY3RlZCcgYXR0cmlidXRlIGNhbiBvbmx5IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZWQgaWYgc2V0IHRvIGEgbm9uLWVtcHR5IHZhbHVlOlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL2lzc3Vlcy8xMjA4NzY3OS9cbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnNldEF0dHJpYnV0ZSgnc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZnJvbUVsLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byByZXNldCBzZWxlY3QgZWxlbWVudCdzIHNlbGVjdGVkSW5kZXggdG8gLTEsIG90aGVyd2lzZSBzZXR0aW5nXG4gICAgICAgICAgICAgICAgLy8gZnJvbUVsLnNlbGVjdGVkIHVzaW5nIHRoZSBzeW5jQm9vbGVhbkF0dHJQcm9wIGJlbG93IGhhcyBubyBlZmZlY3QuXG4gICAgICAgICAgICAgICAgLy8gVGhlIGNvcnJlY3Qgc2VsZWN0ZWRJbmRleCB3aWxsIGJlIHNldCBpbiB0aGUgU0VMRUNUIHNwZWNpYWwgaGFuZGxlciBiZWxvdy5cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ3NlbGVjdGVkJyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBUaGUgXCJ2YWx1ZVwiIGF0dHJpYnV0ZSBpcyBzcGVjaWFsIGZvciB0aGUgPGlucHV0PiBlbGVtZW50IHNpbmNlIGl0IHNldHNcbiAgICAgKiB0aGUgaW5pdGlhbCB2YWx1ZS4gQ2hhbmdpbmcgdGhlIFwidmFsdWVcIiBhdHRyaWJ1dGUgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgKiBcInZhbHVlXCIgcHJvcGVydHkgd2lsbCBoYXZlIG5vIGVmZmVjdCBzaW5jZSBpdCBpcyBvbmx5IHVzZWQgdG8gdGhlIHNldCB0aGVcbiAgICAgKiBpbml0aWFsIHZhbHVlLiAgU2ltaWxhciBmb3IgdGhlIFwiY2hlY2tlZFwiIGF0dHJpYnV0ZSwgYW5kIFwiZGlzYWJsZWRcIi5cbiAgICAgKi9cbiAgICBJTlBVVDogZnVuY3Rpb24oZnJvbUVsLCB0b0VsKSB7XG4gICAgICAgIHN5bmNCb29sZWFuQXR0clByb3AoZnJvbUVsLCB0b0VsLCAnY2hlY2tlZCcpO1xuICAgICAgICBzeW5jQm9vbGVhbkF0dHJQcm9wKGZyb21FbCwgdG9FbCwgJ2Rpc2FibGVkJyk7XG5cbiAgICAgICAgaWYgKGZyb21FbC52YWx1ZSAhPT0gdG9FbC52YWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gdG9FbC52YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdG9FbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpIHtcbiAgICAgICAgICAgIGZyb21FbC5yZW1vdmVBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgVEVYVEFSRUE6IGZ1bmN0aW9uKGZyb21FbCwgdG9FbCkge1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSB0b0VsLnZhbHVlO1xuICAgICAgICBpZiAoZnJvbUVsLnZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgZnJvbUVsLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZmlyc3RDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICBpZiAoZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgLy8gTmVlZGVkIGZvciBJRS4gQXBwYXJlbnRseSBJRSBzZXRzIHRoZSBwbGFjZWhvbGRlciBhcyB0aGVcbiAgICAgICAgICAgIC8vIG5vZGUgdmFsdWUgYW5kIHZpc2UgdmVyc2EuIFRoaXMgaWdub3JlcyBhbiBlbXB0eSB1cGRhdGUuXG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSBmaXJzdENoaWxkLm5vZGVWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09IG5ld1ZhbHVlIHx8ICghbmV3VmFsdWUgJiYgb2xkVmFsdWUgPT0gZnJvbUVsLnBsYWNlaG9sZGVyKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgU0VMRUNUOiBmdW5jdGlvbihmcm9tRWwsIHRvRWwpIHtcbiAgICAgICAgaWYgKCF0b0VsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgdG8gbG9vcCB0aHJvdWdoIGNoaWxkcmVuIG9mIGZyb21FbCwgbm90IHRvRWwgc2luY2Ugbm9kZXMgY2FuIGJlIG1vdmVkXG4gICAgICAgICAgICAvLyBmcm9tIHRvRWwgdG8gZnJvbUVsIGRpcmVjdGx5IHdoZW4gbW9ycGhpbmcuXG4gICAgICAgICAgICAvLyBBdCB0aGUgdGltZSB0aGlzIHNwZWNpYWwgaGFuZGxlciBpcyBpbnZva2VkLCBhbGwgY2hpbGRyZW4gaGF2ZSBhbHJlYWR5IGJlZW4gbW9ycGhlZFxuICAgICAgICAgICAgLy8gYW5kIGFwcGVuZGVkIHRvIC8gcmVtb3ZlZCBmcm9tIGZyb21FbCwgc28gdXNpbmcgZnJvbUVsIGhlcmUgaXMgc2FmZSBhbmQgY29ycmVjdC5cbiAgICAgICAgICAgIHZhciBjdXJDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgICAgICAgdmFyIG9wdGdyb3VwO1xuICAgICAgICAgICAgdmFyIG5vZGVOYW1lO1xuICAgICAgICAgICAgd2hpbGUoY3VyQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICBub2RlTmFtZSA9IGN1ckNoaWxkLm5vZGVOYW1lICYmIGN1ckNoaWxkLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnT1BUR1JPVVAnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gY3VyQ2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGN1ckNoaWxkID0gb3B0Z3JvdXAuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdPUFRJT04nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VyQ2hpbGQuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJDaGlsZCAmJiBvcHRncm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ2hpbGQgPSBvcHRncm91cC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGdyb3VwID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnJvbUVsLnNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZEluZGV4O1xuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIEVMRU1FTlRfTk9ERSA9IDE7XG52YXIgRE9DVU1FTlRfRlJBR01FTlRfTk9ERSQxID0gMTE7XG52YXIgVEVYVF9OT0RFID0gMztcbnZhciBDT01NRU5UX05PREUgPSA4O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gZGVmYXVsdEdldE5vZGVLZXkobm9kZSkge1xuICBpZiAobm9kZSkge1xuICAgIHJldHVybiAobm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ2lkJykpIHx8IG5vZGUuaWQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpIHtcblxuICByZXR1cm4gZnVuY3Rpb24gbW9ycGhkb20oZnJvbU5vZGUsIHRvTm9kZSwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdG9Ob2RlID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGZyb21Ob2RlLm5vZGVOYW1lID09PSAnI2RvY3VtZW50JyB8fCBmcm9tTm9kZS5ub2RlTmFtZSA9PT0gJ0hUTUwnIHx8IGZyb21Ob2RlLm5vZGVOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgdmFyIHRvTm9kZUh0bWwgPSB0b05vZGU7XG4gICAgICAgIHRvTm9kZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdodG1sJyk7XG4gICAgICAgIHRvTm9kZS5pbm5lckhUTUwgPSB0b05vZGVIdG1sO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9Ob2RlID0gdG9FbGVtZW50KHRvTm9kZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0b05vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgdG9Ob2RlID0gdG9Ob2RlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIH1cblxuICAgIHZhciBnZXROb2RlS2V5ID0gb3B0aW9ucy5nZXROb2RlS2V5IHx8IGRlZmF1bHRHZXROb2RlS2V5O1xuICAgIHZhciBvbkJlZm9yZU5vZGVBZGRlZCA9IG9wdGlvbnMub25CZWZvcmVOb2RlQWRkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlQWRkZWQgPSBvcHRpb25zLm9uTm9kZUFkZGVkIHx8IG5vb3A7XG4gICAgdmFyIG9uQmVmb3JlRWxVcGRhdGVkID0gb3B0aW9ucy5vbkJlZm9yZUVsVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBvbkVsVXBkYXRlZCA9IG9wdGlvbnMub25FbFVwZGF0ZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVOb2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbkJlZm9yZU5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25Ob2RlRGlzY2FyZGVkID0gb3B0aW9ucy5vbk5vZGVEaXNjYXJkZWQgfHwgbm9vcDtcbiAgICB2YXIgb25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCA9IG9wdGlvbnMub25CZWZvcmVFbENoaWxkcmVuVXBkYXRlZCB8fCBub29wO1xuICAgIHZhciBza2lwRnJvbUNoaWxkcmVuID0gb3B0aW9ucy5za2lwRnJvbUNoaWxkcmVuIHx8IG5vb3A7XG4gICAgdmFyIGFkZENoaWxkID0gb3B0aW9ucy5hZGRDaGlsZCB8fCBmdW5jdGlvbihwYXJlbnQsIGNoaWxkKXsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7IH07XG4gICAgdmFyIGNoaWxkcmVuT25seSA9IG9wdGlvbnMuY2hpbGRyZW5Pbmx5ID09PSB0cnVlO1xuXG4gICAgLy8gVGhpcyBvYmplY3QgaXMgdXNlZCBhcyBhIGxvb2t1cCB0byBxdWlja2x5IGZpbmQgYWxsIGtleWVkIGVsZW1lbnRzIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICB2YXIgZnJvbU5vZGVzTG9va3VwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB2YXIga2V5ZWRSZW1vdmFsTGlzdCA9IFtdO1xuXG4gICAgZnVuY3Rpb24gYWRkS2V5ZWRSZW1vdmFsKGtleSkge1xuICAgICAga2V5ZWRSZW1vdmFsTGlzdC5wdXNoKGtleSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgdmFyIGN1ckNoaWxkID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICB3aGlsZSAoY3VyQ2hpbGQpIHtcblxuICAgICAgICAgIHZhciBrZXkgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoc2tpcEtleWVkTm9kZXMgJiYgKGtleSA9IGdldE5vZGVLZXkoY3VyQ2hpbGQpKSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHNraXBwaW5nIGtleWVkIG5vZGVzIHRoZW4gd2UgYWRkIHRoZSBrZXlcbiAgICAgICAgICAgIC8vIHRvIGEgbGlzdCBzbyB0aGF0IGl0IGNhbiBiZSBoYW5kbGVkIGF0IHRoZSB2ZXJ5IGVuZC5cbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPbmx5IHJlcG9ydCB0aGUgbm9kZSBhcyBkaXNjYXJkZWQgaWYgaXQgaXMgbm90IGtleWVkLiBXZSBkbyB0aGlzIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIGF0IHRoZSBlbmQgd2UgbG9vcCB0aHJvdWdoIGFsbCBrZXllZCBlbGVtZW50cyB0aGF0IHdlcmUgdW5tYXRjaGVkXG4gICAgICAgICAgICAvLyBhbmQgdGhlbiBkaXNjYXJkIHRoZW0gaW4gb25lIGZpbmFsIHBhc3MuXG4gICAgICAgICAgICBvbk5vZGVEaXNjYXJkZWQoY3VyQ2hpbGQpO1xuICAgICAgICAgICAgaWYgKGN1ckNoaWxkLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMoY3VyQ2hpbGQsIHNraXBLZXllZE5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJDaGlsZCA9IGN1ckNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBSZW1vdmVzIGEgRE9NIG5vZGUgb3V0IG9mIHRoZSBvcmlnaW5hbCBET01cbiAgICAqXG4gICAgKiBAcGFyYW0gIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZVxuICAgICogQHBhcmFtICB7Tm9kZX0gcGFyZW50Tm9kZSBUaGUgbm9kZXMgcGFyZW50XG4gICAgKiBAcGFyYW0gIHtCb29sZWFufSBza2lwS2V5ZWROb2RlcyBJZiB0cnVlIHRoZW4gZWxlbWVudHMgd2l0aCBrZXlzIHdpbGwgYmUgc2tpcHBlZCBhbmQgbm90IGRpc2NhcmRlZC5cbiAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSwgcGFyZW50Tm9kZSwgc2tpcEtleWVkTm9kZXMpIHtcbiAgICAgIGlmIChvbkJlZm9yZU5vZGVEaXNjYXJkZWQobm9kZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgIH1cblxuICAgICAgb25Ob2RlRGlzY2FyZGVkKG5vZGUpO1xuICAgICAgd2Fsa0Rpc2NhcmRlZENoaWxkTm9kZXMobm9kZSwgc2tpcEtleWVkTm9kZXMpO1xuICAgIH1cblxuICAgIC8vIC8vIFRyZWVXYWxrZXIgaW1wbGVtZW50YXRpb24gaXMgbm8gZmFzdGVyLCBidXQga2VlcGluZyB0aGlzIGFyb3VuZCBpbiBjYXNlIHRoaXMgY2hhbmdlcyBpbiB0aGUgZnV0dXJlXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKHJvb3QpIHtcbiAgICAvLyAgICAgdmFyIHRyZWVXYWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxuICAgIC8vICAgICAgICAgcm9vdCxcbiAgICAvLyAgICAgICAgIE5vZGVGaWx0ZXIuU0hPV19FTEVNRU5UKTtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgZWw7XG4gICAgLy8gICAgIHdoaWxlKChlbCA9IHRyZWVXYWxrZXIubmV4dE5vZGUoKSkpIHtcbiAgICAvLyAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGVsKTtcbiAgICAvLyAgICAgICAgIGlmIChrZXkpIHtcbiAgICAvLyAgICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGVsO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gLy8gTm9kZUl0ZXJhdG9yIGltcGxlbWVudGF0aW9uIGlzIG5vIGZhc3RlciwgYnV0IGtlZXBpbmcgdGhpcyBhcm91bmQgaW4gY2FzZSB0aGlzIGNoYW5nZXMgaW4gdGhlIGZ1dHVyZVxuICAgIC8vXG4gICAgLy8gZnVuY3Rpb24gaW5kZXhUcmVlKG5vZGUpIHtcbiAgICAvLyAgICAgdmFyIG5vZGVJdGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZU5vZGVJdGVyYXRvcihub2RlLCBOb2RlRmlsdGVyLlNIT1dfRUxFTUVOVCk7XG4gICAgLy8gICAgIHZhciBlbDtcbiAgICAvLyAgICAgd2hpbGUoKGVsID0gbm9kZUl0ZXJhdG9yLm5leHROb2RlKCkpKSB7XG4gICAgLy8gICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShlbCk7XG4gICAgLy8gICAgICAgICBpZiAoa2V5KSB7XG4gICAgLy8gICAgICAgICAgICAgZnJvbU5vZGVzTG9va3VwW2tleV0gPSBlbDtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxuICAgIGZ1bmN0aW9uIGluZGV4VHJlZShub2RlKSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFIHx8IG5vZGUubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREUkMSkge1xuICAgICAgICB2YXIgY3VyQ2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICAgIHZhciBrZXkgPSBnZXROb2RlS2V5KGN1ckNoaWxkKTtcbiAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBmcm9tTm9kZXNMb29rdXBba2V5XSA9IGN1ckNoaWxkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFdhbGsgcmVjdXJzaXZlbHlcbiAgICAgICAgICBpbmRleFRyZWUoY3VyQ2hpbGQpO1xuXG4gICAgICAgICAgY3VyQ2hpbGQgPSBjdXJDaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGluZGV4VHJlZShmcm9tTm9kZSk7XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVOb2RlQWRkZWQoZWwpIHtcbiAgICAgIG9uTm9kZUFkZGVkKGVsKTtcblxuICAgICAgdmFyIGN1ckNoaWxkID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHdoaWxlIChjdXJDaGlsZCkge1xuICAgICAgICB2YXIgbmV4dFNpYmxpbmcgPSBjdXJDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICB2YXIga2V5ID0gZ2V0Tm9kZUtleShjdXJDaGlsZCk7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICB2YXIgdW5tYXRjaGVkRnJvbUVsID0gZnJvbU5vZGVzTG9va3VwW2tleV07XG4gICAgICAgICAgLy8gaWYgd2UgZmluZCBhIGR1cGxpY2F0ZSAjaWQgbm9kZSBpbiBjYWNoZSwgcmVwbGFjZSBgZWxgIHdpdGggY2FjaGUgdmFsdWVcbiAgICAgICAgICAvLyBhbmQgbW9ycGggaXQgdG8gdGhlIGNoaWxkIG5vZGUuXG4gICAgICAgICAgaWYgKHVubWF0Y2hlZEZyb21FbCAmJiBjb21wYXJlTm9kZU5hbWVzKGN1ckNoaWxkLCB1bm1hdGNoZWRGcm9tRWwpKSB7XG4gICAgICAgICAgICBjdXJDaGlsZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh1bm1hdGNoZWRGcm9tRWwsIGN1ckNoaWxkKTtcbiAgICAgICAgICAgIG1vcnBoRWwodW5tYXRjaGVkRnJvbUVsLCBjdXJDaGlsZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IGNhbGwgZm9yIGN1ckNoaWxkIGFuZCBpdCdzIGNoaWxkcmVuIHRvIHNlZSBpZiB3ZSBmaW5kIHNvbWV0aGluZyBpblxuICAgICAgICAgIC8vIGZyb21Ob2Rlc0xvb2t1cFxuICAgICAgICAgIGhhbmRsZU5vZGVBZGRlZChjdXJDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJDaGlsZCA9IG5leHRTaWJsaW5nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSkge1xuICAgICAgLy8gV2UgaGF2ZSBwcm9jZXNzZWQgYWxsIG9mIHRoZSBcInRvIG5vZGVzXCIuIElmIGN1ckZyb21Ob2RlQ2hpbGQgaXNcbiAgICAgIC8vIG5vbi1udWxsIHRoZW4gd2Ugc3RpbGwgaGF2ZSBzb21lIGZyb20gbm9kZXMgbGVmdCBvdmVyIHRoYXQgbmVlZFxuICAgICAgLy8gdG8gYmUgcmVtb3ZlZFxuICAgICAgd2hpbGUgKGN1ckZyb21Ob2RlQ2hpbGQpIHtcbiAgICAgICAgdmFyIGZyb21OZXh0U2libGluZyA9IGN1ckZyb21Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmICgoY3VyRnJvbU5vZGVLZXkgPSBnZXROb2RlS2V5KGN1ckZyb21Ob2RlQ2hpbGQpKSkge1xuICAgICAgICAgIC8vIFNpbmNlIHRoZSBub2RlIGlzIGtleWVkIGl0IG1pZ2h0IGJlIG1hdGNoZWQgdXAgbGF0ZXIgc28gd2UgZGVmZXJcbiAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICBhZGRLZXllZFJlbW92YWwoY3VyRnJvbU5vZGVLZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgIC8vICAgICAgIHN0aWxsIGEgY2hhbmNlIHRoZXkgd2lsbCBiZSBtYXRjaGVkIHVwIGxhdGVyXG4gICAgICAgICAgcmVtb3ZlTm9kZShjdXJGcm9tTm9kZUNoaWxkLCBmcm9tRWwsIHRydWUgLyogc2tpcCBrZXllZCBub2RlcyAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21OZXh0U2libGluZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3JwaEVsKGZyb21FbCwgdG9FbCwgY2hpbGRyZW5Pbmx5KSB7XG4gICAgICB2YXIgdG9FbEtleSA9IGdldE5vZGVLZXkodG9FbCk7XG5cbiAgICAgIGlmICh0b0VsS2V5KSB7XG4gICAgICAgIC8vIElmIGFuIGVsZW1lbnQgd2l0aCBhbiBJRCBpcyBiZWluZyBtb3JwaGVkIHRoZW4gaXQgd2lsbCBiZSBpbiB0aGUgZmluYWxcbiAgICAgICAgLy8gRE9NIHNvIGNsZWFyIGl0IG91dCBvZiB0aGUgc2F2ZWQgZWxlbWVudHMgY29sbGVjdGlvblxuICAgICAgICBkZWxldGUgZnJvbU5vZGVzTG9va3VwW3RvRWxLZXldO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgICAvLyBvcHRpb25hbFxuICAgICAgICBpZiAob25CZWZvcmVFbFVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgYXR0cmlidXRlcyBvbiBvcmlnaW5hbCBET00gZWxlbWVudCBmaXJzdFxuICAgICAgICBtb3JwaEF0dHJzKGZyb21FbCwgdG9FbCk7XG4gICAgICAgIC8vIG9wdGlvbmFsXG4gICAgICAgIG9uRWxVcGRhdGVkKGZyb21FbCk7XG5cbiAgICAgICAgaWYgKG9uQmVmb3JlRWxDaGlsZHJlblVwZGF0ZWQoZnJvbUVsLCB0b0VsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZyb21FbC5ub2RlTmFtZSAhPT0gJ1RFWFRBUkVBJykge1xuICAgICAgICBtb3JwaENoaWxkcmVuKGZyb21FbCwgdG9FbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVjaWFsRWxIYW5kbGVycy5URVhUQVJFQShmcm9tRWwsIHRvRWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vcnBoQ2hpbGRyZW4oZnJvbUVsLCB0b0VsKSB7XG4gICAgICB2YXIgc2tpcEZyb20gPSBza2lwRnJvbUNoaWxkcmVuKGZyb21FbCk7XG4gICAgICB2YXIgY3VyVG9Ob2RlQ2hpbGQgPSB0b0VsLmZpcnN0Q2hpbGQ7XG4gICAgICB2YXIgY3VyRnJvbU5vZGVDaGlsZCA9IGZyb21FbC5maXJzdENoaWxkO1xuICAgICAgdmFyIGN1clRvTm9kZUtleTtcbiAgICAgIHZhciBjdXJGcm9tTm9kZUtleTtcblxuICAgICAgdmFyIGZyb21OZXh0U2libGluZztcbiAgICAgIHZhciB0b05leHRTaWJsaW5nO1xuICAgICAgdmFyIG1hdGNoaW5nRnJvbUVsO1xuXG4gICAgICAvLyB3YWxrIHRoZSBjaGlsZHJlblxuICAgICAgb3V0ZXI6IHdoaWxlIChjdXJUb05vZGVDaGlsZCkge1xuICAgICAgICB0b05leHRTaWJsaW5nID0gY3VyVG9Ob2RlQ2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgIGN1clRvTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyVG9Ob2RlQ2hpbGQpO1xuXG4gICAgICAgIC8vIHdhbGsgdGhlIGZyb21Ob2RlIGNoaWxkcmVuIGFsbCB0aGUgd2F5IHRocm91Z2hcbiAgICAgICAgd2hpbGUgKCFza2lwRnJvbSAmJiBjdXJGcm9tTm9kZUNoaWxkKSB7XG4gICAgICAgICAgZnJvbU5leHRTaWJsaW5nID0gY3VyRnJvbU5vZGVDaGlsZC5uZXh0U2libGluZztcblxuICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5pc1NhbWVOb2RlICYmIGN1clRvTm9kZUNoaWxkLmlzU2FtZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCkpIHtcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjdXJGcm9tTm9kZUtleSA9IGdldE5vZGVLZXkoY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICB2YXIgY3VyRnJvbU5vZGVUeXBlID0gY3VyRnJvbU5vZGVDaGlsZC5ub2RlVHlwZTtcblxuICAgICAgICAgIC8vIHRoaXMgbWVhbnMgaWYgdGhlIGN1ckZyb21Ob2RlQ2hpbGQgZG9lc250IGhhdmUgYSBtYXRjaCB3aXRoIHRoZSBjdXJUb05vZGVDaGlsZFxuICAgICAgICAgIHZhciBpc0NvbXBhdGlibGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBjdXJUb05vZGVDaGlsZC5ub2RlVHlwZSkge1xuICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgIC8vIEJvdGggbm9kZXMgYmVpbmcgY29tcGFyZWQgYXJlIEVsZW1lbnQgbm9kZXNcblxuICAgICAgICAgICAgICBpZiAoY3VyVG9Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHRhcmdldCBub2RlIGhhcyBhIGtleSBzbyB3ZSB3YW50IHRvIG1hdGNoIGl0IHVwIHdpdGggdGhlIGNvcnJlY3QgZWxlbWVudFxuICAgICAgICAgICAgICAgIC8vIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZVxuICAgICAgICAgICAgICAgIGlmIChjdXJUb05vZGVLZXkgIT09IGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAvLyBUaGUgY3VycmVudCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbCBET00gdHJlZSBkb2VzIG5vdCBoYXZlIGEgbWF0Y2hpbmcga2V5IHNvXG4gICAgICAgICAgICAgICAgICAvLyBsZXQncyBjaGVjayBvdXIgbG9va3VwIHRvIHNlZSBpZiB0aGVyZSBpcyBhIG1hdGNoaW5nIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAvLyBET00gdHJlZVxuICAgICAgICAgICAgICAgICAgaWYgKChtYXRjaGluZ0Zyb21FbCA9IGZyb21Ob2Rlc0xvb2t1cFtjdXJUb05vZGVLZXldKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbU5leHRTaWJsaW5nID09PSBtYXRjaGluZ0Zyb21FbCkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3Igc2luZ2xlIGVsZW1lbnQgcmVtb3ZhbHMuIFRvIGF2b2lkIHJlbW92aW5nIHRoZSBvcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICAgIC8vIERPTSBub2RlIG91dCBvZiB0aGUgdHJlZSAoc2luY2UgdGhhdCBjYW4gYnJlYWsgQ1NTIHRyYW5zaXRpb25zLCBldGMuKSxcbiAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3aWxsIGluc3RlYWQgZGlzY2FyZCB0aGUgY3VycmVudCBub2RlIGFuZCB3YWl0IHVudGlsIHRoZSBuZXh0XG4gICAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0aW9uIHRvIHByb3Blcmx5IG1hdGNoIHVwIHRoZSBrZXllZCB0YXJnZXQgZWxlbWVudCB3aXRoIGl0cyBtYXRjaGluZ1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgaW4gdGhlIG9yaWdpbmFsIHRyZWVcbiAgICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBhIG1hdGNoaW5nIGtleWVkIGVsZW1lbnQgc29tZXdoZXJlIGluIHRoZSBvcmlnaW5hbCBET00gdHJlZS5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBMZXQncyBtb3ZlIHRoZSBvcmlnaW5hbCBET00gbm9kZSBpbnRvIHRoZSBjdXJyZW50IHBvc2l0aW9uIGFuZCBtb3JwaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGl0LlxuXG4gICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogV2UgdXNlIGluc2VydEJlZm9yZSBpbnN0ZWFkIG9mIHJlcGxhY2VDaGlsZCBiZWNhdXNlIHdlIHdhbnQgdG8gZ28gdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBgcmVtb3ZlTm9kZSgpYCBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgdGhhdCBpcyBiZWluZyBkaXNjYXJkZWQgc28gdGhhdFxuICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbCBsaWZlY3ljbGUgaG9va3MgYXJlIGNvcnJlY3RseSBpbnZva2VkXG4gICAgICAgICAgICAgICAgICAgICAgZnJvbUVsLmluc2VydEJlZm9yZShtYXRjaGluZ0Zyb21FbCwgY3VyRnJvbU5vZGVDaGlsZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tTmV4dFNpYmxpbmcgPSBjdXJGcm9tTm9kZUNoaWxkLm5leHRTaWJsaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBtYXRjaGluZ0Zyb21FbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG5vZGVzIGFyZSBub3QgY29tcGF0aWJsZSBzaW5jZSB0aGUgXCJ0b1wiIG5vZGUgaGFzIGEga2V5IGFuZCB0aGVyZVxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBubyBtYXRjaGluZyBrZXllZCBub2RlIGluIHRoZSBzb3VyY2UgdHJlZVxuICAgICAgICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JpZ2luYWwgaGFzIGEga2V5XG4gICAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpc0NvbXBhdGlibGUgPSBpc0NvbXBhdGlibGUgIT09IGZhbHNlICYmIGNvbXBhcmVOb2RlTmFtZXMoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICBpZiAoaXNDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgZm91bmQgY29tcGF0aWJsZSBET00gZWxlbWVudHMgc28gdHJhbnNmb3JtXG4gICAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgXCJmcm9tXCIgbm9kZSB0byBtYXRjaCB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHRhcmdldCBET00gbm9kZS5cbiAgICAgICAgICAgICAgICAvLyBNT1JQSFxuICAgICAgICAgICAgICAgIG1vcnBoRWwoY3VyRnJvbU5vZGVDaGlsZCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VyRnJvbU5vZGVUeXBlID09PSBURVhUX05PREUgfHwgY3VyRnJvbU5vZGVUeXBlID09IENPTU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICAvLyBCb3RoIG5vZGVzIGJlaW5nIGNvbXBhcmVkIGFyZSBUZXh0IG9yIENvbW1lbnQgbm9kZXNcbiAgICAgICAgICAgICAgaXNDb21wYXRpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgLy8gU2ltcGx5IHVwZGF0ZSBub2RlVmFsdWUgb24gdGhlIG9yaWdpbmFsIG5vZGUgdG9cbiAgICAgICAgICAgICAgLy8gY2hhbmdlIHRoZSB0ZXh0IHZhbHVlXG4gICAgICAgICAgICAgIGlmIChjdXJGcm9tTm9kZUNoaWxkLm5vZGVWYWx1ZSAhPT0gY3VyVG9Ob2RlQ2hpbGQubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY3VyRnJvbU5vZGVDaGlsZC5ub2RlVmFsdWUgPSBjdXJUb05vZGVDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc0NvbXBhdGlibGUpIHtcbiAgICAgICAgICAgIC8vIEFkdmFuY2UgYm90aCB0aGUgXCJ0b1wiIGNoaWxkIGFuZCB0aGUgXCJmcm9tXCIgY2hpbGQgc2luY2Ugd2UgZm91bmQgYSBtYXRjaFxuICAgICAgICAgICAgLy8gTm90aGluZyBlbHNlIHRvIGRvIGFzIHdlIGFscmVhZHkgcmVjdXJzaXZlbHkgY2FsbGVkIG1vcnBoQ2hpbGRyZW4gYWJvdmVcbiAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gdG9OZXh0U2libGluZztcbiAgICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBjb250aW51ZSBvdXRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBObyBjb21wYXRpYmxlIG1hdGNoIHNvIHJlbW92ZSB0aGUgb2xkIG5vZGUgZnJvbSB0aGUgRE9NIGFuZCBjb250aW51ZSB0cnlpbmcgdG8gZmluZCBhXG4gICAgICAgICAgLy8gbWF0Y2ggaW4gdGhlIG9yaWdpbmFsIERPTS4gSG93ZXZlciwgd2Ugb25seSBkbyB0aGlzIGlmIHRoZSBmcm9tIG5vZGUgaXMgbm90IGtleWVkXG4gICAgICAgICAgLy8gc2luY2UgaXQgaXMgcG9zc2libGUgdGhhdCBhIGtleWVkIG5vZGUgbWlnaHQgbWF0Y2ggdXAgd2l0aCBhIG5vZGUgc29tZXdoZXJlIGVsc2UgaW4gdGhlXG4gICAgICAgICAgLy8gdGFyZ2V0IHRyZWUgYW5kIHdlIGRvbid0IHdhbnQgdG8gZGlzY2FyZCBpdCBqdXN0IHlldCBzaW5jZSBpdCBzdGlsbCBtaWdodCBmaW5kIGFcbiAgICAgICAgICAvLyBob21lIGluIHRoZSBmaW5hbCBET00gdHJlZS4gQWZ0ZXIgZXZlcnl0aGluZyBpcyBkb25lIHdlIHdpbGwgcmVtb3ZlIGFueSBrZXllZCBub2Rlc1xuICAgICAgICAgIC8vIHRoYXQgZGlkbid0IGZpbmQgYSBob21lXG4gICAgICAgICAgaWYgKGN1ckZyb21Ob2RlS2V5KSB7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgbm9kZSBpcyBrZXllZCBpdCBtaWdodCBiZSBtYXRjaGVkIHVwIGxhdGVyIHNvIHdlIGRlZmVyXG4gICAgICAgICAgICAvLyB0aGUgYWN0dWFsIHJlbW92YWwgdG8gbGF0ZXJcbiAgICAgICAgICAgIGFkZEtleWVkUmVtb3ZhbChjdXJGcm9tTm9kZUtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IHdlIHNraXAgbmVzdGVkIGtleWVkIG5vZGVzIGZyb20gYmVpbmcgcmVtb3ZlZCBzaW5jZSB0aGVyZSBpc1xuICAgICAgICAgICAgLy8gICAgICAgc3RpbGwgYSBjaGFuY2UgdGhleSB3aWxsIGJlIG1hdGNoZWQgdXAgbGF0ZXJcbiAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VyRnJvbU5vZGVDaGlsZCwgZnJvbUVsLCB0cnVlIC8qIHNraXAga2V5ZWQgbm9kZXMgKi8pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICAgIH0gLy8gRU5EOiB3aGlsZShjdXJGcm9tTm9kZUNoaWxkKSB7fVxuXG4gICAgICAgIC8vIElmIHdlIGdvdCB0aGlzIGZhciB0aGVuIHdlIGRpZCBub3QgZmluZCBhIGNhbmRpZGF0ZSBtYXRjaCBmb3JcbiAgICAgICAgLy8gb3VyIFwidG8gbm9kZVwiIGFuZCB3ZSBleGhhdXN0ZWQgYWxsIG9mIHRoZSBjaGlsZHJlbiBcImZyb21cIlxuICAgICAgICAvLyBub2Rlcy4gVGhlcmVmb3JlLCB3ZSB3aWxsIGp1c3QgYXBwZW5kIHRoZSBjdXJyZW50IFwidG9cIiBub2RlXG4gICAgICAgIC8vIHRvIHRoZSBlbmRcbiAgICAgICAgaWYgKGN1clRvTm9kZUtleSAmJiAobWF0Y2hpbmdGcm9tRWwgPSBmcm9tTm9kZXNMb29rdXBbY3VyVG9Ob2RlS2V5XSkgJiYgY29tcGFyZU5vZGVOYW1lcyhtYXRjaGluZ0Zyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpKSB7XG4gICAgICAgICAgLy8gTU9SUEhcbiAgICAgICAgICBpZighc2tpcEZyb20peyBhZGRDaGlsZChmcm9tRWwsIG1hdGNoaW5nRnJvbUVsKTsgfVxuICAgICAgICAgIG1vcnBoRWwobWF0Y2hpbmdGcm9tRWwsIGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQgPSBvbkJlZm9yZU5vZGVBZGRlZChjdXJUb05vZGVDaGlsZCk7XG4gICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKG9uQmVmb3JlTm9kZUFkZGVkUmVzdWx0KSB7XG4gICAgICAgICAgICAgIGN1clRvTm9kZUNoaWxkID0gb25CZWZvcmVOb2RlQWRkZWRSZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUpIHtcbiAgICAgICAgICAgICAgY3VyVG9Ob2RlQ2hpbGQgPSBjdXJUb05vZGVDaGlsZC5hY3R1YWxpemUoZnJvbUVsLm93bmVyRG9jdW1lbnQgfHwgZG9jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZENoaWxkKGZyb21FbCwgY3VyVG9Ob2RlQ2hpbGQpO1xuICAgICAgICAgICAgaGFuZGxlTm9kZUFkZGVkKGN1clRvTm9kZUNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjdXJUb05vZGVDaGlsZCA9IHRvTmV4dFNpYmxpbmc7XG4gICAgICAgIGN1ckZyb21Ob2RlQ2hpbGQgPSBmcm9tTmV4dFNpYmxpbmc7XG4gICAgICB9XG5cbiAgICAgIGNsZWFudXBGcm9tRWwoZnJvbUVsLCBjdXJGcm9tTm9kZUNoaWxkLCBjdXJGcm9tTm9kZUtleSk7XG5cbiAgICAgIHZhciBzcGVjaWFsRWxIYW5kbGVyID0gc3BlY2lhbEVsSGFuZGxlcnNbZnJvbUVsLm5vZGVOYW1lXTtcbiAgICAgIGlmIChzcGVjaWFsRWxIYW5kbGVyKSB7XG4gICAgICAgIHNwZWNpYWxFbEhhbmRsZXIoZnJvbUVsLCB0b0VsKTtcbiAgICAgIH1cbiAgICB9IC8vIEVORDogbW9ycGhDaGlsZHJlbiguLi4pXG5cbiAgICB2YXIgbW9ycGhlZE5vZGUgPSBmcm9tTm9kZTtcbiAgICB2YXIgbW9ycGhlZE5vZGVUeXBlID0gbW9ycGhlZE5vZGUubm9kZVR5cGU7XG4gICAgdmFyIHRvTm9kZVR5cGUgPSB0b05vZGUubm9kZVR5cGU7XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSkge1xuICAgICAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIHdlIGFyZSBnaXZlbiB0d28gRE9NIG5vZGVzIHRoYXQgYXJlIG5vdFxuICAgICAgLy8gY29tcGF0aWJsZSAoZS5nLiA8ZGl2PiAtLT4gPHNwYW4+IG9yIDxkaXY+IC0tPiBURVhUKVxuICAgICAgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBFTEVNRU5UX05PREUpIHtcbiAgICAgICAgICBpZiAoIWNvbXBhcmVOb2RlTmFtZXMoZnJvbU5vZGUsIHRvTm9kZSkpIHtcbiAgICAgICAgICAgIG9uTm9kZURpc2NhcmRlZChmcm9tTm9kZSk7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZSA9IG1vdmVDaGlsZHJlbihmcm9tTm9kZSwgY3JlYXRlRWxlbWVudE5TKHRvTm9kZS5ub2RlTmFtZSwgdG9Ob2RlLm5hbWVzcGFjZVVSSSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBHb2luZyBmcm9tIGFuIGVsZW1lbnQgbm9kZSB0byBhIHRleHQgbm9kZVxuICAgICAgICAgIG1vcnBoZWROb2RlID0gdG9Ob2RlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1vcnBoZWROb2RlVHlwZSA9PT0gVEVYVF9OT0RFIHx8IG1vcnBoZWROb2RlVHlwZSA9PT0gQ09NTUVOVF9OT0RFKSB7IC8vIFRleHQgb3IgY29tbWVudCBub2RlXG4gICAgICAgIGlmICh0b05vZGVUeXBlID09PSBtb3JwaGVkTm9kZVR5cGUpIHtcbiAgICAgICAgICBpZiAobW9ycGhlZE5vZGUubm9kZVZhbHVlICE9PSB0b05vZGUubm9kZVZhbHVlKSB7XG4gICAgICAgICAgICBtb3JwaGVkTm9kZS5ub2RlVmFsdWUgPSB0b05vZGUubm9kZVZhbHVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUZXh0IG5vZGUgdG8gc29tZXRoaW5nIGVsc2VcbiAgICAgICAgICBtb3JwaGVkTm9kZSA9IHRvTm9kZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb3JwaGVkTm9kZSA9PT0gdG9Ob2RlKSB7XG4gICAgICAvLyBUaGUgXCJ0byBub2RlXCIgd2FzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIFwiZnJvbSBub2RlXCIgc28gd2UgaGFkIHRvXG4gICAgICAvLyB0b3NzIG91dCB0aGUgXCJmcm9tIG5vZGVcIiBhbmQgdXNlIHRoZSBcInRvIG5vZGVcIlxuICAgICAgb25Ob2RlRGlzY2FyZGVkKGZyb21Ob2RlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRvTm9kZS5pc1NhbWVOb2RlICYmIHRvTm9kZS5pc1NhbWVOb2RlKG1vcnBoZWROb2RlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1vcnBoRWwobW9ycGhlZE5vZGUsIHRvTm9kZSwgY2hpbGRyZW5Pbmx5KTtcblxuICAgICAgLy8gV2Ugbm93IG5lZWQgdG8gbG9vcCBvdmVyIGFueSBrZXllZCBub2RlcyB0aGF0IG1pZ2h0IG5lZWQgdG8gYmVcbiAgICAgIC8vIHJlbW92ZWQuIFdlIG9ubHkgZG8gdGhlIHJlbW92YWwgaWYgd2Uga25vdyB0aGF0IHRoZSBrZXllZCBub2RlXG4gICAgICAvLyBuZXZlciBmb3VuZCBhIG1hdGNoLiBXaGVuIGEga2V5ZWQgbm9kZSBpcyBtYXRjaGVkIHVwIHdlIHJlbW92ZVxuICAgICAgLy8gaXQgb3V0IG9mIGZyb21Ob2Rlc0xvb2t1cCBhbmQgd2UgdXNlIGZyb21Ob2Rlc0xvb2t1cCB0byBkZXRlcm1pbmVcbiAgICAgIC8vIGlmIGEga2V5ZWQgbm9kZSBoYXMgYmVlbiBtYXRjaGVkIHVwIG9yIG5vdFxuICAgICAgaWYgKGtleWVkUmVtb3ZhbExpc3QpIHtcbiAgICAgICAgZm9yICh2YXIgaT0wLCBsZW49a2V5ZWRSZW1vdmFsTGlzdC5sZW5ndGg7IGk8bGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgZWxUb1JlbW92ZSA9IGZyb21Ob2Rlc0xvb2t1cFtrZXllZFJlbW92YWxMaXN0W2ldXTtcbiAgICAgICAgICBpZiAoZWxUb1JlbW92ZSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShlbFRvUmVtb3ZlLCBlbFRvUmVtb3ZlLnBhcmVudE5vZGUsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNoaWxkcmVuT25seSAmJiBtb3JwaGVkTm9kZSAhPT0gZnJvbU5vZGUgJiYgZnJvbU5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgaWYgKG1vcnBoZWROb2RlLmFjdHVhbGl6ZSkge1xuICAgICAgICBtb3JwaGVkTm9kZSA9IG1vcnBoZWROb2RlLmFjdHVhbGl6ZShmcm9tTm9kZS5vd25lckRvY3VtZW50IHx8IGRvYyk7XG4gICAgICB9XG4gICAgICAvLyBJZiB3ZSBoYWQgdG8gc3dhcCBvdXQgdGhlIGZyb20gbm9kZSB3aXRoIGEgbmV3IG5vZGUgYmVjYXVzZSB0aGUgb2xkXG4gICAgICAvLyBub2RlIHdhcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB0YXJnZXQgbm9kZSB0aGVuIHdlIG5lZWQgdG9cbiAgICAgIC8vIHJlcGxhY2UgdGhlIG9sZCBET00gbm9kZSBpbiB0aGUgb3JpZ2luYWwgRE9NIHRyZWUuIFRoaXMgaXMgb25seVxuICAgICAgLy8gcG9zc2libGUgaWYgdGhlIG9yaWdpbmFsIERPTSBub2RlIHdhcyBwYXJ0IG9mIGEgRE9NIHRyZWUgd2hpY2hcbiAgICAgIC8vIHdlIGtub3cgaXMgdGhlIGNhc2UgaWYgaXQgaGFzIGEgcGFyZW50IG5vZGUuXG4gICAgICBmcm9tTm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChtb3JwaGVkTm9kZSwgZnJvbU5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBtb3JwaGVkTm9kZTtcbiAgfTtcbn1cblxudmFyIG1vcnBoZG9tID0gbW9ycGhkb21GYWN0b3J5KG1vcnBoQXR0cnMpO1xuXG5leHBvcnQgZGVmYXVsdCBtb3JwaGRvbTtcbiIsICJpbXBvcnQge1xuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfRElTQUJMRV9XSVRILFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfUFJVTkUsXG4gIFBIWF9ST09UX0lELFxuICBQSFhfU0VTU0lPTixcbiAgUEhYX1NLSVAsXG4gIFBIWF9TVEFUSUMsXG4gIFBIWF9UUklHR0VSX0FDVElPTixcbiAgUEhYX1VQREFURSxcbiAgUEhYX1NUUkVBTSxcbiAgUEhYX1NUUkVBTV9SRUYsXG4gIFBIWF9WSUVXUE9SVF9UT1AsXG4gIFBIWF9WSUVXUE9SVF9CT1RUT00sXG59IGZyb20gXCIuL2NvbnN0YW50c1wiXG5cbmltcG9ydCB7XG4gIGRldGVjdER1cGxpY2F0ZUlkcyxcbiAgaXNDaWRcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgRE9NUG9zdE1vcnBoUmVzdG9yZXIgZnJvbSBcIi4vZG9tX3Bvc3RfbW9ycGhfcmVzdG9yZXJcIlxuaW1wb3J0IG1vcnBoZG9tIGZyb20gXCJtb3JwaGRvbVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERPTVBhdGNoIHtcbiAgc3RhdGljIHBhdGNoRWwoZnJvbUVsLCB0b0VsLCBhY3RpdmVFbGVtZW50KXtcbiAgICBtb3JwaGRvbShmcm9tRWwsIHRvRWwsIHtcbiAgICAgIGNoaWxkcmVuT25seTogZmFsc2UsXG4gICAgICBvbkJlZm9yZUVsVXBkYXRlZDogKGZyb21FbCwgdG9FbCkgPT4ge1xuICAgICAgICBpZihhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQuaXNTYW1lTm9kZShmcm9tRWwpICYmIERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpKXtcbiAgICAgICAgICBET00ubWVyZ2VGb2N1c2VkSW5wdXQoZnJvbUVsLCB0b0VsKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXcsIGNvbnRhaW5lciwgaWQsIGh0bWwsIHN0cmVhbXMsIHRhcmdldENJRCl7XG4gICAgdGhpcy52aWV3ID0gdmlld1xuICAgIHRoaXMubGl2ZVNvY2tldCA9IHZpZXcubGl2ZVNvY2tldFxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyXG4gICAgdGhpcy5pZCA9IGlkXG4gICAgdGhpcy5yb290SUQgPSB2aWV3LnJvb3QuaWRcbiAgICB0aGlzLmh0bWwgPSBodG1sXG4gICAgdGhpcy5zdHJlYW1zID0gc3RyZWFtc1xuICAgIHRoaXMuc3RyZWFtSW5zZXJ0cyA9IHt9XG4gICAgdGhpcy50YXJnZXRDSUQgPSB0YXJnZXRDSURcbiAgICB0aGlzLmNpZFBhdGNoID0gaXNDaWQodGhpcy50YXJnZXRDSUQpXG4gICAgdGhpcy5wZW5kaW5nUmVtb3ZlcyA9IFtdXG4gICAgdGhpcy5waHhSZW1vdmUgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhcInJlbW92ZVwiKVxuICAgIHRoaXMuY2FsbGJhY2tzID0ge1xuICAgICAgYmVmb3JlYWRkZWQ6IFtdLCBiZWZvcmV1cGRhdGVkOiBbXSwgYmVmb3JlcGh4Q2hpbGRBZGRlZDogW10sXG4gICAgICBhZnRlcmFkZGVkOiBbXSwgYWZ0ZXJ1cGRhdGVkOiBbXSwgYWZ0ZXJkaXNjYXJkZWQ6IFtdLCBhZnRlcnBoeENoaWxkQWRkZWQ6IFtdLFxuICAgICAgYWZ0ZXJ0cmFuc2l0aW9uc0Rpc2NhcmRlZDogW11cbiAgICB9XG4gIH1cblxuICBiZWZvcmUoa2luZCwgY2FsbGJhY2speyB0aGlzLmNhbGxiYWNrc1tgYmVmb3JlJHtraW5kfWBdLnB1c2goY2FsbGJhY2spIH1cbiAgYWZ0ZXIoa2luZCwgY2FsbGJhY2speyB0aGlzLmNhbGxiYWNrc1tgYWZ0ZXIke2tpbmR9YF0ucHVzaChjYWxsYmFjaykgfVxuXG4gIHRyYWNrQmVmb3JlKGtpbmQsIC4uLmFyZ3Mpe1xuICAgIHRoaXMuY2FsbGJhY2tzW2BiZWZvcmUke2tpbmR9YF0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayguLi5hcmdzKSlcbiAgfVxuXG4gIHRyYWNrQWZ0ZXIoa2luZCwgLi4uYXJncyl7XG4gICAgdGhpcy5jYWxsYmFja3NbYGFmdGVyJHtraW5kfWBdLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soLi4uYXJncykpXG4gIH1cblxuICBtYXJrUHJ1bmFibGVDb250ZW50Rm9yUmVtb3ZhbCgpe1xuICAgIGxldCBwaHhVcGRhdGUgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfVVBEQVRFKVxuICAgIERPTS5hbGwodGhpcy5jb250YWluZXIsIGBbJHtwaHhVcGRhdGV9PSR7UEhYX1NUUkVBTX1dYCwgZWwgPT4gZWwuaW5uZXJIVE1MID0gXCJcIilcbiAgICBET00uYWxsKHRoaXMuY29udGFpbmVyLCBgWyR7cGh4VXBkYXRlfT1hcHBlbmRdID4gKiwgWyR7cGh4VXBkYXRlfT1wcmVwZW5kXSA+ICpgLCBlbCA9PiB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX1BSVU5FLCBcIlwiKVxuICAgIH0pXG4gIH1cblxuICBwZXJmb3JtKCl7XG4gICAgbGV0IHt2aWV3LCBsaXZlU29ja2V0LCBjb250YWluZXIsIGh0bWx9ID0gdGhpc1xuICAgIGxldCB0YXJnZXRDb250YWluZXIgPSB0aGlzLmlzQ0lEUGF0Y2goKSA/IHRoaXMudGFyZ2V0Q0lEQ29udGFpbmVyKGh0bWwpIDogY29udGFpbmVyXG4gICAgaWYodGhpcy5pc0NJRFBhdGNoKCkgJiYgIXRhcmdldENvbnRhaW5lcil7IHJldHVybiB9XG5cbiAgICBsZXQgZm9jdXNlZCA9IGxpdmVTb2NrZXQuZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgbGV0IHtzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kfSA9IGZvY3VzZWQgJiYgRE9NLmhhc1NlbGVjdGlvblJhbmdlKGZvY3VzZWQpID8gZm9jdXNlZCA6IHt9XG4gICAgbGV0IHBoeFVwZGF0ZSA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVVBEQVRFKVxuICAgIGxldCBwaHhGZWVkYmFja0ZvciA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKVxuICAgIGxldCBkaXNhYmxlV2l0aCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfRElTQUJMRV9XSVRIKVxuICAgIGxldCBwaHhWaWV3cG9ydFRvcCA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVklFV1BPUlRfVE9QKVxuICAgIGxldCBwaHhWaWV3cG9ydEJvdHRvbSA9IGxpdmVTb2NrZXQuYmluZGluZyhQSFhfVklFV1BPUlRfQk9UVE9NKVxuICAgIGxldCBwaHhUcmlnZ2VyRXh0ZXJuYWwgPSBsaXZlU29ja2V0LmJpbmRpbmcoUEhYX1RSSUdHRVJfQUNUSU9OKVxuICAgIGxldCBhZGRlZCA9IFtdXG4gICAgbGV0IHRyYWNrZWRJbnB1dHMgPSBbXVxuICAgIGxldCB1cGRhdGVzID0gW11cbiAgICBsZXQgYXBwZW5kUHJlcGVuZFVwZGF0ZXMgPSBbXVxuXG4gICAgbGV0IGV4dGVybmFsRm9ybVRyaWdnZXJlZCA9IG51bGxcblxuICAgIGxldCBkaWZmSFRNTCA9IGxpdmVTb2NrZXQudGltZShcInByZW1vcnBoIGNvbnRhaW5lciBwcmVwXCIsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkRGlmZkhUTUwoY29udGFpbmVyLCBodG1sLCBwaHhVcGRhdGUsIHRhcmdldENvbnRhaW5lcilcbiAgICB9KVxuXG4gICAgdGhpcy50cmFja0JlZm9yZShcImFkZGVkXCIsIGNvbnRhaW5lcilcbiAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBjb250YWluZXIsIGNvbnRhaW5lcilcblxuICAgIGxpdmVTb2NrZXQudGltZShcIm1vcnBoZG9tXCIsICgpID0+IHtcbiAgICAgIHRoaXMuc3RyZWFtcy5mb3JFYWNoKChbcmVmLCBpbnNlcnRzLCBkZWxldGVJZHMsIHJlc2V0XSkgPT4ge1xuICAgICAgICBPYmplY3QuZW50cmllcyhpbnNlcnRzKS5mb3JFYWNoKChba2V5LCBbc3RyZWFtQXQsIGxpbWl0XV0pID0+IHtcbiAgICAgICAgICB0aGlzLnN0cmVhbUluc2VydHNba2V5XSA9IHtyZWYsIHN0cmVhbUF0LCBsaW1pdH1cbiAgICAgICAgfSlcbiAgICAgICAgaWYocmVzZXQgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgRE9NLmFsbChjb250YWluZXIsIGBbJHtQSFhfU1RSRUFNX1JFRn09XCIke3JlZn1cIl1gLCBjaGlsZCA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN0cmVhbUNoaWxkRWxlbWVudChjaGlsZClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZUlkcy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICBsZXQgY2hpbGQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgW2lkPVwiJHtpZH1cIl1gKVxuICAgICAgICAgIGlmKGNoaWxkKXsgdGhpcy5yZW1vdmVTdHJlYW1DaGlsZEVsZW1lbnQoY2hpbGQpIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG5cbiAgICAgIG1vcnBoZG9tKHRhcmdldENvbnRhaW5lciwgZGlmZkhUTUwsIHtcbiAgICAgICAgY2hpbGRyZW5Pbmx5OiB0YXJnZXRDb250YWluZXIuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpID09PSBudWxsLFxuICAgICAgICBnZXROb2RlS2V5OiAobm9kZSkgPT4ge1xuICAgICAgICAgIHJldHVybiBET00uaXNQaHhEZXN0cm95ZWQobm9kZSkgPyBudWxsIDogbm9kZS5pZFxuICAgICAgICB9LFxuICAgICAgICAvLyBza2lwIGluZGV4aW5nIGZyb20gY2hpbGRyZW4gd2hlbiBjb250YWluZXIgaXMgc3RyZWFtXG4gICAgICAgIHNraXBGcm9tQ2hpbGRyZW46IChmcm9tKSA9PiB7IHJldHVybiBmcm9tLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpID09PSBQSFhfU1RSRUFNIH0sXG4gICAgICAgIC8vIHRlbGwgbW9ycGhkb20gaG93IHRvIGFkZCBhIGNoaWxkXG4gICAgICAgIGFkZENoaWxkOiAocGFyZW50LCBjaGlsZCkgPT4ge1xuICAgICAgICAgIGxldCB7cmVmLCBzdHJlYW1BdCwgbGltaXR9ID0gdGhpcy5nZXRTdHJlYW1JbnNlcnQoY2hpbGQpXG4gICAgICAgICAgaWYocmVmID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCkgfVxuXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShjaGlsZCwgUEhYX1NUUkVBTV9SRUYsIGVsID0+IGVsLnNldEF0dHJpYnV0ZShQSFhfU1RSRUFNX1JFRiwgcmVmKSlcblxuICAgICAgICAgIC8vIHN0cmVhbWluZ1xuICAgICAgICAgIGlmKHN0cmVhbUF0ID09PSAwKXtcbiAgICAgICAgICAgIHBhcmVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA9PT0gLTEpe1xuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKVxuICAgICAgICAgIH0gZWxzZSBpZihzdHJlYW1BdCA+IDApe1xuICAgICAgICAgICAgbGV0IHNpYmxpbmcgPSBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbilbc3RyZWFtQXRdXG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBzaWJsaW5nKVxuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgY2hpbGRyZW4gPSBsaW1pdCAhPT0gbnVsbCAmJiBBcnJheS5mcm9tKHBhcmVudC5jaGlsZHJlbilcbiAgICAgICAgICBsZXQgY2hpbGRyZW5Ub1JlbW92ZSA9IFtdXG4gICAgICAgICAgaWYobGltaXQgJiYgbGltaXQgPCAwICYmIGNoaWxkcmVuLmxlbmd0aCA+IGxpbWl0ICogLTEpe1xuICAgICAgICAgICAgY2hpbGRyZW5Ub1JlbW92ZSA9IGNoaWxkcmVuLnNsaWNlKDAsIGNoaWxkcmVuLmxlbmd0aCArIGxpbWl0KVxuICAgICAgICAgIH0gZWxzZSBpZihsaW1pdCAmJiBsaW1pdCA+PSAwICYmIGNoaWxkcmVuLmxlbmd0aCA+IGxpbWl0KXtcbiAgICAgICAgICAgIGNoaWxkcmVuVG9SZW1vdmUgPSBjaGlsZHJlbi5zbGljZShsaW1pdClcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hpbGRyZW5Ub1JlbW92ZS5mb3JFYWNoKHJlbW92ZUNoaWxkID0+IHtcbiAgICAgICAgICAgIC8vIGRvIG5vdCByZW1vdmUgY2hpbGQgYXMgcGFydCBvZiBsaW1pdCBpZiB3ZSBhcmUgcmUtYWRkaW5nIGl0XG4gICAgICAgICAgICBpZighdGhpcy5zdHJlYW1JbnNlcnRzW3JlbW92ZUNoaWxkLmlkXSl7XG4gICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3RyZWFtQ2hpbGRFbGVtZW50KHJlbW92ZUNoaWxkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIG9uQmVmb3JlTm9kZUFkZGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBET00ubWF5YmVBZGRQcml2YXRlSG9va3MoZWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSlcbiAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwiYWRkZWRcIiwgZWwpXG4gICAgICAgICAgcmV0dXJuIGVsXG4gICAgICAgIH0sXG4gICAgICAgIG9uTm9kZUFkZGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBpZihlbC5nZXRBdHRyaWJ1dGUpeyB0aGlzLm1heWJlUmVPcmRlclN0cmVhbShlbCkgfVxuXG4gICAgICAgICAgLy8gaGFjayB0byBmaXggU2FmYXJpIGhhbmRsaW5nIG9mIGltZyBzcmNzZXQgYW5kIHZpZGVvIHRhZ3NcbiAgICAgICAgICBpZihlbCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQgJiYgZWwuc3Jjc2V0KXtcbiAgICAgICAgICAgIGVsLnNyY3NldCA9IGVsLnNyY3NldFxuICAgICAgICAgIH0gZWxzZSBpZihlbCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQgJiYgZWwuYXV0b3BsYXkpe1xuICAgICAgICAgICAgZWwucGxheSgpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKERPTS5pc05vd1RyaWdnZXJGb3JtRXh0ZXJuYWwoZWwsIHBoeFRyaWdnZXJFeHRlcm5hbCkpe1xuICAgICAgICAgICAgZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkID0gZWxcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZihlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSAmJiBET00uaXNGb3JtSW5wdXQoZWwpKXtcbiAgICAgICAgICAgIHRyYWNrZWRJbnB1dHMucHVzaChlbClcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gbmVzdGVkIHZpZXcgaGFuZGxpbmdcbiAgICAgICAgICBpZigoRE9NLmlzUGh4Q2hpbGQoZWwpICYmIHZpZXcub3duc0VsZW1lbnQoZWwpKSB8fCBET00uaXNQaHhTdGlja3koZWwpICYmIHZpZXcub3duc0VsZW1lbnQoZWwucGFyZW50Tm9kZSkpe1xuICAgICAgICAgICAgdGhpcy50cmFja0FmdGVyKFwicGh4Q2hpbGRBZGRlZFwiLCBlbClcbiAgICAgICAgICB9XG4gICAgICAgICAgYWRkZWQucHVzaChlbClcbiAgICAgICAgfSxcbiAgICAgICAgb25Ob2RlRGlzY2FyZGVkOiAoZWwpID0+IHRoaXMub25Ob2RlRGlzY2FyZGVkKGVsKSxcbiAgICAgICAgb25CZWZvcmVOb2RlRGlzY2FyZGVkOiAoZWwpID0+IHtcbiAgICAgICAgICBpZihlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9QUlVORSkgIT09IG51bGwpeyByZXR1cm4gdHJ1ZSB9XG4gICAgICAgICAgaWYoZWwucGFyZW50RWxlbWVudCAhPT0gbnVsbCAmJiBlbC5pZCAmJlxuICAgICAgICAgICAgRE9NLmlzUGh4VXBkYXRlKGVsLnBhcmVudEVsZW1lbnQsIHBoeFVwZGF0ZSwgW1BIWF9TVFJFQU0sIFwiYXBwZW5kXCIsIFwicHJlcGVuZFwiXSkpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKHRoaXMubWF5YmVQZW5kaW5nUmVtb3ZlKGVsKSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYodGhpcy5za2lwQ0lEU2libGluZyhlbCkpeyByZXR1cm4gZmFsc2UgfVxuXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgb25FbFVwZGF0ZWQ6IChlbCkgPT4ge1xuICAgICAgICAgIGlmKERPTS5pc05vd1RyaWdnZXJGb3JtRXh0ZXJuYWwoZWwsIHBoeFRyaWdnZXJFeHRlcm5hbCkpe1xuICAgICAgICAgICAgZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkID0gZWxcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlcy5wdXNoKGVsKVxuICAgICAgICAgIHRoaXMubWF5YmVSZU9yZGVyU3RyZWFtKGVsKVxuICAgICAgICB9LFxuICAgICAgICBvbkJlZm9yZUVsVXBkYXRlZDogKGZyb21FbCwgdG9FbCkgPT4ge1xuICAgICAgICAgIERPTS5tYXliZUFkZFByaXZhdGVIb29rcyh0b0VsLCBwaHhWaWV3cG9ydFRvcCwgcGh4Vmlld3BvcnRCb3R0b20pXG4gICAgICAgICAgRE9NLmNsZWFuQ2hpbGROb2Rlcyh0b0VsLCBwaHhVcGRhdGUpXG4gICAgICAgICAgaWYodGhpcy5za2lwQ0lEU2libGluZyh0b0VsKSl7IHJldHVybiBmYWxzZSB9XG4gICAgICAgICAgaWYoRE9NLmlzUGh4U3RpY2t5KGZyb21FbCkpeyByZXR1cm4gZmFsc2UgfVxuICAgICAgICAgIGlmKERPTS5pc0lnbm9yZWQoZnJvbUVsLCBwaHhVcGRhdGUpIHx8IChmcm9tRWwuZm9ybSAmJiBmcm9tRWwuZm9ybS5pc1NhbWVOb2RlKGV4dGVybmFsRm9ybVRyaWdnZXJlZCkpKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2lzSWdub3JlZDogdHJ1ZX0pXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoZnJvbUVsLnR5cGUgPT09IFwibnVtYmVyXCIgJiYgKGZyb21FbC52YWxpZGl0eSAmJiBmcm9tRWwudmFsaWRpdHkuYmFkSW5wdXQpKXsgcmV0dXJuIGZhbHNlIH1cbiAgICAgICAgICBpZighRE9NLnN5bmNQZW5kaW5nUmVmKGZyb21FbCwgdG9FbCwgZGlzYWJsZVdpdGgpKXtcbiAgICAgICAgICAgIGlmKERPTS5pc1VwbG9hZElucHV0KGZyb21FbCkpe1xuICAgICAgICAgICAgICB0aGlzLnRyYWNrQmVmb3JlKFwidXBkYXRlZFwiLCBmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICAgIHVwZGF0ZXMucHVzaChmcm9tRWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBET00uYXBwbHlTdGlja3lPcGVyYXRpb25zKGZyb21FbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIG5lc3RlZCB2aWV3IGhhbmRsaW5nXG4gICAgICAgICAgaWYoRE9NLmlzUGh4Q2hpbGQodG9FbCkpe1xuICAgICAgICAgICAgbGV0IHByZXZTZXNzaW9uID0gZnJvbUVsLmdldEF0dHJpYnV0ZShQSFhfU0VTU0lPTilcbiAgICAgICAgICAgIERPTS5tZXJnZUF0dHJzKGZyb21FbCwgdG9FbCwge2V4Y2x1ZGU6IFtQSFhfU1RBVElDXX0pXG4gICAgICAgICAgICBpZihwcmV2U2Vzc2lvbiAhPT0gXCJcIil7IGZyb21FbC5zZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04sIHByZXZTZXNzaW9uKSB9XG4gICAgICAgICAgICBmcm9tRWwuc2V0QXR0cmlidXRlKFBIWF9ST09UX0lELCB0aGlzLnJvb3RJRClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnMoZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaW5wdXQgaGFuZGxpbmdcbiAgICAgICAgICBET00uY29weVByaXZhdGVzKHRvRWwsIGZyb21FbClcblxuICAgICAgICAgIGxldCBpc0ZvY3VzZWRGb3JtRWwgPSBmb2N1c2VkICYmIGZyb21FbC5pc1NhbWVOb2RlKGZvY3VzZWQpICYmIERPTS5pc0Zvcm1JbnB1dChmcm9tRWwpXG4gICAgICAgICAgaWYoaXNGb2N1c2VkRm9ybUVsICYmIGZyb21FbC50eXBlICE9PSBcImhpZGRlblwiKXtcbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIERPTS5tZXJnZUZvY3VzZWRJbnB1dChmcm9tRWwsIHRvRWwpXG4gICAgICAgICAgICBET00uc3luY0F0dHJzVG9Qcm9wcyhmcm9tRWwpXG4gICAgICAgICAgICB1cGRhdGVzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgRE9NLmFwcGx5U3RpY2t5T3BlcmF0aW9ucyhmcm9tRWwpXG4gICAgICAgICAgICB0cmFja2VkSW5wdXRzLnB1c2goZnJvbUVsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKERPTS5pc1BoeFVwZGF0ZSh0b0VsLCBwaHhVcGRhdGUsIFtcImFwcGVuZFwiLCBcInByZXBlbmRcIl0pKXtcbiAgICAgICAgICAgICAgYXBwZW5kUHJlcGVuZFVwZGF0ZXMucHVzaChuZXcgRE9NUG9zdE1vcnBoUmVzdG9yZXIoZnJvbUVsLCB0b0VsLCB0b0VsLmdldEF0dHJpYnV0ZShwaHhVcGRhdGUpKSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgRE9NLnN5bmNBdHRyc1RvUHJvcHModG9FbClcbiAgICAgICAgICAgIERPTS5hcHBseVN0aWNreU9wZXJhdGlvbnModG9FbClcbiAgICAgICAgICAgIGlmKHRvRWwuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSAmJiBET00uaXNGb3JtSW5wdXQodG9FbCkpe1xuICAgICAgICAgICAgICB0cmFja2VkSW5wdXRzLnB1c2godG9FbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJhY2tCZWZvcmUoXCJ1cGRhdGVkXCIsIGZyb21FbCwgdG9FbClcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZihsaXZlU29ja2V0LmlzRGVidWdFbmFibGVkKCkpeyBkZXRlY3REdXBsaWNhdGVJZHMoKSB9XG5cbiAgICBpZihhcHBlbmRQcmVwZW5kVXBkYXRlcy5sZW5ndGggPiAwKXtcbiAgICAgIGxpdmVTb2NrZXQudGltZShcInBvc3QtbW9ycGggYXBwZW5kL3ByZXBlbmQgcmVzdG9yYXRpb25cIiwgKCkgPT4ge1xuICAgICAgICBhcHBlbmRQcmVwZW5kVXBkYXRlcy5mb3JFYWNoKHVwZGF0ZSA9PiB1cGRhdGUucGVyZm9ybSgpKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICB0cmFja2VkSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgRE9NLm1heWJlSGlkZUZlZWRiYWNrKHRhcmdldENvbnRhaW5lciwgaW5wdXQsIHBoeEZlZWRiYWNrRm9yKVxuICAgIH0pXG5cbiAgICBsaXZlU29ja2V0LnNpbGVuY2VFdmVudHMoKCkgPT4gRE9NLnJlc3RvcmVGb2N1cyhmb2N1c2VkLCBzZWxlY3Rpb25TdGFydCwgc2VsZWN0aW9uRW5kKSlcbiAgICBET00uZGlzcGF0Y2hFdmVudChkb2N1bWVudCwgXCJwaHg6dXBkYXRlXCIpXG4gICAgYWRkZWQuZm9yRWFjaChlbCA9PiB0aGlzLnRyYWNrQWZ0ZXIoXCJhZGRlZFwiLCBlbCkpXG4gICAgdXBkYXRlcy5mb3JFYWNoKGVsID0+IHRoaXMudHJhY2tBZnRlcihcInVwZGF0ZWRcIiwgZWwpKVxuXG4gICAgdGhpcy50cmFuc2l0aW9uUGVuZGluZ1JlbW92ZXMoKVxuXG4gICAgaWYoZXh0ZXJuYWxGb3JtVHJpZ2dlcmVkKXtcbiAgICAgIGxpdmVTb2NrZXQudW5sb2FkKClcbiAgICAgIGV4dGVybmFsRm9ybVRyaWdnZXJlZC5zdWJtaXQoKVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgb25Ob2RlRGlzY2FyZGVkKGVsKXtcbiAgICAvLyBuZXN0ZWQgdmlldyBoYW5kbGluZ1xuICAgIGlmKERPTS5pc1BoeENoaWxkKGVsKSB8fCBET00uaXNQaHhTdGlja3koZWwpKXsgdGhpcy5saXZlU29ja2V0LmRlc3Ryb3lWaWV3QnlFbChlbCkgfVxuICAgIHRoaXMudHJhY2tBZnRlcihcImRpc2NhcmRlZFwiLCBlbClcbiAgfVxuXG4gIG1heWJlUGVuZGluZ1JlbW92ZShub2RlKXtcbiAgICBpZihub2RlLmdldEF0dHJpYnV0ZSAmJiBub2RlLmdldEF0dHJpYnV0ZSh0aGlzLnBoeFJlbW92ZSkgIT09IG51bGwpe1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3Zlcy5wdXNoKG5vZGUpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZW1vdmVTdHJlYW1DaGlsZEVsZW1lbnQoY2hpbGQpe1xuICAgIGlmKCF0aGlzLm1heWJlUGVuZGluZ1JlbW92ZShjaGlsZCkpe1xuICAgICAgY2hpbGQucmVtb3ZlKClcbiAgICAgIHRoaXMub25Ob2RlRGlzY2FyZGVkKGNoaWxkKVxuICAgIH1cbiAgfVxuXG4gIGdldFN0cmVhbUluc2VydChlbCl7XG4gICAgbGV0IGluc2VydCA9IGVsLmlkID8gdGhpcy5zdHJlYW1JbnNlcnRzW2VsLmlkXSA6IHt9XG4gICAgcmV0dXJuIGluc2VydCB8fCB7fVxuICB9XG5cbiAgbWF5YmVSZU9yZGVyU3RyZWFtKGVsKXtcbiAgICBsZXQge3JlZiwgc3RyZWFtQXQsIGxpbWl0fSA9IHRoaXMuZ2V0U3RyZWFtSW5zZXJ0KGVsKVxuICAgIGlmKHN0cmVhbUF0ID09PSB1bmRlZmluZWQpeyByZXR1cm4gfVxuXG4gICAgLy8gd2UgbmVlZCB0byB0aGUgUEhYX1NUUkVBTV9SRUYgaGVyZSBhcyB3ZWxsIGFzIGFkZENoaWxkIGlzIGludm9rZWQgb25seSBmb3IgcGFyZW50c1xuICAgIERPTS5wdXRTdGlja3koZWwsIFBIWF9TVFJFQU1fUkVGLCBlbCA9PiBlbC5zZXRBdHRyaWJ1dGUoUEhYX1NUUkVBTV9SRUYsIHJlZikpXG5cbiAgICBpZihzdHJlYW1BdCA9PT0gMCl7XG4gICAgICBlbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShlbCwgZWwucGFyZW50RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZClcbiAgICB9IGVsc2UgaWYoc3RyZWFtQXQgPiAwKXtcbiAgICAgIGxldCBjaGlsZHJlbiA9IEFycmF5LmZyb20oZWwucGFyZW50RWxlbWVudC5jaGlsZHJlbilcbiAgICAgIGxldCBvbGRJbmRleCA9IGNoaWxkcmVuLmluZGV4T2YoZWwpXG4gICAgICBpZihzdHJlYW1BdCA+PSBjaGlsZHJlbi5sZW5ndGggLSAxKXtcbiAgICAgICAgZWwucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChlbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBzaWJsaW5nID0gY2hpbGRyZW5bc3RyZWFtQXRdXG4gICAgICAgIGlmKG9sZEluZGV4ID4gc3RyZWFtQXQpe1xuICAgICAgICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsLCBzaWJsaW5nKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVsLCBzaWJsaW5nLm5leHRFbGVtZW50U2libGluZylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRyYW5zaXRpb25QZW5kaW5nUmVtb3Zlcygpe1xuICAgIGxldCB7cGVuZGluZ1JlbW92ZXMsIGxpdmVTb2NrZXR9ID0gdGhpc1xuICAgIGlmKHBlbmRpbmdSZW1vdmVzLmxlbmd0aCA+IDApe1xuICAgICAgbGl2ZVNvY2tldC50cmFuc2l0aW9uUmVtb3ZlcyhwZW5kaW5nUmVtb3ZlcylcbiAgICAgIGxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgIHBlbmRpbmdSZW1vdmVzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgIGxldCBjaGlsZCA9IERPTS5maXJzdFBoeENoaWxkKGVsKVxuICAgICAgICAgIGlmKGNoaWxkKXsgbGl2ZVNvY2tldC5kZXN0cm95Vmlld0J5RWwoY2hpbGQpIH1cbiAgICAgICAgICBlbC5yZW1vdmUoKVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnRyYWNrQWZ0ZXIoXCJ0cmFuc2l0aW9uc0Rpc2NhcmRlZFwiLCBwZW5kaW5nUmVtb3ZlcylcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgaXNDSURQYXRjaCgpeyByZXR1cm4gdGhpcy5jaWRQYXRjaCB9XG5cbiAgc2tpcENJRFNpYmxpbmcoZWwpe1xuICAgIHJldHVybiBlbC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9TS0lQKSAhPT0gbnVsbFxuICB9XG5cbiAgdGFyZ2V0Q0lEQ29udGFpbmVyKGh0bWwpe1xuICAgIGlmKCF0aGlzLmlzQ0lEUGF0Y2goKSl7IHJldHVybiB9XG4gICAgbGV0IFtmaXJzdCwgLi4ucmVzdF0gPSBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuY29udGFpbmVyLCB0aGlzLnRhcmdldENJRClcbiAgICBpZihyZXN0Lmxlbmd0aCA9PT0gMCAmJiBET00uY2hpbGROb2RlTGVuZ3RoKGh0bWwpID09PSAxKXtcbiAgICAgIHJldHVybiBmaXJzdFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmlyc3QgJiYgZmlyc3QucGFyZW50Tm9kZVxuICAgIH1cbiAgfVxuXG4gIC8vIGJ1aWxkcyBIVE1MIGZvciBtb3JwaGRvbSBwYXRjaFxuICAvLyAtIGZvciBmdWxsIHBhdGNoZXMgb2YgTGl2ZVZpZXcgb3IgYSBjb21wb25lbnQgd2l0aCBhIHNpbmdsZVxuICAvLyAgIHJvb3Qgbm9kZSwgc2ltcGx5IHJldHVybnMgdGhlIEhUTUxcbiAgLy8gLSBmb3IgcGF0Y2hlcyBvZiBhIGNvbXBvbmVudCB3aXRoIG11bHRpcGxlIHJvb3Qgbm9kZXMsIHRoZVxuICAvLyAgIHBhcmVudCBub2RlIGJlY29tZXMgdGhlIHRhcmdldCBjb250YWluZXIgYW5kIG5vbi1jb21wb25lbnRcbiAgLy8gICBzaWJsaW5ncyBhcmUgbWFya2VkIGFzIHNraXAuXG4gIGJ1aWxkRGlmZkhUTUwoY29udGFpbmVyLCBodG1sLCBwaHhVcGRhdGUsIHRhcmdldENvbnRhaW5lcil7XG4gICAgbGV0IGlzQ0lEUGF0Y2ggPSB0aGlzLmlzQ0lEUGF0Y2goKVxuICAgIGxldCBpc0NJRFdpdGhTaW5nbGVSb290ID0gaXNDSURQYXRjaCAmJiB0YXJnZXRDb250YWluZXIuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpID09PSB0aGlzLnRhcmdldENJRC50b1N0cmluZygpXG4gICAgaWYoIWlzQ0lEUGF0Y2ggfHwgaXNDSURXaXRoU2luZ2xlUm9vdCl7XG4gICAgICByZXR1cm4gaHRtbFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb21wb25lbnQgcGF0Y2ggd2l0aCBtdWx0aXBsZSBDSUQgcm9vdHNcbiAgICAgIGxldCBkaWZmQ29udGFpbmVyID0gbnVsbFxuICAgICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgICBkaWZmQ29udGFpbmVyID0gRE9NLmNsb25lTm9kZSh0YXJnZXRDb250YWluZXIpXG4gICAgICBsZXQgW2ZpcnN0Q29tcG9uZW50LCAuLi5yZXN0XSA9IERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QoZGlmZkNvbnRhaW5lciwgdGhpcy50YXJnZXRDSUQpXG4gICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgICByZXN0LmZvckVhY2goZWwgPT4gZWwucmVtb3ZlKCkpXG4gICAgICBBcnJheS5mcm9tKGRpZmZDb250YWluZXIuY2hpbGROb2RlcykuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgIC8vIHdlIGNhbiBvbmx5IHNraXAgdHJhY2thYmxlIG5vZGVzIHdpdGggYW4gSURcbiAgICAgICAgaWYoY2hpbGQuaWQgJiYgY2hpbGQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmIGNoaWxkLmdldEF0dHJpYnV0ZShQSFhfQ09NUE9ORU5UKSAhPT0gdGhpcy50YXJnZXRDSUQudG9TdHJpbmcoKSl7XG4gICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFBIWF9TS0lQLCBcIlwiKVxuICAgICAgICAgIGNoaWxkLmlubmVySFRNTCA9IFwiXCJcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIEFycmF5LmZyb20odGVtcGxhdGUuY29udGVudC5jaGlsZE5vZGVzKS5mb3JFYWNoKGVsID0+IGRpZmZDb250YWluZXIuaW5zZXJ0QmVmb3JlKGVsLCBmaXJzdENvbXBvbmVudCkpXG4gICAgICBmaXJzdENvbXBvbmVudC5yZW1vdmUoKVxuICAgICAgcmV0dXJuIGRpZmZDb250YWluZXIub3V0ZXJIVE1MXG4gICAgfVxuICB9XG5cbiAgaW5kZXhPZihwYXJlbnQsIGNoaWxkKXsgcmV0dXJuIEFycmF5LmZyb20ocGFyZW50LmNoaWxkcmVuKS5pbmRleE9mKGNoaWxkKSB9XG59XG4iLCAiaW1wb3J0IHtcbiAgQ09NUE9ORU5UUyxcbiAgRFlOQU1JQ1MsXG4gIFRFTVBMQVRFUyxcbiAgRVZFTlRTLFxuICBQSFhfQ09NUE9ORU5ULFxuICBQSFhfU0tJUCxcbiAgUkVQTFksXG4gIFNUQVRJQyxcbiAgVElUTEUsXG4gIFNUUkVBTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgaXNPYmplY3QsXG4gIGxvZ0Vycm9yLFxuICBpc0NpZCxcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlZCB7XG4gIHN0YXRpYyBleHRyYWN0KGRpZmYpe1xuICAgIGxldCB7W1JFUExZXTogcmVwbHksIFtFVkVOVFNdOiBldmVudHMsIFtUSVRMRV06IHRpdGxlfSA9IGRpZmZcbiAgICBkZWxldGUgZGlmZltSRVBMWV1cbiAgICBkZWxldGUgZGlmZltFVkVOVFNdXG4gICAgZGVsZXRlIGRpZmZbVElUTEVdXG4gICAgcmV0dXJuIHtkaWZmLCB0aXRsZSwgcmVwbHk6IHJlcGx5IHx8IG51bGwsIGV2ZW50czogZXZlbnRzIHx8IFtdfVxuICB9XG5cbiAgY29uc3RydWN0b3Iodmlld0lkLCByZW5kZXJlZCl7XG4gICAgdGhpcy52aWV3SWQgPSB2aWV3SWRcbiAgICB0aGlzLnJlbmRlcmVkID0ge31cbiAgICB0aGlzLm1lcmdlRGlmZihyZW5kZXJlZClcbiAgfVxuXG4gIHBhcmVudFZpZXdJZCgpeyByZXR1cm4gdGhpcy52aWV3SWQgfVxuXG4gIHRvU3RyaW5nKG9ubHlDaWRzKXtcbiAgICBsZXQgW3N0ciwgc3RyZWFtc10gPSB0aGlzLnJlY3Vyc2l2ZVRvU3RyaW5nKHRoaXMucmVuZGVyZWQsIHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU10sIG9ubHlDaWRzKVxuICAgIHJldHVybiBbc3RyLCBzdHJlYW1zXVxuICB9XG5cbiAgcmVjdXJzaXZlVG9TdHJpbmcocmVuZGVyZWQsIGNvbXBvbmVudHMgPSByZW5kZXJlZFtDT01QT05FTlRTXSwgb25seUNpZHMpe1xuICAgIG9ubHlDaWRzID0gb25seUNpZHMgPyBuZXcgU2V0KG9ubHlDaWRzKSA6IG51bGxcbiAgICBsZXQgb3V0cHV0ID0ge2J1ZmZlcjogXCJcIiwgY29tcG9uZW50czogY29tcG9uZW50cywgb25seUNpZHM6IG9ubHlDaWRzLCBzdHJlYW1zOiBuZXcgU2V0KCl9XG4gICAgdGhpcy50b091dHB1dEJ1ZmZlcihyZW5kZXJlZCwgbnVsbCwgb3V0cHV0KVxuICAgIHJldHVybiBbb3V0cHV0LmJ1ZmZlciwgb3V0cHV0LnN0cmVhbXNdXG4gIH1cblxuICBjb21wb25lbnRDSURzKGRpZmYpeyByZXR1cm4gT2JqZWN0LmtleXMoZGlmZltDT01QT05FTlRTXSB8fCB7fSkubWFwKGkgPT4gcGFyc2VJbnQoaSkpIH1cblxuICBpc0NvbXBvbmVudE9ubHlEaWZmKGRpZmYpe1xuICAgIGlmKCFkaWZmW0NPTVBPTkVOVFNdKXsgcmV0dXJuIGZhbHNlIH1cbiAgICByZXR1cm4gT2JqZWN0LmtleXMoZGlmZikubGVuZ3RoID09PSAxXG4gIH1cblxuICBnZXRDb21wb25lbnQoZGlmZiwgY2lkKXsgcmV0dXJuIGRpZmZbQ09NUE9ORU5UU11bY2lkXSB9XG5cbiAgbWVyZ2VEaWZmKGRpZmYpe1xuICAgIGxldCBuZXdjID0gZGlmZltDT01QT05FTlRTXVxuICAgIGxldCBjYWNoZSA9IHt9XG4gICAgZGVsZXRlIGRpZmZbQ09NUE9ORU5UU11cbiAgICB0aGlzLnJlbmRlcmVkID0gdGhpcy5tdXRhYmxlTWVyZ2UodGhpcy5yZW5kZXJlZCwgZGlmZilcbiAgICB0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdID0gdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXSB8fCB7fVxuXG4gICAgaWYobmV3Yyl7XG4gICAgICBsZXQgb2xkYyA9IHRoaXMucmVuZGVyZWRbQ09NUE9ORU5UU11cblxuICAgICAgZm9yKGxldCBjaWQgaW4gbmV3Yyl7XG4gICAgICAgIG5ld2NbY2lkXSA9IHRoaXMuY2FjaGVkRmluZENvbXBvbmVudChjaWQsIG5ld2NbY2lkXSwgb2xkYywgbmV3YywgY2FjaGUpXG4gICAgICB9XG5cbiAgICAgIGZvcihsZXQgY2lkIGluIG5ld2MpeyBvbGRjW2NpZF0gPSBuZXdjW2NpZF0gfVxuICAgICAgZGlmZltDT01QT05FTlRTXSA9IG5ld2NcbiAgICB9XG4gIH1cblxuICBjYWNoZWRGaW5kQ29tcG9uZW50KGNpZCwgY2RpZmYsIG9sZGMsIG5ld2MsIGNhY2hlKXtcbiAgICBpZihjYWNoZVtjaWRdKXtcbiAgICAgIHJldHVybiBjYWNoZVtjaWRdXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZGlmZiwgc3RhdCwgc2NpZCA9IGNkaWZmW1NUQVRJQ11cblxuICAgICAgaWYoaXNDaWQoc2NpZCkpe1xuICAgICAgICBsZXQgdGRpZmZcblxuICAgICAgICBpZihzY2lkID4gMCl7XG4gICAgICAgICAgdGRpZmYgPSB0aGlzLmNhY2hlZEZpbmRDb21wb25lbnQoc2NpZCwgbmV3Y1tzY2lkXSwgb2xkYywgbmV3YywgY2FjaGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGRpZmYgPSBvbGRjWy1zY2lkXVxuICAgICAgICB9XG5cbiAgICAgICAgc3RhdCA9IHRkaWZmW1NUQVRJQ11cbiAgICAgICAgbmRpZmYgPSB0aGlzLmNsb25lTWVyZ2UodGRpZmYsIGNkaWZmKVxuICAgICAgICBuZGlmZltTVEFUSUNdID0gc3RhdFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmRpZmYgPSBjZGlmZltTVEFUSUNdICE9PSB1bmRlZmluZWQgPyBjZGlmZiA6IHRoaXMuY2xvbmVNZXJnZShvbGRjW2NpZF0gfHwge30sIGNkaWZmKVxuICAgICAgfVxuXG4gICAgICBjYWNoZVtjaWRdID0gbmRpZmZcbiAgICAgIHJldHVybiBuZGlmZlxuICAgIH1cbiAgfVxuXG4gIG11dGFibGVNZXJnZSh0YXJnZXQsIHNvdXJjZSl7XG4gICAgaWYoc291cmNlW1NUQVRJQ10gIT09IHVuZGVmaW5lZCl7XG4gICAgICByZXR1cm4gc291cmNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZG9NdXRhYmxlTWVyZ2UodGFyZ2V0LCBzb3VyY2UpXG4gICAgICByZXR1cm4gdGFyZ2V0XG4gICAgfVxuICB9XG5cbiAgZG9NdXRhYmxlTWVyZ2UodGFyZ2V0LCBzb3VyY2Upe1xuICAgIGZvcihsZXQga2V5IGluIHNvdXJjZSl7XG4gICAgICBsZXQgdmFsID0gc291cmNlW2tleV1cbiAgICAgIGxldCB0YXJnZXRWYWwgPSB0YXJnZXRba2V5XVxuICAgICAgbGV0IGlzT2JqVmFsID0gaXNPYmplY3QodmFsKVxuICAgICAgaWYoaXNPYmpWYWwgJiYgdmFsW1NUQVRJQ10gPT09IHVuZGVmaW5lZCAmJiBpc09iamVjdCh0YXJnZXRWYWwpKXtcbiAgICAgICAgdGhpcy5kb011dGFibGVNZXJnZSh0YXJnZXRWYWwsIHZhbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gdmFsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xvbmVNZXJnZSh0YXJnZXQsIHNvdXJjZSl7XG4gICAgbGV0IG1lcmdlZCA9IHsuLi50YXJnZXQsIC4uLnNvdXJjZX1cbiAgICBmb3IobGV0IGtleSBpbiBtZXJnZWQpe1xuICAgICAgbGV0IHZhbCA9IHNvdXJjZVtrZXldXG4gICAgICBsZXQgdGFyZ2V0VmFsID0gdGFyZ2V0W2tleV1cbiAgICAgIGlmKGlzT2JqZWN0KHZhbCkgJiYgdmFsW1NUQVRJQ10gPT09IHVuZGVmaW5lZCAmJiBpc09iamVjdCh0YXJnZXRWYWwpKXtcbiAgICAgICAgbWVyZ2VkW2tleV0gPSB0aGlzLmNsb25lTWVyZ2UodGFyZ2V0VmFsLCB2YWwpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWRcbiAgfVxuXG4gIGNvbXBvbmVudFRvU3RyaW5nKGNpZCl7XG4gICAgbGV0IFtzdHIsIHN0cmVhbXNdID0gdGhpcy5yZWN1cnNpdmVDSURUb1N0cmluZyh0aGlzLnJlbmRlcmVkW0NPTVBPTkVOVFNdLCBjaWQpXG4gICAgcmV0dXJuIFtzdHIsIHN0cmVhbXNdXG4gIH1cblxuICBwcnVuZUNJRHMoY2lkcyl7XG4gICAgY2lkcy5mb3JFYWNoKGNpZCA9PiBkZWxldGUgdGhpcy5yZW5kZXJlZFtDT01QT05FTlRTXVtjaWRdKVxuICB9XG5cbiAgLy8gcHJpdmF0ZVxuXG4gIGdldCgpeyByZXR1cm4gdGhpcy5yZW5kZXJlZCB9XG5cbiAgaXNOZXdGaW5nZXJwcmludChkaWZmID0ge30peyByZXR1cm4gISFkaWZmW1NUQVRJQ10gfVxuXG4gIHRlbXBsYXRlU3RhdGljKHBhcnQsIHRlbXBsYXRlcyl7XG4gICAgaWYodHlwZW9mIChwYXJ0KSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIHRlbXBsYXRlc1twYXJ0XVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFydFxuICAgIH1cbiAgfVxuXG4gIHRvT3V0cHV0QnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCl7XG4gICAgaWYocmVuZGVyZWRbRFlOQU1JQ1NdKXsgcmV0dXJuIHRoaXMuY29tcHJlaGVuc2lvblRvQnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCkgfVxuICAgIGxldCB7W1NUQVRJQ106IHN0YXRpY3N9ID0gcmVuZGVyZWRcbiAgICBzdGF0aWNzID0gdGhpcy50ZW1wbGF0ZVN0YXRpYyhzdGF0aWNzLCB0ZW1wbGF0ZXMpXG5cbiAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbMF1cbiAgICBmb3IobGV0IGkgPSAxOyBpIDwgc3RhdGljcy5sZW5ndGg7IGkrKyl7XG4gICAgICB0aGlzLmR5bmFtaWNUb0J1ZmZlcihyZW5kZXJlZFtpIC0gMV0sIHRlbXBsYXRlcywgb3V0cHV0KVxuICAgICAgb3V0cHV0LmJ1ZmZlciArPSBzdGF0aWNzW2ldXG4gICAgfVxuICB9XG5cbiAgY29tcHJlaGVuc2lvblRvQnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dCl7XG4gICAgbGV0IHtbRFlOQU1JQ1NdOiBkeW5hbWljcywgW1NUQVRJQ106IHN0YXRpY3MsIFtTVFJFQU1dOiBzdHJlYW19ID0gcmVuZGVyZWRcbiAgICBsZXQgW19yZWYsIF9pbnNlcnRzLCBkZWxldGVJZHMsIHJlc2V0XSA9IHN0cmVhbSB8fCBbbnVsbCwge30sIFtdLCBudWxsXVxuICAgIHN0YXRpY3MgPSB0aGlzLnRlbXBsYXRlU3RhdGljKHN0YXRpY3MsIHRlbXBsYXRlcylcbiAgICBsZXQgY29tcFRlbXBsYXRlcyA9IHRlbXBsYXRlcyB8fCByZW5kZXJlZFtURU1QTEFURVNdXG4gICAgZm9yKGxldCBkID0gMDsgZCA8IGR5bmFtaWNzLmxlbmd0aDsgZCsrKXtcbiAgICAgIGxldCBkeW5hbWljID0gZHluYW1pY3NbZF1cbiAgICAgIG91dHB1dC5idWZmZXIgKz0gc3RhdGljc1swXVxuICAgICAgZm9yKGxldCBpID0gMTsgaSA8IHN0YXRpY3MubGVuZ3RoOyBpKyspe1xuICAgICAgICB0aGlzLmR5bmFtaWNUb0J1ZmZlcihkeW5hbWljW2kgLSAxXSwgY29tcFRlbXBsYXRlcywgb3V0cHV0KVxuICAgICAgICBvdXRwdXQuYnVmZmVyICs9IHN0YXRpY3NbaV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZihzdHJlYW0gIT09IHVuZGVmaW5lZCAmJiAocmVuZGVyZWRbRFlOQU1JQ1NdLmxlbmd0aCA+IDAgfHwgZGVsZXRlSWRzLmxlbmd0aCA+IDAgfHwgcmVzZXQpKXtcbiAgICAgIGRlbGV0ZSByZW5kZXJlZFtTVFJFQU1dXG4gICAgICBvdXRwdXQuc3RyZWFtcy5hZGQoc3RyZWFtKVxuICAgIH1cbiAgfVxuXG4gIGR5bmFtaWNUb0J1ZmZlcihyZW5kZXJlZCwgdGVtcGxhdGVzLCBvdXRwdXQpe1xuICAgIGlmKHR5cGVvZiAocmVuZGVyZWQpID09PSBcIm51bWJlclwiKXtcbiAgICAgIGxldCBbc3RyLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlQ0lEVG9TdHJpbmcob3V0cHV0LmNvbXBvbmVudHMsIHJlbmRlcmVkLCBvdXRwdXQub25seUNpZHMpXG4gICAgICBvdXRwdXQuYnVmZmVyICs9IHN0clxuICAgICAgb3V0cHV0LnN0cmVhbXMgPSBuZXcgU2V0KFsuLi5vdXRwdXQuc3RyZWFtcywgLi4uc3RyZWFtc10pXG4gICAgfSBlbHNlIGlmKGlzT2JqZWN0KHJlbmRlcmVkKSl7XG4gICAgICB0aGlzLnRvT3V0cHV0QnVmZmVyKHJlbmRlcmVkLCB0ZW1wbGF0ZXMsIG91dHB1dClcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0LmJ1ZmZlciArPSByZW5kZXJlZFxuICAgIH1cbiAgfVxuXG4gIHJlY3Vyc2l2ZUNJRFRvU3RyaW5nKGNvbXBvbmVudHMsIGNpZCwgb25seUNpZHMpe1xuICAgIGxldCBjb21wb25lbnQgPSBjb21wb25lbnRzW2NpZF0gfHwgbG9nRXJyb3IoYG5vIGNvbXBvbmVudCBmb3IgQ0lEICR7Y2lkfWAsIGNvbXBvbmVudHMpXG4gICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpXG4gICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVjdXJzaXZlVG9TdHJpbmcoY29tcG9uZW50LCBjb21wb25lbnRzLCBvbmx5Q2lkcylcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG4gICAgbGV0IGNvbnRhaW5lciA9IHRlbXBsYXRlLmNvbnRlbnRcbiAgICBsZXQgc2tpcCA9IG9ubHlDaWRzICYmICFvbmx5Q2lkcy5oYXMoY2lkKVxuXG4gICAgbGV0IFtoYXNDaGlsZE5vZGVzLCBoYXNDaGlsZENvbXBvbmVudHNdID1cbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkTm9kZXMpLnJlZHVjZSgoW2hhc05vZGVzLCBoYXNDb21wb25lbnRzXSwgY2hpbGQsIGkpID0+IHtcbiAgICAgICAgaWYoY2hpbGQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKXtcbiAgICAgICAgICBpZihjaGlsZC5nZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCkpe1xuICAgICAgICAgICAgcmV0dXJuIFtoYXNOb2RlcywgdHJ1ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQsIGNpZClcbiAgICAgICAgICBpZighY2hpbGQuaWQpeyBjaGlsZC5pZCA9IGAke3RoaXMucGFyZW50Vmlld0lkKCl9LSR7Y2lkfS0ke2l9YCB9XG4gICAgICAgICAgaWYoc2tpcCl7XG4gICAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoUEhYX1NLSVAsIFwiXCIpXG4gICAgICAgICAgICBjaGlsZC5pbm5lckhUTUwgPSBcIlwiXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBbdHJ1ZSwgaGFzQ29tcG9uZW50c11cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZihjaGlsZC5ub2RlVmFsdWUudHJpbSgpICE9PSBcIlwiKXtcbiAgICAgICAgICAgIGxvZ0Vycm9yKFwib25seSBIVE1MIGVsZW1lbnQgdGFncyBhcmUgYWxsb3dlZCBhdCB0aGUgcm9vdCBvZiBjb21wb25lbnRzLlxcblxcblwiICtcbiAgICAgICAgICAgICAgYGdvdDogXCIke2NoaWxkLm5vZGVWYWx1ZS50cmltKCl9XCJcXG5cXG5gICtcbiAgICAgICAgICAgICAgXCJ3aXRoaW46XFxuXCIsIHRlbXBsYXRlLmlubmVySFRNTC50cmltKCkpXG4gICAgICAgICAgICBjaGlsZC5yZXBsYWNlV2l0aCh0aGlzLmNyZWF0ZVNwYW4oY2hpbGQubm9kZVZhbHVlLCBjaWQpKVxuICAgICAgICAgICAgcmV0dXJuIFt0cnVlLCBoYXNDb21wb25lbnRzXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGlsZC5yZW1vdmUoKVxuICAgICAgICAgICAgcmV0dXJuIFtoYXNOb2RlcywgaGFzQ29tcG9uZW50c11cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIFtmYWxzZSwgZmFsc2VdKVxuXG4gICAgaWYoIWhhc0NoaWxkTm9kZXMgJiYgIWhhc0NoaWxkQ29tcG9uZW50cyl7XG4gICAgICBsb2dFcnJvcihcImV4cGVjdGVkIGF0IGxlYXN0IG9uZSBIVE1MIGVsZW1lbnQgdGFnIGluc2lkZSBhIGNvbXBvbmVudCwgYnV0IHRoZSBjb21wb25lbnQgaXMgZW1wdHk6XFxuXCIsXG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTC50cmltKCkpXG4gICAgICByZXR1cm4gW3RoaXMuY3JlYXRlU3BhbihcIlwiLCBjaWQpLm91dGVySFRNTCwgc3RyZWFtc11cbiAgICB9IGVsc2UgaWYoIWhhc0NoaWxkTm9kZXMgJiYgaGFzQ2hpbGRDb21wb25lbnRzKXtcbiAgICAgIGxvZ0Vycm9yKFwiZXhwZWN0ZWQgYXQgbGVhc3Qgb25lIEhUTUwgZWxlbWVudCB0YWcgZGlyZWN0bHkgaW5zaWRlIGEgY29tcG9uZW50LCBidXQgb25seSBzdWJjb21wb25lbnRzIHdlcmUgZm91bmQuIEEgY29tcG9uZW50IG11c3QgcmVuZGVyIGF0IGxlYXN0IG9uZSBIVE1MIHRhZyBkaXJlY3RseSBpbnNpZGUgaXRzZWxmLlwiLFxuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKVxuICAgICAgcmV0dXJuIFt0ZW1wbGF0ZS5pbm5lckhUTUwsIHN0cmVhbXNdXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbdGVtcGxhdGUuaW5uZXJIVE1MLCBzdHJlYW1zXVxuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZVNwYW4odGV4dCwgY2lkKXtcbiAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpXG4gICAgc3Bhbi5pbm5lclRleHQgPSB0ZXh0XG4gICAgc3Bhbi5zZXRBdHRyaWJ1dGUoUEhYX0NPTVBPTkVOVCwgY2lkKVxuICAgIHJldHVybiBzcGFuXG4gIH1cbn1cbiIsICJsZXQgdmlld0hvb2tJRCA9IDFcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXdIb29rIHtcbiAgc3RhdGljIG1ha2VJRCgpeyByZXR1cm4gdmlld0hvb2tJRCsrIH1cbiAgc3RhdGljIGVsZW1lbnRJRChlbCl7IHJldHVybiBlbC5waHhIb29rSWQgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXcsIGVsLCBjYWxsYmFja3Mpe1xuICAgIHRoaXMuX192aWV3ID0gdmlld1xuICAgIHRoaXMubGl2ZVNvY2tldCA9IHZpZXcubGl2ZVNvY2tldFxuICAgIHRoaXMuX19jYWxsYmFja3MgPSBjYWxsYmFja3NcbiAgICB0aGlzLl9fbGlzdGVuZXJzID0gbmV3IFNldCgpXG4gICAgdGhpcy5fX2lzRGlzY29ubmVjdGVkID0gZmFsc2VcbiAgICB0aGlzLmVsID0gZWxcbiAgICB0aGlzLmVsLnBoeEhvb2tJZCA9IHRoaXMuY29uc3RydWN0b3IubWFrZUlEKClcbiAgICBmb3IobGV0IGtleSBpbiB0aGlzLl9fY2FsbGJhY2tzKXsgdGhpc1trZXldID0gdGhpcy5fX2NhbGxiYWNrc1trZXldIH1cbiAgfVxuXG4gIF9fbW91bnRlZCgpeyB0aGlzLm1vdW50ZWQgJiYgdGhpcy5tb3VudGVkKCkgfVxuICBfX3VwZGF0ZWQoKXsgdGhpcy51cGRhdGVkICYmIHRoaXMudXBkYXRlZCgpIH1cbiAgX19iZWZvcmVVcGRhdGUoKXsgdGhpcy5iZWZvcmVVcGRhdGUgJiYgdGhpcy5iZWZvcmVVcGRhdGUoKSB9XG4gIF9fZGVzdHJveWVkKCl7IHRoaXMuZGVzdHJveWVkICYmIHRoaXMuZGVzdHJveWVkKCkgfVxuICBfX3JlY29ubmVjdGVkKCl7XG4gICAgaWYodGhpcy5fX2lzRGlzY29ubmVjdGVkKXtcbiAgICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IGZhbHNlXG4gICAgICB0aGlzLnJlY29ubmVjdGVkICYmIHRoaXMucmVjb25uZWN0ZWQoKVxuICAgIH1cbiAgfVxuICBfX2Rpc2Nvbm5lY3RlZCgpe1xuICAgIHRoaXMuX19pc0Rpc2Nvbm5lY3RlZCA9IHRydWVcbiAgICB0aGlzLmRpc2Nvbm5lY3RlZCAmJiB0aGlzLmRpc2Nvbm5lY3RlZCgpXG4gIH1cblxuICBwdXNoRXZlbnQoZXZlbnQsIHBheWxvYWQgPSB7fSwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcucHVzaEhvb2tFdmVudCh0aGlzLmVsLCBudWxsLCBldmVudCwgcGF5bG9hZCwgb25SZXBseSlcbiAgfVxuXG4gIHB1c2hFdmVudFRvKHBoeFRhcmdldCwgZXZlbnQsIHBheWxvYWQgPSB7fSwgb25SZXBseSA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcud2l0aGluVGFyZ2V0cyhwaHhUYXJnZXQsICh2aWV3LCB0YXJnZXRDdHgpID0+IHtcbiAgICAgIHJldHVybiB2aWV3LnB1c2hIb29rRXZlbnQodGhpcy5lbCwgdGFyZ2V0Q3R4LCBldmVudCwgcGF5bG9hZCwgb25SZXBseSlcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlRXZlbnQoZXZlbnQsIGNhbGxiYWNrKXtcbiAgICBsZXQgY2FsbGJhY2tSZWYgPSAoY3VzdG9tRXZlbnQsIGJ5cGFzcykgPT4gYnlwYXNzID8gZXZlbnQgOiBjYWxsYmFjayhjdXN0b21FdmVudC5kZXRhaWwpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYHBoeDoke2V2ZW50fWAsIGNhbGxiYWNrUmVmKVxuICAgIHRoaXMuX19saXN0ZW5lcnMuYWRkKGNhbGxiYWNrUmVmKVxuICAgIHJldHVybiBjYWxsYmFja1JlZlxuICB9XG5cbiAgcmVtb3ZlSGFuZGxlRXZlbnQoY2FsbGJhY2tSZWYpe1xuICAgIGxldCBldmVudCA9IGNhbGxiYWNrUmVmKG51bGwsIHRydWUpXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoYHBoeDoke2V2ZW50fWAsIGNhbGxiYWNrUmVmKVxuICAgIHRoaXMuX19saXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrUmVmKVxuICB9XG5cbiAgdXBsb2FkKG5hbWUsIGZpbGVzKXtcbiAgICByZXR1cm4gdGhpcy5fX3ZpZXcuZGlzcGF0Y2hVcGxvYWRzKG5hbWUsIGZpbGVzKVxuICB9XG5cbiAgdXBsb2FkVG8ocGh4VGFyZ2V0LCBuYW1lLCBmaWxlcyl7XG4gICAgcmV0dXJuIHRoaXMuX192aWV3LndpdGhpblRhcmdldHMocGh4VGFyZ2V0LCB2aWV3ID0+IHZpZXcuZGlzcGF0Y2hVcGxvYWRzKG5hbWUsIGZpbGVzKSlcbiAgfVxuXG4gIF9fY2xlYW51cF9fKCl7XG4gICAgdGhpcy5fX2xpc3RlbmVycy5mb3JFYWNoKGNhbGxiYWNrUmVmID0+IHRoaXMucmVtb3ZlSGFuZGxlRXZlbnQoY2FsbGJhY2tSZWYpKVxuICB9XG59XG4iLCAiaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IEFSSUEgZnJvbSBcIi4vYXJpYVwiXG5cbmxldCBmb2N1c1N0YWNrID0gbnVsbFxuXG5sZXQgSlMgPSB7XG4gIGV4ZWMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGRlZmF1bHRzKXtcbiAgICBsZXQgW2RlZmF1bHRLaW5kLCBkZWZhdWx0QXJnc10gPSBkZWZhdWx0cyB8fCBbbnVsbCwge2NhbGxiYWNrOiBkZWZhdWx0cyAmJiBkZWZhdWx0cy5jYWxsYmFja31dXG4gICAgbGV0IGNvbW1hbmRzID0gcGh4RXZlbnQuY2hhckF0KDApID09PSBcIltcIiA/XG4gICAgICBKU09OLnBhcnNlKHBoeEV2ZW50KSA6IFtbZGVmYXVsdEtpbmQsIGRlZmF1bHRBcmdzXV1cblxuXG5cbiAgICBjb21tYW5kcy5mb3JFYWNoKChba2luZCwgYXJnc10pID0+IHtcbiAgICAgIGlmKGtpbmQgPT09IGRlZmF1bHRLaW5kICYmIGRlZmF1bHRBcmdzLmRhdGEpe1xuICAgICAgICBhcmdzLmRhdGEgPSBPYmplY3QuYXNzaWduKGFyZ3MuZGF0YSB8fCB7fSwgZGVmYXVsdEFyZ3MuZGF0YSlcbiAgICAgICAgYXJncy5jYWxsYmFjayA9IGFyZ3MuY2FsbGJhY2sgfHwgZGVmYXVsdEFyZ3MuY2FsbGJhY2tcbiAgICAgIH1cbiAgICAgIHRoaXMuZmlsdGVyVG9FbHMoc291cmNlRWwsIGFyZ3MpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICB0aGlzW2BleGVjXyR7a2luZH1gXShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIGFyZ3MpXG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgaXNWaXNpYmxlKGVsKXtcbiAgICByZXR1cm4gISEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoID4gMClcbiAgfSxcblxuICAvLyBwcml2YXRlXG5cbiAgLy8gY29tbWFuZHNcblxuICBleGVjX2V4ZWMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCBbYXR0ciwgdG9dKXtcbiAgICBsZXQgbm9kZXMgPSB0byA/IERPTS5hbGwoZG9jdW1lbnQsIHRvKSA6IFtzb3VyY2VFbF1cbiAgICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgbGV0IGVuY29kZWRKUyA9IG5vZGUuZ2V0QXR0cmlidXRlKGF0dHIpXG4gICAgICBpZighZW5jb2RlZEpTKXsgdGhyb3cgbmV3IEVycm9yKGBleHBlY3RlZCAke2F0dHJ9IHRvIGNvbnRhaW4gSlMgY29tbWFuZCBvbiBcIiR7dG99XCJgKSB9XG4gICAgICB2aWV3LmxpdmVTb2NrZXQuZXhlY0pTKG5vZGUsIGVuY29kZWRKUywgZXZlbnRUeXBlKVxuICAgIH0pXG4gIH0sXG5cbiAgZXhlY19kaXNwYXRjaChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHt0bywgZXZlbnQsIGRldGFpbCwgYnViYmxlc30pe1xuICAgIGRldGFpbCA9IGRldGFpbCB8fCB7fVxuICAgIGRldGFpbC5kaXNwYXRjaGVyID0gc291cmNlRWxcbiAgICBET00uZGlzcGF0Y2hFdmVudChlbCwgZXZlbnQsIHtkZXRhaWwsIGJ1YmJsZXN9KVxuICB9LFxuXG4gIGV4ZWNfcHVzaChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIGFyZ3Mpe1xuICAgIGlmKCF2aWV3LmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gfVxuXG4gICAgbGV0IHtldmVudCwgZGF0YSwgdGFyZ2V0LCBwYWdlX2xvYWRpbmcsIGxvYWRpbmcsIHZhbHVlLCBkaXNwYXRjaGVyLCBjYWxsYmFja30gPSBhcmdzXG4gICAgbGV0IHB1c2hPcHRzID0ge2xvYWRpbmcsIHZhbHVlLCB0YXJnZXQsIHBhZ2VfbG9hZGluZzogISFwYWdlX2xvYWRpbmd9XG4gICAgbGV0IHRhcmdldFNyYyA9IGV2ZW50VHlwZSA9PT0gXCJjaGFuZ2VcIiAmJiBkaXNwYXRjaGVyID8gZGlzcGF0Y2hlciA6IHNvdXJjZUVsXG4gICAgbGV0IHBoeFRhcmdldCA9IHRhcmdldCB8fCB0YXJnZXRTcmMuZ2V0QXR0cmlidXRlKHZpZXcuYmluZGluZyhcInRhcmdldFwiKSkgfHwgdGFyZ2V0U3JjXG4gICAgdmlldy53aXRoaW5UYXJnZXRzKHBoeFRhcmdldCwgKHRhcmdldFZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgaWYoZXZlbnRUeXBlID09PSBcImNoYW5nZVwiKXtcbiAgICAgICAgbGV0IHtuZXdDaWQsIF90YXJnZXR9ID0gYXJnc1xuICAgICAgICBfdGFyZ2V0ID0gX3RhcmdldCB8fCAoRE9NLmlzRm9ybUlucHV0KHNvdXJjZUVsKSA/IHNvdXJjZUVsLm5hbWUgOiB1bmRlZmluZWQpXG4gICAgICAgIGlmKF90YXJnZXQpeyBwdXNoT3B0cy5fdGFyZ2V0ID0gX3RhcmdldCB9XG4gICAgICAgIHRhcmdldFZpZXcucHVzaElucHV0KHNvdXJjZUVsLCB0YXJnZXRDdHgsIG5ld0NpZCwgZXZlbnQgfHwgcGh4RXZlbnQsIHB1c2hPcHRzLCBjYWxsYmFjaylcbiAgICAgIH0gZWxzZSBpZihldmVudFR5cGUgPT09IFwic3VibWl0XCIpe1xuICAgICAgICBsZXQge3N1Ym1pdHRlcn0gPSBhcmdzXG4gICAgICAgIHRhcmdldFZpZXcuc3VibWl0Rm9ybShzb3VyY2VFbCwgdGFyZ2V0Q3R4LCBldmVudCB8fCBwaHhFdmVudCwgc3VibWl0dGVyLCBwdXNoT3B0cywgY2FsbGJhY2spXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRWaWV3LnB1c2hFdmVudChldmVudFR5cGUsIHNvdXJjZUVsLCB0YXJnZXRDdHgsIGV2ZW50IHx8IHBoeEV2ZW50LCBkYXRhLCBwdXNoT3B0cywgY2FsbGJhY2spXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBleGVjX25hdmlnYXRlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2hyZWYsIHJlcGxhY2V9KXtcbiAgICB2aWV3LmxpdmVTb2NrZXQuaGlzdG9yeVJlZGlyZWN0KGhyZWYsIHJlcGxhY2UgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiKVxuICB9LFxuXG4gIGV4ZWNfcGF0Y2goZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7aHJlZiwgcmVwbGFjZX0pe1xuICAgIHZpZXcubGl2ZVNvY2tldC5wdXNoSGlzdG9yeVBhdGNoKGhyZWYsIHJlcGxhY2UgPyBcInJlcGxhY2VcIiA6IFwicHVzaFwiLCBzb3VyY2VFbClcbiAgfSxcblxuICBleGVjX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBBUklBLmF0dGVtcHRGb2N1cyhlbCkpXG4gIH0sXG5cbiAgZXhlY19mb2N1c19maXJzdChldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwpe1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gQVJJQS5mb2N1c0ZpcnN0SW50ZXJhY3RpdmUoZWwpIHx8IEFSSUEuZm9jdXNGaXJzdChlbCkpXG4gIH0sXG5cbiAgZXhlY19wdXNoX2ZvY3VzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCl7XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBmb2N1c1N0YWNrID0gZWwgfHwgc291cmNlRWwpXG4gIH0sXG5cbiAgZXhlY19wb3BfZm9jdXMoZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsKXtcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGlmKGZvY3VzU3RhY2speyBmb2N1c1N0YWNrLmZvY3VzKCkgfVxuICAgICAgZm9jdXNTdGFjayA9IG51bGxcbiAgICB9KVxuICB9LFxuXG4gIGV4ZWNfYWRkX2NsYXNzKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge25hbWVzLCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG5hbWVzLCBbXSwgdHJhbnNpdGlvbiwgdGltZSwgdmlldylcbiAgfSxcblxuICBleGVjX3JlbW92ZV9jbGFzcyhldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtuYW1lcywgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBbXSwgbmFtZXMsIHRyYW5zaXRpb24sIHRpbWUsIHZpZXcpXG4gIH0sXG5cbiAgZXhlY190cmFuc2l0aW9uKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge3RpbWUsIHRyYW5zaXRpb259KXtcbiAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIFtdLCB0cmFuc2l0aW9uLCB0aW1lLCB2aWV3KVxuICB9LFxuXG4gIGV4ZWNfdG9nZ2xlKGV2ZW50VHlwZSwgcGh4RXZlbnQsIHZpZXcsIHNvdXJjZUVsLCBlbCwge2Rpc3BsYXksIGlucywgb3V0cywgdGltZX0pe1xuICAgIHRoaXMudG9nZ2xlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIGlucywgb3V0cywgdGltZSlcbiAgfSxcblxuICBleGVjX3Nob3coZXZlbnRUeXBlLCBwaHhFdmVudCwgdmlldywgc291cmNlRWwsIGVsLCB7ZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZX0pe1xuICAgIHRoaXMuc2hvdyhldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lKVxuICB9LFxuXG4gIGV4ZWNfaGlkZShldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHtkaXNwbGF5LCB0cmFuc2l0aW9uLCB0aW1lfSl7XG4gICAgdGhpcy5oaWRlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpXG4gIH0sXG5cbiAgZXhlY19zZXRfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyOiBbYXR0ciwgdmFsXX0pe1xuICAgIHRoaXMuc2V0T3JSZW1vdmVBdHRycyhlbCwgW1thdHRyLCB2YWxdXSwgW10pXG4gIH0sXG5cbiAgZXhlY19yZW1vdmVfYXR0cihldmVudFR5cGUsIHBoeEV2ZW50LCB2aWV3LCBzb3VyY2VFbCwgZWwsIHthdHRyfSl7XG4gICAgdGhpcy5zZXRPclJlbW92ZUF0dHJzKGVsLCBbXSwgW2F0dHJdKVxuICB9LFxuXG4gIC8vIHV0aWxzIGZvciBjb21tYW5kc1xuXG4gIHNob3coZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgdHJhbnNpdGlvbiwgdGltZSl7XG4gICAgaWYoIXRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCB0cmFuc2l0aW9uLCBudWxsLCB0aW1lKVxuICAgIH1cbiAgfSxcblxuICBoaWRlKGV2ZW50VHlwZSwgdmlldywgZWwsIGRpc3BsYXksIHRyYW5zaXRpb24sIHRpbWUpe1xuICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICB0aGlzLnRvZ2dsZShldmVudFR5cGUsIHZpZXcsIGVsLCBkaXNwbGF5LCBudWxsLCB0cmFuc2l0aW9uLCB0aW1lKVxuICAgIH1cbiAgfSxcblxuICB0b2dnbGUoZXZlbnRUeXBlLCB2aWV3LCBlbCwgZGlzcGxheSwgaW5zLCBvdXRzLCB0aW1lKXtcbiAgICBsZXQgW2luQ2xhc3NlcywgaW5TdGFydENsYXNzZXMsIGluRW5kQ2xhc3Nlc10gPSBpbnMgfHwgW1tdLCBbXSwgW11dXG4gICAgbGV0IFtvdXRDbGFzc2VzLCBvdXRTdGFydENsYXNzZXMsIG91dEVuZENsYXNzZXNdID0gb3V0cyB8fCBbW10sIFtdLCBbXV1cbiAgICBpZihpbkNsYXNzZXMubGVuZ3RoID4gMCB8fCBvdXRDbGFzc2VzLmxlbmd0aCA+IDApe1xuICAgICAgaWYodGhpcy5pc1Zpc2libGUoZWwpKXtcbiAgICAgICAgbGV0IG9uU3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIG91dFN0YXJ0Q2xhc3NlcywgaW5DbGFzc2VzLmNvbmNhdChpblN0YXJ0Q2xhc3NlcykuY29uY2F0KGluRW5kQ2xhc3NlcykpXG4gICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgb3V0Q2xhc3NlcywgW10pXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBvdXRFbmRDbGFzc2VzLCBvdXRTdGFydENsYXNzZXMpKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1zdGFydFwiKSlcbiAgICAgICAgdmlldy50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLmFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgW10sIG91dENsYXNzZXMuY29uY2F0KG91dEVuZENsYXNzZXMpKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiKVxuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtZW5kXCIpKVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYoZXZlbnRUeXBlID09PSBcInJlbW92ZVwiKXsgcmV0dXJuIH1cbiAgICAgICAgbGV0IG9uU3RhcnQgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluU3RhcnRDbGFzc2VzLCBvdXRDbGFzc2VzLmNvbmNhdChvdXRTdGFydENsYXNzZXMpLmNvbmNhdChvdXRFbmRDbGFzc2VzKSlcbiAgICAgICAgICBsZXQgc3RpY2t5RGlzcGxheSA9IGRpc3BsYXkgfHwgdGhpcy5kZWZhdWx0RGlzcGxheShlbClcbiAgICAgICAgICBET00ucHV0U3RpY2t5KGVsLCBcInRvZ2dsZVwiLCBjdXJyZW50RWwgPT4gY3VycmVudEVsLnN0eWxlLmRpc3BsYXkgPSBzdGlja3lEaXNwbGF5KVxuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGluQ2xhc3NlcywgW10pXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuYWRkT3JSZW1vdmVDbGFzc2VzKGVsLCBpbkVuZENsYXNzZXMsIGluU3RhcnRDbGFzc2VzKSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OnNob3ctc3RhcnRcIikpXG4gICAgICAgIHZpZXcudHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIFtdLCBpbkNsYXNzZXMuY29uY2F0KGluRW5kQ2xhc3NlcykpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmKHRoaXMuaXNWaXNpYmxlKGVsKSl7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicGh4OmhpZGUtc3RhcnRcIikpXG4gICAgICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJ0b2dnbGVcIiwgY3VycmVudEVsID0+IGN1cnJlbnRFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCIpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6aGlkZS1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInBoeDpzaG93LXN0YXJ0XCIpKVxuICAgICAgICAgIGxldCBzdGlja3lEaXNwbGF5ID0gZGlzcGxheSB8fCB0aGlzLmRlZmF1bHREaXNwbGF5KGVsKVxuICAgICAgICAgIERPTS5wdXRTdGlja3koZWwsIFwidG9nZ2xlXCIsIGN1cnJlbnRFbCA9PiBjdXJyZW50RWwuc3R5bGUuZGlzcGxheSA9IHN0aWNreURpc3BsYXkpXG4gICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJwaHg6c2hvdy1lbmRcIikpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGFkZE9yUmVtb3ZlQ2xhc3NlcyhlbCwgYWRkcywgcmVtb3ZlcywgdHJhbnNpdGlvbiwgdGltZSwgdmlldyl7XG4gICAgbGV0IFt0cmFuc2l0aW9uX3J1biwgdHJhbnNpdGlvbl9zdGFydCwgdHJhbnNpdGlvbl9lbmRdID0gdHJhbnNpdGlvbiB8fCBbW10sIFtdLCBbXV1cbiAgICBpZih0cmFuc2l0aW9uX3J1bi5sZW5ndGggPiAwKXtcbiAgICAgIGxldCBvblN0YXJ0ID0gKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIHRyYW5zaXRpb25fc3RhcnQuY29uY2F0KHRyYW5zaXRpb25fcnVuKSwgW10pXG4gICAgICBsZXQgb25Eb25lID0gKCkgPT4gdGhpcy5hZGRPclJlbW92ZUNsYXNzZXMoZWwsIGFkZHMuY29uY2F0KHRyYW5zaXRpb25fZW5kKSwgcmVtb3Zlcy5jb25jYXQodHJhbnNpdGlvbl9ydW4pLmNvbmNhdCh0cmFuc2l0aW9uX3N0YXJ0KSlcbiAgICAgIHJldHVybiB2aWV3LnRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICAgIH1cbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGxldCBbcHJldkFkZHMsIHByZXZSZW1vdmVzXSA9IERPTS5nZXRTdGlja3koZWwsIFwiY2xhc3Nlc1wiLCBbW10sIFtdXSlcbiAgICAgIGxldCBrZWVwQWRkcyA9IGFkZHMuZmlsdGVyKG5hbWUgPT4gcHJldkFkZHMuaW5kZXhPZihuYW1lKSA8IDAgJiYgIWVsLmNsYXNzTGlzdC5jb250YWlucyhuYW1lKSlcbiAgICAgIGxldCBrZWVwUmVtb3ZlcyA9IHJlbW92ZXMuZmlsdGVyKG5hbWUgPT4gcHJldlJlbW92ZXMuaW5kZXhPZihuYW1lKSA8IDAgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKG5hbWUpKVxuICAgICAgbGV0IG5ld0FkZHMgPSBwcmV2QWRkcy5maWx0ZXIobmFtZSA9PiByZW1vdmVzLmluZGV4T2YobmFtZSkgPCAwKS5jb25jYXQoa2VlcEFkZHMpXG4gICAgICBsZXQgbmV3UmVtb3ZlcyA9IHByZXZSZW1vdmVzLmZpbHRlcihuYW1lID0+IGFkZHMuaW5kZXhPZihuYW1lKSA8IDApLmNvbmNhdChrZWVwUmVtb3ZlcylcblxuICAgICAgRE9NLnB1dFN0aWNreShlbCwgXCJjbGFzc2VzXCIsIGN1cnJlbnRFbCA9PiB7XG4gICAgICAgIGN1cnJlbnRFbC5jbGFzc0xpc3QucmVtb3ZlKC4uLm5ld1JlbW92ZXMpXG4gICAgICAgIGN1cnJlbnRFbC5jbGFzc0xpc3QuYWRkKC4uLm5ld0FkZHMpXG4gICAgICAgIHJldHVybiBbbmV3QWRkcywgbmV3UmVtb3Zlc11cbiAgICAgIH0pXG4gICAgfSlcbiAgfSxcblxuICBzZXRPclJlbW92ZUF0dHJzKGVsLCBzZXRzLCByZW1vdmVzKXtcbiAgICBsZXQgW3ByZXZTZXRzLCBwcmV2UmVtb3Zlc10gPSBET00uZ2V0U3RpY2t5KGVsLCBcImF0dHJzXCIsIFtbXSwgW11dKVxuXG4gICAgbGV0IGFsdGVyZWRBdHRycyA9IHNldHMubWFwKChbYXR0ciwgX3ZhbF0pID0+IGF0dHIpLmNvbmNhdChyZW1vdmVzKTtcbiAgICBsZXQgbmV3U2V0cyA9IHByZXZTZXRzLmZpbHRlcigoW2F0dHIsIF92YWxdKSA9PiAhYWx0ZXJlZEF0dHJzLmluY2x1ZGVzKGF0dHIpKS5jb25jYXQoc2V0cyk7XG4gICAgbGV0IG5ld1JlbW92ZXMgPSBwcmV2UmVtb3Zlcy5maWx0ZXIoKGF0dHIpID0+ICFhbHRlcmVkQXR0cnMuaW5jbHVkZXMoYXR0cikpLmNvbmNhdChyZW1vdmVzKTtcblxuICAgIERPTS5wdXRTdGlja3koZWwsIFwiYXR0cnNcIiwgY3VycmVudEVsID0+IHtcbiAgICAgIG5ld1JlbW92ZXMuZm9yRWFjaChhdHRyID0+IGN1cnJlbnRFbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cikpXG4gICAgICBuZXdTZXRzLmZvckVhY2goKFthdHRyLCB2YWxdKSA9PiBjdXJyZW50RWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbCkpXG4gICAgICByZXR1cm4gW25ld1NldHMsIG5ld1JlbW92ZXNdXG4gICAgfSlcbiAgfSxcblxuICBoYXNBbGxDbGFzc2VzKGVsLCBjbGFzc2VzKXsgcmV0dXJuIGNsYXNzZXMuZXZlcnkobmFtZSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMobmFtZSkpIH0sXG5cbiAgaXNUb2dnbGVkT3V0KGVsLCBvdXRDbGFzc2VzKXtcbiAgICByZXR1cm4gIXRoaXMuaXNWaXNpYmxlKGVsKSB8fCB0aGlzLmhhc0FsbENsYXNzZXMoZWwsIG91dENsYXNzZXMpXG4gIH0sXG5cbiAgZmlsdGVyVG9FbHMoc291cmNlRWwsIHt0b30pe1xuICAgIHJldHVybiB0byA/IERPTS5hbGwoZG9jdW1lbnQsIHRvKSA6IFtzb3VyY2VFbF1cbiAgfSxcblxuICBkZWZhdWx0RGlzcGxheShlbCl7XG4gICAgcmV0dXJuIHt0cjogXCJ0YWJsZS1yb3dcIiwgdGQ6IFwidGFibGUtY2VsbFwifVtlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCldIHx8IFwiYmxvY2tcIlxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEpTXG4iLCAiaW1wb3J0IHtcbiAgQkVGT1JFX1VOTE9BRF9MT0FERVJfVElNRU9VVCxcbiAgQ0hFQ0tBQkxFX0lOUFVUUyxcbiAgQ09OU0VDVVRJVkVfUkVMT0FEUyxcbiAgUEhYX0FVVE9fUkVDT1ZFUixcbiAgUEhYX0NPTVBPTkVOVCxcbiAgUEhYX0NPTk5FQ1RFRF9DTEFTUyxcbiAgUEhYX0RJU0FCTEVfV0lUSCxcbiAgUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFLFxuICBQSFhfRElTQUJMRUQsXG4gIFBIWF9MT0FESU5HX0NMQVNTLFxuICBQSFhfRVZFTlRfQ0xBU1NFUyxcbiAgUEhYX0VSUk9SX0NMQVNTLFxuICBQSFhfQ0xJRU5UX0VSUk9SX0NMQVNTLFxuICBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTLFxuICBQSFhfRkVFREJBQ0tfRk9SLFxuICBQSFhfSEFTX1NVQk1JVFRFRCxcbiAgUEhYX0hPT0ssXG4gIFBIWF9QQUdFX0xPQURJTkcsXG4gIFBIWF9QQVJFTlRfSUQsXG4gIFBIWF9QUk9HUkVTUyxcbiAgUEhYX1JFQURPTkxZLFxuICBQSFhfUkVGLFxuICBQSFhfUkVGX1NSQyxcbiAgUEhYX1JPT1RfSUQsXG4gIFBIWF9TRVNTSU9OLFxuICBQSFhfU1RBVElDLFxuICBQSFhfVFJBQ0tfU1RBVElDLFxuICBQSFhfVFJBQ0tfVVBMT0FEUyxcbiAgUEhYX1VQREFURSxcbiAgUEhYX1VQTE9BRF9SRUYsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfTUFJTixcbiAgUEhYX01PVU5URUQsXG4gIFBVU0hfVElNRU9VVCxcbiAgUEhYX1ZJRVdQT1JUX1RPUCxcbiAgUEhYX1ZJRVdQT1JUX0JPVFRPTSxcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvbmUsXG4gIGNsb3Nlc3RQaHhCaW5kaW5nLFxuICBpc0VtcHR5LFxuICBpc0VxdWFsT2JqLFxuICBsb2dFcnJvcixcbiAgbWF5YmUsXG4gIGlzQ2lkLFxufSBmcm9tIFwiLi91dGlsc1wiXG5cbmltcG9ydCBCcm93c2VyIGZyb20gXCIuL2Jyb3dzZXJcIlxuaW1wb3J0IERPTSBmcm9tIFwiLi9kb21cIlxuaW1wb3J0IERPTVBhdGNoIGZyb20gXCIuL2RvbV9wYXRjaFwiXG5pbXBvcnQgTGl2ZVVwbG9hZGVyIGZyb20gXCIuL2xpdmVfdXBsb2FkZXJcIlxuaW1wb3J0IFJlbmRlcmVkIGZyb20gXCIuL3JlbmRlcmVkXCJcbmltcG9ydCBWaWV3SG9vayBmcm9tIFwiLi92aWV3X2hvb2tcIlxuaW1wb3J0IEpTIGZyb20gXCIuL2pzXCJcblxubGV0IHNlcmlhbGl6ZUZvcm0gPSAoZm9ybSwgbWV0YWRhdGEsIG9ubHlOYW1lcyA9IFtdKSA9PiB7XG4gIGxldCB7c3VibWl0dGVyLCAuLi5tZXRhfSA9IG1ldGFkYXRhXG5cbiAgLy8gVE9ETzogUmVwbGFjZSB3aXRoIGBuZXcgRm9ybURhdGEoZm9ybSwgc3VibWl0dGVyKWAgd2hlbiBzdXBwb3J0ZWQgYnkgbGF0ZXN0IGJyb3dzZXJzLFxuICAvLyAgICAgICBhbmQgbWVudGlvbiBgZm9ybWRhdGEtc3VibWl0dGVyLXBvbHlmaWxsYCBpbiB0aGUgZG9jcy5cbiAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pXG5cbiAgLy8gVE9ETzogUmVtb3ZlIHdoZW4gRm9ybURhdGEgY29uc3RydWN0b3Igc3VwcG9ydHMgdGhlIHN1Ym1pdHRlciBhcmd1bWVudC5cbiAgaWYoc3VibWl0dGVyICYmIHN1Ym1pdHRlci5oYXNBdHRyaWJ1dGUoXCJuYW1lXCIpICYmIHN1Ym1pdHRlci5mb3JtICYmIHN1Ym1pdHRlci5mb3JtID09PSBmb3JtKXtcbiAgICBmb3JtRGF0YS5hcHBlbmQoc3VibWl0dGVyLm5hbWUsIHN1Ym1pdHRlci52YWx1ZSlcbiAgfVxuXG4gIGxldCB0b1JlbW92ZSA9IFtdXG5cbiAgZm9ybURhdGEuZm9yRWFjaCgodmFsLCBrZXksIF9pbmRleCkgPT4ge1xuICAgIGlmKHZhbCBpbnN0YW5jZW9mIEZpbGUpeyB0b1JlbW92ZS5wdXNoKGtleSkgfVxuICB9KVxuXG4gIC8vIENsZWFudXAgYWZ0ZXIgYnVpbGRpbmcgZmlsZURhdGFcbiAgdG9SZW1vdmUuZm9yRWFjaChrZXkgPT4gZm9ybURhdGEuZGVsZXRlKGtleSkpXG5cbiAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKVxuICBmb3IobGV0IFtrZXksIHZhbF0gb2YgZm9ybURhdGEuZW50cmllcygpKXtcbiAgICBpZihvbmx5TmFtZXMubGVuZ3RoID09PSAwIHx8IG9ubHlOYW1lcy5pbmRleE9mKGtleSkgPj0gMCl7XG4gICAgICBwYXJhbXMuYXBwZW5kKGtleSwgdmFsKVxuICAgIH1cbiAgfVxuICBmb3IobGV0IG1ldGFLZXkgaW4gbWV0YSl7IHBhcmFtcy5hcHBlbmQobWV0YUtleSwgbWV0YVttZXRhS2V5XSkgfVxuXG4gIHJldHVybiBwYXJhbXMudG9TdHJpbmcoKVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcbiAgY29uc3RydWN0b3IoZWwsIGxpdmVTb2NrZXQsIHBhcmVudFZpZXcsIGZsYXNoLCBsaXZlUmVmZXJlcil7XG4gICAgdGhpcy5pc0RlYWQgPSBmYWxzZVxuICAgIHRoaXMubGl2ZVNvY2tldCA9IGxpdmVTb2NrZXRcbiAgICB0aGlzLmZsYXNoID0gZmxhc2hcbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudFZpZXdcbiAgICB0aGlzLnJvb3QgPSBwYXJlbnRWaWV3ID8gcGFyZW50Vmlldy5yb290IDogdGhpc1xuICAgIHRoaXMuZWwgPSBlbFxuICAgIHRoaXMuaWQgPSB0aGlzLmVsLmlkXG4gICAgdGhpcy5yZWYgPSAwXG4gICAgdGhpcy5jaGlsZEpvaW5zID0gMFxuICAgIHRoaXMubG9hZGVyVGltZXIgPSBudWxsXG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMucHJ1bmluZ0NJRHMgPSBbXVxuICAgIHRoaXMucmVkaXJlY3QgPSBmYWxzZVxuICAgIHRoaXMuaHJlZiA9IG51bGxcbiAgICB0aGlzLmpvaW5Db3VudCA9IHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuam9pbkNvdW50IC0gMSA6IDBcbiAgICB0aGlzLmpvaW5QZW5kaW5nID0gdHJ1ZVxuICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2VcbiAgICB0aGlzLmpvaW5DYWxsYmFjayA9IGZ1bmN0aW9uKG9uRG9uZSl7IG9uRG9uZSAmJiBvbkRvbmUoKSB9XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2sgPSBmdW5jdGlvbigpeyB9XG4gICAgdGhpcy5wZW5kaW5nSm9pbk9wcyA9IHRoaXMucGFyZW50ID8gbnVsbCA6IFtdXG4gICAgdGhpcy52aWV3SG9va3MgPSB7fVxuICAgIHRoaXMudXBsb2FkZXJzID0ge31cbiAgICB0aGlzLmZvcm1TdWJtaXRzID0gW11cbiAgICB0aGlzLmNoaWxkcmVuID0gdGhpcy5wYXJlbnQgPyBudWxsIDoge31cbiAgICB0aGlzLnJvb3QuY2hpbGRyZW5bdGhpcy5pZF0gPSB7fVxuICAgIHRoaXMuY2hhbm5lbCA9IHRoaXMubGl2ZVNvY2tldC5jaGFubmVsKGBsdjoke3RoaXMuaWR9YCwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVkaXJlY3Q6IHRoaXMucmVkaXJlY3QgPyB0aGlzLmhyZWYgOiB1bmRlZmluZWQsXG4gICAgICAgIHVybDogdGhpcy5yZWRpcmVjdCA/IHVuZGVmaW5lZCA6IHRoaXMuaHJlZiB8fCB1bmRlZmluZWQsXG4gICAgICAgIHBhcmFtczogdGhpcy5jb25uZWN0UGFyYW1zKGxpdmVSZWZlcmVyKSxcbiAgICAgICAgc2Vzc2lvbjogdGhpcy5nZXRTZXNzaW9uKCksXG4gICAgICAgIHN0YXRpYzogdGhpcy5nZXRTdGF0aWMoKSxcbiAgICAgICAgZmxhc2g6IHRoaXMuZmxhc2gsXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNldEhyZWYoaHJlZil7IHRoaXMuaHJlZiA9IGhyZWYgfVxuXG4gIHNldFJlZGlyZWN0KGhyZWYpe1xuICAgIHRoaXMucmVkaXJlY3QgPSB0cnVlXG4gICAgdGhpcy5ocmVmID0gaHJlZlxuICB9XG5cbiAgaXNNYWluKCl7IHJldHVybiB0aGlzLmVsLmhhc0F0dHJpYnV0ZShQSFhfTUFJTikgfVxuXG4gIGNvbm5lY3RQYXJhbXMobGl2ZVJlZmVyZXIpe1xuICAgIGxldCBwYXJhbXMgPSB0aGlzLmxpdmVTb2NrZXQucGFyYW1zKHRoaXMuZWwpXG4gICAgbGV0IG1hbmlmZXN0ID1cbiAgICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX1RSQUNLX1NUQVRJQyl9XWApXG4gICAgICAgIC5tYXAobm9kZSA9PiBub2RlLnNyYyB8fCBub2RlLmhyZWYpLmZpbHRlcih1cmwgPT4gdHlwZW9mICh1cmwpID09PSBcInN0cmluZ1wiKVxuXG4gICAgaWYobWFuaWZlc3QubGVuZ3RoID4gMCl7IHBhcmFtc1tcIl90cmFja19zdGF0aWNcIl0gPSBtYW5pZmVzdCB9XG4gICAgcGFyYW1zW1wiX21vdW50c1wiXSA9IHRoaXMuam9pbkNvdW50XG4gICAgcGFyYW1zW1wiX2xpdmVfcmVmZXJlclwiXSA9IGxpdmVSZWZlcmVyXG5cbiAgICByZXR1cm4gcGFyYW1zXG4gIH1cblxuICBpc0Nvbm5lY3RlZCgpeyByZXR1cm4gdGhpcy5jaGFubmVsLmNhblB1c2goKSB9XG5cbiAgZ2V0U2Vzc2lvbigpeyByZXR1cm4gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pIH1cblxuICBnZXRTdGF0aWMoKXtcbiAgICBsZXQgdmFsID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoUEhYX1NUQVRJQylcbiAgICByZXR1cm4gdmFsID09PSBcIlwiID8gbnVsbCA6IHZhbFxuICB9XG5cbiAgZGVzdHJveShjYWxsYmFjayA9IGZ1bmN0aW9uICgpeyB9KXtcbiAgICB0aGlzLmRlc3Ryb3lBbGxDaGlsZHJlbigpXG4gICAgdGhpcy5kZXN0cm95ZWQgPSB0cnVlXG4gICAgZGVsZXRlIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVxuICAgIGlmKHRoaXMucGFyZW50KXsgZGVsZXRlIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLnBhcmVudC5pZF1bdGhpcy5pZF0gfVxuICAgIGNsZWFyVGltZW91dCh0aGlzLmxvYWRlclRpbWVyKVxuICAgIGxldCBvbkZpbmlzaGVkID0gKCkgPT4ge1xuICAgICAgY2FsbGJhY2soKVxuICAgICAgZm9yKGxldCBpZCBpbiB0aGlzLnZpZXdIb29rcyl7XG4gICAgICAgIHRoaXMuZGVzdHJveUhvb2sodGhpcy52aWV3SG9va3NbaWRdKVxuICAgICAgfVxuICAgIH1cblxuICAgIERPTS5tYXJrUGh4Q2hpbGREZXN0cm95ZWQodGhpcy5lbClcblxuICAgIHRoaXMubG9nKFwiZGVzdHJveWVkXCIsICgpID0+IFtcInRoZSBjaGlsZCBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHBhcmVudFwiXSlcbiAgICB0aGlzLmNoYW5uZWwubGVhdmUoKVxuICAgICAgLnJlY2VpdmUoXCJva1wiLCBvbkZpbmlzaGVkKVxuICAgICAgLnJlY2VpdmUoXCJlcnJvclwiLCBvbkZpbmlzaGVkKVxuICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsIG9uRmluaXNoZWQpXG4gIH1cblxuICBzZXRDb250YWluZXJDbGFzc2VzKC4uLmNsYXNzZXMpe1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgIFBIWF9DT05ORUNURURfQ0xBU1MsXG4gICAgICBQSFhfTE9BRElOR19DTEFTUyxcbiAgICAgIFBIWF9FUlJPUl9DTEFTUyxcbiAgICAgIFBIWF9DTElFTlRfRVJST1JfQ0xBU1MsXG4gICAgICBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTXG4gICAgKVxuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKVxuICB9XG5cbiAgc2hvd0xvYWRlcih0aW1lb3V0KXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2FkZXJUaW1lcilcbiAgICBpZih0aW1lb3V0KXtcbiAgICAgIHRoaXMubG9hZGVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2hvd0xvYWRlcigpLCB0aW1lb3V0KVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IobGV0IGlkIGluIHRoaXMudmlld0hvb2tzKXsgdGhpcy52aWV3SG9va3NbaWRdLl9fZGlzY29ubmVjdGVkKCkgfVxuICAgICAgdGhpcy5zZXRDb250YWluZXJDbGFzc2VzKFBIWF9MT0FESU5HX0NMQVNTKVxuICAgIH1cbiAgfVxuXG4gIGV4ZWNBbGwoYmluZGluZyl7XG4gICAgRE9NLmFsbCh0aGlzLmVsLCBgWyR7YmluZGluZ31dYCwgZWwgPT4gdGhpcy5saXZlU29ja2V0LmV4ZWNKUyhlbCwgZWwuZ2V0QXR0cmlidXRlKGJpbmRpbmcpKSlcbiAgfVxuXG4gIGhpZGVMb2FkZXIoKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5sb2FkZXJUaW1lcilcbiAgICB0aGlzLnNldENvbnRhaW5lckNsYXNzZXMoUEhYX0NPTk5FQ1RFRF9DTEFTUylcbiAgICB0aGlzLmV4ZWNBbGwodGhpcy5iaW5kaW5nKFwiY29ubmVjdGVkXCIpKVxuICB9XG5cbiAgdHJpZ2dlclJlY29ubmVjdGVkKCl7XG4gICAgZm9yKGxldCBpZCBpbiB0aGlzLnZpZXdIb29rcyl7IHRoaXMudmlld0hvb2tzW2lkXS5fX3JlY29ubmVjdGVkKCkgfVxuICB9XG5cbiAgbG9nKGtpbmQsIG1zZ0NhbGxiYWNrKXtcbiAgICB0aGlzLmxpdmVTb2NrZXQubG9nKHRoaXMsIGtpbmQsIG1zZ0NhbGxiYWNrKVxuICB9XG5cbiAgdHJhbnNpdGlvbih0aW1lLCBvblN0YXJ0LCBvbkRvbmUgPSBmdW5jdGlvbigpe30pe1xuICAgIHRoaXMubGl2ZVNvY2tldC50cmFuc2l0aW9uKHRpbWUsIG9uU3RhcnQsIG9uRG9uZSlcbiAgfVxuXG4gIHdpdGhpblRhcmdldHMocGh4VGFyZ2V0LCBjYWxsYmFjayl7XG4gICAgaWYocGh4VGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgcGh4VGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudCl7XG4gICAgICByZXR1cm4gdGhpcy5saXZlU29ja2V0Lm93bmVyKHBoeFRhcmdldCwgdmlldyA9PiBjYWxsYmFjayh2aWV3LCBwaHhUYXJnZXQpKVxuICAgIH1cblxuICAgIGlmKGlzQ2lkKHBoeFRhcmdldCkpe1xuICAgICAgbGV0IHRhcmdldHMgPSBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuZWwsIHBoeFRhcmdldClcbiAgICAgIGlmKHRhcmdldHMubGVuZ3RoID09PSAwKXtcbiAgICAgICAgbG9nRXJyb3IoYG5vIGNvbXBvbmVudCBmb3VuZCBtYXRjaGluZyBwaHgtdGFyZ2V0IG9mICR7cGh4VGFyZ2V0fWApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjayh0aGlzLCBwYXJzZUludChwaHhUYXJnZXQpKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdGFyZ2V0cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChwaHhUYXJnZXQpKVxuICAgICAgaWYodGFyZ2V0cy5sZW5ndGggPT09IDApeyBsb2dFcnJvcihgbm90aGluZyBmb3VuZCBtYXRjaGluZyB0aGUgcGh4LXRhcmdldCBzZWxlY3RvciBcIiR7cGh4VGFyZ2V0fVwiYCkgfVxuICAgICAgdGFyZ2V0cy5mb3JFYWNoKHRhcmdldCA9PiB0aGlzLmxpdmVTb2NrZXQub3duZXIodGFyZ2V0LCB2aWV3ID0+IGNhbGxiYWNrKHZpZXcsIHRhcmdldCkpKVxuICAgIH1cbiAgfVxuXG4gIGFwcGx5RGlmZih0eXBlLCByYXdEaWZmLCBjYWxsYmFjayl7XG4gICAgdGhpcy5sb2codHlwZSwgKCkgPT4gW1wiXCIsIGNsb25lKHJhd0RpZmYpXSlcbiAgICBsZXQge2RpZmYsIHJlcGx5LCBldmVudHMsIHRpdGxlfSA9IFJlbmRlcmVkLmV4dHJhY3QocmF3RGlmZilcbiAgICBjYWxsYmFjayh7ZGlmZiwgcmVwbHksIGV2ZW50c30pXG4gICAgaWYodGl0bGUpeyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IERPTS5wdXRUaXRsZSh0aXRsZSkpIH1cbiAgfVxuXG4gIG9uSm9pbihyZXNwKXtcbiAgICBsZXQge3JlbmRlcmVkLCBjb250YWluZXJ9ID0gcmVzcFxuICAgIGlmKGNvbnRhaW5lcil7XG4gICAgICBsZXQgW3RhZywgYXR0cnNdID0gY29udGFpbmVyXG4gICAgICB0aGlzLmVsID0gRE9NLnJlcGxhY2VSb290Q29udGFpbmVyKHRoaXMuZWwsIHRhZywgYXR0cnMpXG4gICAgfVxuICAgIHRoaXMuY2hpbGRKb2lucyA9IDBcbiAgICB0aGlzLmpvaW5QZW5kaW5nID0gdHJ1ZVxuICAgIHRoaXMuZmxhc2ggPSBudWxsXG5cbiAgICBCcm93c2VyLmRyb3BMb2NhbCh0aGlzLmxpdmVTb2NrZXQubG9jYWxTdG9yYWdlLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsIENPTlNFQ1VUSVZFX1JFTE9BRFMpXG4gICAgdGhpcy5hcHBseURpZmYoXCJtb3VudFwiLCByZW5kZXJlZCwgKHtkaWZmLCBldmVudHN9KSA9PiB7XG4gICAgICB0aGlzLnJlbmRlcmVkID0gbmV3IFJlbmRlcmVkKHRoaXMuaWQsIGRpZmYpXG4gICAgICBsZXQgW2h0bWwsIHN0cmVhbXNdID0gdGhpcy5yZW5kZXJDb250YWluZXIobnVsbCwgXCJqb2luXCIpXG4gICAgICB0aGlzLmRyb3BQZW5kaW5nUmVmcygpXG4gICAgICBsZXQgZm9ybXMgPSB0aGlzLmZvcm1zRm9yUmVjb3ZlcnkoaHRtbClcbiAgICAgIHRoaXMuam9pbkNvdW50KytcblxuICAgICAgaWYoZm9ybXMubGVuZ3RoID4gMCl7XG4gICAgICAgIGZvcm1zLmZvckVhY2goKFtmb3JtLCBuZXdGb3JtLCBuZXdDaWRdLCBpKSA9PiB7XG4gICAgICAgICAgdGhpcy5wdXNoRm9ybVJlY292ZXJ5KGZvcm0sIG5ld0NpZCwgcmVzcCA9PiB7XG4gICAgICAgICAgICBpZihpID09PSBmb3Jtcy5sZW5ndGggLSAxKXtcbiAgICAgICAgICAgICAgdGhpcy5vbkpvaW5Db21wbGV0ZShyZXNwLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25Kb2luQ29tcGxldGUocmVzcCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBkcm9wUGVuZGluZ1JlZnMoKXtcbiAgICBET00uYWxsKGRvY3VtZW50LCBgWyR7UEhYX1JFRl9TUkN9PVwiJHt0aGlzLmlkfVwiXVske1BIWF9SRUZ9XWAsIGVsID0+IHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVGKVxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUZfU1JDKVxuICAgIH0pXG4gIH1cblxuICBvbkpvaW5Db21wbGV0ZSh7bGl2ZV9wYXRjaH0sIGh0bWwsIHN0cmVhbXMsIGV2ZW50cyl7XG4gICAgLy8gSW4gb3JkZXIgdG8gcHJvdmlkZSBhIGJldHRlciBleHBlcmllbmNlLCB3ZSB3YW50IHRvIGpvaW5cbiAgICAvLyBhbGwgTGl2ZVZpZXdzIGZpcnN0IGFuZCBvbmx5IHRoZW4gYXBwbHkgdGhlaXIgcGF0Y2hlcy5cbiAgICBpZih0aGlzLmpvaW5Db3VudCA+IDEgfHwgKHRoaXMucGFyZW50ICYmICF0aGlzLnBhcmVudC5pc0pvaW5QZW5kaW5nKCkpKXtcbiAgICAgIHJldHVybiB0aGlzLmFwcGx5Sm9pblBhdGNoKGxpdmVfcGF0Y2gsIGh0bWwsIHN0cmVhbXMsIGV2ZW50cylcbiAgICB9XG5cbiAgICAvLyBPbmUgZG93bnNpZGUgb2YgdGhpcyBhcHByb2FjaCBpcyB0aGF0IHdlIG5lZWQgdG8gZmluZCBwaHhDaGlsZHJlblxuICAgIC8vIGluIHRoZSBodG1sIGZyYWdtZW50LCBpbnN0ZWFkIG9mIGRpcmVjdGx5IG9uIHRoZSBET00uIFRoZSBmcmFnbWVudFxuICAgIC8vIGFsc28gZG9lcyBub3QgaW5jbHVkZSBQSFhfU1RBVElDLCBzbyB3ZSBuZWVkIHRvIGNvcHkgaXQgb3ZlciBmcm9tXG4gICAgLy8gdGhlIERPTS5cbiAgICBsZXQgbmV3Q2hpbGRyZW4gPSBET00uZmluZFBoeENoaWxkcmVuSW5GcmFnbWVudChodG1sLCB0aGlzLmlkKS5maWx0ZXIodG9FbCA9PiB7XG4gICAgICBsZXQgZnJvbUVsID0gdG9FbC5pZCAmJiB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoYFtpZD1cIiR7dG9FbC5pZH1cIl1gKVxuICAgICAgbGV0IHBoeFN0YXRpYyA9IGZyb21FbCAmJiBmcm9tRWwuZ2V0QXR0cmlidXRlKFBIWF9TVEFUSUMpXG4gICAgICBpZihwaHhTdGF0aWMpeyB0b0VsLnNldEF0dHJpYnV0ZShQSFhfU1RBVElDLCBwaHhTdGF0aWMpIH1cbiAgICAgIHJldHVybiB0aGlzLmpvaW5DaGlsZCh0b0VsKVxuICAgIH0pXG5cbiAgICBpZihuZXdDaGlsZHJlbi5sZW5ndGggPT09IDApe1xuICAgICAgaWYodGhpcy5wYXJlbnQpe1xuICAgICAgICB0aGlzLnJvb3QucGVuZGluZ0pvaW5PcHMucHVzaChbdGhpcywgKCkgPT4gdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXSlcbiAgICAgICAgdGhpcy5wYXJlbnQuYWNrSm9pbih0aGlzKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbkFsbENoaWxkSm9pbnNDb21wbGV0ZSgpXG4gICAgICAgIHRoaXMuYXBwbHlKb2luUGF0Y2gobGl2ZV9wYXRjaCwgaHRtbCwgc3RyZWFtcywgZXZlbnRzKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvb3QucGVuZGluZ0pvaW5PcHMucHVzaChbdGhpcywgKCkgPT4gdGhpcy5hcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpXSlcbiAgICB9XG4gIH1cblxuICBhdHRhY2hUcnVlRG9jRWwoKXtcbiAgICB0aGlzLmVsID0gRE9NLmJ5SWQodGhpcy5pZClcbiAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShQSFhfUk9PVF9JRCwgdGhpcy5yb290LmlkKVxuICB9XG5cbiAgZXhlY05ld01vdW50ZWQoKXtcbiAgICBsZXQgcGh4Vmlld3BvcnRUb3AgPSB0aGlzLmJpbmRpbmcoUEhYX1ZJRVdQT1JUX1RPUClcbiAgICBsZXQgcGh4Vmlld3BvcnRCb3R0b20gPSB0aGlzLmJpbmRpbmcoUEhYX1ZJRVdQT1JUX0JPVFRPTSlcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHtwaHhWaWV3cG9ydFRvcH1dLCBbJHtwaHhWaWV3cG9ydEJvdHRvbX1dYCwgaG9va0VsID0+IHtcbiAgICAgIERPTS5tYXliZUFkZFByaXZhdGVIb29rcyhob29rRWwsIHBoeFZpZXdwb3J0VG9wLCBwaHhWaWV3cG9ydEJvdHRvbSlcbiAgICAgIHRoaXMubWF5YmVBZGROZXdIb29rKGhvb2tFbClcbiAgICB9KVxuICAgIERPTS5hbGwodGhpcy5lbCwgYFske3RoaXMuYmluZGluZyhQSFhfSE9PSyl9XSwgW2RhdGEtcGh4LSR7UEhYX0hPT0t9XWAsIGhvb2tFbCA9PiB7XG4gICAgICB0aGlzLm1heWJlQWRkTmV3SG9vayhob29rRWwpXG4gICAgfSlcbiAgICBET00uYWxsKHRoaXMuZWwsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX01PVU5URUQpfV1gLCBlbCA9PiB0aGlzLm1heWJlTW91bnRlZChlbCkpXG4gIH1cblxuICBhcHBseUpvaW5QYXRjaChsaXZlX3BhdGNoLCBodG1sLCBzdHJlYW1zLCBldmVudHMpe1xuICAgIHRoaXMuYXR0YWNoVHJ1ZURvY0VsKClcbiAgICBsZXQgcGF0Y2ggPSBuZXcgRE9NUGF0Y2godGhpcywgdGhpcy5lbCwgdGhpcy5pZCwgaHRtbCwgc3RyZWFtcywgbnVsbClcbiAgICBwYXRjaC5tYXJrUHJ1bmFibGVDb250ZW50Rm9yUmVtb3ZhbCgpXG4gICAgdGhpcy5wZXJmb3JtUGF0Y2gocGF0Y2gsIGZhbHNlKVxuICAgIHRoaXMuam9pbk5ld0NoaWxkcmVuKClcbiAgICB0aGlzLmV4ZWNOZXdNb3VudGVkKClcblxuICAgIHRoaXMuam9pblBlbmRpbmcgPSBmYWxzZVxuICAgIHRoaXMubGl2ZVNvY2tldC5kaXNwYXRjaEV2ZW50cyhldmVudHMpXG4gICAgdGhpcy5hcHBseVBlbmRpbmdVcGRhdGVzKClcblxuICAgIGlmKGxpdmVfcGF0Y2gpe1xuICAgICAgbGV0IHtraW5kLCB0b30gPSBsaXZlX3BhdGNoXG4gICAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVBhdGNoKHRvLCBraW5kKVxuICAgIH1cbiAgICB0aGlzLmhpZGVMb2FkZXIoKVxuICAgIGlmKHRoaXMuam9pbkNvdW50ID4gMSl7IHRoaXMudHJpZ2dlclJlY29ubmVjdGVkKCkgfVxuICAgIHRoaXMuc3RvcENhbGxiYWNrKClcbiAgfVxuXG4gIHRyaWdnZXJCZWZvcmVVcGRhdGVIb29rKGZyb21FbCwgdG9FbCl7XG4gICAgdGhpcy5saXZlU29ja2V0LnRyaWdnZXJET00oXCJvbkJlZm9yZUVsVXBkYXRlZFwiLCBbZnJvbUVsLCB0b0VsXSlcbiAgICBsZXQgaG9vayA9IHRoaXMuZ2V0SG9vayhmcm9tRWwpXG4gICAgbGV0IGlzSWdub3JlZCA9IGhvb2sgJiYgRE9NLmlzSWdub3JlZChmcm9tRWwsIHRoaXMuYmluZGluZyhQSFhfVVBEQVRFKSlcbiAgICBpZihob29rICYmICFmcm9tRWwuaXNFcXVhbE5vZGUodG9FbCkgJiYgIShpc0lnbm9yZWQgJiYgaXNFcXVhbE9iaihmcm9tRWwuZGF0YXNldCwgdG9FbC5kYXRhc2V0KSkpe1xuICAgICAgaG9vay5fX2JlZm9yZVVwZGF0ZSgpXG4gICAgICByZXR1cm4gaG9va1xuICAgIH1cbiAgfVxuXG4gIG1heWJlTW91bnRlZChlbCl7XG4gICAgbGV0IHBoeE1vdW50ZWQgPSBlbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9NT1VOVEVEKSlcbiAgICBsZXQgaGFzQmVlbkludm9rZWQgPSBwaHhNb3VudGVkICYmIERPTS5wcml2YXRlKGVsLCBcIm1vdW50ZWRcIilcbiAgICBpZihwaHhNb3VudGVkICYmICFoYXNCZWVuSW52b2tlZCl7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQuZXhlY0pTKGVsLCBwaHhNb3VudGVkKVxuICAgICAgRE9NLnB1dFByaXZhdGUoZWwsIFwibW91bnRlZFwiLCB0cnVlKVxuICAgIH1cbiAgfVxuXG4gIG1heWJlQWRkTmV3SG9vayhlbCwgZm9yY2Upe1xuICAgIGxldCBuZXdIb29rID0gdGhpcy5hZGRIb29rKGVsKVxuICAgIGlmKG5ld0hvb2speyBuZXdIb29rLl9fbW91bnRlZCgpIH1cbiAgfVxuXG4gIHBlcmZvcm1QYXRjaChwYXRjaCwgcHJ1bmVDaWRzKXtcbiAgICBsZXQgcmVtb3ZlZEVscyA9IFtdXG4gICAgbGV0IHBoeENoaWxkcmVuQWRkZWQgPSBmYWxzZVxuICAgIGxldCB1cGRhdGVkSG9va0lkcyA9IG5ldyBTZXQoKVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJhZGRlZFwiLCBlbCA9PiB7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQudHJpZ2dlckRPTShcIm9uTm9kZUFkZGVkXCIsIFtlbF0pXG4gICAgICB0aGlzLm1heWJlQWRkTmV3SG9vayhlbClcbiAgICAgIGlmKGVsLmdldEF0dHJpYnV0ZSl7IHRoaXMubWF5YmVNb3VudGVkKGVsKSB9XG4gICAgfSlcblxuICAgIHBhdGNoLmFmdGVyKFwicGh4Q2hpbGRBZGRlZFwiLCBlbCA9PiB7XG4gICAgICBpZihET00uaXNQaHhTdGlja3koZWwpKXtcbiAgICAgICAgdGhpcy5saXZlU29ja2V0LmpvaW5Sb290Vmlld3MoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGh4Q2hpbGRyZW5BZGRlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYmVmb3JlKFwidXBkYXRlZFwiLCAoZnJvbUVsLCB0b0VsKSA9PiB7XG4gICAgICBsZXQgaG9vayA9IHRoaXMudHJpZ2dlckJlZm9yZVVwZGF0ZUhvb2soZnJvbUVsLCB0b0VsKVxuICAgICAgaWYoaG9vayl7IHVwZGF0ZWRIb29rSWRzLmFkZChmcm9tRWwuaWQpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJ1cGRhdGVkXCIsIGVsID0+IHtcbiAgICAgIGlmKHVwZGF0ZWRIb29rSWRzLmhhcyhlbC5pZCkpeyB0aGlzLmdldEhvb2soZWwpLl9fdXBkYXRlZCgpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJkaXNjYXJkZWRcIiwgKGVsKSA9PiB7XG4gICAgICBpZihlbC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpeyByZW1vdmVkRWxzLnB1c2goZWwpIH1cbiAgICB9KVxuXG4gICAgcGF0Y2guYWZ0ZXIoXCJ0cmFuc2l0aW9uc0Rpc2NhcmRlZFwiLCBlbHMgPT4gdGhpcy5hZnRlckVsZW1lbnRzUmVtb3ZlZChlbHMsIHBydW5lQ2lkcykpXG4gICAgcGF0Y2gucGVyZm9ybSgpXG4gICAgdGhpcy5hZnRlckVsZW1lbnRzUmVtb3ZlZChyZW1vdmVkRWxzLCBwcnVuZUNpZHMpXG5cbiAgICByZXR1cm4gcGh4Q2hpbGRyZW5BZGRlZFxuICB9XG5cbiAgYWZ0ZXJFbGVtZW50c1JlbW92ZWQoZWxlbWVudHMsIHBydW5lQ2lkcyl7XG4gICAgbGV0IGRlc3Ryb3llZENJRHMgPSBbXVxuICAgIGVsZW1lbnRzLmZvckVhY2gocGFyZW50ID0+IHtcbiAgICAgIGxldCBjb21wb25lbnRzID0gRE9NLmFsbChwYXJlbnQsIGBbJHtQSFhfQ09NUE9ORU5UfV1gKVxuICAgICAgbGV0IGhvb2tzID0gRE9NLmFsbChwYXJlbnQsIGBbJHt0aGlzLmJpbmRpbmcoUEhYX0hPT0spfV1gKVxuICAgICAgY29tcG9uZW50cy5jb25jYXQocGFyZW50KS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgbGV0IGNpZCA9IHRoaXMuY29tcG9uZW50SUQoZWwpXG4gICAgICAgIGlmKGlzQ2lkKGNpZCkgJiYgZGVzdHJveWVkQ0lEcy5pbmRleE9mKGNpZCkgPT09IC0xKXsgZGVzdHJveWVkQ0lEcy5wdXNoKGNpZCkgfVxuICAgICAgfSlcbiAgICAgIGhvb2tzLmNvbmNhdChwYXJlbnQpLmZvckVhY2goaG9va0VsID0+IHtcbiAgICAgICAgbGV0IGhvb2sgPSB0aGlzLmdldEhvb2soaG9va0VsKVxuICAgICAgICBob29rICYmIHRoaXMuZGVzdHJveUhvb2soaG9vaylcbiAgICAgIH0pXG4gICAgfSlcbiAgICAvLyBXZSBzaG91bGQgbm90IHBydW5lQ2lkcyBvbiBqb2lucy4gT3RoZXJ3aXNlLCBpbiBjYXNlIG9mXG4gICAgLy8gcmVqb2lucywgd2UgbWF5IG5vdGlmeSBjaWRzIHRoYXQgbm8gbG9uZ2VyIGJlbG9uZyB0byB0aGVcbiAgICAvLyBjdXJyZW50IExpdmVWaWV3IHRvIGJlIHJlbW92ZWQuXG4gICAgaWYocHJ1bmVDaWRzKXtcbiAgICAgIHRoaXMubWF5YmVQdXNoQ29tcG9uZW50c0Rlc3Ryb3llZChkZXN0cm95ZWRDSURzKVxuICAgIH1cbiAgfVxuXG4gIGpvaW5OZXdDaGlsZHJlbigpe1xuICAgIERPTS5maW5kUGh4Q2hpbGRyZW4odGhpcy5lbCwgdGhpcy5pZCkuZm9yRWFjaChlbCA9PiB0aGlzLmpvaW5DaGlsZChlbCkpXG4gIH1cblxuICBnZXRDaGlsZEJ5SWQoaWQpeyByZXR1cm4gdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdW2lkXSB9XG5cbiAgZ2V0RGVzY2VuZGVudEJ5RWwoZWwpe1xuICAgIGlmKGVsLmlkID09PSB0aGlzLmlkKXtcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuW2VsLmdldEF0dHJpYnV0ZShQSFhfUEFSRU5UX0lEKV1bZWwuaWRdXG4gICAgfVxuICB9XG5cbiAgZGVzdHJveURlc2NlbmRlbnQoaWQpe1xuICAgIGZvcihsZXQgcGFyZW50SWQgaW4gdGhpcy5yb290LmNoaWxkcmVuKXtcbiAgICAgIGZvcihsZXQgY2hpbGRJZCBpbiB0aGlzLnJvb3QuY2hpbGRyZW5bcGFyZW50SWRdKXtcbiAgICAgICAgaWYoY2hpbGRJZCA9PT0gaWQpeyByZXR1cm4gdGhpcy5yb290LmNoaWxkcmVuW3BhcmVudElkXVtjaGlsZElkXS5kZXN0cm95KCkgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGpvaW5DaGlsZChlbCl7XG4gICAgbGV0IGNoaWxkID0gdGhpcy5nZXRDaGlsZEJ5SWQoZWwuaWQpXG4gICAgaWYoIWNoaWxkKXtcbiAgICAgIGxldCB2aWV3ID0gbmV3IFZpZXcoZWwsIHRoaXMubGl2ZVNvY2tldCwgdGhpcylcbiAgICAgIHRoaXMucm9vdC5jaGlsZHJlblt0aGlzLmlkXVt2aWV3LmlkXSA9IHZpZXdcbiAgICAgIHZpZXcuam9pbigpXG4gICAgICB0aGlzLmNoaWxkSm9pbnMrK1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBpc0pvaW5QZW5kaW5nKCl7IHJldHVybiB0aGlzLmpvaW5QZW5kaW5nIH1cblxuICBhY2tKb2luKF9jaGlsZCl7XG4gICAgdGhpcy5jaGlsZEpvaW5zLS1cblxuICAgIGlmKHRoaXMuY2hpbGRKb2lucyA9PT0gMCl7XG4gICAgICBpZih0aGlzLnBhcmVudCl7XG4gICAgICAgIHRoaXMucGFyZW50LmFja0pvaW4odGhpcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25BbGxDaGlsZEpvaW5zQ29tcGxldGUoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uQWxsQ2hpbGRKb2luc0NvbXBsZXRlKCl7XG4gICAgdGhpcy5qb2luQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgdGhpcy5wZW5kaW5nSm9pbk9wcy5mb3JFYWNoKChbdmlldywgb3BdKSA9PiB7XG4gICAgICAgIGlmKCF2aWV3LmlzRGVzdHJveWVkKCkpeyBvcCgpIH1cbiAgICAgIH0pXG4gICAgICB0aGlzLnBlbmRpbmdKb2luT3BzID0gW11cbiAgICB9KVxuICB9XG5cbiAgdXBkYXRlKGRpZmYsIGV2ZW50cyl7XG4gICAgaWYodGhpcy5pc0pvaW5QZW5kaW5nKCkgfHwgKHRoaXMubGl2ZVNvY2tldC5oYXNQZW5kaW5nTGluaygpICYmIHRoaXMucm9vdC5pc01haW4oKSkpe1xuICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ0RpZmZzLnB1c2goe2RpZmYsIGV2ZW50c30pXG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXJlZC5tZXJnZURpZmYoZGlmZilcbiAgICBsZXQgcGh4Q2hpbGRyZW5BZGRlZCA9IGZhbHNlXG5cbiAgICAvLyBXaGVuIHRoZSBkaWZmIG9ubHkgY29udGFpbnMgY29tcG9uZW50IGRpZmZzLCB0aGVuIHdhbGsgY29tcG9uZW50c1xuICAgIC8vIGFuZCBwYXRjaCBvbmx5IHRoZSBwYXJlbnQgY29tcG9uZW50IGNvbnRhaW5lcnMgZm91bmQgaW4gdGhlIGRpZmYuXG4gICAgLy8gT3RoZXJ3aXNlLCBwYXRjaCBlbnRpcmUgTFYgY29udGFpbmVyLlxuICAgIGlmKHRoaXMucmVuZGVyZWQuaXNDb21wb25lbnRPbmx5RGlmZihkaWZmKSl7XG4gICAgICB0aGlzLmxpdmVTb2NrZXQudGltZShcImNvbXBvbmVudCBwYXRjaCBjb21wbGV0ZVwiLCAoKSA9PiB7XG4gICAgICAgIGxldCBwYXJlbnRDaWRzID0gRE9NLmZpbmRQYXJlbnRDSURzKHRoaXMuZWwsIHRoaXMucmVuZGVyZWQuY29tcG9uZW50Q0lEcyhkaWZmKSlcbiAgICAgICAgcGFyZW50Q2lkcy5mb3JFYWNoKHBhcmVudENJRCA9PiB7XG4gICAgICAgICAgaWYodGhpcy5jb21wb25lbnRQYXRjaCh0aGlzLnJlbmRlcmVkLmdldENvbXBvbmVudChkaWZmLCBwYXJlbnRDSUQpLCBwYXJlbnRDSUQpKXsgcGh4Q2hpbGRyZW5BZGRlZCA9IHRydWUgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYoIWlzRW1wdHkoZGlmZikpe1xuICAgICAgdGhpcy5saXZlU29ja2V0LnRpbWUoXCJmdWxsIHBhdGNoIGNvbXBsZXRlXCIsICgpID0+IHtcbiAgICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyQ29udGFpbmVyKGRpZmYsIFwidXBkYXRlXCIpXG4gICAgICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBudWxsKVxuICAgICAgICBwaHhDaGlsZHJlbkFkZGVkID0gdGhpcy5wZXJmb3JtUGF0Y2gocGF0Y2gsIHRydWUpXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMubGl2ZVNvY2tldC5kaXNwYXRjaEV2ZW50cyhldmVudHMpXG4gICAgaWYocGh4Q2hpbGRyZW5BZGRlZCl7IHRoaXMuam9pbk5ld0NoaWxkcmVuKCkgfVxuICB9XG5cbiAgcmVuZGVyQ29udGFpbmVyKGRpZmYsIGtpbmQpe1xuICAgIHJldHVybiB0aGlzLmxpdmVTb2NrZXQudGltZShgdG9TdHJpbmcgZGlmZiAoJHtraW5kfSlgLCAoKSA9PiB7XG4gICAgICBsZXQgdGFnID0gdGhpcy5lbC50YWdOYW1lXG4gICAgICAvLyBEb24ndCBza2lwIGFueSBjb21wb25lbnQgaW4gdGhlIGRpZmYgbm9yIGFueSBtYXJrZWQgYXMgcHJ1bmVkXG4gICAgICAvLyAoYXMgdGhleSBtYXkgaGF2ZSBiZWVuIGFkZGVkIGJhY2spXG4gICAgICBsZXQgY2lkcyA9IGRpZmYgPyB0aGlzLnJlbmRlcmVkLmNvbXBvbmVudENJRHMoZGlmZikuY29uY2F0KHRoaXMucHJ1bmluZ0NJRHMpIDogbnVsbFxuICAgICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyZWQudG9TdHJpbmcoY2lkcylcbiAgICAgIHJldHVybiBbYDwke3RhZ30+JHtodG1sfTwvJHt0YWd9PmAsIHN0cmVhbXNdXG4gICAgfSlcbiAgfVxuXG4gIGNvbXBvbmVudFBhdGNoKGRpZmYsIGNpZCl7XG4gICAgaWYoaXNFbXB0eShkaWZmKSkgcmV0dXJuIGZhbHNlXG4gICAgbGV0IFtodG1sLCBzdHJlYW1zXSA9IHRoaXMucmVuZGVyZWQuY29tcG9uZW50VG9TdHJpbmcoY2lkKVxuICAgIGxldCBwYXRjaCA9IG5ldyBET01QYXRjaCh0aGlzLCB0aGlzLmVsLCB0aGlzLmlkLCBodG1sLCBzdHJlYW1zLCBjaWQpXG4gICAgbGV0IGNoaWxkcmVuQWRkZWQgPSB0aGlzLnBlcmZvcm1QYXRjaChwYXRjaCwgdHJ1ZSlcbiAgICByZXR1cm4gY2hpbGRyZW5BZGRlZFxuICB9XG5cbiAgZ2V0SG9vayhlbCl7IHJldHVybiB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoZWwpXSB9XG5cbiAgYWRkSG9vayhlbCl7XG4gICAgaWYoVmlld0hvb2suZWxlbWVudElEKGVsKSB8fCAhZWwuZ2V0QXR0cmlidXRlKXsgcmV0dXJuIH1cbiAgICBsZXQgaG9va05hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoYGRhdGEtcGh4LSR7UEhYX0hPT0t9YCkgfHwgZWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfSE9PSykpXG4gICAgaWYoaG9va05hbWUgJiYgIXRoaXMub3duc0VsZW1lbnQoZWwpKXsgcmV0dXJuIH1cbiAgICBsZXQgY2FsbGJhY2tzID0gdGhpcy5saXZlU29ja2V0LmdldEhvb2tDYWxsYmFja3MoaG9va05hbWUpXG5cbiAgICBpZihjYWxsYmFja3Mpe1xuICAgICAgaWYoIWVsLmlkKXsgbG9nRXJyb3IoYG5vIERPTSBJRCBmb3IgaG9vayBcIiR7aG9va05hbWV9XCIuIEhvb2tzIHJlcXVpcmUgYSB1bmlxdWUgSUQgb24gZWFjaCBlbGVtZW50LmAsIGVsKSB9XG4gICAgICBsZXQgaG9vayA9IG5ldyBWaWV3SG9vayh0aGlzLCBlbCwgY2FsbGJhY2tzKVxuICAgICAgdGhpcy52aWV3SG9va3NbVmlld0hvb2suZWxlbWVudElEKGhvb2suZWwpXSA9IGhvb2tcbiAgICAgIHJldHVybiBob29rXG4gICAgfSBlbHNlIGlmKGhvb2tOYW1lICE9PSBudWxsKXtcbiAgICAgIGxvZ0Vycm9yKGB1bmtub3duIGhvb2sgZm91bmQgZm9yIFwiJHtob29rTmFtZX1cImAsIGVsKVxuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3lIb29rKGhvb2spe1xuICAgIGhvb2suX19kZXN0cm95ZWQoKVxuICAgIGhvb2suX19jbGVhbnVwX18oKVxuICAgIGRlbGV0ZSB0aGlzLnZpZXdIb29rc1tWaWV3SG9vay5lbGVtZW50SUQoaG9vay5lbCldXG4gIH1cblxuICBhcHBseVBlbmRpbmdVcGRhdGVzKCl7XG4gICAgdGhpcy5wZW5kaW5nRGlmZnMuZm9yRWFjaCgoe2RpZmYsIGV2ZW50c30pID0+IHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cykpXG4gICAgdGhpcy5wZW5kaW5nRGlmZnMgPSBbXVxuICAgIHRoaXMuZWFjaENoaWxkKGNoaWxkID0+IGNoaWxkLmFwcGx5UGVuZGluZ1VwZGF0ZXMoKSlcbiAgfVxuXG4gIGVhY2hDaGlsZChjYWxsYmFjayl7XG4gICAgbGV0IGNoaWxkcmVuID0gdGhpcy5yb290LmNoaWxkcmVuW3RoaXMuaWRdIHx8IHt9XG4gICAgZm9yKGxldCBpZCBpbiBjaGlsZHJlbil7IGNhbGxiYWNrKHRoaXMuZ2V0Q2hpbGRCeUlkKGlkKSkgfVxuICB9XG5cbiAgb25DaGFubmVsKGV2ZW50LCBjYil7XG4gICAgdGhpcy5saXZlU29ja2V0Lm9uQ2hhbm5lbCh0aGlzLmNoYW5uZWwsIGV2ZW50LCByZXNwID0+IHtcbiAgICAgIGlmKHRoaXMuaXNKb2luUGVuZGluZygpKXtcbiAgICAgICAgdGhpcy5yb290LnBlbmRpbmdKb2luT3BzLnB1c2goW3RoaXMsICgpID0+IGNiKHJlc3ApXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IGNiKHJlc3ApKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBiaW5kQ2hhbm5lbCgpe1xuICAgIC8vIFRoZSBkaWZmIGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSByZWd1bGFyIHVwZGF0ZSBvcGVyYXRpb25zLlxuICAgIC8vIEFsbCBvdGhlciBvcGVyYXRpb25zIGFyZSBxdWV1ZWQgdG8gYmUgYXBwbGllZCBvbmx5IGFmdGVyIGpvaW4uXG4gICAgdGhpcy5saXZlU29ja2V0Lm9uQ2hhbm5lbCh0aGlzLmNoYW5uZWwsIFwiZGlmZlwiLCAocmF3RGlmZikgPT4ge1xuICAgICAgdGhpcy5saXZlU29ja2V0LnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICB0aGlzLmFwcGx5RGlmZihcInVwZGF0ZVwiLCByYXdEaWZmLCAoe2RpZmYsIGV2ZW50c30pID0+IHRoaXMudXBkYXRlKGRpZmYsIGV2ZW50cykpXG4gICAgICB9KVxuICAgIH0pXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJyZWRpcmVjdFwiLCAoe3RvLCBmbGFzaH0pID0+IHRoaXMub25SZWRpcmVjdCh7dG8sIGZsYXNofSkpXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJsaXZlX3BhdGNoXCIsIChyZWRpcikgPT4gdGhpcy5vbkxpdmVQYXRjaChyZWRpcikpXG4gICAgdGhpcy5vbkNoYW5uZWwoXCJsaXZlX3JlZGlyZWN0XCIsIChyZWRpcikgPT4gdGhpcy5vbkxpdmVSZWRpcmVjdChyZWRpcikpXG4gICAgdGhpcy5jaGFubmVsLm9uRXJyb3IocmVhc29uID0+IHRoaXMub25FcnJvcihyZWFzb24pKVxuICAgIHRoaXMuY2hhbm5lbC5vbkNsb3NlKHJlYXNvbiA9PiB0aGlzLm9uQ2xvc2UocmVhc29uKSlcbiAgfVxuXG4gIGRlc3Ryb3lBbGxDaGlsZHJlbigpeyB0aGlzLmVhY2hDaGlsZChjaGlsZCA9PiBjaGlsZC5kZXN0cm95KCkpIH1cblxuICBvbkxpdmVSZWRpcmVjdChyZWRpcil7XG4gICAgbGV0IHt0bywga2luZCwgZmxhc2h9ID0gcmVkaXJcbiAgICBsZXQgdXJsID0gdGhpcy5leHBhbmRVUkwodG8pXG4gICAgdGhpcy5saXZlU29ja2V0Lmhpc3RvcnlSZWRpcmVjdCh1cmwsIGtpbmQsIGZsYXNoKVxuICB9XG5cbiAgb25MaXZlUGF0Y2gocmVkaXIpe1xuICAgIGxldCB7dG8sIGtpbmR9ID0gcmVkaXJcbiAgICB0aGlzLmhyZWYgPSB0aGlzLmV4cGFuZFVSTCh0bylcbiAgICB0aGlzLmxpdmVTb2NrZXQuaGlzdG9yeVBhdGNoKHRvLCBraW5kKVxuICB9XG5cbiAgZXhwYW5kVVJMKHRvKXtcbiAgICByZXR1cm4gdG8uc3RhcnRzV2l0aChcIi9cIikgPyBgJHt3aW5kb3cubG9jYXRpb24ucHJvdG9jb2x9Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fSR7dG99YCA6IHRvXG4gIH1cblxuICBvblJlZGlyZWN0KHt0bywgZmxhc2h9KXsgdGhpcy5saXZlU29ja2V0LnJlZGlyZWN0KHRvLCBmbGFzaCkgfVxuXG4gIGlzRGVzdHJveWVkKCl7IHJldHVybiB0aGlzLmRlc3Ryb3llZCB9XG5cbiAgam9pbkRlYWQoKXsgdGhpcy5pc0RlYWQgPSB0cnVlIH1cblxuICBqb2luKGNhbGxiYWNrKXtcbiAgICB0aGlzLnNob3dMb2FkZXIodGhpcy5saXZlU29ja2V0LmxvYWRlclRpbWVvdXQpXG4gICAgdGhpcy5iaW5kQ2hhbm5lbCgpXG4gICAgaWYodGhpcy5pc01haW4oKSl7XG4gICAgICB0aGlzLnN0b3BDYWxsYmFjayA9IHRoaXMubGl2ZVNvY2tldC53aXRoUGFnZUxvYWRpbmcoe3RvOiB0aGlzLmhyZWYsIGtpbmQ6IFwiaW5pdGlhbFwifSlcbiAgICB9XG4gICAgdGhpcy5qb2luQ2FsbGJhY2sgPSAob25Eb25lKSA9PiB7XG4gICAgICBvbkRvbmUgPSBvbkRvbmUgfHwgZnVuY3Rpb24oKXt9XG4gICAgICBjYWxsYmFjayA/IGNhbGxiYWNrKHRoaXMuam9pbkNvdW50LCBvbkRvbmUpIDogb25Eb25lKClcbiAgICB9XG4gICAgdGhpcy5saXZlU29ja2V0LndyYXBQdXNoKHRoaXMsIHt0aW1lb3V0OiBmYWxzZX0sICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmNoYW5uZWwuam9pbigpXG4gICAgICAgIC5yZWNlaXZlKFwib2tcIiwgZGF0YSA9PiB7XG4gICAgICAgICAgaWYoIXRoaXMuaXNEZXN0cm95ZWQoKSl7XG4gICAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB0aGlzLm9uSm9pbihkYXRhKSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgcmVzcCA9PiAhdGhpcy5pc0Rlc3Ryb3llZCgpICYmIHRoaXMub25Kb2luRXJyb3IocmVzcCkpXG4gICAgICAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiAhdGhpcy5pc0Rlc3Ryb3llZCgpICYmIHRoaXMub25Kb2luRXJyb3Ioe3JlYXNvbjogXCJ0aW1lb3V0XCJ9KSlcbiAgICB9KVxuICB9XG5cbiAgb25Kb2luRXJyb3IocmVzcCl7XG4gICAgaWYocmVzcC5yZWFzb24gPT09IFwicmVsb2FkXCIpe1xuICAgICAgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbYGZhaWxlZCBtb3VudCB3aXRoICR7cmVzcC5zdGF0dXN9LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0YCwgcmVzcF0pXG4gICAgICByZXR1cm4gdGhpcy5vblJlZGlyZWN0KHt0bzogdGhpcy5ocmVmfSlcbiAgICB9IGVsc2UgaWYocmVzcC5yZWFzb24gPT09IFwidW5hdXRob3JpemVkXCIgfHwgcmVzcC5yZWFzb24gPT09IFwic3RhbGVcIil7XG4gICAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInVuYXV0aG9yaXplZCBsaXZlX3JlZGlyZWN0LiBGYWxsaW5nIGJhY2sgdG8gcGFnZSByZXF1ZXN0XCIsIHJlc3BdKVxuICAgICAgcmV0dXJuIHRoaXMub25SZWRpcmVjdCh7dG86IHRoaXMuaHJlZn0pXG4gICAgfVxuICAgIGlmKHJlc3AucmVkaXJlY3QgfHwgcmVzcC5saXZlX3JlZGlyZWN0KXtcbiAgICAgIHRoaXMuam9pblBlbmRpbmcgPSBmYWxzZVxuICAgICAgdGhpcy5jaGFubmVsLmxlYXZlKClcbiAgICB9XG4gICAgaWYocmVzcC5yZWRpcmVjdCl7IHJldHVybiB0aGlzLm9uUmVkaXJlY3QocmVzcC5yZWRpcmVjdCkgfVxuICAgIGlmKHJlc3AubGl2ZV9yZWRpcmVjdCl7IHJldHVybiB0aGlzLm9uTGl2ZVJlZGlyZWN0KHJlc3AubGl2ZV9yZWRpcmVjdCkgfVxuICAgIHRoaXMuZGlzcGxheUVycm9yKFtQSFhfTE9BRElOR19DTEFTUywgUEhYX0VSUk9SX0NMQVNTLCBQSFhfU0VSVkVSX0VSUk9SX0NMQVNTXSlcbiAgICB0aGlzLmxvZyhcImVycm9yXCIsICgpID0+IFtcInVuYWJsZSB0byBqb2luXCIsIHJlc3BdKVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5saXZlU29ja2V0LnJlbG9hZFdpdGhKaXR0ZXIodGhpcykgfVxuICB9XG5cbiAgb25DbG9zZShyZWFzb24pe1xuICAgIGlmKHRoaXMuaXNEZXN0cm95ZWQoKSl7IHJldHVybiB9XG4gICAgaWYodGhpcy5saXZlU29ja2V0Lmhhc1BlbmRpbmdMaW5rKCkgJiYgcmVhc29uICE9PSBcImxlYXZlXCIpe1xuICAgICAgcmV0dXJuIHRoaXMubGl2ZVNvY2tldC5yZWxvYWRXaXRoSml0dGVyKHRoaXMpXG4gICAgfVxuICAgIHRoaXMuZGVzdHJveUFsbENoaWxkcmVuKClcbiAgICB0aGlzLmxpdmVTb2NrZXQuZHJvcEFjdGl2ZUVsZW1lbnQodGhpcylcbiAgICAvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGNhbiBiZSBudWxsIGluIEludGVybmV0IEV4cGxvcmVyIDExXG4gICAgaWYoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCl7IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpIH1cbiAgICBpZih0aGlzLmxpdmVTb2NrZXQuaXNVbmxvYWRlZCgpKXtcbiAgICAgIHRoaXMuc2hvd0xvYWRlcihCRUZPUkVfVU5MT0FEX0xPQURFUl9USU1FT1VUKVxuICAgIH1cbiAgfVxuXG4gIG9uRXJyb3IocmVhc29uKXtcbiAgICB0aGlzLm9uQ2xvc2UocmVhc29uKVxuICAgIGlmKHRoaXMubGl2ZVNvY2tldC5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5sb2coXCJlcnJvclwiLCAoKSA9PiBbXCJ2aWV3IGNyYXNoZWRcIiwgcmVhc29uXSkgfVxuICAgIGlmKCF0aGlzLmxpdmVTb2NrZXQuaXNVbmxvYWRlZCgpKXtcbiAgICAgIGlmKHRoaXMubGl2ZVNvY2tldC5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoW1BIWF9MT0FESU5HX0NMQVNTLCBQSFhfRVJST1JfQ0xBU1MsIFBIWF9TRVJWRVJfRVJST1JfQ0xBU1NdKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoW1BIWF9MT0FESU5HX0NMQVNTLCBQSFhfRVJST1JfQ0xBU1MsIFBIWF9DTElFTlRfRVJST1JfQ0xBU1NdKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRpc3BsYXlFcnJvcihjbGFzc2VzKXtcbiAgICBpZih0aGlzLmlzTWFpbigpKXsgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwge2RldGFpbDoge3RvOiB0aGlzLmhyZWYsIGtpbmQ6IFwiZXJyb3JcIn19KSB9XG4gICAgdGhpcy5zaG93TG9hZGVyKClcbiAgICB0aGlzLnNldENvbnRhaW5lckNsYXNzZXMoLi4uY2xhc3NlcylcbiAgICB0aGlzLmV4ZWNBbGwodGhpcy5iaW5kaW5nKFwiZGlzY29ubmVjdGVkXCIpKVxuICB9XG5cbiAgcHVzaFdpdGhSZXBseShyZWZHZW5lcmF0b3IsIGV2ZW50LCBwYXlsb2FkLCBvblJlcGx5ID0gZnVuY3Rpb24gKCl7IH0pe1xuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gfVxuXG4gICAgbGV0IFtyZWYsIFtlbF0sIG9wdHNdID0gcmVmR2VuZXJhdG9yID8gcmVmR2VuZXJhdG9yKCkgOiBbbnVsbCwgW10sIHt9XVxuICAgIGxldCBvbkxvYWRpbmdEb25lID0gZnVuY3Rpb24oKXsgfVxuICAgIGlmKG9wdHMucGFnZV9sb2FkaW5nIHx8IChlbCAmJiAoZWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfUEFHRV9MT0FESU5HKSkgIT09IG51bGwpKSl7XG4gICAgICBvbkxvYWRpbmdEb25lID0gdGhpcy5saXZlU29ja2V0LndpdGhQYWdlTG9hZGluZyh7a2luZDogXCJlbGVtZW50XCIsIHRhcmdldDogZWx9KVxuICAgIH1cblxuICAgIGlmKHR5cGVvZiAocGF5bG9hZC5jaWQpICE9PSBcIm51bWJlclwiKXsgZGVsZXRlIHBheWxvYWQuY2lkIH1cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5saXZlU29ja2V0LndyYXBQdXNoKHRoaXMsIHt0aW1lb3V0OiB0cnVlfSwgKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFubmVsLnB1c2goZXZlbnQsIHBheWxvYWQsIFBVU0hfVElNRU9VVCkucmVjZWl2ZShcIm9rXCIsIHJlc3AgPT4ge1xuICAgICAgICAgIGxldCBmaW5pc2ggPSAoaG9va1JlcGx5KSA9PiB7XG4gICAgICAgICAgICBpZihyZXNwLnJlZGlyZWN0KXsgdGhpcy5vblJlZGlyZWN0KHJlc3AucmVkaXJlY3QpIH1cbiAgICAgICAgICAgIGlmKHJlc3AubGl2ZV9wYXRjaCl7IHRoaXMub25MaXZlUGF0Y2gocmVzcC5saXZlX3BhdGNoKSB9XG4gICAgICAgICAgICBpZihyZXNwLmxpdmVfcmVkaXJlY3QpeyB0aGlzLm9uTGl2ZVJlZGlyZWN0KHJlc3AubGl2ZV9yZWRpcmVjdCkgfVxuICAgICAgICAgICAgb25Mb2FkaW5nRG9uZSgpXG4gICAgICAgICAgICBvblJlcGx5KHJlc3AsIGhvb2tSZXBseSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYocmVzcC5kaWZmKXtcbiAgICAgICAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5hcHBseURpZmYoXCJ1cGRhdGVcIiwgcmVzcC5kaWZmLCAoe2RpZmYsIHJlcGx5LCBldmVudHN9KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYocmVmICE9PSBudWxsKXsgdGhpcy51bmRvUmVmcyhyZWYpIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZShkaWZmLCBldmVudHMpXG4gICAgICAgICAgICAgICAgZmluaXNoKHJlcGx5KVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYocmVmICE9PSBudWxsKXsgdGhpcy51bmRvUmVmcyhyZWYpIH1cbiAgICAgICAgICAgIGZpbmlzaChudWxsKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgKVxuICB9XG5cbiAgdW5kb1JlZnMocmVmKXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH0gLy8gZXhpdCBpZiBleHRlcm5hbCBmb3JtIHRyaWdnZXJlZFxuXG4gICAgRE9NLmFsbChkb2N1bWVudCwgYFske1BIWF9SRUZfU1JDfT1cIiR7dGhpcy5pZH1cIl1bJHtQSFhfUkVGfT1cIiR7cmVmfVwiXWAsIGVsID0+IHtcbiAgICAgIGxldCBkaXNhYmxlZFZhbCA9IGVsLmdldEF0dHJpYnV0ZShQSFhfRElTQUJMRUQpXG4gICAgICAvLyByZW1vdmUgcmVmc1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9SRUYpXG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoUEhYX1JFRl9TUkMpXG4gICAgICAvLyByZXN0b3JlIGlucHV0c1xuICAgICAgaWYoZWwuZ2V0QXR0cmlidXRlKFBIWF9SRUFET05MWSkgIT09IG51bGwpe1xuICAgICAgICBlbC5yZWFkT25seSA9IGZhbHNlXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfUkVBRE9OTFkpXG4gICAgICB9XG4gICAgICBpZihkaXNhYmxlZFZhbCAhPT0gbnVsbCl7XG4gICAgICAgIGVsLmRpc2FibGVkID0gZGlzYWJsZWRWYWwgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShQSFhfRElTQUJMRUQpXG4gICAgICB9XG4gICAgICAvLyByZW1vdmUgY2xhc3Nlc1xuICAgICAgUEhYX0VWRU5UX0NMQVNTRVMuZm9yRWFjaChjbGFzc05hbWUgPT4gRE9NLnJlbW92ZUNsYXNzKGVsLCBjbGFzc05hbWUpKVxuICAgICAgLy8gcmVzdG9yZSBkaXNhYmxlc1xuICAgICAgbGV0IGRpc2FibGVSZXN0b3JlID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSlcbiAgICAgIGlmKGRpc2FibGVSZXN0b3JlICE9PSBudWxsKXtcbiAgICAgICAgZWwuaW5uZXJUZXh0ID0gZGlzYWJsZVJlc3RvcmVcbiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSlcbiAgICAgIH1cbiAgICAgIGxldCB0b0VsID0gRE9NLnByaXZhdGUoZWwsIFBIWF9SRUYpXG4gICAgICBpZih0b0VsKXtcbiAgICAgICAgbGV0IGhvb2sgPSB0aGlzLnRyaWdnZXJCZWZvcmVVcGRhdGVIb29rKGVsLCB0b0VsKVxuICAgICAgICBET01QYXRjaC5wYXRjaEVsKGVsLCB0b0VsLCB0aGlzLmxpdmVTb2NrZXQuZ2V0QWN0aXZlRWxlbWVudCgpKVxuICAgICAgICBpZihob29rKXsgaG9vay5fX3VwZGF0ZWQoKSB9XG4gICAgICAgIERPTS5kZWxldGVQcml2YXRlKGVsLCBQSFhfUkVGKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBwdXRSZWYoZWxlbWVudHMsIGV2ZW50LCBvcHRzID0ge30pe1xuICAgIGxldCBuZXdSZWYgPSB0aGlzLnJlZisrXG4gICAgbGV0IGRpc2FibGVXaXRoID0gdGhpcy5iaW5kaW5nKFBIWF9ESVNBQkxFX1dJVEgpXG4gICAgaWYob3B0cy5sb2FkaW5nKXsgZWxlbWVudHMgPSBlbGVtZW50cy5jb25jYXQoRE9NLmFsbChkb2N1bWVudCwgb3B0cy5sb2FkaW5nKSl9XG5cbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoYHBoeC0ke2V2ZW50fS1sb2FkaW5nYClcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShQSFhfUkVGLCBuZXdSZWYpXG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoUEhYX1JFRl9TUkMsIHRoaXMuZWwuaWQpXG4gICAgICBsZXQgZGlzYWJsZVRleHQgPSBlbC5nZXRBdHRyaWJ1dGUoZGlzYWJsZVdpdGgpXG4gICAgICBpZihkaXNhYmxlVGV4dCAhPT0gbnVsbCl7XG4gICAgICAgIGlmKCFlbC5nZXRBdHRyaWJ1dGUoUEhYX0RJU0FCTEVfV0lUSF9SRVNUT1JFKSl7XG4gICAgICAgICAgZWwuc2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFX1dJVEhfUkVTVE9SRSwgZWwuaW5uZXJUZXh0KVxuICAgICAgICB9XG4gICAgICAgIGlmKGRpc2FibGVUZXh0ICE9PSBcIlwiKXsgZWwuaW5uZXJUZXh0ID0gZGlzYWJsZVRleHQgfVxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIFtuZXdSZWYsIGVsZW1lbnRzLCBvcHRzXVxuICB9XG5cbiAgY29tcG9uZW50SUQoZWwpe1xuICAgIGxldCBjaWQgPSBlbC5nZXRBdHRyaWJ1dGUgJiYgZWwuZ2V0QXR0cmlidXRlKFBIWF9DT01QT05FTlQpXG4gICAgcmV0dXJuIGNpZCA/IHBhcnNlSW50KGNpZCkgOiBudWxsXG4gIH1cblxuICB0YXJnZXRDb21wb25lbnRJRCh0YXJnZXQsIHRhcmdldEN0eCwgb3B0cyA9IHt9KXtcbiAgICBpZihpc0NpZCh0YXJnZXRDdHgpKXsgcmV0dXJuIHRhcmdldEN0eCB9XG5cbiAgICBsZXQgY2lkT3JTZWxlY3RvciA9IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwidGFyZ2V0XCIpKVxuICAgIGlmKGlzQ2lkKGNpZE9yU2VsZWN0b3IpKXtcbiAgICAgIHJldHVybiBwYXJzZUludChjaWRPclNlbGVjdG9yKVxuICAgIH0gZWxzZSBpZih0YXJnZXRDdHggJiYgKGNpZE9yU2VsZWN0b3IgIT09IG51bGwgfHwgb3B0cy50YXJnZXQpKXtcbiAgICAgIHJldHVybiB0aGlzLmNsb3Nlc3RDb21wb25lbnRJRCh0YXJnZXRDdHgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgY2xvc2VzdENvbXBvbmVudElEKHRhcmdldEN0eCl7XG4gICAgaWYoaXNDaWQodGFyZ2V0Q3R4KSl7XG4gICAgICByZXR1cm4gdGFyZ2V0Q3R4XG4gICAgfSBlbHNlIGlmKHRhcmdldEN0eCl7XG4gICAgICByZXR1cm4gbWF5YmUodGFyZ2V0Q3R4LmNsb3Nlc3QoYFske1BIWF9DT01QT05FTlR9XWApLCBlbCA9PiB0aGlzLm93bnNFbGVtZW50KGVsKSAmJiB0aGlzLmNvbXBvbmVudElEKGVsKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBwdXNoSG9va0V2ZW50KGVsLCB0YXJnZXRDdHgsIGV2ZW50LCBwYXlsb2FkLCBvblJlcGx5KXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXtcbiAgICAgIHRoaXMubG9nKFwiaG9va1wiLCAoKSA9PiBbXCJ1bmFibGUgdG8gcHVzaCBob29rIGV2ZW50LiBMaXZlVmlldyBub3QgY29ubmVjdGVkXCIsIGV2ZW50LCBwYXlsb2FkXSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBsZXQgW3JlZiwgZWxzLCBvcHRzXSA9IHRoaXMucHV0UmVmKFtlbF0sIFwiaG9va1wiKVxuICAgIHRoaXMucHVzaFdpdGhSZXBseSgoKSA9PiBbcmVmLCBlbHMsIG9wdHNdLCBcImV2ZW50XCIsIHtcbiAgICAgIHR5cGU6IFwiaG9va1wiLFxuICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgdmFsdWU6IHBheWxvYWQsXG4gICAgICBjaWQ6IHRoaXMuY2xvc2VzdENvbXBvbmVudElEKHRhcmdldEN0eClcbiAgICB9LCAocmVzcCwgcmVwbHkpID0+IG9uUmVwbHkocmVwbHksIHJlZikpXG5cbiAgICByZXR1cm4gcmVmXG4gIH1cblxuICBleHRyYWN0TWV0YShlbCwgbWV0YSwgdmFsdWUpe1xuICAgIGxldCBwcmVmaXggPSB0aGlzLmJpbmRpbmcoXCJ2YWx1ZS1cIilcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgZWwuYXR0cmlidXRlcy5sZW5ndGg7IGkrKyl7XG4gICAgICBpZighbWV0YSl7IG1ldGEgPSB7fSB9XG4gICAgICBsZXQgbmFtZSA9IGVsLmF0dHJpYnV0ZXNbaV0ubmFtZVxuICAgICAgaWYobmFtZS5zdGFydHNXaXRoKHByZWZpeCkpeyBtZXRhW25hbWUucmVwbGFjZShwcmVmaXgsIFwiXCIpXSA9IGVsLmdldEF0dHJpYnV0ZShuYW1lKSB9XG4gICAgfVxuICAgIGlmKGVsLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgIShlbCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCkpe1xuICAgICAgaWYoIW1ldGEpeyBtZXRhID0ge30gfVxuICAgICAgbWV0YS52YWx1ZSA9IGVsLnZhbHVlXG5cbiAgICAgIGlmKGVsLnRhZ05hbWUgPT09IFwiSU5QVVRcIiAmJiBDSEVDS0FCTEVfSU5QVVRTLmluZGV4T2YoZWwudHlwZSkgPj0gMCAmJiAhZWwuY2hlY2tlZCl7XG4gICAgICAgIGRlbGV0ZSBtZXRhLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmKHZhbHVlKXtcbiAgICAgIGlmKCFtZXRhKXsgbWV0YSA9IHt9IH1cbiAgICAgIGZvcihsZXQga2V5IGluIHZhbHVlKXsgbWV0YVtrZXldID0gdmFsdWVba2V5XSB9XG4gICAgfVxuICAgIHJldHVybiBtZXRhXG4gIH1cblxuXG4gIHB1c2hFdmVudCh0eXBlLCBlbCwgdGFyZ2V0Q3R4LCBwaHhFdmVudCwgbWV0YSwgb3B0cyA9IHt9LCBvblJlcGx5KXtcbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkoKCkgPT4gdGhpcy5wdXRSZWYoW2VsXSwgdHlwZSwgb3B0cyksIFwiZXZlbnRcIiwge1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgIHZhbHVlOiB0aGlzLmV4dHJhY3RNZXRhKGVsLCBtZXRhLCBvcHRzLnZhbHVlKSxcbiAgICAgIGNpZDogdGhpcy50YXJnZXRDb21wb25lbnRJRChlbCwgdGFyZ2V0Q3R4LCBvcHRzKVxuICAgIH0sIChyZXNwLCByZXBseSkgPT4gb25SZXBseSAmJiBvblJlcGx5KHJlcGx5KSlcbiAgfVxuXG4gIHB1c2hGaWxlUHJvZ3Jlc3MoZmlsZUVsLCBlbnRyeVJlZiwgcHJvZ3Jlc3MsIG9uUmVwbHkgPSBmdW5jdGlvbiAoKXsgfSl7XG4gICAgdGhpcy5saXZlU29ja2V0LndpdGhpbk93bmVycyhmaWxlRWwuZm9ybSwgKHZpZXcsIHRhcmdldEN0eCkgPT4ge1xuICAgICAgdmlldy5wdXNoV2l0aFJlcGx5KG51bGwsIFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICBldmVudDogZmlsZUVsLmdldEF0dHJpYnV0ZSh2aWV3LmJpbmRpbmcoUEhYX1BST0dSRVNTKSksXG4gICAgICAgIHJlZjogZmlsZUVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRiksXG4gICAgICAgIGVudHJ5X3JlZjogZW50cnlSZWYsXG4gICAgICAgIHByb2dyZXNzOiBwcm9ncmVzcyxcbiAgICAgICAgY2lkOiB2aWV3LnRhcmdldENvbXBvbmVudElEKGZpbGVFbC5mb3JtLCB0YXJnZXRDdHgpXG4gICAgICB9LCBvblJlcGx5KVxuICAgIH0pXG4gIH1cblxuICBwdXNoSW5wdXQoaW5wdXRFbCwgdGFyZ2V0Q3R4LCBmb3JjZUNpZCwgcGh4RXZlbnQsIG9wdHMsIGNhbGxiYWNrKXtcbiAgICBsZXQgdXBsb2Fkc1xuICAgIGxldCBjaWQgPSBpc0NpZChmb3JjZUNpZCkgPyBmb3JjZUNpZCA6IHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoaW5wdXRFbC5mb3JtLCB0YXJnZXRDdHgpXG4gICAgbGV0IHJlZkdlbmVyYXRvciA9ICgpID0+IHRoaXMucHV0UmVmKFtpbnB1dEVsLCBpbnB1dEVsLmZvcm1dLCBcImNoYW5nZVwiLCBvcHRzKVxuICAgIGxldCBmb3JtRGF0YVxuICAgIGxldCBtZXRhICA9IHRoaXMuZXh0cmFjdE1ldGEoaW5wdXRFbC5mb3JtKVxuICAgIGlmKGlucHV0RWwuZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhcImNoYW5nZVwiKSkpe1xuICAgICAgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGlucHV0RWwuZm9ybSwge190YXJnZXQ6IG9wdHMuX3RhcmdldCwgLi4ubWV0YX0sIFtpbnB1dEVsLm5hbWVdKVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3JtRGF0YSA9IHNlcmlhbGl6ZUZvcm0oaW5wdXRFbC5mb3JtLCB7X3RhcmdldDogb3B0cy5fdGFyZ2V0LCAuLi5tZXRhfSlcbiAgICB9XG4gICAgaWYoRE9NLmlzVXBsb2FkSW5wdXQoaW5wdXRFbCkgJiYgaW5wdXRFbC5maWxlcyAmJiBpbnB1dEVsLmZpbGVzLmxlbmd0aCA+IDApe1xuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXMoaW5wdXRFbCwgQXJyYXkuZnJvbShpbnB1dEVsLmZpbGVzKSlcbiAgICB9XG4gICAgdXBsb2FkcyA9IExpdmVVcGxvYWRlci5zZXJpYWxpemVVcGxvYWRzKGlucHV0RWwpXG5cbiAgICBsZXQgZXZlbnQgPSB7XG4gICAgICB0eXBlOiBcImZvcm1cIixcbiAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgIHZhbHVlOiBmb3JtRGF0YSxcbiAgICAgIHVwbG9hZHM6IHVwbG9hZHMsXG4gICAgICBjaWQ6IGNpZFxuICAgIH1cbiAgICB0aGlzLnB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBcImV2ZW50XCIsIGV2ZW50LCByZXNwID0+IHtcbiAgICAgIERPTS5zaG93RXJyb3IoaW5wdXRFbCwgdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoUEhYX0ZFRURCQUNLX0ZPUikpXG4gICAgICBpZihET00uaXNVcGxvYWRJbnB1dChpbnB1dEVsKSAmJiBpbnB1dEVsLmdldEF0dHJpYnV0ZShcImRhdGEtcGh4LWF1dG8tdXBsb2FkXCIpICE9PSBudWxsKXtcbiAgICAgICAgaWYoTGl2ZVVwbG9hZGVyLmZpbGVzQXdhaXRpbmdQcmVmbGlnaHQoaW5wdXRFbCkubGVuZ3RoID4gMCl7XG4gICAgICAgICAgbGV0IFtyZWYsIF9lbHNdID0gcmVmR2VuZXJhdG9yKClcbiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGVzKGlucHV0RWwuZm9ybSwgdGFyZ2V0Q3R4LCByZWYsIGNpZCwgKF91cGxvYWRzKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwKVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyQXdhaXRpbmdTdWJtaXQoaW5wdXRFbC5mb3JtKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3ApXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHRyaWdnZXJBd2FpdGluZ1N1Ym1pdChmb3JtRWwpe1xuICAgIGxldCBhd2FpdGluZ1N1Ym1pdCA9IHRoaXMuZ2V0U2NoZWR1bGVkU3VibWl0KGZvcm1FbClcbiAgICBpZihhd2FpdGluZ1N1Ym1pdCl7XG4gICAgICBsZXQgW19lbCwgX3JlZiwgX29wdHMsIGNhbGxiYWNrXSA9IGF3YWl0aW5nU3VibWl0XG4gICAgICB0aGlzLmNhbmNlbFN1Ym1pdChmb3JtRWwpXG4gICAgICBjYWxsYmFjaygpXG4gICAgfVxuICB9XG5cbiAgZ2V0U2NoZWR1bGVkU3VibWl0KGZvcm1FbCl7XG4gICAgcmV0dXJuIHRoaXMuZm9ybVN1Ym1pdHMuZmluZCgoW2VsLCBfcmVmLCBfb3B0cywgX2NhbGxiYWNrXSkgPT4gZWwuaXNTYW1lTm9kZShmb3JtRWwpKVxuICB9XG5cbiAgc2NoZWR1bGVTdWJtaXQoZm9ybUVsLCByZWYsIG9wdHMsIGNhbGxiYWNrKXtcbiAgICBpZih0aGlzLmdldFNjaGVkdWxlZFN1Ym1pdChmb3JtRWwpKXsgcmV0dXJuIHRydWUgfVxuICAgIHRoaXMuZm9ybVN1Ym1pdHMucHVzaChbZm9ybUVsLCByZWYsIG9wdHMsIGNhbGxiYWNrXSlcbiAgfVxuXG4gIGNhbmNlbFN1Ym1pdChmb3JtRWwpe1xuICAgIHRoaXMuZm9ybVN1Ym1pdHMgPSB0aGlzLmZvcm1TdWJtaXRzLmZpbHRlcigoW2VsLCByZWYsIF9jYWxsYmFja10pID0+IHtcbiAgICAgIGlmKGVsLmlzU2FtZU5vZGUoZm9ybUVsKSl7XG4gICAgICAgIHRoaXMudW5kb1JlZnMocmVmKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGRpc2FibGVGb3JtKGZvcm1FbCwgb3B0cyA9IHt9KXtcbiAgICBsZXQgZmlsdGVySWdub3JlZCA9IGVsID0+IHtcbiAgICAgIGxldCB1c2VySWdub3JlZCA9IGNsb3Nlc3RQaHhCaW5kaW5nKGVsLCBgJHt0aGlzLmJpbmRpbmcoUEhYX1VQREFURSl9PWlnbm9yZWAsIGVsLmZvcm0pXG4gICAgICByZXR1cm4gISh1c2VySWdub3JlZCB8fCBjbG9zZXN0UGh4QmluZGluZyhlbCwgXCJkYXRhLXBoeC11cGRhdGU9aWdub3JlXCIsIGVsLmZvcm0pKVxuICAgIH1cbiAgICBsZXQgZmlsdGVyRGlzYWJsZXMgPSBlbCA9PiB7XG4gICAgICByZXR1cm4gZWwuaGFzQXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfRElTQUJMRV9XSVRIKSlcbiAgICB9XG4gICAgbGV0IGZpbHRlckJ1dHRvbiA9IGVsID0+IGVsLnRhZ05hbWUgPT0gXCJCVVRUT05cIlxuXG4gICAgbGV0IGZpbHRlcklucHV0ID0gZWwgPT4gW1wiSU5QVVRcIiwgXCJURVhUQVJFQVwiLCBcIlNFTEVDVFwiXS5pbmNsdWRlcyhlbC50YWdOYW1lKVxuXG4gICAgbGV0IGZvcm1FbGVtZW50cyA9IEFycmF5LmZyb20oZm9ybUVsLmVsZW1lbnRzKVxuICAgIGxldCBkaXNhYmxlcyA9IGZvcm1FbGVtZW50cy5maWx0ZXIoZmlsdGVyRGlzYWJsZXMpXG4gICAgbGV0IGJ1dHRvbnMgPSBmb3JtRWxlbWVudHMuZmlsdGVyKGZpbHRlckJ1dHRvbikuZmlsdGVyKGZpbHRlcklnbm9yZWQpXG4gICAgbGV0IGlucHV0cyA9IGZvcm1FbGVtZW50cy5maWx0ZXIoZmlsdGVySW5wdXQpLmZpbHRlcihmaWx0ZXJJZ25vcmVkKVxuXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFRCwgYnV0dG9uLmRpc2FibGVkKVxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZVxuICAgIH0pXG4gICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFBIWF9SRUFET05MWSwgaW5wdXQucmVhZE9ubHkpXG4gICAgICBpbnB1dC5yZWFkT25seSA9IHRydWVcbiAgICAgIGlmKGlucHV0LmZpbGVzKXtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFBIWF9ESVNBQkxFRCwgaW5wdXQuZGlzYWJsZWQpXG4gICAgICAgIGlucHV0LmRpc2FibGVkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gICAgZm9ybUVsLnNldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX1BBR0VfTE9BRElORyksIFwiXCIpXG4gICAgcmV0dXJuIHRoaXMucHV0UmVmKFtmb3JtRWxdLmNvbmNhdChkaXNhYmxlcykuY29uY2F0KGJ1dHRvbnMpLmNvbmNhdChpbnB1dHMpLCBcInN1Ym1pdFwiLCBvcHRzKVxuICB9XG5cbiAgcHVzaEZvcm1TdWJtaXQoZm9ybUVsLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBzdWJtaXR0ZXIsIG9wdHMsIG9uUmVwbHkpe1xuICAgIGxldCByZWZHZW5lcmF0b3IgPSAoKSA9PiB0aGlzLmRpc2FibGVGb3JtKGZvcm1FbCwgb3B0cylcbiAgICBsZXQgY2lkID0gdGhpcy50YXJnZXRDb21wb25lbnRJRChmb3JtRWwsIHRhcmdldEN0eClcbiAgICBpZihMaXZlVXBsb2FkZXIuaGFzVXBsb2Fkc0luUHJvZ3Jlc3MoZm9ybUVsKSl7XG4gICAgICBsZXQgW3JlZiwgX2Vsc10gPSByZWZHZW5lcmF0b3IoKVxuICAgICAgbGV0IHB1c2ggPSAoKSA9PiB0aGlzLnB1c2hGb3JtU3VibWl0KGZvcm1FbCwgc3VibWl0dGVyLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBvcHRzLCBvblJlcGx5KVxuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVTdWJtaXQoZm9ybUVsLCByZWYsIG9wdHMsIHB1c2gpXG4gICAgfSBlbHNlIGlmKExpdmVVcGxvYWRlci5pbnB1dHNBd2FpdGluZ1ByZWZsaWdodChmb3JtRWwpLmxlbmd0aCA+IDApe1xuICAgICAgbGV0IFtyZWYsIGVsc10gPSByZWZHZW5lcmF0b3IoKVxuICAgICAgbGV0IHByb3h5UmVmR2VuID0gKCkgPT4gW3JlZiwgZWxzLCBvcHRzXVxuICAgICAgdGhpcy51cGxvYWRGaWxlcyhmb3JtRWwsIHRhcmdldEN0eCwgcmVmLCBjaWQsIChfdXBsb2FkcykgPT4ge1xuICAgICAgICBsZXQgbWV0YSA9IHRoaXMuZXh0cmFjdE1ldGEoZm9ybUVsKVxuICAgICAgICBsZXQgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGZvcm1FbCwge3N1Ym1pdHRlciwgLi4ubWV0YX0pXG4gICAgICAgIHRoaXMucHVzaFdpdGhSZXBseShwcm94eVJlZkdlbiwgXCJldmVudFwiLCB7XG4gICAgICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICAgICAgZXZlbnQ6IHBoeEV2ZW50LFxuICAgICAgICAgIHZhbHVlOiBmb3JtRGF0YSxcbiAgICAgICAgICBjaWQ6IGNpZFxuICAgICAgICB9LCBvblJlcGx5KVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYoIShmb3JtRWwuaGFzQXR0cmlidXRlKFBIWF9SRUYpICYmIGZvcm1FbC5jbGFzc0xpc3QuY29udGFpbnMoXCJwaHgtc3VibWl0LWxvYWRpbmdcIikpKXtcbiAgICAgIGxldCBtZXRhID0gdGhpcy5leHRyYWN0TWV0YShmb3JtRWwpXG4gICAgICBsZXQgZm9ybURhdGEgPSBzZXJpYWxpemVGb3JtKGZvcm1FbCwge3N1Ym1pdHRlciwgLi4ubWV0YX0pXG4gICAgICB0aGlzLnB1c2hXaXRoUmVwbHkocmVmR2VuZXJhdG9yLCBcImV2ZW50XCIsIHtcbiAgICAgICAgdHlwZTogXCJmb3JtXCIsXG4gICAgICAgIGV2ZW50OiBwaHhFdmVudCxcbiAgICAgICAgdmFsdWU6IGZvcm1EYXRhLFxuICAgICAgICBjaWQ6IGNpZFxuICAgICAgfSwgb25SZXBseSlcbiAgICB9XG4gIH1cblxuICB1cGxvYWRGaWxlcyhmb3JtRWwsIHRhcmdldEN0eCwgcmVmLCBjaWQsIG9uQ29tcGxldGUpe1xuICAgIGxldCBqb2luQ291bnRBdFVwbG9hZCA9IHRoaXMuam9pbkNvdW50XG4gICAgbGV0IGlucHV0RWxzID0gTGl2ZVVwbG9hZGVyLmFjdGl2ZUZpbGVJbnB1dHMoZm9ybUVsKVxuICAgIGxldCBudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcyA9IGlucHV0RWxzLmxlbmd0aFxuXG4gICAgLy8gZ2V0IGVhY2ggZmlsZSBpbnB1dFxuICAgIGlucHV0RWxzLmZvckVhY2goaW5wdXRFbCA9PiB7XG4gICAgICBsZXQgdXBsb2FkZXIgPSBuZXcgTGl2ZVVwbG9hZGVyKGlucHV0RWwsIHRoaXMsICgpID0+IHtcbiAgICAgICAgbnVtRmlsZUlucHV0c0luUHJvZ3Jlc3MtLVxuICAgICAgICBpZihudW1GaWxlSW5wdXRzSW5Qcm9ncmVzcyA9PT0gMCl7IG9uQ29tcGxldGUoKSB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51cGxvYWRlcnNbaW5wdXRFbF0gPSB1cGxvYWRlclxuICAgICAgbGV0IGVudHJpZXMgPSB1cGxvYWRlci5lbnRyaWVzKCkubWFwKGVudHJ5ID0+IGVudHJ5LnRvUHJlZmxpZ2h0UGF5bG9hZCgpKVxuXG4gICAgICBsZXQgcGF5bG9hZCA9IHtcbiAgICAgICAgcmVmOiBpbnB1dEVsLmdldEF0dHJpYnV0ZShQSFhfVVBMT0FEX1JFRiksXG4gICAgICAgIGVudHJpZXM6IGVudHJpZXMsXG4gICAgICAgIGNpZDogdGhpcy50YXJnZXRDb21wb25lbnRJRChpbnB1dEVsLmZvcm0sIHRhcmdldEN0eClcbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2coXCJ1cGxvYWRcIiwgKCkgPT4gW1wic2VuZGluZyBwcmVmbGlnaHQgcmVxdWVzdFwiLCBwYXlsb2FkXSlcblxuICAgICAgdGhpcy5wdXNoV2l0aFJlcGx5KG51bGwsIFwiYWxsb3dfdXBsb2FkXCIsIHBheWxvYWQsIHJlc3AgPT4ge1xuICAgICAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbXCJnb3QgcHJlZmxpZ2h0IHJlc3BvbnNlXCIsIHJlc3BdKVxuICAgICAgICBpZihyZXNwLmVycm9yKXtcbiAgICAgICAgICB0aGlzLnVuZG9SZWZzKHJlZilcbiAgICAgICAgICBsZXQgW2VudHJ5X3JlZiwgcmVhc29uXSA9IHJlc3AuZXJyb3JcbiAgICAgICAgICB0aGlzLmxvZyhcInVwbG9hZFwiLCAoKSA9PiBbYGVycm9yIGZvciBlbnRyeSAke2VudHJ5X3JlZn1gLCByZWFzb25dKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBvbkVycm9yID0gKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoYW5uZWwub25FcnJvcigoKSA9PiB7XG4gICAgICAgICAgICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSBqb2luQ291bnRBdFVwbG9hZCl7IGNhbGxiYWNrKCkgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBsb2FkZXIuaW5pdEFkYXB0ZXJVcGxvYWQocmVzcCwgb25FcnJvciwgdGhpcy5saXZlU29ja2V0KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBkaXNwYXRjaFVwbG9hZHMobmFtZSwgZmlsZXNPckJsb2JzKXtcbiAgICBsZXQgaW5wdXRzID0gRE9NLmZpbmRVcGxvYWRJbnB1dHModGhpcy5lbCkuZmlsdGVyKGVsID0+IGVsLm5hbWUgPT09IG5hbWUpXG4gICAgaWYoaW5wdXRzLmxlbmd0aCA9PT0gMCl7IGxvZ0Vycm9yKGBubyBsaXZlIGZpbGUgaW5wdXRzIGZvdW5kIG1hdGNoaW5nIHRoZSBuYW1lIFwiJHtuYW1lfVwiYCkgfVxuICAgIGVsc2UgaWYoaW5wdXRzLmxlbmd0aCA+IDEpeyBsb2dFcnJvcihgZHVwbGljYXRlIGxpdmUgZmlsZSBpbnB1dHMgZm91bmQgbWF0Y2hpbmcgdGhlIG5hbWUgXCIke25hbWV9XCJgKSB9XG4gICAgZWxzZSB7IERPTS5kaXNwYXRjaEV2ZW50KGlucHV0c1swXSwgUEhYX1RSQUNLX1VQTE9BRFMsIHtkZXRhaWw6IHtmaWxlczogZmlsZXNPckJsb2JzfX0pIH1cbiAgfVxuXG4gIHB1c2hGb3JtUmVjb3ZlcnkoZm9ybSwgbmV3Q2lkLCBjYWxsYmFjayl7XG4gICAgdGhpcy5saXZlU29ja2V0LndpdGhpbk93bmVycyhmb3JtLCAodmlldywgdGFyZ2V0Q3R4KSA9PiB7XG4gICAgICBsZXQgcGh4Q2hhbmdlID0gdGhpcy5iaW5kaW5nKFwiY2hhbmdlXCIpXG4gICAgICBsZXQgaW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLmVsZW1lbnRzKS5maWx0ZXIoZWwgPT4gRE9NLmlzRm9ybUlucHV0KGVsKSAmJiBlbC5uYW1lICYmICFlbC5oYXNBdHRyaWJ1dGUocGh4Q2hhbmdlKSlcbiAgICAgIGlmKGlucHV0cy5sZW5ndGggPT09IDApeyByZXR1cm4gfVxuXG4gICAgICBsZXQgaW5wdXQgPSBpbnB1dHMuZmluZChlbCA9PiBlbC50eXBlICE9PSBcImhpZGRlblwiKSB8fCBpbnB1dFswXVxuICAgICAgbGV0IHBoeEV2ZW50ID0gZm9ybS5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9BVVRPX1JFQ09WRVIpKSB8fCBmb3JtLmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpXG4gICAgICBKUy5leGVjKFwiY2hhbmdlXCIsIHBoeEV2ZW50LCB2aWV3LCBpbnB1dCwgW1wicHVzaFwiLCB7X3RhcmdldDogaW5wdXQubmFtZSwgbmV3Q2lkOiBuZXdDaWQsIGNhbGxiYWNrOiBjYWxsYmFja31dKVxuICAgIH0pXG4gIH1cblxuICBwdXNoTGlua1BhdGNoKGhyZWYsIHRhcmdldEVsLCBjYWxsYmFjayl7XG4gICAgbGV0IGxpbmtSZWYgPSB0aGlzLmxpdmVTb2NrZXQuc2V0UGVuZGluZ0xpbmsoaHJlZilcbiAgICBsZXQgcmVmR2VuID0gdGFyZ2V0RWwgPyAoKSA9PiB0aGlzLnB1dFJlZihbdGFyZ2V0RWxdLCBcImNsaWNrXCIpIDogbnVsbFxuICAgIGxldCBmYWxsYmFjayA9ICgpID0+IHRoaXMubGl2ZVNvY2tldC5yZWRpcmVjdCh3aW5kb3cubG9jYXRpb24uaHJlZilcblxuICAgIGxldCBwdXNoID0gdGhpcy5wdXNoV2l0aFJlcGx5KHJlZkdlbiwgXCJsaXZlX3BhdGNoXCIsIHt1cmw6IGhyZWZ9LCByZXNwID0+IHtcbiAgICAgIHRoaXMubGl2ZVNvY2tldC5yZXF1ZXN0RE9NVXBkYXRlKCgpID0+IHtcbiAgICAgICAgaWYocmVzcC5saW5rX3JlZGlyZWN0KXtcbiAgICAgICAgICB0aGlzLmxpdmVTb2NrZXQucmVwbGFjZU1haW4oaHJlZiwgbnVsbCwgY2FsbGJhY2ssIGxpbmtSZWYpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYodGhpcy5saXZlU29ja2V0LmNvbW1pdFBlbmRpbmdMaW5rKGxpbmtSZWYpKXtcbiAgICAgICAgICAgIHRoaXMuaHJlZiA9IGhyZWZcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hcHBseVBlbmRpbmdVcGRhdGVzKClcbiAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhsaW5rUmVmKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZihwdXNoKXtcbiAgICAgIHB1c2gucmVjZWl2ZShcInRpbWVvdXRcIiwgZmFsbGJhY2spXG4gICAgfSBlbHNlIHtcbiAgICAgIGZhbGxiYWNrKClcbiAgICB9XG4gIH1cblxuICBmb3Jtc0ZvclJlY292ZXJ5KGh0bWwpe1xuICAgIGlmKHRoaXMuam9pbkNvdW50ID09PSAwKXsgcmV0dXJuIFtdIH1cblxuICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIilcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sXG5cbiAgICByZXR1cm4gKFxuICAgICAgRE9NLmFsbCh0aGlzLmVsLCBgZm9ybVske3BoeENoYW5nZX1dYClcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uaWQgJiYgdGhpcy5vd25zRWxlbWVudChmb3JtKSlcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZWxlbWVudHMubGVuZ3RoID4gMClcbiAgICAgICAgLmZpbHRlcihmb3JtID0+IGZvcm0uZ2V0QXR0cmlidXRlKHRoaXMuYmluZGluZyhQSFhfQVVUT19SRUNPVkVSKSkgIT09IFwiaWdub3JlXCIpXG4gICAgICAgIC5tYXAoZm9ybSA9PiB7XG4gICAgICAgICAgbGV0IG5ld0Zvcm0gPSB0ZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoYGZvcm1baWQ9XCIke2Zvcm0uaWR9XCJdWyR7cGh4Q2hhbmdlfT1cIiR7Zm9ybS5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKX1cIl1gKVxuICAgICAgICAgIGlmKG5ld0Zvcm0pe1xuICAgICAgICAgICAgcmV0dXJuIFtmb3JtLCBuZXdGb3JtLCB0aGlzLnRhcmdldENvbXBvbmVudElEKG5ld0Zvcm0pXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW2Zvcm0sIGZvcm0sIHRoaXMudGFyZ2V0Q29tcG9uZW50SUQoZm9ybSldXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKChbZm9ybSwgbmV3Rm9ybSwgbmV3Q2lkXSkgPT4gbmV3Rm9ybSlcbiAgICApXG4gIH1cblxuICBtYXliZVB1c2hDb21wb25lbnRzRGVzdHJveWVkKGRlc3Ryb3llZENJRHMpe1xuICAgIGxldCB3aWxsRGVzdHJveUNJRHMgPSBkZXN0cm95ZWRDSURzLmZpbHRlcihjaWQgPT4ge1xuICAgICAgcmV0dXJuIERPTS5maW5kQ29tcG9uZW50Tm9kZUxpc3QodGhpcy5lbCwgY2lkKS5sZW5ndGggPT09IDBcbiAgICB9KVxuICAgIGlmKHdpbGxEZXN0cm95Q0lEcy5sZW5ndGggPiAwKXtcbiAgICAgIHRoaXMucHJ1bmluZ0NJRHMucHVzaCguLi53aWxsRGVzdHJveUNJRHMpXG5cbiAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImNpZHNfd2lsbF9kZXN0cm95XCIsIHtjaWRzOiB3aWxsRGVzdHJveUNJRHN9LCAoKSA9PiB7XG4gICAgICAgIC8vIFRoZSBjaWRzIGFyZSBlaXRoZXIgYmFjayBvbiB0aGUgcGFnZSBvciB0aGV5IHdpbGwgYmUgZnVsbHkgcmVtb3ZlZCxcbiAgICAgICAgLy8gc28gd2UgY2FuIHJlbW92ZSB0aGVtIGZyb20gdGhlIHBydW5pbmdDSURzLlxuICAgICAgICB0aGlzLnBydW5pbmdDSURzID0gdGhpcy5wcnVuaW5nQ0lEcy5maWx0ZXIoY2lkID0+IHdpbGxEZXN0cm95Q0lEcy5pbmRleE9mKGNpZCkgIT09IC0xKVxuXG4gICAgICAgIC8vIFNlZSBpZiBhbnkgb2YgdGhlIGNpZHMgd2Ugd2FudGVkIHRvIGRlc3Ryb3kgd2VyZSBhZGRlZCBiYWNrLFxuICAgICAgICAvLyBpZiB0aGV5IHdlcmUgYWRkZWQgYmFjaywgd2UgZG9uJ3QgYWN0dWFsbHkgZGVzdHJveSB0aGVtLlxuICAgICAgICBsZXQgY29tcGxldGVseURlc3Ryb3lDSURzID0gd2lsbERlc3Ryb3lDSURzLmZpbHRlcihjaWQgPT4ge1xuICAgICAgICAgIHJldHVybiBET00uZmluZENvbXBvbmVudE5vZGVMaXN0KHRoaXMuZWwsIGNpZCkubGVuZ3RoID09PSAwXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYoY29tcGxldGVseURlc3Ryb3lDSURzLmxlbmd0aCA+IDApe1xuICAgICAgICAgIHRoaXMucHVzaFdpdGhSZXBseShudWxsLCBcImNpZHNfZGVzdHJveWVkXCIsIHtjaWRzOiBjb21wbGV0ZWx5RGVzdHJveUNJRHN9LCAocmVzcCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZC5wcnVuZUNJRHMocmVzcC5jaWRzKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb3duc0VsZW1lbnQoZWwpe1xuICAgIGxldCBwYXJlbnRWaWV3RWwgPSBlbC5jbG9zZXN0KFBIWF9WSUVXX1NFTEVDVE9SKVxuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1BBUkVOVF9JRCkgPT09IHRoaXMuaWQgfHxcbiAgICAgIChwYXJlbnRWaWV3RWwgJiYgcGFyZW50Vmlld0VsLmlkID09PSB0aGlzLmlkKSB8fFxuICAgICAgKCFwYXJlbnRWaWV3RWwgJiYgdGhpcy5pc0RlYWQpXG4gIH1cblxuICBzdWJtaXRGb3JtKGZvcm0sIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cyA9IHt9KXtcbiAgICBET00ucHV0UHJpdmF0ZShmb3JtLCBQSFhfSEFTX1NVQk1JVFRFRCwgdHJ1ZSlcbiAgICBsZXQgcGh4RmVlZGJhY2sgPSB0aGlzLmxpdmVTb2NrZXQuYmluZGluZyhQSFhfRkVFREJBQ0tfRk9SKVxuICAgIGxldCBpbnB1dHMgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpXG4gICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gRE9NLnB1dFByaXZhdGUoaW5wdXQsIFBIWF9IQVNfU1VCTUlUVEVELCB0cnVlKSlcbiAgICB0aGlzLmxpdmVTb2NrZXQuYmx1ckFjdGl2ZUVsZW1lbnQodGhpcylcbiAgICB0aGlzLnB1c2hGb3JtU3VibWl0KGZvcm0sIHRhcmdldEN0eCwgcGh4RXZlbnQsIHN1Ym1pdHRlciwgb3B0cywgKCkgPT4ge1xuICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4gRE9NLnNob3dFcnJvcihpbnB1dCwgcGh4RmVlZGJhY2spKVxuICAgICAgdGhpcy5saXZlU29ja2V0LnJlc3RvcmVQcmV2aW91c2x5QWN0aXZlRm9jdXMoKVxuICAgIH0pXG4gIH1cblxuICBiaW5kaW5nKGtpbmQpeyByZXR1cm4gdGhpcy5saXZlU29ja2V0LmJpbmRpbmcoa2luZCkgfVxufVxuIiwgIi8qKiBJbml0aWFsaXplcyB0aGUgTGl2ZVNvY2tldFxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZW5kUG9pbnQgLSBUaGUgc3RyaW5nIFdlYlNvY2tldCBlbmRwb2ludCwgaWUsIGBcIndzczovL2V4YW1wbGUuY29tL2xpdmVcImAsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwiL2xpdmVcImAgKGluaGVyaXRlZCBob3N0ICYgcHJvdG9jb2wpXG4gKiBAcGFyYW0ge1Bob2VuaXguU29ja2V0fSBzb2NrZXQgLSB0aGUgcmVxdWlyZWQgUGhvZW5peCBTb2NrZXQgY2xhc3MgaW1wb3J0ZWQgZnJvbSBcInBob2VuaXhcIi4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG4gKiAgICAgaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuICogICAgIGxldCBsaXZlU29ja2V0ID0gbmV3IExpdmVTb2NrZXQoXCIvbGl2ZVwiLCBTb2NrZXQsIHsuLi59KVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBPcHRpb25hbCBjb25maWd1cmF0aW9uLiBPdXRzaWRlIG9mIGtleXMgbGlzdGVkIGJlbG93LCBhbGxcbiAqIGNvbmZpZ3VyYXRpb24gaXMgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBQaG9lbml4IFNvY2tldCBjb25zdHJ1Y3Rvci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5kZWZhdWx0c10gLSBUaGUgb3B0aW9uYWwgZGVmYXVsdHMgdG8gdXNlIGZvciB2YXJpb3VzIGJpbmRpbmdzLFxuICogc3VjaCBhcyBgcGh4LWRlYm91bmNlYC4gU3VwcG9ydHMgdGhlIGZvbGxvd2luZyBrZXlzOlxuICpcbiAqICAgLSBkZWJvdW5jZSAtIHRoZSBtaWxsaXNlY29uZCBwaHgtZGVib3VuY2UgdGltZS4gRGVmYXVsdHMgMzAwXG4gKiAgIC0gdGhyb3R0bGUgLSB0aGUgbWlsbGlzZWNvbmQgcGh4LXRocm90dGxlIHRpbWUuIERlZmF1bHRzIDMwMFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnBhcmFtc10gLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gZm9yIHBhc3NpbmcgY29ubmVjdCBwYXJhbXMuXG4gKiBUaGUgZnVuY3Rpb24gcmVjZWl2ZXMgdGhlIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gTGl2ZVZpZXcuIEZvciBleGFtcGxlOlxuICpcbiAqICAgICAoZWwpID0+IHt2aWV3OiBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW15LXZpZXctbmFtZVwiLCB0b2tlbjogd2luZG93Lm15VG9rZW59XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmJpbmRpbmdQcmVmaXhdIC0gVGhlIG9wdGlvbmFsIHByZWZpeCB0byB1c2UgZm9yIGFsbCBwaHggRE9NIGFubm90YXRpb25zLlxuICogRGVmYXVsdHMgdG8gXCJwaHgtXCIuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuaG9va3NdIC0gVGhlIG9wdGlvbmFsIG9iamVjdCBmb3IgcmVmZXJlbmNpbmcgTGl2ZVZpZXcgaG9vayBjYWxsYmFja3MuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMudXBsb2FkZXJzXSAtIFRoZSBvcHRpb25hbCBvYmplY3QgZm9yIHJlZmVyZW5jaW5nIExpdmVWaWV3IHVwbG9hZGVyIGNhbGxiYWNrcy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMubG9hZGVyVGltZW91dF0gLSBUaGUgb3B0aW9uYWwgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGFwcGx5XG4gKiBsb2FkaW5nIHN0YXRlcy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMubWF4UmVsb2Fkc10gLSBUaGUgbWF4aW11bSByZWxvYWRzIGJlZm9yZSBlbnRlcmluZyBmYWlsc2FmZSBtb2RlLlxuICogQHBhcmFtIHtpbnRlZ2VyfSBbb3B0cy5yZWxvYWRKaXR0ZXJNaW5dIC0gVGhlIG1pbmltdW0gdGltZSBiZXR3ZWVuIG5vcm1hbCByZWxvYWQgYXR0ZW1wdHMuXG4gKiBAcGFyYW0ge2ludGVnZXJ9IFtvcHRzLnJlbG9hZEppdHRlck1heF0gLSBUaGUgbWF4aW11bSB0aW1lIGJldHdlZW4gbm9ybWFsIHJlbG9hZCBhdHRlbXB0cy5cbiAqIEBwYXJhbSB7aW50ZWdlcn0gW29wdHMuZmFpbHNhZmVKaXR0ZXJdIC0gVGhlIHRpbWUgYmV0d2VlbiByZWxvYWQgYXR0ZW1wdHMgaW4gZmFpbHNhZmUgbW9kZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLnZpZXdMb2dnZXJdIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvZyBkZWJ1ZyBpbmZvcm1hdGlvbi4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgICh2aWV3LCBraW5kLCBtc2csIG9iaikgPT4gY29uc29sZS5sb2coYCR7dmlldy5pZH0gJHtraW5kfTogJHttc2d9IC0gYCwgb2JqKVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5tZXRhZGF0YV0gLSBUaGUgb3B0aW9uYWwgb2JqZWN0IG1hcHBpbmcgZXZlbnQgbmFtZXMgdG8gZnVuY3Rpb25zIGZvclxuICogcG9wdWxhdGluZyBldmVudCBtZXRhZGF0YS4gRm9yIGV4YW1wbGU6XG4gKlxuICogICAgIG1ldGFkYXRhOiB7XG4gKiAgICAgICBjbGljazogKGUsIGVsKSA9PiB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgY3RybEtleTogZS5jdHJsS2V5LFxuICogICAgICAgICAgIG1ldGFLZXk6IGUubWV0YUtleSxcbiAqICAgICAgICAgICBkZXRhaWw6IGUuZGV0YWlsIHx8IDEsXG4gKiAgICAgICAgIH1cbiAqICAgICAgIH0sXG4gKiAgICAgICBrZXlkb3duOiAoZSwgZWwpID0+IHtcbiAqICAgICAgICAgcmV0dXJuIHtcbiAqICAgICAgICAgICBrZXk6IGUua2V5LFxuICogICAgICAgICAgIGN0cmxLZXk6IGUuY3RybEtleSxcbiAqICAgICAgICAgICBtZXRhS2V5OiBlLm1ldGFLZXksXG4gKiAgICAgICAgICAgc2hpZnRLZXk6IGUuc2hpZnRLZXlcbiAqICAgICAgICAgfVxuICogICAgICAgfVxuICogICAgIH1cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5zZXNzaW9uU3RvcmFnZV0gLSBBbiBvcHRpb25hbCBTdG9yYWdlIGNvbXBhdGlibGUgb2JqZWN0XG4gKiBVc2VmdWwgd2hlbiBMaXZlVmlldyB3b24ndCBoYXZlIGFjY2VzcyB0byBgc2Vzc2lvblN0b3JhZ2VgLiAgRm9yIGV4YW1wbGUsIFRoaXMgY291bGRcbiAqIGhhcHBlbiBpZiBhIHNpdGUgbG9hZHMgYSBjcm9zcy1kb21haW4gTGl2ZVZpZXcgaW4gYW4gaWZyYW1lLiAgRXhhbXBsZSB1c2FnZTpcbiAqXG4gKiAgICAgY2xhc3MgSW5NZW1vcnlTdG9yYWdlIHtcbiAqICAgICAgIGNvbnN0cnVjdG9yKCkgeyB0aGlzLnN0b3JhZ2UgPSB7fSB9XG4gKiAgICAgICBnZXRJdGVtKGtleU5hbWUpIHsgcmV0dXJuIHRoaXMuc3RvcmFnZVtrZXlOYW1lXSB8fCBudWxsIH1cbiAqICAgICAgIHJlbW92ZUl0ZW0oa2V5TmFtZSkgeyBkZWxldGUgdGhpcy5zdG9yYWdlW2tleU5hbWVdIH1cbiAqICAgICAgIHNldEl0ZW0oa2V5TmFtZSwga2V5VmFsdWUpIHsgdGhpcy5zdG9yYWdlW2tleU5hbWVdID0ga2V5VmFsdWUgfVxuICogICAgIH1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMubG9jYWxTdG9yYWdlXSAtIEFuIG9wdGlvbmFsIFN0b3JhZ2UgY29tcGF0aWJsZSBvYmplY3RcbiAqIFVzZWZ1bCBmb3Igd2hlbiBMaXZlVmlldyB3b24ndCBoYXZlIGFjY2VzcyB0byBgbG9jYWxTdG9yYWdlYC5cbiAqIFNlZSBgb3B0cy5zZXNzaW9uU3RvcmFnZWAgZm9yIGV4YW1wbGVzLlxuKi9cblxuaW1wb3J0IHtcbiAgQklORElOR19QUkVGSVgsXG4gIENPTlNFQ1VUSVZFX1JFTE9BRFMsXG4gIERFRkFVTFRTLFxuICBGQUlMU0FGRV9KSVRURVIsXG4gIExPQURFUl9USU1FT1VULFxuICBNQVhfUkVMT0FEUyxcbiAgUEhYX0RFQk9VTkNFLFxuICBQSFhfRFJPUF9UQVJHRVQsXG4gIFBIWF9IQVNfRk9DVVNFRCxcbiAgUEhYX0tFWSxcbiAgUEhYX0xJTktfU1RBVEUsXG4gIFBIWF9MSVZFX0xJTkssXG4gIFBIWF9MVl9ERUJVRyxcbiAgUEhYX0xWX0xBVEVOQ1lfU0lNLFxuICBQSFhfTFZfUFJPRklMRSxcbiAgUEhYX01BSU4sXG4gIFBIWF9QQVJFTlRfSUQsXG4gIFBIWF9WSUVXX1NFTEVDVE9SLFxuICBQSFhfUk9PVF9JRCxcbiAgUEhYX1RIUk9UVExFLFxuICBQSFhfVFJBQ0tfVVBMT0FEUyxcbiAgUEhYX1NFU1NJT04sXG4gIFBIWF9GRUVEQkFDS19GT1IsXG4gIFJFTE9BRF9KSVRURVJfTUlOLFxuICBSRUxPQURfSklUVEVSX01BWCxcbiAgUEhYX1JFRixcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCJcblxuaW1wb3J0IHtcbiAgY2xvbmUsXG4gIGNsb3Nlc3RQaHhCaW5kaW5nLFxuICBjbG9zdXJlLFxuICBkZWJ1ZyxcbiAgaXNPYmplY3QsXG4gIG1heWJlXG59IGZyb20gXCIuL3V0aWxzXCJcblxuaW1wb3J0IEJyb3dzZXIgZnJvbSBcIi4vYnJvd3NlclwiXG5pbXBvcnQgRE9NIGZyb20gXCIuL2RvbVwiXG5pbXBvcnQgSG9va3MgZnJvbSBcIi4vaG9va3NcIlxuaW1wb3J0IExpdmVVcGxvYWRlciBmcm9tIFwiLi9saXZlX3VwbG9hZGVyXCJcbmltcG9ydCBWaWV3IGZyb20gXCIuL3ZpZXdcIlxuaW1wb3J0IEpTIGZyb20gXCIuL2pzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZVNvY2tldCB7XG4gIGNvbnN0cnVjdG9yKHVybCwgcGh4U29ja2V0LCBvcHRzID0ge30pe1xuICAgIHRoaXMudW5sb2FkZWQgPSBmYWxzZVxuICAgIGlmKCFwaHhTb2NrZXQgfHwgcGh4U29ja2V0LmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiT2JqZWN0XCIpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBcbiAgICAgIGEgcGhvZW5peCBTb2NrZXQgbXVzdCBiZSBwcm92aWRlZCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIHRoZSBMaXZlU29ja2V0IGNvbnN0cnVjdG9yLiBGb3IgZXhhbXBsZTpcblxuICAgICAgICAgIGltcG9ydCB7U29ja2V0fSBmcm9tIFwicGhvZW5peFwiXG4gICAgICAgICAgaW1wb3J0IHtMaXZlU29ja2V0fSBmcm9tIFwicGhvZW5peF9saXZlX3ZpZXdcIlxuICAgICAgICAgIGxldCBsaXZlU29ja2V0ID0gbmV3IExpdmVTb2NrZXQoXCIvbGl2ZVwiLCBTb2NrZXQsIHsuLi59KVxuICAgICAgYClcbiAgICB9XG4gICAgdGhpcy5zb2NrZXQgPSBuZXcgcGh4U29ja2V0KHVybCwgb3B0cylcbiAgICB0aGlzLmJpbmRpbmdQcmVmaXggPSBvcHRzLmJpbmRpbmdQcmVmaXggfHwgQklORElOR19QUkVGSVhcbiAgICB0aGlzLm9wdHMgPSBvcHRzXG4gICAgdGhpcy5wYXJhbXMgPSBjbG9zdXJlKG9wdHMucGFyYW1zIHx8IHt9KVxuICAgIHRoaXMudmlld0xvZ2dlciA9IG9wdHMudmlld0xvZ2dlclxuICAgIHRoaXMubWV0YWRhdGFDYWxsYmFja3MgPSBvcHRzLm1ldGFkYXRhIHx8IHt9XG4gICAgdGhpcy5kZWZhdWx0cyA9IE9iamVjdC5hc3NpZ24oY2xvbmUoREVGQVVMVFMpLCBvcHRzLmRlZmF1bHRzIHx8IHt9KVxuICAgIHRoaXMuYWN0aXZlRWxlbWVudCA9IG51bGxcbiAgICB0aGlzLnByZXZBY3RpdmUgPSBudWxsXG4gICAgdGhpcy5zaWxlbmNlZCA9IGZhbHNlXG4gICAgdGhpcy5tYWluID0gbnVsbFxuICAgIHRoaXMub3V0Z29pbmdNYWluRWwgPSBudWxsXG4gICAgdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCA9IG51bGxcbiAgICB0aGlzLmxpbmtSZWYgPSAxXG4gICAgdGhpcy5yb290cyA9IHt9XG4gICAgdGhpcy5ocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICB0aGlzLnBlbmRpbmdMaW5rID0gbnVsbFxuICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0gY2xvbmUod2luZG93LmxvY2F0aW9uKVxuICAgIHRoaXMuaG9va3MgPSBvcHRzLmhvb2tzIHx8IHt9XG4gICAgdGhpcy51cGxvYWRlcnMgPSBvcHRzLnVwbG9hZGVycyB8fCB7fVxuICAgIHRoaXMubG9hZGVyVGltZW91dCA9IG9wdHMubG9hZGVyVGltZW91dCB8fCBMT0FERVJfVElNRU9VVFxuICAgIHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyID0gbnVsbFxuICAgIHRoaXMubWF4UmVsb2FkcyA9IG9wdHMubWF4UmVsb2FkcyB8fCBNQVhfUkVMT0FEU1xuICAgIHRoaXMucmVsb2FkSml0dGVyTWluID0gb3B0cy5yZWxvYWRKaXR0ZXJNaW4gfHwgUkVMT0FEX0pJVFRFUl9NSU5cbiAgICB0aGlzLnJlbG9hZEppdHRlck1heCA9IG9wdHMucmVsb2FkSml0dGVyTWF4IHx8IFJFTE9BRF9KSVRURVJfTUFYXG4gICAgdGhpcy5mYWlsc2FmZUppdHRlciA9IG9wdHMuZmFpbHNhZmVKaXR0ZXIgfHwgRkFJTFNBRkVfSklUVEVSXG4gICAgdGhpcy5sb2NhbFN0b3JhZ2UgPSBvcHRzLmxvY2FsU3RvcmFnZSB8fCB3aW5kb3cubG9jYWxTdG9yYWdlXG4gICAgdGhpcy5zZXNzaW9uU3RvcmFnZSA9IG9wdHMuc2Vzc2lvblN0b3JhZ2UgfHwgd2luZG93LnNlc3Npb25TdG9yYWdlXG4gICAgdGhpcy5ib3VuZFRvcExldmVsRXZlbnRzID0gZmFsc2VcbiAgICB0aGlzLmRvbUNhbGxiYWNrcyA9IE9iamVjdC5hc3NpZ24oe29uTm9kZUFkZGVkOiBjbG9zdXJlKCksIG9uQmVmb3JlRWxVcGRhdGVkOiBjbG9zdXJlKCl9LCBvcHRzLmRvbSB8fCB7fSlcbiAgICB0aGlzLnRyYW5zaXRpb25zID0gbmV3IFRyYW5zaXRpb25TZXQoKVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgX2UgPT4ge1xuICAgICAgdGhpcy51bmxvYWRlZCA9IHRydWVcbiAgICB9KVxuICAgIHRoaXMuc29ja2V0Lm9uT3BlbigoKSA9PiB7XG4gICAgICBpZih0aGlzLmlzVW5sb2FkZWQoKSl7XG4gICAgICAgIC8vIHJlbG9hZCBwYWdlIGlmIGJlaW5nIHJlc3RvcmVkIGZyb20gYmFjay9mb3J3YXJkIGNhY2hlIGFuZCBicm93c2VyIGRvZXMgbm90IGVtaXQgXCJwYWdlc2hvd1wiXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBwdWJsaWNcblxuICBpc1Byb2ZpbGVFbmFibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX1BST0ZJTEUpID09PSBcInRydWVcIiB9XG5cbiAgaXNEZWJ1Z0VuYWJsZWQoKXsgcmV0dXJuIHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfREVCVUcpID09PSBcInRydWVcIiB9XG5cbiAgaXNEZWJ1Z0Rpc2FibGVkKCl7IHJldHVybiB0aGlzLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEhYX0xWX0RFQlVHKSA9PT0gXCJmYWxzZVwiIH1cblxuICBlbmFibGVEZWJ1ZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX0RFQlVHLCBcInRydWVcIikgfVxuXG4gIGVuYWJsZVByb2ZpbGluZygpeyB0aGlzLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEhYX0xWX1BST0ZJTEUsIFwidHJ1ZVwiKSB9XG5cbiAgZGlzYWJsZURlYnVnKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfREVCVUcsIFwiZmFsc2VcIikgfVxuXG4gIGRpc2FibGVQcm9maWxpbmcoKXsgdGhpcy5zZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFBIWF9MVl9QUk9GSUxFKSB9XG5cbiAgZW5hYmxlTGF0ZW5jeVNpbSh1cHBlckJvdW5kTXMpe1xuICAgIHRoaXMuZW5hYmxlRGVidWcoKVxuICAgIGNvbnNvbGUubG9nKFwibGF0ZW5jeSBzaW11bGF0b3IgZW5hYmxlZCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoaXMgYnJvd3NlciBzZXNzaW9uLiBDYWxsIGRpc2FibGVMYXRlbmN5U2ltKCkgdG8gZGlzYWJsZVwiKVxuICAgIHRoaXMuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQSFhfTFZfTEFURU5DWV9TSU0sIHVwcGVyQm91bmRNcylcbiAgfVxuXG4gIGRpc2FibGVMYXRlbmN5U2ltKCl7IHRoaXMuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShQSFhfTFZfTEFURU5DWV9TSU0pIH1cblxuICBnZXRMYXRlbmN5U2ltKCl7XG4gICAgbGV0IHN0ciA9IHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQSFhfTFZfTEFURU5DWV9TSU0pXG4gICAgcmV0dXJuIHN0ciA/IHBhcnNlSW50KHN0cikgOiBudWxsXG4gIH1cblxuICBnZXRTb2NrZXQoKXsgcmV0dXJuIHRoaXMuc29ja2V0IH1cblxuICBjb25uZWN0KCl7XG4gICAgLy8gZW5hYmxlIGRlYnVnIGJ5IGRlZmF1bHQgaWYgb24gbG9jYWxob3N0IGFuZCBub3QgZXhwbGljaXRseSBkaXNhYmxlZFxuICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gXCJsb2NhbGhvc3RcIiAmJiAhdGhpcy5pc0RlYnVnRGlzYWJsZWQoKSl7IHRoaXMuZW5hYmxlRGVidWcoKSB9XG4gICAgbGV0IGRvQ29ubmVjdCA9ICgpID0+IHtcbiAgICAgIGlmKHRoaXMuam9pblJvb3RWaWV3cygpKXtcbiAgICAgICAgdGhpcy5iaW5kVG9wTGV2ZWxFdmVudHMoKVxuICAgICAgICB0aGlzLnNvY2tldC5jb25uZWN0KClcbiAgICAgIH0gZWxzZSBpZih0aGlzLm1haW4pe1xuICAgICAgICB0aGlzLnNvY2tldC5jb25uZWN0KClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYmluZFRvcExldmVsRXZlbnRzKHtkZWFkOiB0cnVlfSlcbiAgICAgIH1cbiAgICAgIHRoaXMuam9pbkRlYWRWaWV3KClcbiAgICB9XG4gICAgaWYoW1wiY29tcGxldGVcIiwgXCJsb2FkZWRcIiwgXCJpbnRlcmFjdGl2ZVwiXS5pbmRleE9mKGRvY3VtZW50LnJlYWR5U3RhdGUpID49IDApe1xuICAgICAgZG9Db25uZWN0KClcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gZG9Db25uZWN0KCkpXG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdChjYWxsYmFjayl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoY2FsbGJhY2spXG4gIH1cblxuICByZXBsYWNlVHJhbnNwb3J0KHRyYW5zcG9ydCl7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMucmVsb2FkV2l0aEppdHRlclRpbWVyKVxuICAgIHRoaXMuc29ja2V0LnJlcGxhY2VUcmFuc3BvcnQodHJhbnNwb3J0KVxuICAgIHRoaXMuY29ubmVjdCgpXG4gIH1cblxuICBleGVjSlMoZWwsIGVuY29kZWRKUywgZXZlbnRUeXBlID0gbnVsbCl7XG4gICAgdGhpcy5vd25lcihlbCwgdmlldyA9PiBKUy5leGVjKGV2ZW50VHlwZSwgZW5jb2RlZEpTLCB2aWV3LCBlbCkpXG4gIH1cblxuICAvLyBwcml2YXRlXG5cbiAgZXhlY0pTSG9va1B1c2goZWwsIHBoeEV2ZW50LCBkYXRhLCBjYWxsYmFjayl7XG4gICAgdGhpcy53aXRoaW5Pd25lcnMoZWwsIHZpZXcgPT4ge1xuICAgICAgSlMuZXhlYyhcImhvb2tcIiwgcGh4RXZlbnQsIHZpZXcsIGVsLCBbXCJwdXNoXCIsIHtkYXRhLCBjYWxsYmFja31dKVxuICAgIH0pXG4gIH1cblxuICB1bmxvYWQoKXtcbiAgICBpZih0aGlzLnVubG9hZGVkKXsgcmV0dXJuIH1cbiAgICBpZih0aGlzLm1haW4gJiYgdGhpcy5pc0Nvbm5lY3RlZCgpKXsgdGhpcy5sb2codGhpcy5tYWluLCBcInNvY2tldFwiLCAoKSA9PiBbXCJkaXNjb25uZWN0IGZvciBwYWdlIG5hdlwiXSkgfVxuICAgIHRoaXMudW5sb2FkZWQgPSB0cnVlXG4gICAgdGhpcy5kZXN0cm95QWxsVmlld3MoKVxuICAgIHRoaXMuZGlzY29ubmVjdCgpXG4gIH1cblxuICB0cmlnZ2VyRE9NKGtpbmQsIGFyZ3MpeyB0aGlzLmRvbUNhbGxiYWNrc1traW5kXSguLi5hcmdzKSB9XG5cbiAgdGltZShuYW1lLCBmdW5jKXtcbiAgICBpZighdGhpcy5pc1Byb2ZpbGVFbmFibGVkKCkgfHwgIWNvbnNvbGUudGltZSl7IHJldHVybiBmdW5jKCkgfVxuICAgIGNvbnNvbGUudGltZShuYW1lKVxuICAgIGxldCByZXN1bHQgPSBmdW5jKClcbiAgICBjb25zb2xlLnRpbWVFbmQobmFtZSlcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBsb2codmlldywga2luZCwgbXNnQ2FsbGJhY2spe1xuICAgIGlmKHRoaXMudmlld0xvZ2dlcil7XG4gICAgICBsZXQgW21zZywgb2JqXSA9IG1zZ0NhbGxiYWNrKClcbiAgICAgIHRoaXMudmlld0xvZ2dlcih2aWV3LCBraW5kLCBtc2csIG9iailcbiAgICB9IGVsc2UgaWYodGhpcy5pc0RlYnVnRW5hYmxlZCgpKXtcbiAgICAgIGxldCBbbXNnLCBvYmpdID0gbXNnQ2FsbGJhY2soKVxuICAgICAgZGVidWcodmlldywga2luZCwgbXNnLCBvYmopXG4gICAgfVxuICB9XG5cbiAgcmVxdWVzdERPTVVwZGF0ZShjYWxsYmFjayl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5hZnRlcihjYWxsYmFjaylcbiAgfVxuXG4gIHRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lID0gZnVuY3Rpb24oKXt9KXtcbiAgICB0aGlzLnRyYW5zaXRpb25zLmFkZFRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKVxuICB9XG5cbiAgb25DaGFubmVsKGNoYW5uZWwsIGV2ZW50LCBjYil7XG4gICAgY2hhbm5lbC5vbihldmVudCwgZGF0YSA9PiB7XG4gICAgICBsZXQgbGF0ZW5jeSA9IHRoaXMuZ2V0TGF0ZW5jeVNpbSgpXG4gICAgICBpZighbGF0ZW5jeSl7XG4gICAgICAgIGNiKGRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGNiKGRhdGEpLCBsYXRlbmN5KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB3cmFwUHVzaCh2aWV3LCBvcHRzLCBwdXNoKXtcbiAgICBsZXQgbGF0ZW5jeSA9IHRoaXMuZ2V0TGF0ZW5jeVNpbSgpXG4gICAgbGV0IG9sZEpvaW5Db3VudCA9IHZpZXcuam9pbkNvdW50XG4gICAgaWYoIWxhdGVuY3kpe1xuICAgICAgaWYodGhpcy5pc0Nvbm5lY3RlZCgpICYmIG9wdHMudGltZW91dCl7XG4gICAgICAgIHJldHVybiBwdXNoKCkucmVjZWl2ZShcInRpbWVvdXRcIiwgKCkgPT4ge1xuICAgICAgICAgIGlmKHZpZXcuam9pbkNvdW50ID09PSBvbGRKb2luQ291bnQgJiYgIXZpZXcuaXNEZXN0cm95ZWQoKSl7XG4gICAgICAgICAgICB0aGlzLnJlbG9hZFdpdGhKaXR0ZXIodmlldywgKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmxvZyh2aWV3LCBcInRpbWVvdXRcIiwgKCkgPT4gW1wicmVjZWl2ZWQgdGltZW91dCB3aGlsZSBjb21tdW5pY2F0aW5nIHdpdGggc2VydmVyLiBGYWxsaW5nIGJhY2sgdG8gaGFyZCByZWZyZXNoIGZvciByZWNvdmVyeVwiXSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHB1c2goKVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBmYWtlUHVzaCA9IHtcbiAgICAgIHJlY2VpdmVzOiBbXSxcbiAgICAgIHJlY2VpdmUoa2luZCwgY2IpeyB0aGlzLnJlY2VpdmVzLnB1c2goW2tpbmQsIGNiXSkgfVxuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmKHZpZXcuaXNEZXN0cm95ZWQoKSl7IHJldHVybiB9XG4gICAgICBmYWtlUHVzaC5yZWNlaXZlcy5yZWR1Y2UoKGFjYywgW2tpbmQsIGNiXSkgPT4gYWNjLnJlY2VpdmUoa2luZCwgY2IpLCBwdXNoKCkpXG4gICAgfSwgbGF0ZW5jeSlcbiAgICByZXR1cm4gZmFrZVB1c2hcbiAgfVxuXG4gIHJlbG9hZFdpdGhKaXR0ZXIodmlldywgbG9nKXtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIpXG4gICAgdGhpcy5kaXNjb25uZWN0KClcbiAgICBsZXQgbWluTXMgPSB0aGlzLnJlbG9hZEppdHRlck1pblxuICAgIGxldCBtYXhNcyA9IHRoaXMucmVsb2FkSml0dGVyTWF4XG4gICAgbGV0IGFmdGVyTXMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4TXMgLSBtaW5NcyArIDEpKSArIG1pbk1zXG4gICAgbGV0IHRyaWVzID0gQnJvd3Nlci51cGRhdGVMb2NhbCh0aGlzLmxvY2FsU3RvcmFnZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCBDT05TRUNVVElWRV9SRUxPQURTLCAwLCBjb3VudCA9PiBjb3VudCArIDEpXG4gICAgaWYodHJpZXMgPiB0aGlzLm1heFJlbG9hZHMpe1xuICAgICAgYWZ0ZXJNcyA9IHRoaXMuZmFpbHNhZmVKaXR0ZXJcbiAgICB9XG4gICAgdGhpcy5yZWxvYWRXaXRoSml0dGVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIGlmIHZpZXcgaGFzIHJlY292ZXJlZCwgc3VjaCBhcyB0cmFuc3BvcnQgcmVwbGFjZWQsIHRoZW4gY2FuY2VsXG4gICAgICBpZih2aWV3LmlzRGVzdHJveWVkKCkgfHwgdmlldy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIH1cbiAgICAgIHZpZXcuZGVzdHJveSgpXG4gICAgICBsb2cgPyBsb2coKSA6IHRoaXMubG9nKHZpZXcsIFwiam9pblwiLCAoKSA9PiBbYGVuY291bnRlcmVkICR7dHJpZXN9IGNvbnNlY3V0aXZlIHJlbG9hZHNgXSlcbiAgICAgIGlmKHRyaWVzID4gdGhpcy5tYXhSZWxvYWRzKXtcbiAgICAgICAgdGhpcy5sb2codmlldywgXCJqb2luXCIsICgpID0+IFtgZXhjZWVkZWQgJHt0aGlzLm1heFJlbG9hZHN9IGNvbnNlY3V0aXZlIHJlbG9hZHMuIEVudGVyaW5nIGZhaWxzYWZlIG1vZGVgXSlcbiAgICAgIH1cbiAgICAgIGlmKHRoaXMuaGFzUGVuZGluZ0xpbmsoKSl7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHRoaXMucGVuZGluZ0xpbmtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH0sIGFmdGVyTXMpXG4gIH1cblxuICBnZXRIb29rQ2FsbGJhY2tzKG5hbWUpe1xuICAgIHJldHVybiBuYW1lICYmIG5hbWUuc3RhcnRzV2l0aChcIlBob2VuaXguXCIpID8gSG9va3NbbmFtZS5zcGxpdChcIi5cIilbMV1dIDogdGhpcy5ob29rc1tuYW1lXVxuICB9XG5cbiAgaXNVbmxvYWRlZCgpeyByZXR1cm4gdGhpcy51bmxvYWRlZCB9XG5cbiAgaXNDb25uZWN0ZWQoKXsgcmV0dXJuIHRoaXMuc29ja2V0LmlzQ29ubmVjdGVkKCkgfVxuXG4gIGdldEJpbmRpbmdQcmVmaXgoKXsgcmV0dXJuIHRoaXMuYmluZGluZ1ByZWZpeCB9XG5cbiAgYmluZGluZyhraW5kKXsgcmV0dXJuIGAke3RoaXMuZ2V0QmluZGluZ1ByZWZpeCgpfSR7a2luZH1gIH1cblxuICBjaGFubmVsKHRvcGljLCBwYXJhbXMpeyByZXR1cm4gdGhpcy5zb2NrZXQuY2hhbm5lbCh0b3BpYywgcGFyYW1zKSB9XG5cbiAgam9pbkRlYWRWaWV3KCl7XG4gICAgbGV0IGJvZHkgPSBkb2N1bWVudC5ib2R5XG4gICAgaWYoYm9keSAmJiAhdGhpcy5pc1BoeFZpZXcoYm9keSkgJiYgIXRoaXMuaXNQaHhWaWV3KGRvY3VtZW50LmZpcnN0RWxlbWVudENoaWxkKSl7XG4gICAgICBsZXQgdmlldyA9IHRoaXMubmV3Um9vdFZpZXcoYm9keSlcbiAgICAgIHZpZXcuc2V0SHJlZih0aGlzLmdldEhyZWYoKSlcbiAgICAgIHZpZXcuam9pbkRlYWQoKVxuICAgICAgaWYoIXRoaXMubWFpbil7IHRoaXMubWFpbiA9IHZpZXcgfVxuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB2aWV3LmV4ZWNOZXdNb3VudGVkKCkpXG4gICAgfVxuICB9XG5cbiAgam9pblJvb3RWaWV3cygpe1xuICAgIGxldCByb290c0ZvdW5kID0gZmFsc2VcbiAgICBET00uYWxsKGRvY3VtZW50LCBgJHtQSFhfVklFV19TRUxFQ1RPUn06bm90KFske1BIWF9QQVJFTlRfSUR9XSlgLCByb290RWwgPT4ge1xuICAgICAgaWYoIXRoaXMuZ2V0Um9vdEJ5SWQocm9vdEVsLmlkKSl7XG4gICAgICAgIGxldCB2aWV3ID0gdGhpcy5uZXdSb290Vmlldyhyb290RWwpXG4gICAgICAgIHZpZXcuc2V0SHJlZih0aGlzLmdldEhyZWYoKSlcbiAgICAgICAgdmlldy5qb2luKClcbiAgICAgICAgaWYocm9vdEVsLmhhc0F0dHJpYnV0ZShQSFhfTUFJTikpeyB0aGlzLm1haW4gPSB2aWV3IH1cbiAgICAgIH1cbiAgICAgIHJvb3RzRm91bmQgPSB0cnVlXG4gICAgfSlcbiAgICByZXR1cm4gcm9vdHNGb3VuZFxuICB9XG5cbiAgcmVkaXJlY3QodG8sIGZsYXNoKXtcbiAgICB0aGlzLnVubG9hZCgpXG4gICAgQnJvd3Nlci5yZWRpcmVjdCh0bywgZmxhc2gpXG4gIH1cblxuICByZXBsYWNlTWFpbihocmVmLCBmbGFzaCwgY2FsbGJhY2sgPSBudWxsLCBsaW5rUmVmID0gdGhpcy5zZXRQZW5kaW5nTGluayhocmVmKSl7XG4gICAgbGV0IGxpdmVSZWZlcmVyID0gdGhpcy5jdXJyZW50TG9jYXRpb24uaHJlZlxuICAgIHRoaXMub3V0Z29pbmdNYWluRWwgPSB0aGlzLm91dGdvaW5nTWFpbkVsIHx8IHRoaXMubWFpbi5lbFxuICAgIGxldCBuZXdNYWluRWwgPSBET00uY2xvbmVOb2RlKHRoaXMub3V0Z29pbmdNYWluRWwsIFwiXCIpXG4gICAgdGhpcy5tYWluLnNob3dMb2FkZXIodGhpcy5sb2FkZXJUaW1lb3V0KVxuICAgIHRoaXMubWFpbi5kZXN0cm95KClcblxuICAgIHRoaXMubWFpbiA9IHRoaXMubmV3Um9vdFZpZXcobmV3TWFpbkVsLCBmbGFzaCwgbGl2ZVJlZmVyZXIpXG4gICAgdGhpcy5tYWluLnNldFJlZGlyZWN0KGhyZWYpXG4gICAgdGhpcy50cmFuc2l0aW9uUmVtb3ZlcygpXG4gICAgdGhpcy5tYWluLmpvaW4oKGpvaW5Db3VudCwgb25Eb25lKSA9PiB7XG4gICAgICBpZihqb2luQ291bnQgPT09IDEgJiYgdGhpcy5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7XG4gICAgICAgIHRoaXMucmVxdWVzdERPTVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgRE9NLmZpbmRQaHhTdGlja3koZG9jdW1lbnQpLmZvckVhY2goZWwgPT4gbmV3TWFpbkVsLmFwcGVuZENoaWxkKGVsKSlcbiAgICAgICAgICB0aGlzLm91dGdvaW5nTWFpbkVsLnJlcGxhY2VXaXRoKG5ld01haW5FbClcbiAgICAgICAgICB0aGlzLm91dGdvaW5nTWFpbkVsID0gbnVsbFxuICAgICAgICAgIGNhbGxiYWNrICYmIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaylcbiAgICAgICAgICBvbkRvbmUoKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB0cmFuc2l0aW9uUmVtb3ZlcyhlbGVtZW50cyl7XG4gICAgbGV0IHJlbW92ZUF0dHIgPSB0aGlzLmJpbmRpbmcoXCJyZW1vdmVcIilcbiAgICBlbGVtZW50cyA9IGVsZW1lbnRzIHx8IERPTS5hbGwoZG9jdW1lbnQsIGBbJHtyZW1vdmVBdHRyfV1gKVxuICAgIGVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xuICAgICAgdGhpcy5leGVjSlMoZWwsIGVsLmdldEF0dHJpYnV0ZShyZW1vdmVBdHRyKSwgXCJyZW1vdmVcIilcbiAgICB9KVxuICB9XG5cbiAgaXNQaHhWaWV3KGVsKXsgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoUEhYX1NFU1NJT04pICE9PSBudWxsIH1cblxuICBuZXdSb290VmlldyhlbCwgZmxhc2gsIGxpdmVSZWZlcmVyKXtcbiAgICBsZXQgdmlldyA9IG5ldyBWaWV3KGVsLCB0aGlzLCBudWxsLCBmbGFzaCwgbGl2ZVJlZmVyZXIpXG4gICAgdGhpcy5yb290c1t2aWV3LmlkXSA9IHZpZXdcbiAgICByZXR1cm4gdmlld1xuICB9XG5cbiAgb3duZXIoY2hpbGRFbCwgY2FsbGJhY2spe1xuICAgIGxldCB2aWV3ID0gbWF5YmUoY2hpbGRFbC5jbG9zZXN0KFBIWF9WSUVXX1NFTEVDVE9SKSwgZWwgPT4gdGhpcy5nZXRWaWV3QnlFbChlbCkpIHx8IHRoaXMubWFpblxuICAgIGlmKHZpZXcpeyBjYWxsYmFjayh2aWV3KSB9XG4gIH1cblxuICB3aXRoaW5Pd25lcnMoY2hpbGRFbCwgY2FsbGJhY2spe1xuICAgIHRoaXMub3duZXIoY2hpbGRFbCwgdmlldyA9PiBjYWxsYmFjayh2aWV3LCBjaGlsZEVsKSlcbiAgfVxuXG4gIGdldFZpZXdCeUVsKGVsKXtcbiAgICBsZXQgcm9vdElkID0gZWwuZ2V0QXR0cmlidXRlKFBIWF9ST09UX0lEKVxuICAgIHJldHVybiBtYXliZSh0aGlzLmdldFJvb3RCeUlkKHJvb3RJZCksIHJvb3QgPT4gcm9vdC5nZXREZXNjZW5kZW50QnlFbChlbCkpXG4gIH1cblxuICBnZXRSb290QnlJZChpZCl7IHJldHVybiB0aGlzLnJvb3RzW2lkXSB9XG5cbiAgZGVzdHJveUFsbFZpZXdzKCl7XG4gICAgZm9yKGxldCBpZCBpbiB0aGlzLnJvb3RzKXtcbiAgICAgIHRoaXMucm9vdHNbaWRdLmRlc3Ryb3koKVxuICAgICAgZGVsZXRlIHRoaXMucm9vdHNbaWRdXG4gICAgfVxuICAgIHRoaXMubWFpbiA9IG51bGxcbiAgfVxuXG4gIGRlc3Ryb3lWaWV3QnlFbChlbCl7XG4gICAgbGV0IHJvb3QgPSB0aGlzLmdldFJvb3RCeUlkKGVsLmdldEF0dHJpYnV0ZShQSFhfUk9PVF9JRCkpXG4gICAgaWYocm9vdCAmJiByb290LmlkID09PSBlbC5pZCl7XG4gICAgICByb290LmRlc3Ryb3koKVxuICAgICAgZGVsZXRlIHRoaXMucm9vdHNbcm9vdC5pZF1cbiAgICB9IGVsc2UgaWYocm9vdCl7XG4gICAgICByb290LmRlc3Ryb3lEZXNjZW5kZW50KGVsLmlkKVxuICAgIH1cbiAgfVxuXG4gIHNldEFjdGl2ZUVsZW1lbnQodGFyZ2V0KXtcbiAgICBpZih0aGlzLmFjdGl2ZUVsZW1lbnQgPT09IHRhcmdldCl7IHJldHVybiB9XG4gICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gdGFyZ2V0XG4gICAgbGV0IGNhbmNlbCA9ICgpID0+IHtcbiAgICAgIGlmKHRhcmdldCA9PT0gdGhpcy5hY3RpdmVFbGVtZW50KXsgdGhpcy5hY3RpdmVFbGVtZW50ID0gbnVsbCB9XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcylcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcylcbiAgICB9XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGNhbmNlbClcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGNhbmNlbClcbiAgfVxuXG4gIGdldEFjdGl2ZUVsZW1lbnQoKXtcbiAgICBpZihkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KXtcbiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGNhbiBiZSBudWxsIGluIEludGVybmV0IEV4cGxvcmVyIDExXG4gICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5XG4gICAgfVxuICB9XG5cbiAgZHJvcEFjdGl2ZUVsZW1lbnQodmlldyl7XG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICYmIHZpZXcub3duc0VsZW1lbnQodGhpcy5wcmV2QWN0aXZlKSl7XG4gICAgICB0aGlzLnByZXZBY3RpdmUgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgcmVzdG9yZVByZXZpb3VzbHlBY3RpdmVGb2N1cygpe1xuICAgIGlmKHRoaXMucHJldkFjdGl2ZSAmJiB0aGlzLnByZXZBY3RpdmUgIT09IGRvY3VtZW50LmJvZHkpe1xuICAgICAgdGhpcy5wcmV2QWN0aXZlLmZvY3VzKClcbiAgICB9XG4gIH1cblxuICBibHVyQWN0aXZlRWxlbWVudCgpe1xuICAgIHRoaXMucHJldkFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgaWYodGhpcy5wcmV2QWN0aXZlICE9PSBkb2N1bWVudC5ib2R5KXsgdGhpcy5wcmV2QWN0aXZlLmJsdXIoKSB9XG4gIH1cblxuICBiaW5kVG9wTGV2ZWxFdmVudHMoe2RlYWR9ID0ge30pe1xuICAgIGlmKHRoaXMuYm91bmRUb3BMZXZlbEV2ZW50cyl7IHJldHVybiB9XG5cbiAgICB0aGlzLmJvdW5kVG9wTGV2ZWxFdmVudHMgPSB0cnVlXG4gICAgLy8gZW50ZXIgZmFpbHNhZmUgcmVsb2FkIGlmIHNlcnZlciBoYXMgZ29uZSBhd2F5IGludGVudGlvbmFsbHksIHN1Y2ggYXMgXCJkaXNjb25uZWN0XCIgYnJvYWRjYXN0XG4gICAgdGhpcy5zb2NrZXQub25DbG9zZShldmVudCA9PiB7XG4gICAgICAvLyBmYWlsc2FmZSByZWxvYWQgaWYgbm9ybWFsIGNsb3N1cmUgYW5kIHdlIHN0aWxsIGhhdmUgYSBtYWluIExWXG4gICAgICBpZihldmVudCAmJiBldmVudC5jb2RlID09PSAxMDAwICYmIHRoaXMubWFpbil7IHJldHVybiB0aGlzLnJlbG9hZFdpdGhKaXR0ZXIodGhpcy5tYWluKSB9XG4gICAgfSlcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKXsgfSkgLy8gZW5zdXJlIGFsbCBjbGljayBldmVudHMgYnViYmxlIGZvciBtb2JpbGUgU2FmYXJpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlc2hvd1wiLCBlID0+IHtcbiAgICAgIGlmKGUucGVyc2lzdGVkKXsgLy8gcmVsb2FkIHBhZ2UgaWYgYmVpbmcgcmVzdG9yZWQgZnJvbSBiYWNrL2ZvcndhcmQgY2FjaGVcbiAgICAgICAgdGhpcy5nZXRTb2NrZXQoKS5kaXNjb25uZWN0KClcbiAgICAgICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiB3aW5kb3cubG9jYXRpb24uaHJlZiwga2luZDogXCJyZWRpcmVjdFwifSlcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICB9XG4gICAgfSwgdHJ1ZSlcbiAgICBpZighZGVhZCl7IHRoaXMuYmluZE5hdigpIH1cbiAgICB0aGlzLmJpbmRDbGlja3MoKVxuICAgIGlmKCFkZWFkKXsgdGhpcy5iaW5kRm9ybXMoKSB9XG4gICAgdGhpcy5iaW5kKHtrZXl1cDogXCJrZXl1cFwiLCBrZXlkb3duOiBcImtleWRvd25cIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgcGh4RXZlbnQsIGV2ZW50VGFyZ2V0KSA9PiB7XG4gICAgICBsZXQgbWF0Y2hLZXkgPSB0YXJnZXRFbC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFBIWF9LRVkpKVxuICAgICAgbGV0IHByZXNzZWRLZXkgPSBlLmtleSAmJiBlLmtleS50b0xvd2VyQ2FzZSgpIC8vIGNocm9tZSBjbGlja2VkIGF1dG9jb21wbGV0ZXMgc2VuZCBhIGtleWRvd24gd2l0aG91dCBrZXlcbiAgICAgIGlmKG1hdGNoS2V5ICYmIG1hdGNoS2V5LnRvTG93ZXJDYXNlKCkgIT09IHByZXNzZWRLZXkpeyByZXR1cm4gfVxuXG4gICAgICBsZXQgZGF0YSA9IHtrZXk6IGUua2V5LCAuLi50aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbCl9XG4gICAgICBKUy5leGVjKHR5cGUsIHBoeEV2ZW50LCB2aWV3LCB0YXJnZXRFbCwgW1wicHVzaFwiLCB7ZGF0YX1dKVxuICAgIH0pXG4gICAgdGhpcy5iaW5kKHtibHVyOiBcImZvY3Vzb3V0XCIsIGZvY3VzOiBcImZvY3VzaW5cIn0sIChlLCB0eXBlLCB2aWV3LCB0YXJnZXRFbCwgcGh4RXZlbnQsIGV2ZW50VGFyZ2V0KSA9PiB7XG4gICAgICBpZighZXZlbnRUYXJnZXQpe1xuICAgICAgICBsZXQgZGF0YSA9IHtrZXk6IGUua2V5LCAuLi50aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbCl9XG4gICAgICAgIEpTLmV4ZWModHlwZSwgcGh4RXZlbnQsIHZpZXcsIHRhcmdldEVsLCBbXCJwdXNoXCIsIHtkYXRhfV0pXG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLmJpbmQoe2JsdXI6IFwiYmx1clwiLCBmb2N1czogXCJmb2N1c1wifSwgKGUsIHR5cGUsIHZpZXcsIHRhcmdldEVsLCB0YXJnZXRDdHgsIHBoeEV2ZW50LCBwaHhUYXJnZXQpID0+IHtcbiAgICAgIC8vIGJsdXIgYW5kIGZvY3VzIGFyZSB0cmlnZ2VyZWQgb24gZG9jdW1lbnQgYW5kIHdpbmRvdy4gRGlzY2FyZCBvbmUgdG8gYXZvaWQgZHVwc1xuICAgICAgaWYocGh4VGFyZ2V0ID09PSBcIndpbmRvd1wiKXtcbiAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmV2ZW50TWV0YSh0eXBlLCBlLCB0YXJnZXRFbClcbiAgICAgICAgSlMuZXhlYyh0eXBlLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0RWwsIFtcInB1c2hcIiwge2RhdGF9XSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIGUgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBsZXQgZHJvcFRhcmdldElkID0gbWF5YmUoY2xvc2VzdFBoeEJpbmRpbmcoZS50YXJnZXQsIHRoaXMuYmluZGluZyhQSFhfRFJPUF9UQVJHRVQpKSwgdHJ1ZVRhcmdldCA9PiB7XG4gICAgICAgIHJldHVybiB0cnVlVGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoUEhYX0RST1BfVEFSR0VUKSlcbiAgICAgIH0pXG4gICAgICBsZXQgZHJvcFRhcmdldCA9IGRyb3BUYXJnZXRJZCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkcm9wVGFyZ2V0SWQpXG4gICAgICBsZXQgZmlsZXMgPSBBcnJheS5mcm9tKGUuZGF0YVRyYW5zZmVyLmZpbGVzIHx8IFtdKVxuICAgICAgaWYoIWRyb3BUYXJnZXQgfHwgZHJvcFRhcmdldC5kaXNhYmxlZCB8fCBmaWxlcy5sZW5ndGggPT09IDAgfHwgIShkcm9wVGFyZ2V0LmZpbGVzIGluc3RhbmNlb2YgRmlsZUxpc3QpKXsgcmV0dXJuIH1cblxuICAgICAgTGl2ZVVwbG9hZGVyLnRyYWNrRmlsZXMoZHJvcFRhcmdldCwgZmlsZXMsIGUuZGF0YVRyYW5zZmVyKVxuICAgICAgZHJvcFRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlfSkpXG4gICAgfSlcbiAgICB0aGlzLm9uKFBIWF9UUkFDS19VUExPQURTLCBlID0+IHtcbiAgICAgIGxldCB1cGxvYWRUYXJnZXQgPSBlLnRhcmdldFxuICAgICAgaWYoIURPTS5pc1VwbG9hZElucHV0KHVwbG9hZFRhcmdldCkpeyByZXR1cm4gfVxuICAgICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRldGFpbC5maWxlcyB8fCBbXSkuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIEZpbGUgfHwgZiBpbnN0YW5jZW9mIEJsb2IpXG4gICAgICBMaXZlVXBsb2FkZXIudHJhY2tGaWxlcyh1cGxvYWRUYXJnZXQsIGZpbGVzKVxuICAgICAgdXBsb2FkVGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIiwge2J1YmJsZXM6IHRydWV9KSlcbiAgICB9KVxuICB9XG5cbiAgZXZlbnRNZXRhKGV2ZW50TmFtZSwgZSwgdGFyZ2V0RWwpe1xuICAgIGxldCBjYWxsYmFjayA9IHRoaXMubWV0YWRhdGFDYWxsYmFja3NbZXZlbnROYW1lXVxuICAgIHJldHVybiBjYWxsYmFjayA/IGNhbGxiYWNrKGUsIHRhcmdldEVsKSA6IHt9XG4gIH1cblxuICBzZXRQZW5kaW5nTGluayhocmVmKXtcbiAgICB0aGlzLmxpbmtSZWYrK1xuICAgIHRoaXMucGVuZGluZ0xpbmsgPSBocmVmXG4gICAgcmV0dXJuIHRoaXMubGlua1JlZlxuICB9XG5cbiAgY29tbWl0UGVuZGluZ0xpbmsobGlua1JlZil7XG4gICAgaWYodGhpcy5saW5rUmVmICE9PSBsaW5rUmVmKXtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhyZWYgPSB0aGlzLnBlbmRpbmdMaW5rXG4gICAgICB0aGlzLnBlbmRpbmdMaW5rID0gbnVsbFxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cblxuICBnZXRIcmVmKCl7IHJldHVybiB0aGlzLmhyZWYgfVxuXG4gIGhhc1BlbmRpbmdMaW5rKCl7IHJldHVybiAhIXRoaXMucGVuZGluZ0xpbmsgfVxuXG4gIGJpbmQoZXZlbnRzLCBjYWxsYmFjayl7XG4gICAgZm9yKGxldCBldmVudCBpbiBldmVudHMpe1xuICAgICAgbGV0IGJyb3dzZXJFdmVudE5hbWUgPSBldmVudHNbZXZlbnRdXG5cbiAgICAgIHRoaXMub24oYnJvd3NlckV2ZW50TmFtZSwgZSA9PiB7XG4gICAgICAgIGxldCBiaW5kaW5nID0gdGhpcy5iaW5kaW5nKGV2ZW50KVxuICAgICAgICBsZXQgd2luZG93QmluZGluZyA9IHRoaXMuYmluZGluZyhgd2luZG93LSR7ZXZlbnR9YClcbiAgICAgICAgbGV0IHRhcmdldFBoeEV2ZW50ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlICYmIGUudGFyZ2V0LmdldEF0dHJpYnV0ZShiaW5kaW5nKVxuICAgICAgICBpZih0YXJnZXRQaHhFdmVudCl7XG4gICAgICAgICAgdGhpcy5kZWJvdW5jZShlLnRhcmdldCwgZSwgYnJvd3NlckV2ZW50TmFtZSwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgICAgICBjYWxsYmFjayhlLCBldmVudCwgdmlldywgZS50YXJnZXQsIHRhcmdldFBoeEV2ZW50LCBudWxsKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHt3aW5kb3dCaW5kaW5nfV1gLCBlbCA9PiB7XG4gICAgICAgICAgICBsZXQgcGh4RXZlbnQgPSBlbC5nZXRBdHRyaWJ1dGUod2luZG93QmluZGluZylcbiAgICAgICAgICAgIHRoaXMuZGVib3VuY2UoZWwsIGUsIGJyb3dzZXJFdmVudE5hbWUsICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZWwsIHZpZXcgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGUsIGV2ZW50LCB2aWV3LCBlbCwgcGh4RXZlbnQsIFwid2luZG93XCIpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYmluZENsaWNrcygpe1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB0aGlzLmNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gZS50YXJnZXQpXG4gICAgdGhpcy5iaW5kQ2xpY2soXCJjbGlja1wiLCBcImNsaWNrXCIsIGZhbHNlKVxuICAgIHRoaXMuYmluZENsaWNrKFwibW91c2Vkb3duXCIsIFwiY2FwdHVyZS1jbGlja1wiLCB0cnVlKVxuICB9XG5cbiAgYmluZENsaWNrKGV2ZW50TmFtZSwgYmluZGluZ05hbWUsIGNhcHR1cmUpe1xuICAgIGxldCBjbGljayA9IHRoaXMuYmluZGluZyhiaW5kaW5nTmFtZSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGUgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IG51bGxcbiAgICAgIGlmKGNhcHR1cmUpe1xuICAgICAgICB0YXJnZXQgPSBlLnRhcmdldC5tYXRjaGVzKGBbJHtjbGlja31dYCkgPyBlLnRhcmdldCA6IGUudGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoYFske2NsaWNrfV1gKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGNsaWNrU3RhcnRlZEF0VGFyZ2V0ID0gdGhpcy5jbGlja1N0YXJ0ZWRBdFRhcmdldCB8fCBlLnRhcmdldFxuICAgICAgICB0YXJnZXQgPSBjbG9zZXN0UGh4QmluZGluZyhjbGlja1N0YXJ0ZWRBdFRhcmdldCwgY2xpY2spXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hDbGlja0F3YXkoZSwgY2xpY2tTdGFydGVkQXRUYXJnZXQpXG4gICAgICAgIHRoaXMuY2xpY2tTdGFydGVkQXRUYXJnZXQgPSBudWxsXG4gICAgICB9XG4gICAgICBsZXQgcGh4RXZlbnQgPSB0YXJnZXQgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZShjbGljaylcbiAgICAgIGlmKCFwaHhFdmVudCl7XG4gICAgICAgIGlmKCFjYXB0dXJlICYmIERPTS5pc05ld1BhZ2VDbGljayhlLCB3aW5kb3cubG9jYXRpb24pKXsgdGhpcy51bmxvYWQoKSB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZih0YXJnZXQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIpeyBlLnByZXZlbnREZWZhdWx0KCkgfVxuXG4gICAgICAvLyBub29wIGlmIHdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGF3YWl0aW5nIGFuIGFjayBmb3IgdGhpcyBlbCBhbHJlYWR5XG4gICAgICBpZih0YXJnZXQuaGFzQXR0cmlidXRlKFBIWF9SRUYpKXsgcmV0dXJuIH1cblxuICAgICAgdGhpcy5kZWJvdW5jZSh0YXJnZXQsIGUsIFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLndpdGhpbk93bmVycyh0YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIEpTLmV4ZWMoXCJjbGlja1wiLCBwaHhFdmVudCwgdmlldywgdGFyZ2V0LCBbXCJwdXNoXCIsIHtkYXRhOiB0aGlzLmV2ZW50TWV0YShcImNsaWNrXCIsIGUsIHRhcmdldCl9XSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSwgY2FwdHVyZSlcbiAgfVxuXG4gIGRpc3BhdGNoQ2xpY2tBd2F5KGUsIGNsaWNrU3RhcnRlZEF0KXtcbiAgICBsZXQgcGh4Q2xpY2tBd2F5ID0gdGhpcy5iaW5kaW5nKFwiY2xpY2stYXdheVwiKVxuICAgIERPTS5hbGwoZG9jdW1lbnQsIGBbJHtwaHhDbGlja0F3YXl9XWAsIGVsID0+IHtcbiAgICAgIGlmKCEoZWwuaXNTYW1lTm9kZShjbGlja1N0YXJ0ZWRBdCkgfHwgZWwuY29udGFpbnMoY2xpY2tTdGFydGVkQXQpKSl7XG4gICAgICAgIHRoaXMud2l0aGluT3duZXJzKGUudGFyZ2V0LCB2aWV3ID0+IHtcbiAgICAgICAgICBsZXQgcGh4RXZlbnQgPSBlbC5nZXRBdHRyaWJ1dGUocGh4Q2xpY2tBd2F5KVxuICAgICAgICAgIGlmKEpTLmlzVmlzaWJsZShlbCkpe1xuICAgICAgICAgICAgSlMuZXhlYyhcImNsaWNrXCIsIHBoeEV2ZW50LCB2aWV3LCBlbCwgW1wicHVzaFwiLCB7ZGF0YTogdGhpcy5ldmVudE1ldGEoXCJjbGlja1wiLCBlLCBlLnRhcmdldCl9XSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGJpbmROYXYoKXtcbiAgICBpZighQnJvd3Nlci5jYW5QdXNoU3RhdGUoKSl7IHJldHVybiB9XG4gICAgaWYoaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbil7IGhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSBcIm1hbnVhbFwiIH1cbiAgICBsZXQgc2Nyb2xsVGltZXIgPSBudWxsXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgX2UgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbFRpbWVyKVxuICAgICAgc2Nyb2xsVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgQnJvd3Nlci51cGRhdGVDdXJyZW50U3RhdGUoc3RhdGUgPT4gT2JqZWN0LmFzc2lnbihzdGF0ZSwge3Njcm9sbDogd2luZG93LnNjcm9sbFl9KSlcbiAgICAgIH0sIDEwMClcbiAgICB9KVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgZXZlbnQgPT4ge1xuICAgICAgaWYoIXRoaXMucmVnaXN0ZXJOZXdMb2NhdGlvbih3aW5kb3cubG9jYXRpb24pKXsgcmV0dXJuIH1cbiAgICAgIGxldCB7dHlwZSwgaWQsIHJvb3QsIHNjcm9sbH0gPSBldmVudC5zdGF0ZSB8fCB7fVxuICAgICAgbGV0IGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZlxuXG4gICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBpZih0aGlzLm1haW4uaXNDb25uZWN0ZWQoKSAmJiAodHlwZSA9PT0gXCJwYXRjaFwiICYmIGlkID09PSB0aGlzLm1haW4uaWQpKXtcbiAgICAgICAgICB0aGlzLm1haW4ucHVzaExpbmtQYXRjaChocmVmLCBudWxsLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1heWJlU2Nyb2xsKHNjcm9sbClcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucmVwbGFjZU1haW4oaHJlZiwgbnVsbCwgKCkgPT4ge1xuICAgICAgICAgICAgaWYocm9vdCl7IHRoaXMucmVwbGFjZVJvb3RIaXN0b3J5KCkgfVxuICAgICAgICAgICAgdGhpcy5tYXliZVNjcm9sbChzY3JvbGwpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBmYWxzZSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4ge1xuICAgICAgbGV0IHRhcmdldCA9IGNsb3Nlc3RQaHhCaW5kaW5nKGUudGFyZ2V0LCBQSFhfTElWRV9MSU5LKVxuICAgICAgbGV0IHR5cGUgPSB0YXJnZXQgJiYgdGFyZ2V0LmdldEF0dHJpYnV0ZShQSFhfTElWRV9MSU5LKVxuICAgICAgaWYoIXR5cGUgfHwgIXRoaXMuaXNDb25uZWN0ZWQoKSB8fCAhdGhpcy5tYWluIHx8IERPTS53YW50c05ld1RhYihlKSl7IHJldHVybiB9XG5cbiAgICAgIGxldCBocmVmID0gdGFyZ2V0LmhyZWZcbiAgICAgIGxldCBsaW5rU3RhdGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFBIWF9MSU5LX1NUQVRFKVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIC8vIGRvIG5vdCBidWJibGUgY2xpY2sgdG8gcmVndWxhciBwaHgtY2xpY2sgYmluZGluZ3NcbiAgICAgIGlmKHRoaXMucGVuZGluZ0xpbmsgPT09IGhyZWYpeyByZXR1cm4gfVxuXG4gICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4ge1xuICAgICAgICBpZih0eXBlID09PSBcInBhdGNoXCIpe1xuICAgICAgICAgIHRoaXMucHVzaEhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIHRhcmdldClcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwicmVkaXJlY3RcIil7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5UmVkaXJlY3QoaHJlZiwgbGlua1N0YXRlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgJHtQSFhfTElWRV9MSU5LfSB0byBiZSBcInBhdGNoXCIgb3IgXCJyZWRpcmVjdFwiLCBnb3Q6ICR7dHlwZX1gKVxuICAgICAgICB9XG4gICAgICAgIGxldCBwaHhDbGljayA9IHRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwiY2xpY2tcIikpXG4gICAgICAgIGlmKHBoeENsaWNrKXtcbiAgICAgICAgICB0aGlzLnJlcXVlc3RET01VcGRhdGUoKCkgPT4gdGhpcy5leGVjSlModGFyZ2V0LCBwaHhDbGljaywgXCJjbGlja1wiKSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LCBmYWxzZSlcbiAgfVxuXG4gIG1heWJlU2Nyb2xsKHNjcm9sbCkge1xuICAgIGlmKHR5cGVvZihzY3JvbGwpID09PSBcIm51bWJlclwiKXtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBzY3JvbGwpXG4gICAgICB9KSAvLyB0aGUgYm9keSBuZWVkcyB0byByZW5kZXIgYmVmb3JlIHdlIHNjcm9sbC5cbiAgICB9XG4gIH1cblxuICBkaXNwYXRjaEV2ZW50KGV2ZW50LCBwYXlsb2FkID0ge30pe1xuICAgIERPTS5kaXNwYXRjaEV2ZW50KHdpbmRvdywgYHBoeDoke2V2ZW50fWAsIHtkZXRhaWw6IHBheWxvYWR9KVxuICB9XG5cbiAgZGlzcGF0Y2hFdmVudHMoZXZlbnRzKXtcbiAgICBldmVudHMuZm9yRWFjaCgoW2V2ZW50LCBwYXlsb2FkXSkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50LCBwYXlsb2FkKSlcbiAgfVxuXG4gIHdpdGhQYWdlTG9hZGluZyhpbmZvLCBjYWxsYmFjayl7XG4gICAgRE9NLmRpc3BhdGNoRXZlbnQod2luZG93LCBcInBoeDpwYWdlLWxvYWRpbmctc3RhcnRcIiwge2RldGFpbDogaW5mb30pXG4gICAgbGV0IGRvbmUgPSAoKSA9PiBET00uZGlzcGF0Y2hFdmVudCh3aW5kb3csIFwicGh4OnBhZ2UtbG9hZGluZy1zdG9wXCIsIHtkZXRhaWw6IGluZm99KVxuICAgIHJldHVybiBjYWxsYmFjayA/IGNhbGxiYWNrKGRvbmUpIDogZG9uZVxuICB9XG5cbiAgcHVzaEhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIHRhcmdldEVsKXtcbiAgICBpZighdGhpcy5pc0Nvbm5lY3RlZCgpKXsgcmV0dXJuIEJyb3dzZXIucmVkaXJlY3QoaHJlZikgfVxuXG4gICAgdGhpcy53aXRoUGFnZUxvYWRpbmcoe3RvOiBocmVmLCBraW5kOiBcInBhdGNoXCJ9LCBkb25lID0+IHtcbiAgICAgIHRoaXMubWFpbi5wdXNoTGlua1BhdGNoKGhyZWYsIHRhcmdldEVsLCBsaW5rUmVmID0+IHtcbiAgICAgICAgdGhpcy5oaXN0b3J5UGF0Y2goaHJlZiwgbGlua1N0YXRlLCBsaW5rUmVmKVxuICAgICAgICBkb25lKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGhpc3RvcnlQYXRjaChocmVmLCBsaW5rU3RhdGUsIGxpbmtSZWYgPSB0aGlzLnNldFBlbmRpbmdMaW5rKGhyZWYpKXtcbiAgICBpZighdGhpcy5jb21taXRQZW5kaW5nTGluayhsaW5rUmVmKSl7IHJldHVybiB9XG5cbiAgICBCcm93c2VyLnB1c2hTdGF0ZShsaW5rU3RhdGUsIHt0eXBlOiBcInBhdGNoXCIsIGlkOiB0aGlzLm1haW4uaWR9LCBocmVmKVxuICAgIHRoaXMucmVnaXN0ZXJOZXdMb2NhdGlvbih3aW5kb3cubG9jYXRpb24pXG4gIH1cblxuICBoaXN0b3J5UmVkaXJlY3QoaHJlZiwgbGlua1N0YXRlLCBmbGFzaCl7XG4gICAgLy8gY29udmVydCB0byBmdWxsIGhyZWYgaWYgb25seSBwYXRoIHByZWZpeFxuICAgIGlmKCF0aGlzLmlzQ29ubmVjdGVkKCkpeyByZXR1cm4gQnJvd3Nlci5yZWRpcmVjdChocmVmLCBmbGFzaCkgfVxuICAgIGlmKC9eXFwvJHxeXFwvW15cXC9dKy4qJC8udGVzdChocmVmKSl7XG4gICAgICBsZXQge3Byb3RvY29sLCBob3N0fSA9IHdpbmRvdy5sb2NhdGlvblxuICAgICAgaHJlZiA9IGAke3Byb3RvY29sfS8vJHtob3N0fSR7aHJlZn1gXG4gICAgfVxuICAgIGxldCBzY3JvbGwgPSB3aW5kb3cuc2Nyb2xsWVxuICAgIHRoaXMud2l0aFBhZ2VMb2FkaW5nKHt0bzogaHJlZiwga2luZDogXCJyZWRpcmVjdFwifSwgZG9uZSA9PiB7XG4gICAgICB0aGlzLnJlcGxhY2VNYWluKGhyZWYsIGZsYXNoLCAoKSA9PiB7XG4gICAgICAgIEJyb3dzZXIucHVzaFN0YXRlKGxpbmtTdGF0ZSwge3R5cGU6IFwicmVkaXJlY3RcIiwgaWQ6IHRoaXMubWFpbi5pZCwgc2Nyb2xsOiBzY3JvbGx9LCBocmVmKVxuICAgICAgICB0aGlzLnJlZ2lzdGVyTmV3TG9jYXRpb24od2luZG93LmxvY2F0aW9uKVxuICAgICAgICBkb25lKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHJlcGxhY2VSb290SGlzdG9yeSgpe1xuICAgIEJyb3dzZXIucHVzaFN0YXRlKFwicmVwbGFjZVwiLCB7cm9vdDogdHJ1ZSwgdHlwZTogXCJwYXRjaFwiLCBpZDogdGhpcy5tYWluLmlkfSlcbiAgfVxuXG4gIHJlZ2lzdGVyTmV3TG9jYXRpb24obmV3TG9jYXRpb24pe1xuICAgIGxldCB7cGF0aG5hbWUsIHNlYXJjaH0gPSB0aGlzLmN1cnJlbnRMb2NhdGlvblxuICAgIGlmKHBhdGhuYW1lICsgc2VhcmNoID09PSBuZXdMb2NhdGlvbi5wYXRobmFtZSArIG5ld0xvY2F0aW9uLnNlYXJjaCl7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50TG9jYXRpb24gPSBjbG9uZShuZXdMb2NhdGlvbilcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgYmluZEZvcm1zKCl7XG4gICAgbGV0IGl0ZXJhdGlvbnMgPSAwXG4gICAgbGV0IGV4dGVybmFsRm9ybVN1Ym1pdHRlZCA9IGZhbHNlXG5cbiAgICAvLyBkaXNhYmxlIGZvcm1zIG9uIHN1Ym1pdCB0aGF0IHRyYWNrIHBoeC1jaGFuZ2UgYnV0IHBlcmZvcm0gZXh0ZXJuYWwgc3VibWl0XG4gICAgdGhpcy5vbihcInN1Ym1pdFwiLCBlID0+IHtcbiAgICAgIGxldCBwaHhTdWJtaXQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUodGhpcy5iaW5kaW5nKFwic3VibWl0XCIpKVxuICAgICAgbGV0IHBoeENoYW5nZSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIikpXG4gICAgICBpZighZXh0ZXJuYWxGb3JtU3VibWl0dGVkICYmIHBoeENoYW5nZSAmJiAhcGh4U3VibWl0KXtcbiAgICAgICAgZXh0ZXJuYWxGb3JtU3VibWl0dGVkID0gdHJ1ZVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgdGhpcy53aXRoaW5Pd25lcnMoZS50YXJnZXQsIHZpZXcgPT4ge1xuICAgICAgICAgIHZpZXcuZGlzYWJsZUZvcm0oZS50YXJnZXQpXG4gICAgICAgICAgLy8gc2FmYXJpIG5lZWRzIG5leHQgdGlja1xuICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgaWYoRE9NLmlzVW5sb2FkYWJsZUZvcm1TdWJtaXQoZSkpeyB0aGlzLnVubG9hZCgpIH1cbiAgICAgICAgICAgIGUudGFyZ2V0LnN1Ym1pdCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LCB0cnVlKVxuXG4gICAgdGhpcy5vbihcInN1Ym1pdFwiLCBlID0+IHtcbiAgICAgIGxldCBwaHhFdmVudCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSh0aGlzLmJpbmRpbmcoXCJzdWJtaXRcIikpXG4gICAgICBpZighcGh4RXZlbnQpe1xuICAgICAgICBpZihET00uaXNVbmxvYWRhYmxlRm9ybVN1Ym1pdChlKSl7IHRoaXMudW5sb2FkKCkgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgZS50YXJnZXQuZGlzYWJsZWQgPSB0cnVlXG4gICAgICB0aGlzLndpdGhpbk93bmVycyhlLnRhcmdldCwgdmlldyA9PiB7XG4gICAgICAgIEpTLmV4ZWMoXCJzdWJtaXRcIiwgcGh4RXZlbnQsIHZpZXcsIGUudGFyZ2V0LCBbXCJwdXNoXCIsIHtzdWJtaXR0ZXI6IGUuc3VibWl0dGVyfV0pXG4gICAgICB9KVxuICAgIH0sIGZhbHNlKVxuXG4gICAgZm9yKGxldCB0eXBlIG9mIFtcImNoYW5nZVwiLCBcImlucHV0XCJdKXtcbiAgICAgIHRoaXMub24odHlwZSwgZSA9PiB7XG4gICAgICAgIGxldCBwaHhDaGFuZ2UgPSB0aGlzLmJpbmRpbmcoXCJjaGFuZ2VcIilcbiAgICAgICAgbGV0IGlucHV0ID0gZS50YXJnZXRcbiAgICAgICAgbGV0IGlucHV0RXZlbnQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUocGh4Q2hhbmdlKVxuICAgICAgICBsZXQgZm9ybUV2ZW50ID0gaW5wdXQuZm9ybSAmJiBpbnB1dC5mb3JtLmdldEF0dHJpYnV0ZShwaHhDaGFuZ2UpXG4gICAgICAgIGxldCBwaHhFdmVudCA9IGlucHV0RXZlbnQgfHwgZm9ybUV2ZW50XG4gICAgICAgIGlmKCFwaHhFdmVudCl7IHJldHVybiB9XG4gICAgICAgIGlmKGlucHV0LnR5cGUgPT09IFwibnVtYmVyXCIgJiYgaW5wdXQudmFsaWRpdHkgJiYgaW5wdXQudmFsaWRpdHkuYmFkSW5wdXQpeyByZXR1cm4gfVxuXG4gICAgICAgIGxldCBkaXNwYXRjaGVyID0gaW5wdXRFdmVudCA/IGlucHV0IDogaW5wdXQuZm9ybVxuICAgICAgICBsZXQgY3VycmVudEl0ZXJhdGlvbnMgPSBpdGVyYXRpb25zXG4gICAgICAgIGl0ZXJhdGlvbnMrK1xuICAgICAgICBsZXQge2F0OiBhdCwgdHlwZTogbGFzdFR5cGV9ID0gRE9NLnByaXZhdGUoaW5wdXQsIFwicHJldi1pdGVyYXRpb25cIikgfHwge31cbiAgICAgICAgLy8gZGV0ZWN0IGR1cCBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgZGlzcGF0Y2ggYm90aCBcImlucHV0XCIgYW5kIFwiY2hhbmdlXCJcbiAgICAgICAgaWYoYXQgPT09IGN1cnJlbnRJdGVyYXRpb25zIC0gMSAmJiB0eXBlICE9PSBsYXN0VHlwZSl7IHJldHVybiB9XG5cbiAgICAgICAgRE9NLnB1dFByaXZhdGUoaW5wdXQsIFwicHJldi1pdGVyYXRpb25cIiwge2F0OiBjdXJyZW50SXRlcmF0aW9ucywgdHlwZTogdHlwZX0pXG5cbiAgICAgICAgdGhpcy5kZWJvdW5jZShpbnB1dCwgZSwgdHlwZSwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMud2l0aGluT3duZXJzKGRpc3BhdGNoZXIsIHZpZXcgPT4ge1xuICAgICAgICAgICAgRE9NLnB1dFByaXZhdGUoaW5wdXQsIFBIWF9IQVNfRk9DVVNFRCwgdHJ1ZSlcbiAgICAgICAgICAgIGlmKCFET00uaXNUZXh0dWFsSW5wdXQoaW5wdXQpKXtcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVFbGVtZW50KGlucHV0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSlMuZXhlYyhcImNoYW5nZVwiLCBwaHhFdmVudCwgdmlldywgaW5wdXQsIFtcInB1c2hcIiwge190YXJnZXQ6IGUudGFyZ2V0Lm5hbWUsIGRpc3BhdGNoZXI6IGRpc3BhdGNoZXJ9XSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSwgZmFsc2UpXG4gICAgfVxuICAgIHRoaXMub24oXCJyZXNldFwiLCAoZSkgPT4ge1xuICAgICAgbGV0IGZvcm0gPSBlLnRhcmdldFxuICAgICAgRE9NLnJlc2V0Rm9ybShmb3JtLCB0aGlzLmJpbmRpbmcoUEhYX0ZFRURCQUNLX0ZPUikpXG4gICAgICBsZXQgaW5wdXQgPSBBcnJheS5mcm9tKGZvcm0uZWxlbWVudHMpLmZpbmQoZWwgPT4gZWwudHlwZSA9PT0gXCJyZXNldFwiKVxuICAgICAgLy8gd2FpdCB1bnRpbCBuZXh0IHRpY2sgdG8gZ2V0IHVwZGF0ZWQgaW5wdXQgdmFsdWVcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiBmYWxzZX0pKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgZGVib3VuY2UoZWwsIGV2ZW50LCBldmVudFR5cGUsIGNhbGxiYWNrKXtcbiAgICBpZihldmVudFR5cGUgPT09IFwiYmx1clwiIHx8IGV2ZW50VHlwZSA9PT0gXCJmb2N1c291dFwiKXsgcmV0dXJuIGNhbGxiYWNrKCkgfVxuXG4gICAgbGV0IHBoeERlYm91bmNlID0gdGhpcy5iaW5kaW5nKFBIWF9ERUJPVU5DRSlcbiAgICBsZXQgcGh4VGhyb3R0bGUgPSB0aGlzLmJpbmRpbmcoUEhYX1RIUk9UVExFKVxuICAgIGxldCBkZWZhdWx0RGVib3VuY2UgPSB0aGlzLmRlZmF1bHRzLmRlYm91bmNlLnRvU3RyaW5nKClcbiAgICBsZXQgZGVmYXVsdFRocm90dGxlID0gdGhpcy5kZWZhdWx0cy50aHJvdHRsZS50b1N0cmluZygpXG5cbiAgICB0aGlzLndpdGhpbk93bmVycyhlbCwgdmlldyA9PiB7XG4gICAgICBsZXQgYXN5bmNGaWx0ZXIgPSAoKSA9PiAhdmlldy5pc0Rlc3Ryb3llZCgpICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnMoZWwpXG4gICAgICBET00uZGVib3VuY2UoZWwsIGV2ZW50LCBwaHhEZWJvdW5jZSwgZGVmYXVsdERlYm91bmNlLCBwaHhUaHJvdHRsZSwgZGVmYXVsdFRocm90dGxlLCBhc3luY0ZpbHRlciwgKCkgPT4ge1xuICAgICAgICBjYWxsYmFjaygpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBzaWxlbmNlRXZlbnRzKGNhbGxiYWNrKXtcbiAgICB0aGlzLnNpbGVuY2VkID0gdHJ1ZVxuICAgIGNhbGxiYWNrKClcbiAgICB0aGlzLnNpbGVuY2VkID0gZmFsc2VcbiAgfVxuXG4gIG9uKGV2ZW50LCBjYWxsYmFjayl7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGUgPT4ge1xuICAgICAgaWYoIXRoaXMuc2lsZW5jZWQpeyBjYWxsYmFjayhlKSB9XG4gICAgfSlcbiAgfVxufVxuXG5jbGFzcyBUcmFuc2l0aW9uU2V0IHtcbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLnRyYW5zaXRpb25zID0gbmV3IFNldCgpXG4gICAgdGhpcy5wZW5kaW5nT3BzID0gW11cbiAgfVxuXG4gIHJlc2V0KCl7XG4gICAgdGhpcy50cmFuc2l0aW9ucy5mb3JFYWNoKHRpbWVyID0+IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICAgIHRoaXMudHJhbnNpdGlvbnMuZGVsZXRlKHRpbWVyKVxuICAgIH0pXG4gICAgdGhpcy5mbHVzaFBlbmRpbmdPcHMoKVxuICB9XG5cbiAgYWZ0ZXIoY2FsbGJhY2spe1xuICAgIGlmKHRoaXMuc2l6ZSgpID09PSAwKXtcbiAgICAgIGNhbGxiYWNrKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wdXNoUGVuZGluZ09wKGNhbGxiYWNrKVxuICAgIH1cbiAgfVxuXG4gIGFkZFRyYW5zaXRpb24odGltZSwgb25TdGFydCwgb25Eb25lKXtcbiAgICBvblN0YXJ0KClcbiAgICBsZXQgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJhbnNpdGlvbnMuZGVsZXRlKHRpbWVyKVxuICAgICAgb25Eb25lKClcbiAgICAgIHRoaXMuZmx1c2hQZW5kaW5nT3BzKClcbiAgICB9LCB0aW1lKVxuICAgIHRoaXMudHJhbnNpdGlvbnMuYWRkKHRpbWVyKVxuICB9XG5cbiAgcHVzaFBlbmRpbmdPcChvcCl7IHRoaXMucGVuZGluZ09wcy5wdXNoKG9wKSB9XG5cbiAgc2l6ZSgpeyByZXR1cm4gdGhpcy50cmFuc2l0aW9ucy5zaXplIH1cblxuICBmbHVzaFBlbmRpbmdPcHMoKXtcbiAgICBpZih0aGlzLnNpemUoKSA+IDApeyByZXR1cm4gfVxuICAgIGxldCBvcCA9IHRoaXMucGVuZGluZ09wcy5zaGlmdCgpXG4gICAgaWYob3Ape1xuICAgICAgb3AoKVxuICAgICAgdGhpcy5mbHVzaFBlbmRpbmdPcHMoKVxuICAgIH1cbiAgfVxufVxuIiwgIi8vIElmIHlvdSB3YW50IHRvIHVzZSBQaG9lbml4IGNoYW5uZWxzLCBydW4gYG1peCBoZWxwIHBoeC5nZW4uY2hhbm5lbGBcbi8vIHRvIGdldCBzdGFydGVkIGFuZCB0aGVuIHVuY29tbWVudCB0aGUgbGluZSBiZWxvdy5cbi8vIGltcG9ydCBcIi4vdXNlcl9zb2NrZXQuanNcIlxuXG4vLyBZb3UgY2FuIGluY2x1ZGUgZGVwZW5kZW5jaWVzIGluIHR3byB3YXlzLlxuLy9cbi8vIFRoZSBzaW1wbGVzdCBvcHRpb24gaXMgdG8gcHV0IHRoZW0gaW4gYXNzZXRzL3ZlbmRvciBhbmRcbi8vIGltcG9ydCB0aGVtIHVzaW5nIHJlbGF0aXZlIHBhdGhzOlxuLy9cbi8vICAgICBpbXBvcnQgXCIuLi92ZW5kb3Ivc29tZS1wYWNrYWdlLmpzXCJcbi8vXG4vLyBBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIGBucG0gaW5zdGFsbCBzb21lLXBhY2thZ2UgLS1wcmVmaXggYXNzZXRzYCBhbmQgaW1wb3J0XG4vLyB0aGVtIHVzaW5nIGEgcGF0aCBzdGFydGluZyB3aXRoIHRoZSBwYWNrYWdlIG5hbWU6XG4vL1xuLy8gICAgIGltcG9ydCBcInNvbWUtcGFja2FnZVwiXG4vL1xuXG4vLyBJbmNsdWRlIHBob2VuaXhfaHRtbCB0byBoYW5kbGUgbWV0aG9kPVBVVC9ERUxFVEUgaW4gZm9ybXMgYW5kIGJ1dHRvbnMuXG5pbXBvcnQgXCJwaG9lbml4X2h0bWxcIlxuLy8gRXN0YWJsaXNoIFBob2VuaXggU29ja2V0IGFuZCBMaXZlVmlldyBjb25maWd1cmF0aW9uLlxuaW1wb3J0IHtTb2NrZXR9IGZyb20gXCJwaG9lbml4XCJcbmltcG9ydCB7TGl2ZVNvY2tldH0gZnJvbSBcInBob2VuaXhfbGl2ZV92aWV3XCJcbmltcG9ydCB0b3BiYXIgZnJvbSBcIi4uL3ZlbmRvci90b3BiYXJcIlxuaW1wb3J0IHsgY3JlYXRlUGlja2VyIH0gZnJvbSBcIi4vbm9kZV9tb2R1bGVzL3BpY21vXCI7XG5cbi8vIFRoZSBwaWNrZXIgbXVzdCBoYXZlIGEgcm9vdCBlbGVtZW50IHRvIGluc2VydCBpdHNlbGYgaW50b1xuY29uc3Qgcm9vdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVhY3Rpb24nKTtcbi8vIENyZWF0ZSB0aGUgcGlja2VyXG5jb25zdCBwaWNrZXIgPSBjcmVhdGVQaWNrZXIoeyByb290RWxlbWVudCB9KTtcbi8vIFRoZSBwaWNrZXIgZW1pdHMgYW4gZXZlbnQgd2hlbiBhbiBlbW9qaSBpcyBzZWxlY3RlZC4gRG8gd2l0aCBpdCBhcyB5b3Ugd2lsbCFcbnBpY2tlci5hZGRFdmVudExpc3RlbmVyKCdlbW9qaTpzZWxlY3QnLCBldmVudCA9PiB7XG4gIGNvbnNvbGUubG9nKCdFbW9qaSBzZWxlY3RlZDonLCBldmVudC5lbW9qaSk7XG59KTtcblxubGV0IGNzcmZUb2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9J2NzcmYtdG9rZW4nXVwiKS5nZXRBdHRyaWJ1dGUoXCJjb250ZW50XCIpXG5sZXQgbGl2ZVNvY2tldCA9IG5ldyBMaXZlU29ja2V0KFwiL2xpdmVcIiwgU29ja2V0LCB7cGFyYW1zOiB7X2NzcmZfdG9rZW46IGNzcmZUb2tlbn19KVxuXG4vLyBTaG93IHByb2dyZXNzIGJhciBvbiBsaXZlIG5hdmlnYXRpb24gYW5kIGZvcm0gc3VibWl0c1xudG9wYmFyLmNvbmZpZyh7YmFyQ29sb3JzOiB7MDogXCIjMjlkXCJ9LCBzaGFkb3dDb2xvcjogXCJyZ2JhKDAsIDAsIDAsIC4zKVwifSlcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGh4OnBhZ2UtbG9hZGluZy1zdGFydFwiLCBfaW5mbyA9PiB0b3BiYXIuc2hvdygzMDApKVxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwaHg6cGFnZS1sb2FkaW5nLXN0b3BcIiwgX2luZm8gPT4gdG9wYmFyLmhpZGUoKSlcblxuLy8gY29ubmVjdCBpZiB0aGVyZSBhcmUgYW55IExpdmVWaWV3cyBvbiB0aGUgcGFnZVxubGl2ZVNvY2tldC5jb25uZWN0KClcblxuLy8gZXhwb3NlIGxpdmVTb2NrZXQgb24gd2luZG93IGZvciB3ZWIgY29uc29sZSBkZWJ1ZyBsb2dzIGFuZCBsYXRlbmN5IHNpbXVsYXRpb246XG4vLyA+PiBsaXZlU29ja2V0LmVuYWJsZURlYnVnKClcbi8vID4+IGxpdmVTb2NrZXQuZW5hYmxlTGF0ZW5jeVNpbSgxMDAwKSAgLy8gZW5hYmxlZCBmb3IgZHVyYXRpb24gb2YgYnJvd3NlciBzZXNzaW9uXG4vLyA+PiBsaXZlU29ja2V0LmRpc2FibGVMYXRlbmN5U2ltKClcbndpbmRvdy5saXZlU29ja2V0ID0gbGl2ZVNvY2tldFxuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUtZm9ybScpKSB7XG4gICAgbGV0IHVybCA9IFwiaHR0cHM6Ly9zd2VldGlwZnMuaGVyb2t1YXBwLmNvbS9cIlxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlLWZvcm0nKS5vbnN1Ym1pdCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKClcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwidXBsb2FkXCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXBsb2FkXCIpLmZpbGVzWzBdKVxuXG4gICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAgICAgICB4aHIub3BlbihcIlBPU1RcIiwgdXJsICsgXCJjcmVhdGVcIiwgdHJ1ZSk7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gWE1MSHR0cFJlcXVlc3QuRE9ORSAmJiB4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkltYWdlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseS5cIilcbiAgICAgICAgICAgICAgICBsZXQgaXBmc2NpZCA9IHhoci5yZXNwb25zZVRleHRcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoZSBmaWxlIHdhcyB1cGxvYWQgdG8gaXBmc2NpZCBcIiArIGlwZnNjaWQpXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtX2lwZnNjaWRzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW1faXBmc2NpZHMnKS52YWx1ZSA9IGlwZnNjaWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyX2lwZnNjaWRzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfaXBmc2NpZHMnKS52YWx1ZSA9IGlwZnNjaWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgdXJsICsgXCIvcmVhZD9pcGZzY2lkPVwiICsgaXBmc2NpZCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlaG9sZGVyJykuYXBwZW5kQ2hpbGQoaW1hZ2UpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeGhyLnNlbmQoZm9ybURhdGEpXG4gICAgfVxufVxuIiwgIi8vIEJ1bmRsZWQgd2l0aCBQYWNrZW1vbjogaHR0cHM6Ly9wYWNrZW1vbi5kZXZcbi8vIFBsYXRmb3JtOiBicm93c2VyLCBTdXBwb3J0OiBzdGFibGUsIEZvcm1hdDogZXNtXG5cbi8qKlxuICogQXBwZW5kIGEgc2tpbiB0b25lIGluZGV4IChudW1iZXIpIHRvIHRoZSBlbmQgb2YgYSBzaG9ydGNvZGUuXG4gKi9cbmZ1bmN0aW9uIGFwcGVuZFNraW5Ub25lSW5kZXgoc2hvcnRjb2RlLCBlbW9qaSwgcHJlZml4ID0gJycpIHtcbiAgcmV0dXJuIGAke3Nob3J0Y29kZX1fJHtwcmVmaXh9JHtBcnJheS5pc0FycmF5KGVtb2ppLnRvbmUpID8gZW1vamkudG9uZS5qb2luKCctJykgOiBlbW9qaS50b25lfWA7XG59XG5cbmNvbnN0IFNFUVVFTkNFX1JFTU9WQUxfUEFUVEVSTiA9IC8yMDBEfEZFMEV8RkUwRi9nOyAvLyBVc2UgbnVtYmVycyBpbnN0ZWFkIG9mIHN0cmluZyB2YWx1ZXMsIGFzIHRoZSBmaWxlc2l6ZSBpcyBncmVhdGx5IHJlZHVjZWQuXG5cbmNvbnN0IFRFWFQgPSAwO1xuY29uc3QgRU1PSkkgPSAxO1xuY29uc3QgRkVNQUxFID0gMDtcbmNvbnN0IE1BTEUgPSAxO1xuY29uc3QgRlVMTFlfUVVBTElGSUVEID0gMDtcbmNvbnN0IE1JTklNQUxMWV9RVUFMSUZJRUQgPSAxO1xuY29uc3QgVU5RVUFMSUZJRUQgPSAyO1xuY29uc3QgTElHSFRfU0tJTiA9IDE7XG5jb25zdCBNRURJVU1fTElHSFRfU0tJTiA9IDI7XG5jb25zdCBNRURJVU1fU0tJTiA9IDM7XG5jb25zdCBNRURJVU1fREFSS19TS0lOID0gNDtcbmNvbnN0IERBUktfU0tJTiA9IDU7XG5jb25zdCBHUk9VUF9LRVlfU01JTEVZU19FTU9USU9OID0gJ3NtaWxleXMtZW1vdGlvbic7XG5jb25zdCBHUk9VUF9LRVlfUEVPUExFX0JPRFkgPSAncGVvcGxlLWJvZHknO1xuY29uc3QgR1JPVVBfS0VZX0FOSU1BTFNfTkFUVVJFID0gJ2FuaW1hbHMtbmF0dXJlJztcbmNvbnN0IEdST1VQX0tFWV9GT09EX0RSSU5LID0gJ2Zvb2QtZHJpbmsnO1xuY29uc3QgR1JPVVBfS0VZX1RSQVZFTF9QTEFDRVMgPSAndHJhdmVsLXBsYWNlcyc7XG5jb25zdCBHUk9VUF9LRVlfQUNUSVZJVElFUyA9ICdhY3Rpdml0aWVzJztcbmNvbnN0IEdST1VQX0tFWV9PQkpFQ1RTID0gJ29iamVjdHMnO1xuY29uc3QgR1JPVVBfS0VZX1NZTUJPTFMgPSAnc3ltYm9scyc7XG5jb25zdCBHUk9VUF9LRVlfRkxBR1MgPSAnZmxhZ3MnO1xuY29uc3QgR1JPVVBfS0VZX0NPTVBPTkVOVCA9ICdjb21wb25lbnQnO1xuY29uc3QgU0tJTl9LRVlfTElHSFQgPSAnbGlnaHQnO1xuY29uc3QgU0tJTl9LRVlfTUVESVVNX0xJR0hUID0gJ21lZGl1bS1saWdodCc7XG5jb25zdCBTS0lOX0tFWV9NRURJVU0gPSAnbWVkaXVtJztcbmNvbnN0IFNLSU5fS0VZX01FRElVTV9EQVJLID0gJ21lZGl1bS1kYXJrJztcbmNvbnN0IFNLSU5fS0VZX0RBUksgPSAnZGFyayc7IC8vIEltcG9ydGFudCByZWxlYXNlIHZlcnNpb25zIGFuZCBsb2NhbGVzIGluIGdlbmVyYXRpbmcgYWNjdXJhdGUgZGF0YS5cblxuY29uc3QgTEFURVNUX0VNT0pJX1ZFUlNJT04gPSAnMTQuMCc7XG5jb25zdCBMQVRFU1RfVU5JQ09ERV9WRVJTSU9OID0gJzE0LjAuMCc7XG5jb25zdCBMQVRFU1RfQ0xEUl9WRVJTSU9OID0gJzQwJztcbmNvbnN0IEZJUlNUX1VOSUNPREVfRU1PSklfVkVSU0lPTiA9ICc2LjAuMCc7XG5jb25zdCBFTU9KSV9WRVJTSU9OUyA9IFsnMS4wJywgJzIuMCcsICczLjAnLCAnNC4wJywgJzUuMCcsICcxMS4wJywgJzEyLjAnLCAnMTIuMScsICcxMy4wJywgJzEzLjEnLCAnMTQuMCddO1xuY29uc3QgVU5JQ09ERV9WRVJTSU9OUyA9IFsnNi4wJywgJzYuMScsICc2LjInLCAnNi4zJywgJzcuMCcsICc4LjAnLCAnOS4wJywgJzEwLjAnLCAnMTEuMCcsICcxMi4wJywgJzEyLjEnLCAnMTMuMCcsICcxNC4wJ107XG5jb25zdCBTVVBQT1JURURfTE9DQUxFUyA9IFsnZGEnLCAvLyBEYW5pc2hcbidkZScsIC8vIEdlcm1hblxuJ2VuJywgLy8gRW5nbGlzaFxuJ2VuLWdiJywgLy8gRW5nbGlzaCAoR3JlYXQgQnJpdGFpbilcbidlcycsIC8vIFNwYW5pc2hcbidlcy1teCcsIC8vIFNwYW5pc2ggKE1leGljbylcbidldCcsIC8vIEVzdG9uaWFuXG4nZmknLCAvLyBGaW5uaXNoXG4nZnInLCAvLyBGcmVuY2hcbidodScsIC8vIEh1bmdhcmlhblxuJ2l0JywgLy8gSXRhbGlhblxuJ2phJywgLy8gSmFwYW5lc2VcbidrbycsIC8vIEtvcmVhblxuJ2x0JywgLy8gTGl0aHVhbmlhblxuJ21zJywgLy8gTWFsYXlcbiduYicsIC8vIE5vcndlZ2lhblxuJ25sJywgLy8gRHV0Y2hcbidwbCcsIC8vIFBvbGlzaFxuJ3B0JywgLy8gUG9ydHVndWVzZVxuJ3J1JywgLy8gUnVzc2lhblxuJ3N2JywgLy8gU3dlZGlzaFxuJ3RoJywgLy8gVGhhaVxuJ3VrJywgLy8gVWtyYWluaWFuXG4nemgnLCAvLyBDaGluZXNlXG4nemgtaGFudCcgLy8gQ2hpbmVzZSAoVHJhZGl0aW9uYWwpXG5dOyAvLyBTcGVjaWFsIG9wdGlvbnMgZm9yIGVtb3RpY29uIHBlcm11dGF0aW9ucy5cblxuY29uc3QgRU1PVElDT05fT1BUSU9OUyA9IHtcbiAgLy8g8J+nmeKAjeKZgu+4jyBtYW4gbWFnZVxuICAnOns+Jzoge1xuICAgIHdpdGhOb3NlOiBmYWxzZVxuICB9LFxuICAvLyDwn5KUIGJyb2tlbiBoZWFydFxuICAnPC8zJzoge1xuICAgIGlzRmFjZTogZmFsc2VcbiAgfSxcbiAgLy8g4p2k77iPIHJlZCBoZWFydFxuICAnPDMnOiB7XG4gICAgaXNGYWNlOiBmYWxzZVxuICB9LFxuICAvLyDwn6SYIHNpZ24gb2YgdGhlIGhvcm5zXG4gICdcXFxcbS8nOiB7XG4gICAgaXNGYWNlOiBmYWxzZVxuICB9LFxuICAnXFxcXE0vJzoge1xuICAgIGlzRmFjZTogZmFsc2VcbiAgfSxcbiAgLy8g8J+RuSBvZ3JlXG4gICcwKSc6IHtcbiAgICB3aXRoTm9zZTogZmFsc2VcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0RmV0Y2hVcmwocGF0aCwgdmVyc2lvbiwgY2RuVXJsKSB7XG4gIGxldCBmZXRjaFVybCA9IGBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2Vtb2ppYmFzZS1kYXRhQCR7dmVyc2lvbn0vJHtwYXRofWA7XG5cbiAgaWYgKHR5cGVvZiBjZG5VcmwgPT09ICdmdW5jdGlvbicpIHtcbiAgICBmZXRjaFVybCA9IGNkblVybChwYXRoLCB2ZXJzaW9uKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY2RuVXJsID09PSAnc3RyaW5nJykge1xuICAgIGZldGNoVXJsID0gYCR7Y2RuVXJsfS8ke3BhdGh9YDtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBpZiAoIXBhdGggfHwgIXBhdGguZW5kc1dpdGgoJy5qc29uJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQSB2YWxpZCBKU09OIGRhdGFzZXQgaXMgcmVxdWlyZWQgdG8gZmV0Y2guJyk7XG4gICAgfVxuXG4gICAgaWYgKCFmZXRjaFVybCB8fCAhL15odHRwcz86XFwvXFwvLy50ZXN0KGZldGNoVXJsKSB8fCAhZmV0Y2hVcmwuZW5kc1dpdGgoJy5qc29uJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQSB2YWxpZCBDRE4gdXJsIGlzIHJlcXVpcmVkIHRvIGZldGNoLicpO1xuICAgIH1cblxuICAgIGlmICghdmVyc2lvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIHZhbGlkIHJlbGVhc2UgdmVyc2lvbiBpcyByZXF1aXJlZC4nKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmV0Y2hVcmw7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBmZXRjaCBgZW1vamliYXNlLWRhdGFgIEpTT04gZmlsZXMgZnJvbSBvdXIgQ0ROLCBwYXJzZSB0aGVtLFxuICogYW5kIHJldHVybiB0aGUgcmVzcG9uc2UuIEl0IHJlcXVpcmVzIGEgZmlsZSBwYXRoIHJlbGF0aXZlIHRvIHRoZSBgZW1vamliYXNlLWRhdGFgIHBhY2thZ2VcbiAqIGFzIHRoZSAxc3QgYXJndW1lbnQgYW5kIGFuIG9wdGlvbmFsIG9iamVjdCBvZiBvcHRpb25zIGFzIHRoZSAycmQgYXJndW1lbnQuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZldGNoRnJvbUNETiB9IGZyb20gJ2Vtb2ppYmFzZSc7XG4gKlxuICogYXdhaXQgZmV0Y2hGcm9tQ0ROKCdqYS9jb21wYWN0Lmpzb24nLCB7IHZlcnNpb246ICcyLjEuMycgfSk7XG4gKiBhd2FpdCBmZXRjaEZyb21DRE4oJ2phL2NvbXBhY3QuanNvbicsIHsgY2RuVXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9jZG4vZW1vamlkYXRhL2xhdGVzdCcgfSk7XG4gKiBhd2FpdCBmZXRjaEZyb21DRE4oJ2phL2NvbXBhY3QuanNvbicsIHtcbiAqICAgICBjZG5Vcmw6IChwYXRoOiBzdHJpbmcsIHZlcnNpb246IHN0cmluZykgPT4ge1xuICogICAgICAgICByZXR1cm4gYGh0dHBzOi8vZXhhbXBsZS5jb20vY2RuL2Vtb2ppZGF0YS8ke3ZlcnNpb259LyR7cGF0aH1gO1xuICogICAgIH1cbiAqIH0pO1xuICogYGBgXG4gKi9cblxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaEZyb21DRE4ocGF0aCwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICBsb2NhbCA9IGZhbHNlLFxuICAgIHZlcnNpb24gPSAnbGF0ZXN0JyxcbiAgICBjZG5VcmwsXG4gICAgLi4ub3B0c1xuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgZmV0Y2hVcmwgPSBnZXRGZXRjaFVybChwYXRoLCB2ZXJzaW9uLCBjZG5VcmwpO1xuICBjb25zdCBzdG9yYWdlID0gbG9jYWwgPyBsb2NhbFN0b3JhZ2UgOiBzZXNzaW9uU3RvcmFnZTtcbiAgY29uc3QgY2FjaGVLZXkgPSBgZW1vamliYXNlLyR7dmVyc2lvbn0vJHtwYXRofWA7XG4gIGNvbnN0IGNhY2hlZERhdGEgPSBzdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpOyAvLyBDaGVjayB0aGUgY2FjaGUgZmlyc3RcblxuICBpZiAoY2FjaGVkRGF0YSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoSlNPTi5wYXJzZShjYWNoZWREYXRhKSk7XG4gIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBhdC9jb21wYXRcblxuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZmV0Y2hVcmwsIHtcbiAgICBjcmVkZW50aWFsczogJ29taXQnLFxuICAgIG1vZGU6ICdjb3JzJyxcbiAgICByZWRpcmVjdDogJ2Vycm9yJyxcbiAgICAuLi5vcHRzXG4gIH0pO1xuXG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIEVtb2ppYmFzZSBkYXRhc2V0LicpO1xuICB9XG5cbiAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICB0cnkge1xuICAgIHN0b3JhZ2Uuc2V0SXRlbShjYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICB9IGNhdGNoIHsvLyBEbyBub3QgYWxsb3cgcXVvdGEgZXJyb3JzIHRvIGJyZWFrIHRoZSBhcHBcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufVxuXG5jb25zdCBBTElBU0VTID0ge1xuICBkaXNjb3JkOiAnam95cGl4ZWxzJyxcbiAgc2xhY2s6ICdpYW1jYWwnXG59O1xuLyoqXG4gKiBGZXRjaGVzIGFuZCByZXR1cm5zIGxvY2FsaXplZCBzaG9ydGNvZGVzIGZvciB0aGUgZGVmaW5lZCBwcmVzZXQgZnJvbSBvdXIgQ0ROLlxuICogVGhlIHJlc3BvbnNlIGlzIGEgbWFwcGluZyBvZiBlbW9qaSBoZXhjb2RlcyB0byBzaG9ydGNvZGVzIChlaXRoZXIgYSBzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncykuXG4gKiBVc2VzIGBmZXRjaEZyb21DRE5gIHVuZGVyIHRoZSBob29kLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBmZXRjaFNob3J0Y29kZXMgfSBmcm9tICdlbW9qaWJhc2UnO1xuICpcbiAqIGF3YWl0IGZldGNoU2hvcnRjb2RlcygnamEnLCAnY2xkcicsIHsgdmVyc2lvbjogJzIuMS4zJyB9KTtcbiAqIGBgYFxuICovXG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2hvcnRjb2Rlcyhsb2NhbGUsIHByZXNldCwgb3B0aW9ucykge1xuICB2YXIgX0FMSUFTRVMkcHJlc2V0O1xuXG4gIHJldHVybiBmZXRjaEZyb21DRE4oYCR7bG9jYWxlfS9zaG9ydGNvZGVzLyR7KF9BTElBU0VTJHByZXNldCA9IEFMSUFTRVNbcHJlc2V0XSkgIT09IG51bGwgJiYgX0FMSUFTRVMkcHJlc2V0ICE9PSB2b2lkIDAgPyBfQUxJQVNFUyRwcmVzZXQgOiBwcmVzZXR9Lmpzb25gLCBvcHRpb25zKTtcbn1cbi8qKlxuICogV2lsbCBqb2luIHNob3J0Y29kZXMgZnJvbSBtdWx0aXBsZSBzaG9ydGNvZGUgZGF0YXNldHMgaW50byBhIHNpbmdsZSBlbW9qaSBvYmplY3RcbiAqIHVzaW5nIGl0cyBoZXhjb2RlLiBXaWxsIHJlbW92ZSBkdXBsaWNhdGVzIGluIHRoZSBwcm9jZXNzLlxuICovXG5cblxuZnVuY3Rpb24gam9pblNob3J0Y29kZXNUb0Vtb2ppKGVtb2ppLCBzaG9ydGNvZGVEYXRhc2V0cykge1xuICBpZiAoc2hvcnRjb2RlRGF0YXNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGVtb2ppO1xuICB9XG5cbiAgY29uc3QgbGlzdCA9IG5ldyBTZXQoZW1vamkuc2hvcnRjb2Rlcyk7XG4gIHNob3J0Y29kZURhdGFzZXRzLmZvckVhY2goZGF0YXNldCA9PiB7XG4gICAgY29uc3Qgc2hvcnRjb2RlcyA9IGRhdGFzZXRbZW1vamkuaGV4Y29kZV07XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzaG9ydGNvZGVzKSkge1xuICAgICAgc2hvcnRjb2Rlcy5mb3JFYWNoKGNvZGUgPT4gbGlzdC5hZGQoY29kZSkpO1xuICAgIH0gZWxzZSBpZiAoc2hvcnRjb2Rlcykge1xuICAgICAgbGlzdC5hZGQoc2hvcnRjb2Rlcyk7XG4gICAgfVxuICB9KTtcbiAgZW1vamkuc2hvcnRjb2RlcyA9IFsuLi5saXN0XTtcblxuICBpZiAoZW1vamkuc2tpbnMpIHtcbiAgICBlbW9qaS5za2lucy5mb3JFYWNoKHNraW4gPT4ge1xuICAgICAgam9pblNob3J0Y29kZXNUb0Vtb2ppKHNraW4sIHNob3J0Y29kZURhdGFzZXRzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBlbW9qaTtcbn1cblxuZnVuY3Rpb24gZmxhdHRlbkVtb2ppRGF0YShkYXRhLCBzaG9ydGNvZGVEYXRhc2V0cyA9IFtdKSB7XG4gIGNvbnN0IGVtb2ppcyA9IFtdO1xuICBkYXRhLmZvckVhY2goZW1vamkgPT4ge1xuICAgIGlmIChlbW9qaS5za2lucykge1xuICAgICAgLy8gRG9udCBpbmNsdWRlIG5lc3RlZCBza2lucyBhcnJheVxuICAgICAgY29uc3Qge1xuICAgICAgICBza2lucyxcbiAgICAgICAgLi4uYmFzZUVtb2ppXG4gICAgICB9ID0gZW1vamk7XG4gICAgICBlbW9qaXMucHVzaChqb2luU2hvcnRjb2Rlc1RvRW1vamkoYmFzZUVtb2ppLCBzaG9ydGNvZGVEYXRhc2V0cykpOyAvLyBQdXNoIGVhY2ggc2tpbiBtb2RpZmljYXRpb24gaW50byB0aGUgcm9vdCBsaXN0XG5cbiAgICAgIHNraW5zLmZvckVhY2goc2tpbiA9PiB7XG4gICAgICAgIGNvbnN0IHNraW5FbW9qaSA9IHsgLi4uc2tpblxuICAgICAgICB9OyAvLyBJbmhlcml0IHRhZ3MgZnJvbSBwYXJlbnQgaWYgdGhleSBleGlzdFxuXG4gICAgICAgIGlmIChiYXNlRW1vamkudGFncykge1xuICAgICAgICAgIHNraW5FbW9qaS50YWdzID0gWy4uLmJhc2VFbW9qaS50YWdzXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVtb2ppcy5wdXNoKGpvaW5TaG9ydGNvZGVzVG9FbW9qaShza2luRW1vamksIHNob3J0Y29kZURhdGFzZXRzKSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1vamlzLnB1c2goam9pblNob3J0Y29kZXNUb0Vtb2ppKGVtb2ppLCBzaG9ydGNvZGVEYXRhc2V0cykpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBlbW9qaXM7XG59XG5cbmZ1bmN0aW9uIGpvaW5TaG9ydGNvZGVzKGVtb2ppcywgc2hvcnRjb2RlRGF0YXNldHMpIHtcbiAgaWYgKHNob3J0Y29kZURhdGFzZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBlbW9qaXM7XG4gIH1cblxuICBlbW9qaXMuZm9yRWFjaChlbW9qaSA9PiB7XG4gICAgam9pblNob3J0Y29kZXNUb0Vtb2ppKGVtb2ppLCBzaG9ydGNvZGVEYXRhc2V0cyk7XG4gIH0pO1xuICByZXR1cm4gZW1vamlzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaEVtb2ppcyhsb2NhbGUsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7XG4gICAgY29tcGFjdCA9IGZhbHNlLFxuICAgIGZsYXQgPSBmYWxzZSxcbiAgICBzaG9ydGNvZGVzOiBwcmVzZXRzID0gW10sXG4gICAgLi4ub3B0c1xuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgZW1vamlzID0gYXdhaXQgZmV0Y2hGcm9tQ0ROKGAke2xvY2FsZX0vJHtjb21wYWN0ID8gJ2NvbXBhY3QnIDogJ2RhdGEnfS5qc29uYCwgb3B0cyk7XG4gIGxldCBzaG9ydGNvZGVzID0gW107XG5cbiAgaWYgKHByZXNldHMubGVuZ3RoID4gMCkge1xuICAgIHNob3J0Y29kZXMgPSBhd2FpdCBQcm9taXNlLmFsbChwcmVzZXRzLm1hcChwcmVzZXQgPT4ge1xuICAgICAgbGV0IHByb21pc2U7XG5cbiAgICAgIGlmIChwcmVzZXQuaW5jbHVkZXMoJy8nKSkge1xuICAgICAgICBjb25zdCBbY3VzdG9tTG9jYWxlLCBjdXN0b21QcmVzZXRdID0gcHJlc2V0LnNwbGl0KCcvJyk7XG4gICAgICAgIHByb21pc2UgPSBmZXRjaFNob3J0Y29kZXMoY3VzdG9tTG9jYWxlLCBjdXN0b21QcmVzZXQsIG9wdHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbWlzZSA9IGZldGNoU2hvcnRjb2Rlcyhsb2NhbGUsIHByZXNldCwgb3B0cyk7XG4gICAgICB9IC8vIElnbm9yZSBhcyB0aGUgcHJpbWFyeSBkYXRhc2V0IHNob3VsZCBzdGlsbCBsb2FkXG5cblxuICAgICAgcmV0dXJuIHByb21pc2UuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgfSkpO1xuICB9XG5cbiAgcmV0dXJuIGZsYXQgPyBmbGF0dGVuRW1vamlEYXRhKGVtb2ppcywgc2hvcnRjb2RlcykgOiBqb2luU2hvcnRjb2RlcyhlbW9qaXMsIHNob3J0Y29kZXMpO1xufVxuLyoqXG4gKiBGZXRjaGVzIGFuZCByZXR1cm5zIGxvY2FsaXplZCBtZXNzYWdlcyBmb3IgZW1vamkgcmVsYXRlZCBpbmZvcm1hdGlvbiBsaWtlIGdyb3VwcyBhbmQgc3ViLWdyb3Vwcy5cbiAqIFVzZXMgYGZldGNoRnJvbUNETmAgdW5kZXIgdGhlIGhvb2QuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZldGNoTWVzc2FnZXMgfSBmcm9tICdlbW9qaWJhc2UnO1xuICpcbiAqIGF3YWl0IGZldGNoTWVzc2FnZXMoJ3poJywgeyB2ZXJzaW9uOiAnMi4xLjMnIH0pO1xuICogYGBgXG4gKi9cblxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaE1lc3NhZ2VzKGxvY2FsZSwgb3B0aW9ucykge1xuICByZXR1cm4gZmV0Y2hGcm9tQ0ROKGAke2xvY2FsZX0vbWVzc2FnZXMuanNvbmAsIG9wdGlvbnMpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY29udmVydCBhbiBhcnJheSBvZiBudW1lcmljYWwgY29kZXBvaW50cyB0byBhIGxpdGVyYWwgZW1vamkgVW5pY29kZSBjaGFyYWN0ZXIuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGZyb21Db2RlcG9pbnRUb1VuaWNvZGUgfSBmcm9tICdlbW9qaWJhc2UnO1xuICpcbiAqIGZyb21Db2RlcG9pbnRUb1VuaWNvZGUoWzEyODEwNCwgODIwNSwgMTI4MTA1LCA4MjA1LCAxMjgxMDMsIDgyMDUsIDEyODEwMl0pOyAvLyDwn5Go4oCN8J+RqeKAjfCfkafigI3wn5GmXG4gKiBgYGBcbiAqL1xuXG5cbmZ1bmN0aW9uIGZyb21Db2RlcG9pbnRUb1VuaWNvZGUoY29kZXBvaW50KSB7XG4gIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludCguLi5jb2RlcG9pbnQpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY29udmVydCBhIGhleGFkZWNpbWFsIGNvZGVwb2ludCB0byBhbiBhcnJheSBvZiBudW1lcmljYWwgY29kZXBvaW50cy5cbiAqIEJ5IGRlZmF1bHQsIGl0IHdpbGwgc3BsaXQgdGhlIGhleGNvZGUgdXNpbmcgYSBkYXNoLCBidXQgY2FuIGJlIGN1c3RvbWl6ZWQgd2l0aCB0aGUgMm5kIGFyZ3VtZW50LlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBmcm9tSGV4Y29kZVRvQ29kZXBvaW50IH0gZnJvbSAnZW1vamliYXNlJztcbiAqXG4gKiBmcm9tSGV4Y29kZVRvQ29kZXBvaW50KCcyNzBBLTFGM0ZDJyk7IC8vIFs5OTk0LCAxMjc5OTZdXG4gKiBmcm9tSGV4Y29kZVRvQ29kZXBvaW50KCcyNzBBIDFGM0ZDJywgJyAnKTsgLy8gWzk5OTQsIDEyNzk5Nl1cbiAqIGBgYFxuICovXG5cblxuZnVuY3Rpb24gZnJvbUhleGNvZGVUb0NvZGVwb2ludChjb2RlLCBqb2luZXIgPSAnLScpIHtcbiAgcmV0dXJuIGNvZGUuc3BsaXQoam9pbmVyKS5tYXAocG9pbnQgPT4gTnVtYmVyLnBhcnNlSW50KHBvaW50LCAxNikpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY29udmVydCBhIGxpdGVyYWwgZW1vamkgVW5pY29kZSBjaGFyYWN0ZXIgaW50byBhIGRhc2ggc2VwYXJhdGVkXG4gKiBoZXhhZGVjaW1hbCBjb2RlcG9pbnQuIFVubGVzcyBgZmFsc2VgIGlzIHBhc3NlZCBhcyB0aGUgMm5kIGFyZ3VtZW50LCB6ZXJvIHdpZHRoXG4gKiBqb2luZXIncyBhbmQgdmFyaWF0aW9uIHNlbGVjdG9ycyBhcmUgcmVtb3ZlZC5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZnJvbVVuaWNvZGVUb0hleGNvZGUgfSBmcm9tICdlbW9qaWJhc2UnO1xuICpcbiAqIGZyb21Vbmljb2RlVG9IZXhjb2RlKCfwn5Go4oCN8J+RqeKAjfCfkafigI3wn5GmJyk7IC8vIDFGNDY4LTFGNDY5LTFGNDY3LTFGNDY2XG4gKiBmcm9tVW5pY29kZVRvSGV4Y29kZSgn8J+RqOKAjfCfkanigI3wn5Gn4oCN8J+RpicsIGZhbHNlKTsgLy8gMUY0NjgtMjAwRC0xRjQ2OS0yMDBELTFGNDY3LTIwMEQtMUY0NjZcbiAqIGBgYFxuICovXG5cblxuZnVuY3Rpb24gZnJvbVVuaWNvZGVUb0hleGNvZGUodW5pY29kZSwgc3RyaXAgPSB0cnVlKSB7XG4gIGNvbnN0IGhleGNvZGUgPSBbXTtcbiAgWy4uLnVuaWNvZGVdLmZvckVhY2goY29kZXBvaW50ID0+IHtcbiAgICB2YXIgX2NvZGVwb2ludCRjb2RlUG9pbnRBLCBfY29kZXBvaW50JGNvZGVQb2ludEEyO1xuXG4gICAgbGV0IGhleCA9IChfY29kZXBvaW50JGNvZGVQb2ludEEgPSAoX2NvZGVwb2ludCRjb2RlUG9pbnRBMiA9IGNvZGVwb2ludC5jb2RlUG9pbnRBdCgwKSkgPT09IG51bGwgfHwgX2NvZGVwb2ludCRjb2RlUG9pbnRBMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvZGVwb2ludCRjb2RlUG9pbnRBMi50b1N0cmluZygxNikudG9VcHBlckNhc2UoKSkgIT09IG51bGwgJiYgX2NvZGVwb2ludCRjb2RlUG9pbnRBICE9PSB2b2lkIDAgPyBfY29kZXBvaW50JGNvZGVQb2ludEEgOiAnJztcblxuICAgIHdoaWxlIChoZXgubGVuZ3RoIDwgNCkge1xuICAgICAgaGV4ID0gYDAke2hleH1gO1xuICAgIH1cblxuICAgIGlmICghc3RyaXAgfHwgc3RyaXAgJiYgIWhleC5tYXRjaChTRVFVRU5DRV9SRU1PVkFMX1BBVFRFUk4pKSB7XG4gICAgICBoZXhjb2RlLnB1c2goaGV4KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gaGV4Y29kZS5qb2luKCctJyk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZSBtdWx0aXBsZSBwZXJtdXRhdGlvbnMgb2YgYSBiYXNlIGVtb3RpY29uIGNoYXJhY3Rlci5cbiAqIFRoZSBmb2xsb3dpbmcgcGVybXV0YXRpb25zIHdpbGwgb2NjdXI6XG4gKlxuICogLSBgKWAgbW91dGggd2lsbCBiZSByZXBsYWNlZCB3aXRoIGBdYCBhbmQgYH1gLiBUaGUgc2FtZSBhcHBsaWVzIHRvIHNhZC9mcm93bmluZyBtb3V0aHMuXG4gKiAtIGAvYCBtb3V0aCB3aWxsIGJlIHJlcGxhY2VkIHdpdGggYFxcYC5cbiAqIC0gYDpgIGV5ZXMgd2lsbCBiZSByZXBsYWNlZCB3aXRoIGA9YC5cbiAqIC0gU3VwcG9ydHMgYSBgLWAgbm9zZSwgYnkgaW5qZWN0aW5nIGJldHdlZW4gdGhlIGV5ZXMgYW5kIG1vdXRoLlxuICogLSBTdXBwb3J0cyBib3RoIHVwcGVyY2FzZSBhbmQgbG93ZXJjYXNlIHZhcmlhbnRzLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBnZW5lcmF0ZUVtb3RpY29uUGVybXV0YXRpb25zIH0gZnJvbSAnZW1vamliYXNlJztcbiAqXG4gKiBnZW5lcmF0ZUVtb3RpY29uUGVybXV0YXRpb25zKCc6KScpOyAvLyA9LSksID0tfSwgOi1dLCA9LV0sIDotfSwgOi0pLCA9fSwgPV0sID0pLCA6fSwgOl0sIDopXG4gKiBgYGBcbiAqXG4gKiA+IFRoZSBiYXNlIGVtb3RpY29uIG11c3QgZm9sbG93IGEgc2V0IG9mIG5hbWluZyBndWlkZWxpbmVzIHRvIHdvcmsgcHJvcGVybHkuXG4gKlxuICogRnVydGhlcm1vcmUsIHRoaXMgZnVuY3Rpb24gYWNjZXB0cyBhbiBvcHRpb25zIG9iamVjdCBhcyB0aGUgMm5kIGFyZ3VtZW50LCBhcyBhIG1lYW5zIHRvIGN1c3RvbWl6ZVxuICogdGhlIG91dHB1dC5cbiAqXG4gKiAtIGBpc0ZhY2VgIChib29sKSAtIFRvZ2dsZXMgZmFjZSBwZXJtdXRhdGlvbnMgKG1vdXRoIGFuZCBleWUgdmFyaWFudHMpLiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gKiAtIGB3aXRoTm9zZWAgKGJvb2wpIC0gVG9nZ2xlcyBub3NlIGluY2x1c2lvbi4gRGVmYXVsdHMgdG8gYHRydWVgLlxuICpcbiAqIGBgYHRzXG4gKiBnZW5lcmF0ZUVtb3RpY29uUGVybXV0YXRpb25zKCc6KScsIHsgd2l0aE5vc2U6IGZhbHNlIH0pOyAvLyA9fSwgPV0sID0pLCA6fSwgOl0sIDopXG4gKiBnZW5lcmF0ZUVtb3RpY29uUGVybXV0YXRpb25zKCdcXFxcbS8nLCB7IGlzRmFjZTogZmFsc2UgfSk7IC8vIFxcbS8sIFxcTS9cbiAqIGBgYFxuICovXG5cblxuZnVuY3Rpb24gZ2VuZXJhdGVFbW90aWNvblBlcm11dGF0aW9ucyhlbW90aWNvbiwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICBpc0ZhY2UgPSB0cnVlLFxuICAgIHdpdGhOb3NlID0gdHJ1ZVxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgbGlzdCA9IFtlbW90aWNvbl07IC8vIFVwcGVyY2FzZSB2YXJpYW50XG5cbiAgaWYgKGVtb3RpY29uLnRvVXBwZXJDYXNlKCkgIT09IGVtb3RpY29uKSB7XG4gICAgbGlzdC5wdXNoKC4uLmdlbmVyYXRlRW1vdGljb25QZXJtdXRhdGlvbnMoZW1vdGljb24udG9VcHBlckNhc2UoKSwgb3B0aW9ucykpO1xuICB9XG5cbiAgaWYgKGlzRmFjZSkge1xuICAgIC8vIEJhY2t3YXJkcyBzbGFzaCBtb3V0aCB2YXJpYW50XG4gICAgaWYgKGVtb3RpY29uLmluY2x1ZGVzKCcvJykpIHtcbiAgICAgIGxpc3QucHVzaCguLi5nZW5lcmF0ZUVtb3RpY29uUGVybXV0YXRpb25zKGVtb3RpY29uLnJlcGxhY2UoJy8nLCAnXFxcXCcpLCBvcHRpb25zKSk7XG4gICAgfSAvLyBCcmFja2V0IGFuZCBjdXJseSBicmFjZSBtb3V0aCB2YXJpYW50c1xuXG5cbiAgICBpZiAoZW1vdGljb24uaW5jbHVkZXMoJyknKSkge1xuICAgICAgbGlzdC5wdXNoKC4uLmdlbmVyYXRlRW1vdGljb25QZXJtdXRhdGlvbnMoZW1vdGljb24ucmVwbGFjZSgnKScsICddJyksIG9wdGlvbnMpLCAuLi5nZW5lcmF0ZUVtb3RpY29uUGVybXV0YXRpb25zKGVtb3RpY29uLnJlcGxhY2UoJyknLCAnfScpLCBvcHRpb25zKSk7XG4gICAgfVxuXG4gICAgaWYgKGVtb3RpY29uLmluY2x1ZGVzKCcoJykpIHtcbiAgICAgIGxpc3QucHVzaCguLi5nZW5lcmF0ZUVtb3RpY29uUGVybXV0YXRpb25zKGVtb3RpY29uLnJlcGxhY2UoJygnLCAnWycpLCBvcHRpb25zKSwgLi4uZ2VuZXJhdGVFbW90aWNvblBlcm11dGF0aW9ucyhlbW90aWNvbi5yZXBsYWNlKCcoJywgJ3snKSwgb3B0aW9ucykpO1xuICAgIH0gLy8gRXllIHZhcmlhbnRcblxuXG4gICAgaWYgKGVtb3RpY29uLmluY2x1ZGVzKCc6JykpIHtcbiAgICAgIGxpc3QucHVzaCguLi5nZW5lcmF0ZUVtb3RpY29uUGVybXV0YXRpb25zKGVtb3RpY29uLnJlcGxhY2UoJzonLCAnPScpLCBvcHRpb25zKSk7XG4gICAgfSAvLyBOb3NlIHZhcmlhbnQgZm9yIEFMTFxuXG5cbiAgICBpZiAod2l0aE5vc2UpIHtcbiAgICAgIGxpc3QuZm9yRWFjaChlbW8gPT4ge1xuICAgICAgICBpZiAoIWVtby5pbmNsdWRlcygnLScpKSB7XG4gICAgICAgICAgbGlzdC5wdXNoKGAke2Vtby5zbGljZSgwLCAtMSl9LSR7ZW1vLnNsaWNlKC0xKX1gKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9IC8vIFNvcnQgZnJvbSBsb25nZXN0IHRvIHNob3J0ZXN0XG5cblxuICBsaXN0LnNvcnQoKGEsIGIpID0+IGIubGVuZ3RoIC0gYS5sZW5ndGgpO1xuICByZXR1cm4gWy4uLm5ldyBTZXQobGlzdCldO1xufVxuXG5jb25zdCBTVFJJUF9QQVRURVJOID0gbmV3IFJlZ0V4cChgKC18ICk/KCR7U0VRVUVOQ0VfUkVNT1ZBTF9QQVRURVJOLnNvdXJjZX0pYCwgJ2cnKTtcbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHN0cmlwIHplcm8gd2lkdGggam9pbmVycyAoYDIwMERgKSBhbmQgdmFyaWF0aW9uIHNlbGVjdG9yc1xuICogKGBGRTBFYCwgYEZFMEZgKSBmcm9tIGEgaGV4YWRlY2ltYWwgY29kZXBvaW50LlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBzdHJpcEhleGNvZGUgfSBmcm9tICdlbW9qaWJhc2UnO1xuICpcbiAqIHN0cmlwSGV4Y29kZSgnMUY0NjgtMjAwRC0yNjk1LUZFMEYnKTsgLy8gMUY0NjgtMjY5NVxuICogYGBgXG4gKi9cblxuZnVuY3Rpb24gc3RyaXBIZXhjb2RlKGhleGNvZGUpIHtcbiAgcmV0dXJuIGhleGNvZGUucmVwbGFjZShTVFJJUF9QQVRURVJOLCAnJyk7XG59XG5cbmV4cG9ydCB7IERBUktfU0tJTiwgRU1PSkksIEVNT0pJX1ZFUlNJT05TLCBFTU9USUNPTl9PUFRJT05TLCBGRU1BTEUsIEZJUlNUX1VOSUNPREVfRU1PSklfVkVSU0lPTiwgRlVMTFlfUVVBTElGSUVELCBHUk9VUF9LRVlfQUNUSVZJVElFUywgR1JPVVBfS0VZX0FOSU1BTFNfTkFUVVJFLCBHUk9VUF9LRVlfQ09NUE9ORU5ULCBHUk9VUF9LRVlfRkxBR1MsIEdST1VQX0tFWV9GT09EX0RSSU5LLCBHUk9VUF9LRVlfT0JKRUNUUywgR1JPVVBfS0VZX1BFT1BMRV9CT0RZLCBHUk9VUF9LRVlfU01JTEVZU19FTU9USU9OLCBHUk9VUF9LRVlfU1lNQk9MUywgR1JPVVBfS0VZX1RSQVZFTF9QTEFDRVMsIExBVEVTVF9DTERSX1ZFUlNJT04sIExBVEVTVF9FTU9KSV9WRVJTSU9OLCBMQVRFU1RfVU5JQ09ERV9WRVJTSU9OLCBMSUdIVF9TS0lOLCBNQUxFLCBNRURJVU1fREFSS19TS0lOLCBNRURJVU1fTElHSFRfU0tJTiwgTUVESVVNX1NLSU4sIE1JTklNQUxMWV9RVUFMSUZJRUQsIFNFUVVFTkNFX1JFTU9WQUxfUEFUVEVSTiwgU0tJTl9LRVlfREFSSywgU0tJTl9LRVlfTElHSFQsIFNLSU5fS0VZX01FRElVTSwgU0tJTl9LRVlfTUVESVVNX0RBUkssIFNLSU5fS0VZX01FRElVTV9MSUdIVCwgU1VQUE9SVEVEX0xPQ0FMRVMsIFRFWFQsIFVOSUNPREVfVkVSU0lPTlMsIFVOUVVBTElGSUVELCBhcHBlbmRTa2luVG9uZUluZGV4LCBmZXRjaEVtb2ppcywgZmV0Y2hGcm9tQ0ROLCBmZXRjaE1lc3NhZ2VzLCBmZXRjaFNob3J0Y29kZXMsIGZsYXR0ZW5FbW9qaURhdGEsIGZyb21Db2RlcG9pbnRUb1VuaWNvZGUsIGZyb21IZXhjb2RlVG9Db2RlcG9pbnQsIGZyb21Vbmljb2RlVG9IZXhjb2RlLCBnZW5lcmF0ZUVtb3RpY29uUGVybXV0YXRpb25zLCBqb2luU2hvcnRjb2Rlcywgam9pblNob3J0Y29kZXNUb0Vtb2ppLCBzdHJpcEhleGNvZGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwgImltcG9ydCB7IEVtb2ppUmVjb3JkLCBQaWNrZXJPcHRpb25zIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbW9qaUZvckV2ZW50KGV2ZW50OiBFdmVudCwgZW1vamlzOiBFbW9qaVJlY29yZFtdKTogRW1vamlSZWNvcmQgfCBudWxsIHtcbiAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICBjb25zdCBlbW9qaUVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnW2RhdGEtZW1vamldJykgYXMgSFRNTEVsZW1lbnQ7XG4gIGlmIChlbW9qaUVsZW1lbnQpIHtcbiAgICBjb25zdCBlbW9qaSA9IGVtb2ppcy5maW5kKGUgPT4gZS5lbW9qaSA9PT0gZW1vamlFbGVtZW50LmRhdGFzZXQuZW1vamkpO1xuICAgIGlmIChlbW9qaSkge1xuICAgICAgcmV0dXJuIGVtb2ppO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkQW5pbWF0ZShvcHRpb25zOiBQaWNrZXJPcHRpb25zKSB7XG4gIGNvbnN0IG1hdGNoZXIgPSB3aW5kb3cubWF0Y2hNZWRpYT8uKCcocHJlZmVycy1yZWR1Y2VkLW1vdGlvbjogcmVkdWNlKScpO1xuICByZXR1cm4gb3B0aW9ucy5hbmltYXRlICYmICFtYXRjaGVyPy5tYXRjaGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FzZUluc2Vuc2l0aXZlSW5jbHVkZXMoc3RyOiBzdHJpbmcsIHNlYXJjaDogc3RyaW5nKSB7XG4gIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gudG9Mb3dlckNhc2UoKSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRocm90dGxlZCB2ZXJzaW9uIG9mIGEgZnVuY3Rpb24uXG4gKiBcbiAqIEBwYXJhbSBmbiBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGVcbiAqIEBwYXJhbSB3YWl0IFRoZSB3YWl0IHRpbWUgaW4gbWlsbGlzZWNvbmRzXG4gKiBAcmV0dXJucyBhIHRocm90dGxlZCB2ZXJzaW9uIG9mIGZuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aHJvdHRsZShmbjogKCkgPT4gdm9pZCwgd2FpdDogbnVtYmVyKSB7XG4gIGxldCB0aW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGZuKCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICB9LCB3YWl0KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIHZlcnNpb24gb2YgYSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gZm4gdGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlXG4gKiBAcGFyYW0gd2FpdCB0aGUgd2FpdCB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICogQHJldHVybnMgYSBkZWJvdW5jZWQgdmVyc2lvbiBvZiBmblxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2UoZm46ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55LCB3YWl0OiBudW1iZXIpIHtcbiAgbGV0IHRpbWVvdXQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gIHJldHVybiAoLi4uYXJnczogYW55W10pOiBhbnkgPT4ge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIH1cblxuICAgIHRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBmbiguLi5hcmdzKTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgIH0sIHdhaXQpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYW5pbWF0ZShlbGVtZW50OiBIVE1MRWxlbWVudCwga2V5ZnJhbWVzOiBLZXlmcmFtZVtdIHwgUHJvcGVydHlJbmRleGVkS2V5ZnJhbWVzLCBvcHRpb25zOiBLZXlmcmFtZUFuaW1hdGlvbk9wdGlvbnMsIHBpY2tlck9wdGlvbnM6IFBpY2tlck9wdGlvbnMpOiBQcm9taXNlPEFuaW1hdGlvbiB8IHZvaWQ+IHtcbiAgaWYgKHNob3VsZEFuaW1hdGUocGlja2VyT3B0aW9ucykgJiYgZWxlbWVudC5hbmltYXRlKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuYW5pbWF0ZShrZXlmcmFtZXMsIG9wdGlvbnMpLmZpbmlzaGVkO1xuICB9XG5cbiAgLy8gSWYgYW5pbWF0aW9uIGlzbid0IGVuYWJsZWQgb3Igc3VwcG9ydGVkLCBmaW5kIHRoZSBmaW5hbCBzdHlsZSBzdGF0ZSBhbmRcbiAgLy8gYXBwbHkgaXQgZGlyZWN0bHkuXG4gIGNvbnN0IHByb3BlcnR5SW5kZXggPSBvcHRpb25zLmRpcmVjdGlvbiA9PT0gJ25vcm1hbCcgPyAxIDogMDtcbiAgY29uc3QgZmluYWxTdGF0ZSA9IE9iamVjdC5lbnRyaWVzKGtleWZyYW1lcykucmVkdWNlKChyZXN1bHQsIFtrZXksIHZhbHVlc10pID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4ucmVzdWx0LFxuICAgICAgW2tleV06IHZhbHVlc1twcm9wZXJ0eUluZGV4XVxuICAgIH1cbiAgfSwge30pO1xuICBPYmplY3QuYXNzaWduKGVsZW1lbnQuc3R5bGUsIGZpbmFsU3RhdGUpO1xuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG5cbi8qKlxuICogVGFrZXMgYSByZW5kZXJlZCBIVE1MIHN0cmluZyBhbmQgcmVuZGVycyBhIERPTSBub2RlIGZyb20gaXQuXG4gKlxuICogQHBhcmFtIGh0bWwgdGhlIEhUTUwgdGV4dFxuICogQHJldHVybnMgdGhlIGdlbmVyYXRlZCBIVE1MRWxlbWVudFxuICovXG4gZXhwb3J0IGZ1bmN0aW9uIHRvRWxlbWVudDxFIGV4dGVuZHMgRWxlbWVudCA9IEhUTUxFbGVtZW50PihodG1sOiBzdHJpbmcpOiBFIHtcbiAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sO1xuXG4gIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50Py5maXJzdEVsZW1lbnRDaGlsZCBhcyBFO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcHV0ZUhhc2gob2JqOiBhbnkpIHtcbiAgY29uc3QgYXJyID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKG9iaik7XG4gIGNvbnN0IGhhc2hCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGFycik7XG4gIGNvbnN0IGhhc2hBcnJheSA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoaGFzaEJ1ZmZlcikpO1xuICByZXR1cm4gaGFzaEFycmF5Lm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJlZml4ZWRDbGFzc2VzKC4uLmNsYXNzTmFtZXMpIHtcbiAgcmV0dXJuIGNsYXNzTmFtZXMucmVkdWNlKChyZXN1bHQsIGNsYXNzTmFtZSkgPT4gKHtcbiAgICAuLi5yZXN1bHQsXG4gICAgW2NsYXNzTmFtZV06IHByZWZpeENsYXNzTmFtZShjbGFzc05hbWUpXG4gIH0pLCB7fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVmaXhDbGFzc05hbWUoY2xhc3NOYW1lKSB7XG4gIHJldHVybiBgcGljbW9fXyR7Y2xhc3NOYW1lfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbXB0eShlbGVtZW50OiBFbGVtZW50KTogRWxlbWVudCB7XG4gIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VDaGlsZHJlbihwYXJlbnQ6IEVsZW1lbnQsIC4uLmNoaWxkcmVuOiBFbGVtZW50W10pIHtcbiAgZW1wdHkocGFyZW50KS5hcHBlbmQoLi4uY2hpbGRyZW4pO1xufVxuXG5mdW5jdGlvbiBpc1N0b3JhZ2VBdmFpbGFibGUoa2V5KSB7XG4gIHRyeSB7XG4gICAgd2luZG93W2tleV0ubGVuZ3RoO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTZXNzaW9uU3RvcmFnZUF2YWlsYWJsZSgpIHtcbiAgcmV0dXJuIGlzU3RvcmFnZUF2YWlsYWJsZSgnc2Vzc2lvblN0b3JhZ2UnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCkge1xuICByZXR1cm4gaXNTdG9yYWdlQXZhaWxhYmxlKCdsb2NhbFN0b3JhZ2UnKTtcbn1cbiIsICJpbXBvcnQgeyBFbW9qaSwgR3JvdXBNZXNzYWdlLCBMb2NhbGUgfSBmcm9tICdlbW9qaWJhc2UnO1xuaW1wb3J0IHsgUGlja2VyT3B0aW9ucywgRW1vamlSZWNvcmQsIENhdGVnb3J5IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgY2FzZUluc2Vuc2l0aXZlSW5jbHVkZXMgfSBmcm9tICcuLi91dGlsJztcblxuZXhwb3J0IHR5cGUgUG9wdWxhdGVPcHRpb25zID0ge1xuICBncm91cHM6IEdyb3VwTWVzc2FnZVtdO1xuICBlbW9qaXM6IEVtb2ppW107XG4gIGVtb2ppc0V0YWc/OiBzdHJpbmcgfCBudWxsO1xuICBtZXNzYWdlc0V0YWc/OiBzdHJpbmcgfCBudWxsO1xuICBoYXNoPzogc3RyaW5nIHwgbnVsbDtcbn1cblxudHlwZSBTZWFyY2hhYmxlRW1vamkgPSB7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIHRhZ3M/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IHR5cGUgTWV0YSA9IHtcbiAgZW1vamlzRXRhZz86IHN0cmluZztcbiAgbWVzc2FnZXNFdGFnPzogc3RyaW5nO1xuICBoYXNoPzogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBEYXRhU3RvcmVGYWN0b3J5ID0geyBcbiAgKGxvY2FsZTogTG9jYWxlKTogRGF0YVN0b3JlOyBcbiAgZGVsZXRlRGF0YWJhc2UobG9jYWxlOiBMb2NhbGUpOiB2b2lkO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gRW1vamkgZnJvbSBlbW9qaWJhc2UgaW50byBhbiBFbW9qaVJlY29yZC5cbiAqIFxuICogQHBhcmFtIGVtb2ppIHRoZSBFbW9qaSBmcm9tIHRoZSBkYXRhYmFzZVxuICogQHJldHVybnMgdGhlIGVxdWl2YWxlbnQgRW1vamlSZWNvcmRcbiAqL1xuIGV4cG9ydCBmdW5jdGlvbiBnZXRFbW9qaVJlY29yZChlbW9qaTogRW1vamkpOiBFbW9qaVJlY29yZCB7XG4gIHJldHVybiB7XG4gICAgZW1vamk6IGVtb2ppLmVtb2ppLFxuICAgIGxhYmVsOiBlbW9qaS5sYWJlbCxcbiAgICB0YWdzOiBlbW9qaS50YWdzLFxuICAgIHNraW5zOiBlbW9qaS5za2lucz8ubWFwKHNraW4gPT4gZ2V0RW1vamlSZWNvcmQoc2tpbikpLFxuICAgIG9yZGVyOiBlbW9qaS5vcmRlcixcbiAgICBjdXN0b206IGZhbHNlLFxuICAgIGhleGNvZGU6IGVtb2ppLmhleGNvZGUsXG4gICAgdmVyc2lvbjogZW1vamkudmVyc2lvblxuICB9O1xufVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhbiBlbW9qaSwgZGV0ZXJtaW5lIGlmIHRoZSBxdWVyeSBtYXRjaGVzLlxuICAgKiBcbiAgICogVGhlIGVtb2ppIG1hdGNoZXMgaWYgdGhlIHRleHQgcXVlcnkgbWF0Y2hlcyB0aGUgbmFtZSBvciBvbmUgb2YgaXRzIHRhZ3MsIGFuZCBpZiBpdCBpcyBpbiB0aGUgYXJyYXkgb2ZcbiAgICogY2F0ZWdvcmllcyAoaWYgZ2l2ZW4pLlxuICAgKiBcbiAgICogQHBhcmFtIGVtb2ppIFRoZSBlbW9qaSB0byBjaGVja1xuICAgKiBAcGFyYW0gcXVlcnkgVGhlIHRleHQgcXVlcnlcbiAgICogQHBhcmFtIGNhdGVnb3JpZXMgVGhlIGNhdGVnb3JpZXMgdG8gY2hlY2tcbiAgICogQHJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgdGhlIGVtb2ppIG1hdGNoZXMgdGhlIHF1ZXJ5XG4gICAqL1xuICAgZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5TWF0Y2hlcyhlbW9qaTogU2VhcmNoYWJsZUVtb2ppLCBxdWVyeTogc3RyaW5nLCBjYXRlZ29yaWVzPzogQ2F0ZWdvcnlbXSkge1xuICAgIGlmIChjYXRlZ29yaWVzICYmICFjYXRlZ29yaWVzLnNvbWUoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkub3JkZXIgPT09IChlbW9qaSBhcyBFbW9qaSkuZ3JvdXApKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIGNhc2VJbnNlbnNpdGl2ZUluY2x1ZGVzKGVtb2ppLmxhYmVsLCBxdWVyeSkgfHxcbiAgICAgIGVtb2ppLnRhZ3M/LnNvbWUodGFnID0+IGNhc2VJbnNlbnNpdGl2ZUluY2x1ZGVzKHRhZywgcXVlcnkpKVxuICAgICk7XG4gIH1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIERhdGFTdG9yZSB7XG4gIGxvY2FsZTogTG9jYWxlO1xuXG4gIGNvbnN0cnVjdG9yKGxvY2FsZTogTG9jYWxlID0gJ2VuJykge1xuICAgIHRoaXMubG9jYWxlID0gbG9jYWxlO1xuICB9XG5cbiAgYWJzdHJhY3Qgb3BlbigpOiBQcm9taXNlPHZvaWQ+O1xuICBhYnN0cmFjdCBkZWxldGUoKTogUHJvbWlzZTx2b2lkPjtcbiAgYWJzdHJhY3QgY2xvc2UoKTogdm9pZDtcbiAgYWJzdHJhY3QgZ2V0RW1vamlDb3VudCgpOiBQcm9taXNlPG51bWJlcj47XG4gIGFic3RyYWN0IGdldEV0YWdzKCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPj47XG4gIGFic3RyYWN0IHNldE1ldGEobWV0YSk6IHZvaWQ7XG4gIGFic3RyYWN0IGdldEhhc2goKTogUHJvbWlzZTxzdHJpbmc+O1xuICBhYnN0cmFjdCBpc1BvcHVsYXRlZCgpOiBQcm9taXNlPGJvb2xlYW4+O1xuICBhYnN0cmFjdCBwb3B1bGF0ZShvcHRpb25zOiBQb3B1bGF0ZU9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+O1xuICBhYnN0cmFjdCBnZXRDYXRlZ29yaWVzKG9wdGlvbnM6IFBpY2tlck9wdGlvbnMpOiBQcm9taXNlPENhdGVnb3J5W10+O1xuICBhYnN0cmFjdCBnZXRFbW9qaXMoY2F0ZWdvcnk6IENhdGVnb3J5LCBlbW9qaVZlcnNpb246IG51bWJlcik6IFByb21pc2U8RW1vamlSZWNvcmRbXT47XG4gIGFic3RyYWN0IHNlYXJjaEVtb2ppcyhxdWVyeTogc3RyaW5nLCBjdXN0b21FbW9qaXM6IEVtb2ppUmVjb3JkW10sIGVtb2ppVmVyc2lvbjogbnVtYmVyLCBjYXRlZ29yaWVzOiBDYXRlZ29yeVtdKTogUHJvbWlzZTxFbW9qaVJlY29yZFtdPjtcbn1cbiIsICJpbXBvcnQgeyBFbW9qaVJlY29yZCB9IGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IHR5cGUgRW1vamlQcm9jZXNzaW5nUnVsZSA9IChlbW9qaTogRW1vamlSZWNvcmQsIHZlcnNpb246IG51bWJlcikgPT4gRW1vamlSZWNvcmQgfCBudWxsO1xuXG5leHBvcnQgY29uc3QgcnVsZXM6IEVtb2ppUHJvY2Vzc2luZ1J1bGVbXSA9IFtcblxuICAvLyBQcmlvciB0byBFbW9qaSAxNCwgdGhlIGhhbmRzaGFrZSBlbW9qaSdzIHNraW4gdG9uZSB2YXJpYW50cyB3YXMgbm90IHN0YW5kYXJkaXplZFxuICAvLyBhbmQgd2lsbCBub3QgcmVuZGVyIGNvcnJlY3RseSBhcyBhIG5hdGl2ZSBlbW9qaS4gXG4gIChlbW9qaTogRW1vamlSZWNvcmQsIGVtb2ppVmVyc2lvbjogbnVtYmVyKSA9PiB7XG4gICAgaWYgKGVtb2ppLmhleGNvZGUgPT09ICcxRjkxRCcgJiYgZW1vamlWZXJzaW9uIDwgMTQpIHtcbiAgICAgIGVtb2ppLnNraW5zID0gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIGVtb2ppO1xuICB9LFxuXG4gIC8vIEZpbHRlciBvdXQgdmFyaWFudHMgdGhhdCBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIHRoZSBlbW9qaS5cbiAgLy8gSWYgYSB2YXJpYW50IGRvZXNuJ3Qgc3BlY2lmeSBhIHZlcnNpb24sIGl0IHdpbGwgYmUgaW5jbHVkZWQuIE9ubHkgdmFyaWFudHMgdGhhdFxuICAvLyBzcGVjaWZ5IGEgdmVyc2lvbiB0aGF0IGlzIGdyZWF0ZXIgdGhhbiB0aGUgY3VycmVudCB2ZXJzaW9uIHdpbGwgYmUgZmlsdGVyZWQgb3V0LlxuICAoZW1vamk6IEVtb2ppUmVjb3JkLCBlbW9qaVZlcnNpb246IG51bWJlcikgPT4ge1xuICAgIGlmIChlbW9qaS5za2lucykge1xuICAgICAgZW1vamkuc2tpbnMgPSBlbW9qaS5za2lucy5maWx0ZXIoKHNraW46IEVtb2ppUmVjb3JkKSA9PiAhc2tpbi52ZXJzaW9uIHx8IHNraW4udmVyc2lvbiA8PSBlbW9qaVZlcnNpb24pO1xuICAgIH1cblxuICAgIHJldHVybiBlbW9qaTtcbiAgfVxuXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UnVsZXNUb0Vtb2ppKGVtb2ppOiBFbW9qaVJlY29yZCwgZW1vamlWZXJzaW9uOiBudW1iZXIpIHtcbiAgaWYgKHJ1bGVzLnNvbWUocnVsZSA9PiBydWxlKGVtb2ppLCBlbW9qaVZlcnNpb24pID09PSBudWxsKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGVtb2ppO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlSdWxlcyhlbW9qaXM6IEVtb2ppUmVjb3JkW10sIGVtb2ppVmVyc2lvbjogbnVtYmVyKTogRW1vamlSZWNvcmRbXSB7XG4gIHJldHVybiBlbW9qaXMuZmlsdGVyKGVtb2ppID0+IGFwcGx5UnVsZXNUb0Vtb2ppKGVtb2ppLCBlbW9qaVZlcnNpb24pICE9PSBudWxsKTtcbn1cbiIsICJpbXBvcnQgeyBMb2NhbGUsIEVtb2ppLCBHcm91cE1lc3NhZ2UgfSBmcm9tICdlbW9qaWJhc2UnO1xuaW1wb3J0IHsgTWV0YSwgZ2V0RW1vamlSZWNvcmQsIFBvcHVsYXRlT3B0aW9ucywgRGF0YVN0b3JlLCBxdWVyeU1hdGNoZXMgfSBmcm9tICcuL0RhdGFTdG9yZSc7XG5pbXBvcnQgeyBQaWNrZXJPcHRpb25zLCBFbW9qaVJlY29yZCwgQ2F0ZWdvcnksIENhdGVnb3J5S2V5IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyBhcHBseVJ1bGVzIH0gZnJvbSAnLi4vcnVsZXMnO1xuXG5jb25zdCBpbnN0YW5jZXMgPSB7fSBhcyBSZWNvcmQ8TG9jYWxlLCBJbk1lbW9yeVN0b3JlPjtcblxuZXhwb3J0IGZ1bmN0aW9uIEluTWVtb3J5U3RvcmVGYWN0b3J5KGxvY2FsZTogTG9jYWxlKTogRGF0YVN0b3JlIHtcbiAgaWYgKCFpbnN0YW5jZXNbbG9jYWxlXSkge1xuICAgIGluc3RhbmNlc1tsb2NhbGVdID0gbmV3IEluTWVtb3J5U3RvcmUobG9jYWxlKTtcbiAgfVxuICByZXR1cm4gaW5zdGFuY2VzW2xvY2FsZV07XG59XG5cbkluTWVtb3J5U3RvcmVGYWN0b3J5LmRlbGV0ZURhdGFiYXNlID0gKGxvY2FsZTogTG9jYWxlKSA9PiB7XG4gIC8vIE5vdCBpbXBsZW1lbnRlZCBmb3IgaW4gbWVtb3J5IGRhdGFzdG9yZVxufTtcblxuZXhwb3J0IGNsYXNzIEluTWVtb3J5U3RvcmUgZXh0ZW5kcyBEYXRhU3RvcmUge1xuICBwcml2YXRlIGNhdGVnb3JpZXM6IEdyb3VwTWVzc2FnZVtdO1xuICBwcml2YXRlIGVtb2ppczogRW1vamlbXTtcbiAgcHJpdmF0ZSBtZXRhOiBNZXRhO1xuXG4gIG9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgZGVsZXRlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIGNsb3NlKCk6IHZvaWQge1xuICAgIC8vIE5vdCBpbXBsZW1lbnRlZCBmb3IgaW4gbWVtb3J5IGRhdGFzdG9yZVxuICB9XG5cbiAgaXNQb3B1bGF0ZWQoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gIH1cblxuICBnZXRFbW9qaUNvdW50KCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmVtb2ppcy5sZW5ndGgpO1xuICB9XG5cbiAgZ2V0RXRhZ3MoKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+PiB7XG4gICAgLy8gTm90IGltcGxlbWVudGVkIGZvciBpbiBtZW1vcnkgZGF0YXN0b3JlXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IGZvbzogJ2Jhcid9KTtcbiAgfVxuXG4gIGdldEhhc2goKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyBOb3QgaW1wbGVtZW50ZWQgZm9yIGluIG1lbW9yeSBkYXRhc3RvcmVcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCcnKTtcbiAgfVxuXG4gIHBvcHVsYXRlKG9wdGlvbnM6IFBvcHVsYXRlT3B0aW9ucykge1xuICAgIHRoaXMuY2F0ZWdvcmllcyA9IG9wdGlvbnMuZ3JvdXBzO1xuICAgIHRoaXMuZW1vamlzID0gb3B0aW9ucy5lbW9qaXM7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgZ2V0Q2F0ZWdvcmllcyhvcHRpb25zOiBQaWNrZXJPcHRpb25zKTogUHJvbWlzZTxDYXRlZ29yeVtdPiB7XG4gICAgICBsZXQgY2F0ZWdvcmllczogQ2F0ZWdvcnlbXSA9IHRoaXMuY2F0ZWdvcmllcy5maWx0ZXIoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkua2V5ICE9PSAnY29tcG9uZW50JykgYXMgQ2F0ZWdvcnlbXTtcblxuICAgICAgaWYgKG9wdGlvbnMuc2hvd1JlY2VudHMpIHtcbiAgICAgICAgY2F0ZWdvcmllcy51bnNoaWZ0KHsga2V5OiAncmVjZW50cycsIG9yZGVyOiAtMSB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuY3VzdG9tPy5sZW5ndGgpIHtcbiAgICAgICAgY2F0ZWdvcmllcy5wdXNoKHsga2V5OiAnY3VzdG9tJywgb3JkZXI6IDEwIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5jYXRlZ29yaWVzKSB7XG4gICAgICAgIGNvbnN0IGluY2x1ZGVMaXN0ID0gb3B0aW9ucy5jYXRlZ29yaWVzIGFzIENhdGVnb3J5S2V5W107XG4gICAgICAgIGNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzLmZpbHRlcihjYXRlZ29yeSA9PiBpbmNsdWRlTGlzdC5pbmNsdWRlcyhjYXRlZ29yeS5rZXkpKTtcbiAgICAgICAgY2F0ZWdvcmllcy5zb3J0KChhOiBDYXRlZ29yeSwgYjogQ2F0ZWdvcnkpID0+IGluY2x1ZGVMaXN0LmluZGV4T2YoYS5rZXkpIC0gaW5jbHVkZUxpc3QuaW5kZXhPZihiLmtleSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2F0ZWdvcmllcy5zb3J0KChhOiBDYXRlZ29yeSwgYjogQ2F0ZWdvcnkpID0+IGEub3JkZXIgLSBiLm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjYXRlZ29yaWVzKTtcbiAgfVxuXG4gIGdldEVtb2ppcyhjYXRlZ29yeTogQ2F0ZWdvcnksIGVtb2ppVmVyc2lvbjogbnVtYmVyKTogUHJvbWlzZTxFbW9qaVJlY29yZFtdPiB7XG4gICAgY29uc3QgZW1vamlSZXN1bHRzID0gdGhpcy5lbW9qaXNcbiAgICAgIC5maWx0ZXIoZW1vamkgPT4gZW1vamkuZ3JvdXAgPT09IGNhdGVnb3J5Lm9yZGVyKVxuICAgICAgLmZpbHRlcigoZTogRW1vamkpID0+IGUudmVyc2lvbiA8PSBlbW9qaVZlcnNpb24pXG4gICAgICAuc29ydCgoYTogRW1vamksIGI6IEVtb2ppKSA9PiB7XG4gICAgICAgIGlmIChhLm9yZGVyICE9IG51bGwgJiYgYi5vcmRlciAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGEub3JkZXIgLSBiLm9yZGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9KS5tYXAoZ2V0RW1vamlSZWNvcmQpO1xuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhcHBseVJ1bGVzKGVtb2ppUmVzdWx0cywgZW1vamlWZXJzaW9uKSk7XG4gIH1cblxuICBzZWFyY2hFbW9qaXMocXVlcnk6IHN0cmluZywgY3VzdG9tRW1vamlzOiBFbW9qaVJlY29yZFtdLCBlbW9qaVZlcnNpb246IG51bWJlciwgY2F0ZWdvcmllczogQ2F0ZWdvcnlbXSk6IFByb21pc2U8RW1vamlSZWNvcmRbXT4ge1xuICAgIGNvbnN0IG1hdGNoaW5nRW1vamlzID0gdGhpcy5lbW9qaXNcbiAgICAgIC5maWx0ZXIoZW1vamkgPT4gcXVlcnlNYXRjaGVzKGVtb2ppLCBxdWVyeSwgY2F0ZWdvcmllcykgJiYgZW1vamkudmVyc2lvbiA8PSBlbW9qaVZlcnNpb24pXG4gICAgICAubWFwKGdldEVtb2ppUmVjb3JkKTtcblxuICAgIGNvbnN0IG1hdGNoaW5nQ3VzdG9tID0gY3VzdG9tRW1vamlzLmZpbHRlcihlbW9qaSA9PiBxdWVyeU1hdGNoZXMoZW1vamksIHF1ZXJ5LCBjYXRlZ29yaWVzKSk7XG5cbiAgICBjb25zdCByZXN1bHRzID0gW1xuICAgICAgLi4uYXBwbHlSdWxlcyhtYXRjaGluZ0Vtb2ppcywgZW1vamlWZXJzaW9uKSxcbiAgICAgIC4uLm1hdGNoaW5nQ3VzdG9tXG4gICAgXTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG4gIH1cblxuICBzZXRNZXRhKG1ldGE6IE1ldGEpIHtcbiAgICB0aGlzLm1ldGEgPSBtZXRhO1xuICB9XG59IiwgImltcG9ydCB7IExvY2FsZSwgTWVzc2FnZXNEYXRhc2V0LCBmZXRjaE1lc3NhZ2VzLCBmZXRjaEVtb2ppcywgRW1vamkgfSBmcm9tICdlbW9qaWJhc2UnO1xuLy8gaW1wb3J0IHsgRGF0YWJhc2UgfSBmcm9tICcuL2RiJztcbmltcG9ydCB7IERhdGFTdG9yZUZhY3RvcnksIERhdGFTdG9yZSB9IGZyb20gJy4vRGF0YVN0b3JlJztcbmltcG9ydCB7IGNvbXB1dGVIYXNoLCBpc1Nlc3Npb25TdG9yYWdlQXZhaWxhYmxlIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBjcmVhdGVTdG9yYWdlIH0gZnJvbSAnLi4vd2ViU3RvcmFnZVNoaW0nO1xuaW1wb3J0IHsgSW5NZW1vcnlTdG9yZUZhY3RvcnkgfSBmcm9tICcuL0luTWVtb3J5U3RvcmUnO1xuXG4vKipcbiAqIEdlbmVyYXRlcyB0aGUgVVJMcyBmb3IgZW1vamkgZGF0YSBmb3IgYSBnaXZlbiBlbW9qaWJhc2UgdmVyc2lvbiBhbmQgbG9jYWxlLlxuICogXG4gKiBAcGFyYW0gdmVyc2lvbiB0aGUgZW1vamliYXNlIHZlcnNpb24gKHVzdWFsbHkgJ2xhdGVzdCcgaXMgd2hhdCB5b3Ugd2FudClcbiAqIEBwYXJhbSBsb2NhbGUgdGhlIGxvY2FsZSBmb3IgdGhlIGRhdGFcbiAqIEByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSB0d28gVVJMc1xuICovXG5mdW5jdGlvbiBnZXRDZG5VcmxzKHZlcnNpb24sIGxvY2FsZSkge1xuICBjb25zdCBiYXNlID0gYGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZW1vamliYXNlLWRhdGFAJHt2ZXJzaW9ufS8ke2xvY2FsZX1gO1xuXG4gIHJldHVybiB7XG4gICAgZW1vamlzVXJsOiBgJHtiYXNlfS9kYXRhLmpzb25gLFxuICAgIG1lc3NhZ2VzVXJsOiBgJHtiYXNlfS9tZXNzYWdlcy5qc29uYCxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBFVGFnIGZvciB0aGUgZ2l2ZW4gVVJMIGJ5IG1ha2luZyBhIEhFQUQgcmVxdWVzdC5cbiAqIFxuICogQHBhcmFtIHVybCB0aGUgVVJMIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB0aGUgRVRhZyB2YWx1ZSwgb3IgbnVsbCBpZiBubyBFVGFnIHdhcyBmb3VuZFxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRFdGFnKHVybDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHsgbWV0aG9kOiAnSEVBRCcgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdldGFnJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBFVGFncyBmb3IgdGhlIGVtb2ppIGFuZCBtZXNzYWdlIGRhdGEuXG4gKiBcbiAqIEBwYXJhbSBlbW9qaXNVcmwgdGhlIFVSTCBvZiB0aGUgZW1vamkgZGF0YVxuICogQHBhcmFtIG1lc3NhZ2VzVXJsIHRoZSBVUkwgb2YgdGhlIG1lc3NhZ2UgZGF0YVxuICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2YgdGhlIEVUYWcgdmFsdWVzXG4gKi9cbmZ1bmN0aW9uIGdldEV0YWdzKGxvY2FsZSk6IFByb21pc2U8QXJyYXk8c3RyaW5nIHwgbnVsbD4+IHtcbiAgY29uc3QgeyBlbW9qaXNVcmwsIG1lc3NhZ2VzVXJsIH0gPSBnZXRDZG5VcmxzKCdsYXRlc3QnLCBsb2NhbGUpO1xuXG4gIHRyeSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgIGdldEV0YWcoZW1vamlzVXJsKSxcbiAgICAgIGdldEV0YWcobWVzc2FnZXNVcmwpLFxuICAgIF0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbbnVsbCwgbnVsbF0pO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBjYXRlZ29yeSBvciBlbW9qaSBkYXRhIGlzIG91dCBvZiBkYXRlLlxuICogXG4gKiBUaGlzIGlzIGRldGVybWluZWQgYnkgY2hlY2tpbmcgdGhlIEVUYWcgb2YgdGhlIGRhdGEgZnJvbSB0aGUgQ0ROLCBhbmQgZG93bmxvYWRpbmcgdGhlIGxhdGVzdCBpZiB0aGVcbiAqIEVUYWdzIGRvbid0IG1hdGNoLlxuICogXG4gKiBAcGFyYW0gZGIgdGhlIGRhdGFiYXNlXG4gKiBAcGFyYW0gZW1vamlzRXRhZyB0aGUgRVRhZyBvZiB0aGUgZW1vamlzIGRhdGFcbiAqIEBwYXJhbSBtZXNzYWdlc0V0YWcgdGhlIEVUYWcgb2YgdGhlIG1lc3NhZ2VzIGRhdGFcbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tVcGRhdGVzKGRiOiBEYXRhU3RvcmUsIGVtb2ppc0V0YWc6IHN0cmluZywgbWVzc2FnZXNFdGFnOiBzdHJpbmcpIHtcbiAgbGV0IGV0YWdzO1xuXG4gIHRyeSB7XG4gICAgZXRhZ3MgPSBhd2FpdCBkYi5nZXRFdGFncygpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGV0YWdzID0ge307XG4gIH1cblxuICBjb25zdCB7IHN0b3JlZEVtb2ppc0V0YWcsIHN0b3JlZE1lc3NhZ2VzRXRhZyB9ID0gZXRhZ3M7XG5cbiAgLy8gSWYgZWl0aGVyIEVUYWcgZG9lcyBub3QgbWF0Y2gsIHJlcG9wdWxhdGUgdGhlIGRhdGFiYXNlIHdpdGggdGhlIGxhdGVzdCBDRE4gZGF0YVxuICBpZiAobWVzc2FnZXNFdGFnICE9PSBzdG9yZWRNZXNzYWdlc0V0YWcgfHwgZW1vamlzRXRhZyAhPT0gc3RvcmVkRW1vamlzRXRhZykge1xuICAgIGNvbnN0IFttZXNzYWdlcywgZW1vamlzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtmZXRjaE1lc3NhZ2VzKGRiLmxvY2FsZSksIGZldGNoRW1vamlzKGRiLmxvY2FsZSldKTtcbiAgICBhd2FpdCBkYi5wb3B1bGF0ZSh7XG4gICAgICBncm91cHM6IG1lc3NhZ2VzLmdyb3VwcywgXG4gICAgICBlbW9qaXMsXG4gICAgICBlbW9qaXNFdGFnLFxuICAgICAgbWVzc2FnZXNFdGFnXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVja3MgZm9yIGEgbmV3IHZlcnNpb24gb2YgbG9jYWwgZW1vamkgZGF0YS4gVGhpcyBpcyBkb25lIGJ5IGNvbXBhcmluZyB0aGUgc3RvcmVkIGhhc2ggd2l0aCB0aGUgXG4gKiBuZXdseSBjb21wdXRlZCBvbmUuXG4gKiBcbiAqIEBwYXJhbSBkYiBUaGUgZGF0YWJhc2VcbiAqIEBwYXJhbSBoYXNoIFRoZSBoYXNoIG9mIHRoZSBsb2NhbCBlbW9qaSBkYXRhXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZXJlIGlzIGEgaGFzaCBtaXNtYXRjaCBhbmQgYSBkYXRhYmFzZSB1cGRhdGUgaXMgcmVxdWlyZWRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tMb2NhbFVwZGF0ZXMoZGI6IERhdGFTdG9yZSwgaGFzaDogc3RyaW5nKSB7XG4gIGNvbnN0IHN0b3JlZEhhc2ggPSBhd2FpdCBkYi5nZXRIYXNoKCk7XG4gIHJldHVybiBoYXNoICE9PSBzdG9yZWRIYXNoO1xufVxuXG4vKipcbiAqIE9wZW5zIHRoZSBkYXRhYmFzZS5cbiAqIFxuICogQHBhcmFtIGxvY2FsZSB0aGUgZGF0YWJhc2UgbG9jYWxlXG4gKiBAcGFyYW0gZXhpc3RpbmdEYiBhbnkgZXhpc3RpbmcgZGF0YWJhc2UgdG8gdXNlXG4gKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIGRhdGFiYXNlIGluc3RhbmNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG9wZW5EYXRhYmFzZShsb2NhbGU6IExvY2FsZSwgZmFjdG9yeTogRGF0YVN0b3JlRmFjdG9yeSwgZXhpc3RpbmdEYj86IERhdGFTdG9yZSk6IFByb21pc2U8RGF0YVN0b3JlPiB7XG4gIGxldCBkYiA9IGV4aXN0aW5nRGIgfHwgZmFjdG9yeShsb2NhbGUpO1xuICB0cnkge1xuICAgIGF3YWl0IGRiLm9wZW4oKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ1twaWNtb10gSW5kZXhlZERCIG5vdCBhdmFpbGFibGUsIGZhbGxpbmcgYmFjayB0byBJbk1lbW9yeVN0b3JlRmFjdG9yeScpO1xuICAgIGRiID0gSW5NZW1vcnlTdG9yZUZhY3RvcnkobG9jYWxlKTtcbiAgfVxuXG4gIHJldHVybiBkYjtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbiBlbW9qaSBkYXRhYmFzZSB3aXRoIGRhdGEgZnJvbSB0aGUgQ0ROLlxuICogXG4gKiBAcGFyYW0gbG9jYWxlIHRoZSBsb2NhbGUgZm9yIHRoZSBkYXRhYmFzZVxuICogQHBhcmFtIGV4aXN0aW5nRGIgYW55IGV4aXN0aW5nIGRhdGFiYXNlIHRvIHJlcG9wdWxhdGVcbiAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgZnVsbHkgcG9wdWxhdGVkIGRhdGFiYXNlIGluc3RhbmNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGluaXREYXRhYmFzZUZyb21DZG4obG9jYWxlOiBMb2NhbGUsIGZhY3Rvcnk6IERhdGFTdG9yZUZhY3RvcnksIGV4aXN0aW5nRGI/OiBEYXRhU3RvcmUpIHtcbiAgaWYgKCFpc1Nlc3Npb25TdG9yYWdlQXZhaWxhYmxlKCkgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gc3RvcmFnZSBpcyByZXF1aXJlZCB0byB1c2UgQ0ROIGVtb2ppIGRhdGEuJyk7XG4gIH1cblxuICBjb25zdCBkYiA9IGF3YWl0IG9wZW5EYXRhYmFzZShsb2NhbGUsIGZhY3RvcnksIGV4aXN0aW5nRGIpO1xuICBjb25zdCBbZW1vamlzRXRhZywgbWVzc2FnZXNFdGFnXSA9IGF3YWl0IGdldEV0YWdzKGxvY2FsZSk7XG5cbiAgaWYgKCEoYXdhaXQgZGIuaXNQb3B1bGF0ZWQoKSkpIHtcbiAgICBjb25zdCBbbWVzc2FnZXMsIGVtb2ppc10gPSBhd2FpdCBQcm9taXNlLmFsbChbZmV0Y2hNZXNzYWdlcyhsb2NhbGUpLCBmZXRjaEVtb2ppcyhsb2NhbGUpXSk7XG4gICAgYXdhaXQgZGIucG9wdWxhdGUoeyBncm91cHM6IG1lc3NhZ2VzLmdyb3VwcywgZW1vamlzLCBlbW9qaXNFdGFnLCBtZXNzYWdlc0V0YWcgfSk7XG4gIH0gZWxzZSBpZiAoZW1vamlzRXRhZyAmJiBtZXNzYWdlc0V0YWcpIHtcbiAgICBhd2FpdCBjaGVja1VwZGF0ZXMoZGIsIGVtb2ppc0V0YWcsIG1lc3NhZ2VzRXRhZyk7XG4gIH1cblxuICByZXR1cm4gZGI7XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYW4gZW1vamkgZGF0YWJhc2Ugd2l0aCBsb2NhbCBkYXRhIGZyb20gdGhlIGVtb2ppYmFzZS1kYXRhIHBhY2thZ2UuXG4gKiBcbiAqIEBwYXJhbSBsb2NhbGUgdGhlIGxvY2FsZVxuICogQHBhcmFtIG1lc3NhZ2VzIHRoZSBtZXNzYWdlcyBkYXRhc2V0XG4gKiBAcGFyYW0gZW1vamlzIHRoZSBlbW9qaSBkYXRhc2V0XG4gKiBAcGFyYW0gZXhpc3RpbmdEYiBhbnkgZXhpc3RpbmcgZGF0YWJhc2UgdG8gcmVwb3B1bGF0ZVxuICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBmdWxseSBwb3B1bGF0ZWQgZGF0YWJhc2UgaW5zdGFuY2VcbiAqL1xuYXN5bmMgZnVuY3Rpb24gaW5pdERhdGFiYXNlV2l0aExvY2FsRGF0YShsb2NhbGU6IExvY2FsZSwgZmFjdG9yeTogRGF0YVN0b3JlRmFjdG9yeSwgbWVzc2FnZXM6IE1lc3NhZ2VzRGF0YXNldCwgZW1vamlzOiBFbW9qaVtdLCBleGlzdGluZ0RiPzogRGF0YVN0b3JlKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRhdGFiYXNlKGxvY2FsZSwgZmFjdG9yeSwgZXhpc3RpbmdEYik7XG5cbiAgY29uc3QgaGFzaCA9IGF3YWl0IGNvbXB1dGVIYXNoKGVtb2ppcyk7XG4gIGlmICghKGF3YWl0IGRiLmlzUG9wdWxhdGVkKCkpIHx8IGF3YWl0IGNoZWNrTG9jYWxVcGRhdGVzKGRiLCBoYXNoKSkge1xuICAgIGF3YWl0IGRiLnBvcHVsYXRlKHsgZ3JvdXBzOiBtZXNzYWdlcy5ncm91cHMsIGVtb2ppcywgaGFzaCB9KTtcbiAgfVxuXG4gIHJldHVybiBkYjtcbn1cblxuLyoqXG4gKiBQdWJsaWMgQVBJIGZvciBpbml0aWFsaXppbmcgYSBkYXRhYmFzZS5cbiAqIFxuICogQHBhcmFtIGxvY2FsZSB0aGUgbG9jYWxlXG4gKiBAcGFyYW0gc3RhdGljTWVzc2FnZXMgbG9jYWwgbWVzc2FnZXMgZGF0YXNldCwgaWYgYW55XG4gKiBAcGFyYW0gc3RhdGljRW1vamlzIGxvY2FsIGVtb2ppIGRhdGFzZXQsIGlmIGFueVxuICogQHBhcmFtIGV4aXN0aW5nRGIgYW55IGV4aXN0aW5nIGRhdGFiYXNlIHRvIHJlcG9wdWxhdGVcbiAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBkYXRhYmFzZSBpbnN0YW5jZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdERhdGFiYXNlKGxvY2FsZTogTG9jYWxlLCBmYWN0b3J5OiBEYXRhU3RvcmVGYWN0b3J5LCBzdGF0aWNNZXNzYWdlcz86IE1lc3NhZ2VzRGF0YXNldCwgc3RhdGljRW1vamlzPzogRW1vamlbXSwgZXhpc3RpbmdEYj86IERhdGFTdG9yZSkge1xuICBpZiAoc3RhdGljTWVzc2FnZXMgJiYgc3RhdGljRW1vamlzKSB7XG4gICAgcmV0dXJuIGluaXREYXRhYmFzZVdpdGhMb2NhbERhdGEobG9jYWxlLCBmYWN0b3J5LCBzdGF0aWNNZXNzYWdlcywgc3RhdGljRW1vamlzLCBleGlzdGluZ0RiKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaW5pdERhdGFiYXNlRnJvbUNkbihsb2NhbGUsIGZhY3RvcnksIGV4aXN0aW5nRGIpO1xuICB9XG59XG5cbi8qKlxuICogRGVsZXRlcyBhIGRhdGFiYXNlIGluc3RhbmNlIGZvciBhIGxvY2FsZS5cbiAqIEBwYXJhbSBsb2NhbGUgdGhlIGxvY2FsZSB0byBkZWxldGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZURhdGFiYXNlKGZhY3Rvcnk6IERhdGFTdG9yZUZhY3RvcnksIGxvY2FsZTogTG9jYWxlKSB7XG4gIGZhY3RvcnkuZGVsZXRlRGF0YWJhc2UobG9jYWxlKTtcbn1cbiIsICJleHBvcnQgY2xhc3MgRm9jdXNUcmFwIHtcbiAgcHJpdmF0ZSByb290RWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5oYW5kbGVLZXlEb3duID0gdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcyk7XG4gIH1cblxuICBhY3RpdmF0ZShyb290RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICB0aGlzLnJvb3RFbGVtZW50ID0gcm9vdEVsZW1lbnQ7XG4gICAgdGhpcy5yb290RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duKTtcbiAgfVxuXG4gIGRlYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5yb290RWxlbWVudD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XG4gIH1cblxuICBnZXQgZm9jdXNhYmxlRWxlbWVudHMoKTogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4ge1xuICAgIHJldHVybiB0aGlzLnJvb3RFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCdpbnB1dCwgW3RhYmluZGV4PVwiMFwiXScpO1xuICB9XG5cbiAgZ2V0IGxhc3RGb2N1c2FibGVFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5mb2N1c2FibGVFbGVtZW50c1t0aGlzLmZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCAtIDFdO1xuICB9XG5cbiAgZ2V0IGZpcnN0Rm9jdXNhYmxlRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXNhYmxlRWxlbWVudHNbMF07XG4gIH1cblxuICBjaGVja0ZvY3VzKGV2ZW50OiBLZXlib2FyZEV2ZW50LCByZWZlcmVuY2VFbGVtZW50OiBIVE1MRWxlbWVudCwgdGFyZ2V0RWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSByZWZlcmVuY2VFbGVtZW50KSB7XG4gICAgICB0YXJnZXRFbGVtZW50LmZvY3VzKCk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnVGFiJykge1xuICAgICAgdGhpcy5jaGVja0ZvY3VzKFxuICAgICAgICBldmVudCxcbiAgICAgICAgZXZlbnQuc2hpZnRLZXkgPyB0aGlzLmZpcnN0Rm9jdXNhYmxlRWxlbWVudCA6IHRoaXMubGFzdEZvY3VzYWJsZUVsZW1lbnQsXG4gICAgICAgIGV2ZW50LnNoaWZ0S2V5ID8gdGhpcy5sYXN0Rm9jdXNhYmxlRWxlbWVudCA6IHRoaXMuZmlyc3RGb2N1c2FibGVFbGVtZW50XG4gICAgICApO1xuICAgIH1cbiAgfVxufSIsICJpbXBvcnQgeyBnZXRQcmVmaXhlZENsYXNzZXMgfSBmcm9tICcuL3V0aWwnO1xuXG5jb25zdCB7XG4gIGxpZ2h0OiBsaWdodFRoZW1lLFxuICBkYXJrOiBkYXJrVGhlbWUsXG4gIGF1dG86IGF1dG9UaGVtZVxufSA9IGdldFByZWZpeGVkQ2xhc3NlcygnbGlnaHQnLCAnZGFyaycsICdhdXRvJyk7XG5cbmV4cG9ydCB7IGxpZ2h0VGhlbWUsIGRhcmtUaGVtZSwgYXV0b1RoZW1lIH07XG4iLCAiaW1wb3J0IHsgVGVtcGxhdGUsIFRlbXBsYXRlRGF0YSB9IGZyb20gJy4uL1RlbXBsYXRlJztcbmltcG9ydCB7IEFwcEV2ZW50LCBBcHBFdmVudEtleSB9IGZyb20gJy4uL0FwcEV2ZW50cyc7XG5pbXBvcnQgeyBFdmVudHMsIEV2ZW50QXJncywgRXZlbnRDYWxsYmFjaywgQXN5bmNFdmVudENhbGxiYWNrIH0gZnJvbSAnLi4vZXZlbnRzJztcbmltcG9ydCB7IFZpZXdGYWN0b3J5IH0gZnJvbSAnLi4vdmlld0ZhY3RvcnknO1xuaW1wb3J0IHsgQnVuZGxlIH0gZnJvbSAnLi4vaTE4bi9idW5kbGUnO1xuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICcuLi9yZW5kZXJlcnMvcmVuZGVyZXInO1xuaW1wb3J0IHsgRGF0YVN0b3JlIH0gZnJvbSAnLi4vZGF0YS9EYXRhU3RvcmUnO1xuaW1wb3J0IHsgRW1vamlSZWNvcmQsIFBpY2tlck9wdGlvbnMgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBzaG91bGRBbmltYXRlIH0gZnJvbSAnLi4vdXRpbCc7XG5cbnR5cGUgVUlFdmVudExpc3RlbmVyQmluZGluZyA9IHtcbiAgdGFyZ2V0Pzogc3RyaW5nO1xuICBldmVudDogc3RyaW5nO1xuICBoYW5kbGVyOiBFdmVudENhbGxiYWNrO1xuICBvcHRpb25zPzogQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnM7XG59O1xuXG50eXBlIEtleUJpbmRpbmdzID0gUmVjb3JkPHN0cmluZywgKEtleWJvYXJkRXZlbnQ/KSA9PiB2b2lkPjtcblxudHlwZSBBcHBFdmVudHMgPSB7XG4gIFtrZXkgaW4gQXBwRXZlbnRdPzogRXZlbnRDYWxsYmFjayB8IEFzeW5jRXZlbnRDYWxsYmFjaztcbn07XG5cbnR5cGUgQ2xhc3NNYXBwaW5ncyA9IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG50eXBlIFVJRWxlbWVudFNlbGVjdG9ycyA9IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG50eXBlIFVJRWxlbWVudE1hcHBpbmdzID0gUmVjb3JkPHN0cmluZywgSFRNTEVsZW1lbnQ+O1xuXG50eXBlIFZpZXdPcHRpb25zID0ge1xuICB0ZW1wbGF0ZTogVGVtcGxhdGU7XG4gIGNsYXNzZXM/OiBDbGFzc01hcHBpbmdzO1xuICBwYXJlbnQ/OiBIVE1MRWxlbWVudDtcbn07XG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVmlldyB7XG4gIGVsOiBIVE1MRWxlbWVudDtcbiAgaXNEZXN0cm95ZWQgPSBmYWxzZTtcblxuICBwcml2YXRlIHRlbXBsYXRlOiBUZW1wbGF0ZTtcbiAgcHJpdmF0ZSBjbGFzc2VzPzogQ2xhc3NNYXBwaW5ncztcblxuICBwcm90ZWN0ZWQgYXBwRXZlbnRzOiBBcHBFdmVudHMgPSB7fTtcbiAgcHJvdGVjdGVkIHVpRXZlbnRzOiBVSUV2ZW50TGlzdGVuZXJCaW5kaW5nW10gPSBbXTtcbiAgcHJvdGVjdGVkIGtleUJpbmRpbmdzOiBLZXlCaW5kaW5ncztcbiAgcHJvdGVjdGVkIHVpRWxlbWVudHM6IFVJRWxlbWVudFNlbGVjdG9ycyA9IHt9O1xuICBwcm90ZWN0ZWQgZW1vamlEYXRhOiBEYXRhU3RvcmU7XG4gIHByb3RlY3RlZCBlbW9qaURhdGFQcm9taXNlOiBQcm9taXNlPERhdGFTdG9yZT47XG4gIHByb3RlY3RlZCBvcHRpb25zOiBQaWNrZXJPcHRpb25zO1xuICBwcm90ZWN0ZWQgY3VzdG9tRW1vamlzOiBFbW9qaVJlY29yZFtdO1xuXG4gIHByb3RlY3RlZCBldmVudHM6IEV2ZW50czxBcHBFdmVudD47XG4gIHByb3RlY3RlZCBpMThuOiBCdW5kbGU7XG4gIHByb3RlY3RlZCByZW5kZXJlcjogUmVuZGVyZXI7XG4gIHByb3RlY3RlZCBwaWNrZXJJZDogc3RyaW5nO1xuXG4gIHByb3RlY3RlZCBwYXJlbnQ/OiBIVE1MRWxlbWVudDtcblxuICB2aWV3RmFjdG9yeTogVmlld0ZhY3Rvcnk7XG5cbiAgdWk6IFVJRWxlbWVudE1hcHBpbmdzID0ge307XG5cbiAgY29uc3RydWN0b3IoeyB0ZW1wbGF0ZSwgY2xhc3NlcywgcGFyZW50IH06IFZpZXdPcHRpb25zKSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHRoaXMuY2xhc3NlcyA9IGNsYXNzZXM7XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG5cbiAgICB0aGlzLmtleUJpbmRpbmdIYW5kbGVyID0gdGhpcy5rZXlCaW5kaW5nSGFuZGxlci5iaW5kKHRoaXMpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLmJpbmRBcHBFdmVudHMoKTtcbiAgfVxuXG4gIHNldEN1c3RvbUVtb2ppcyhjdXN0b21FbW9qaXM6IEVtb2ppUmVjb3JkW10pIHtcbiAgICB0aGlzLmN1c3RvbUVtb2ppcyA9IGN1c3RvbUVtb2ppcztcbiAgfVxuXG4gIHNldEV2ZW50cyhldmVudHM6IEV2ZW50czxBcHBFdmVudD4pIHtcbiAgICB0aGlzLmV2ZW50cyA9IGV2ZW50cztcbiAgfVxuXG4gIHNldFBpY2tlcklkKHBpY2tlcklkOiBzdHJpbmcpIHtcbiAgICB0aGlzLnBpY2tlcklkID0gcGlja2VySWQ7XG4gIH1cblxuICBlbWl0KGV2ZW50OiBBcHBFdmVudEtleSwgLi4uYXJnczogRXZlbnRBcmdzKSB7XG4gICAgdGhpcy5ldmVudHMuZW1pdChldmVudCwgLi4uYXJncyk7XG4gIH1cblxuICBzZXRJMThuKGkxOG46IEJ1bmRsZSkge1xuICAgIHRoaXMuaTE4biA9IGkxOG47XG4gIH1cblxuICBzZXRSZW5kZXJlcihyZW5kZXJlcjogUmVuZGVyZXIpIHtcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cblxuICBzZXRFbW9qaURhdGEoZW1vamlEYXRhUHJvbWlzZTogUHJvbWlzZTxEYXRhU3RvcmU+KSB7XG4gICAgdGhpcy5lbW9qaURhdGFQcm9taXNlID0gZW1vamlEYXRhUHJvbWlzZTtcbiAgICBlbW9qaURhdGFQcm9taXNlLnRoZW4oZW1vamlEYXRhID0+IHtcbiAgICAgIHRoaXMuZW1vamlEYXRhID0gZW1vamlEYXRhO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlRW1vamlEYXRhKGVtb2ppRGF0YTogRGF0YVN0b3JlKSB7XG4gICAgdGhpcy5lbW9qaURhdGEgPSBlbW9qaURhdGE7XG4gICAgdGhpcy5lbW9qaURhdGFQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGVtb2ppRGF0YSk7XG4gIH1cblxuICBzZXRPcHRpb25zKG9wdGlvbnM6IFBpY2tlck9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgYW5pbWF0ZVNob3c/OiAoKSA9PiBQcm9taXNlPEFuaW1hdGlvbiB8IHZvaWQgfCBBbmltYXRpb25bXSB8IChBbmltYXRpb24gfCB2b2lkKVtdID47XG5cbiAgcmVuZGVyU3luYyh0ZW1wbGF0ZURhdGE6IFRlbXBsYXRlRGF0YSA9IHt9KTogSFRNTEVsZW1lbnQge1xuICAgIHRoaXMuZWwgPSB0aGlzLnRlbXBsYXRlLnJlbmRlclN5bmMoe1xuICAgICAgY2xhc3NlczogdGhpcy5jbGFzc2VzLFxuICAgICAgaTE4bjogdGhpcy5pMThuLFxuICAgICAgcGlja2VySWQ6IHRoaXMucGlja2VySWQsXG4gICAgICAuLi50ZW1wbGF0ZURhdGFcbiAgICB9KSBhcyBIVE1MRWxlbWVudDtcblxuICAgIHRoaXMucG9zdFJlbmRlcigpO1xuICAgIHJldHVybiB0aGlzLmVsO1xuICB9XG5cbiAgYXN5bmMgcmVuZGVyKHRlbXBsYXRlRGF0YTogVGVtcGxhdGVEYXRhID0ge30pOiBQcm9taXNlPEhUTUxFbGVtZW50PiB7XG4gICAgYXdhaXQgdGhpcy5lbW9qaURhdGFQcm9taXNlO1xuXG4gICAgdGhpcy5lbCA9IGF3YWl0IHRoaXMudGVtcGxhdGUucmVuZGVyQXN5bmMoe1xuICAgICAgY2xhc3NlczogdGhpcy5jbGFzc2VzLFxuICAgICAgaTE4bjogdGhpcy5pMThuLFxuICAgICAgcGlja2VySWQ6IHRoaXMucGlja2VySWQsXG4gICAgICAuLi50ZW1wbGF0ZURhdGFcbiAgICB9KTtcbiAgICB0aGlzLnBvc3RSZW5kZXIoKTtcbiAgICByZXR1cm4gdGhpcy5lbDtcbiAgfVxuXG4gIHByaXZhdGUgcG9zdFJlbmRlcigpIHtcbiAgICB0aGlzLmJpbmRVSUVsZW1lbnRzKCk7XG4gICAgdGhpcy5iaW5kS2V5QmluZGluZ3MoKTtcbiAgICB0aGlzLmJpbmRVSUV2ZW50cygpO1xuICAgIHRoaXMuc2NoZWR1bGVTaG93QW5pbWF0aW9uKCk7XG4gIH1cblxuICBwcml2YXRlIGJpbmRBcHBFdmVudHMoKSB7XG4gICAgT2JqZWN0LmtleXModGhpcy5hcHBFdmVudHMpLmZvckVhY2goZXZlbnQgPT4ge1xuICAgICAgdGhpcy5ldmVudHMub24oZXZlbnQgYXMgQXBwRXZlbnRLZXksIHRoaXMuYXBwRXZlbnRzW2V2ZW50XSwgdGhpcyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmV2ZW50cy5vbignZGF0YTpyZWFkeScsIHRoaXMudXBkYXRlRW1vamlEYXRhLCB0aGlzKTtcbiAgfVxuXG4gIHByaXZhdGUgdW5iaW5kQXBwRXZlbnRzKCkge1xuICAgIE9iamVjdC5rZXlzKHRoaXMuYXBwRXZlbnRzKS5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMuZXZlbnRzLm9mZihldmVudCBhcyBBcHBFdmVudEtleSwgdGhpcy5hcHBFdmVudHNbZXZlbnRdKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZXZlbnRzLm9mZignZGF0YTpyZWFkeScsIHRoaXMudXBkYXRlRW1vamlEYXRhKTtcbiAgfVxuXG4gIHByaXZhdGUga2V5QmluZGluZ0hhbmRsZXIoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5rZXlCaW5kaW5nc1tldmVudC5rZXldO1xuICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICBoYW5kbGVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYmluZEtleUJpbmRpbmdzKCkge1xuICAgIGlmICh0aGlzLmtleUJpbmRpbmdzKSB7XG4gICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleUJpbmRpbmdIYW5kbGVyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVuYmluZEtleUJpbmRpbmdzKCkge1xuICAgIGlmICh0aGlzLmtleUJpbmRpbmdzKSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleUJpbmRpbmdIYW5kbGVyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGJpbmRVSUVsZW1lbnRzKCkge1xuICAgIHRoaXMudWkgPSBPYmplY3Qua2V5cyh0aGlzLnVpRWxlbWVudHMpLnJlZHVjZSgocmVzdWx0LCBrZXkpID0+ICh7XG4gICAgICAuLi5yZXN1bHQsXG4gICAgICBba2V5XTogdGhpcy5lbC5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50Pih0aGlzLnVpRWxlbWVudHNba2V5XSlcbiAgICB9KSwge30pO1xuICB9XG5cbiAgcHJpdmF0ZSBiaW5kVUlFdmVudHMoKSB7XG4gICAgdGhpcy51aUV2ZW50cy5mb3JFYWNoKChiaW5kaW5nOiBVSUV2ZW50TGlzdGVuZXJCaW5kaW5nKSA9PiB7XG4gICAgICBiaW5kaW5nLmhhbmRsZXIgPSBiaW5kaW5nLmhhbmRsZXIuYmluZCh0aGlzKTtcblxuICAgICAgY29uc3QgdGFyZ2V0ID0gYmluZGluZy50YXJnZXQgPyB0aGlzLnVpW2JpbmRpbmcudGFyZ2V0XSA6IHRoaXMuZWw7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihiaW5kaW5nLmV2ZW50LCBiaW5kaW5nLmhhbmRsZXIsIGJpbmRpbmcub3B0aW9ucyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVuYmluZFVJRXZlbnRzKCkge1xuICAgIHRoaXMudWlFdmVudHMuZm9yRWFjaCgoYmluZGluZzogVUlFdmVudExpc3RlbmVyQmluZGluZykgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gYmluZGluZy50YXJnZXQgPyB0aGlzLnVpW2JpbmRpbmcudGFyZ2V0XSA6IHRoaXMuZWw7XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihiaW5kaW5nLmV2ZW50LCBiaW5kaW5nLmhhbmRsZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnVuYmluZEFwcEV2ZW50cygpO1xuICAgIHRoaXMudW5iaW5kVUlFdmVudHMoKTtcbiAgICB0aGlzLnVuYmluZEtleUJpbmRpbmdzKCk7XG5cbiAgICB0aGlzLmVsLnJlbW92ZSgpO1xuICAgIHRoaXMuaXNEZXN0cm95ZWQgPSB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZVNob3dBbmltYXRpb24oKSB7XG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGxpc3QgPT4ge1xuICAgICAgICBjb25zdCBbcmVjb3JkXSA9IGxpc3Q7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gJ2NoaWxkTGlzdCcgJiYgcmVjb3JkLmFkZGVkTm9kZXNbMF0gPT09IHRoaXMuZWwpIHtcbiAgICAgICAgICBpZiAoc2hvdWxkQW5pbWF0ZSh0aGlzLm9wdGlvbnMpICYmIHRoaXMuYW5pbWF0ZVNob3cpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVNob3coKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnBhcmVudCBhcyBOb2RlLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY2hpbGRFdmVudCh0YXJnZXQ6IHN0cmluZywgZXZlbnQ6IHN0cmluZywgaGFuZGxlcjogRXZlbnRDYWxsYmFjaywgb3B0aW9uczogQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMgPSB7fSk6IFVJRXZlbnRMaXN0ZW5lckJpbmRpbmcge1xuICAgIHJldHVybiB7IHRhcmdldCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMgfTtcbiAgfVxuXG4gIHN0YXRpYyB1aUV2ZW50KGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEV2ZW50Q2FsbGJhY2ssIG9wdGlvbnM6IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zID0ge30pOiBVSUV2ZW50TGlzdGVuZXJCaW5kaW5nIHtcbiAgICByZXR1cm4geyBldmVudCwgaGFuZGxlciwgb3B0aW9ucyB9O1xuICB9XG5cbiAgc3RhdGljIGJ5Q2xhc3MoY2xhc3NOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBgLiR7Y2xhc3NOYW1lfWA7XG4gIH1cbn1cbiIsICJleHBvcnQgZGVmYXVsdCBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgNTEyIDUxMlxcXCI+PCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjEuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggZD1cXFwiTTI1NiA1MTJDMTE0LjYgNTEyIDAgMzk3LjQgMCAyNTZDMCAxMTQuNiAxMTQuNiAwIDI1NiAwQzM5Ny40IDAgNTEyIDExNC42IDUxMiAyNTZDNTEyIDM5Ny40IDM5Ny40IDUxMiAyNTYgNTEyek0yMzIgMjU2QzIzMiAyNjQgMjM2IDI3MS41IDI0Mi43IDI3NS4xTDMzOC43IDMzOS4xQzM0OS43IDM0Ny4zIDM2NC42IDM0NC4zIDM3MS4xIDMzMy4zQzM3OS4zIDMyMi4zIDM3Ni4zIDMwNy40IDM2NS4zIDMwMEwyODAgMjQzLjJWMTIwQzI4MCAxMDYuNyAyNjkuMyA5NiAyNTUuMSA5NkMyNDIuNyA5NiAyMzEuMSAxMDYuNyAyMzEuMSAxMjBMMjMyIDI1NnpcXFwiLz48L3N2Zz5cIiIsICJleHBvcnQgZGVmYXVsdCBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgNTEyIDUxMlxcXCI+PCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjEuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggZD1cXFwiTTY0IDQ5NkM2NCA1MDQuOCA1Ni43NSA1MTIgNDggNTEyaC0zMkM3LjI1IDUxMiAwIDUwNC44IDAgNDk2VjMyYzAtMTcuNzUgMTQuMjUtMzIgMzItMzJzMzIgMTQuMjUgMzIgMzJWNDk2ek00NzYuMyAwYy02LjM2NSAwLTEzLjAxIDEuMzUtMTkuMzQgNC4yMzNjLTQ1LjY5IDIwLjg2LTc5LjU2IDI3Ljk0LTEwNy44IDI3Ljk0Yy01OS45NiAwLTk0LjgxLTMxLjg2LTE2My45LTMxLjg3QzE2MC45IC4zMDU1IDEzMS42IDQuODY3IDk2IDE1Ljc1djM1MC41YzMyLTkuOTg0IDU5Ljg3LTE0LjEgODQuODUtMTQuMWM3My42MyAwIDEyNC45IDMxLjc4IDE5OC42IDMxLjc4YzMxLjkxIDAgNjguMDItNS45NzEgMTExLjEtMjMuMDlDNTA0LjEgMzU1LjkgNTEyIDM0NC40IDUxMiAzMzIuMVYzMC43M0M1MTIgMTEuMSA0OTUuMyAwIDQ3Ni4zIDB6XFxcIi8+PC9zdmc+XCIiLCAiZXhwb3J0IGRlZmF1bHQgXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDUxMiA1MTJcXFwiPjwhLS0hIEZvbnQgQXdlc29tZSBQcm8gNi4xLjEgYnkgQGZvbnRhd2Vzb21lIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20gTGljZW5zZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tL2xpY2Vuc2UgKENvbW1lcmNpYWwgTGljZW5zZSkgQ29weXJpZ2h0IDIwMjIgRm9udGljb25zLCBJbmMuIC0tPjxwYXRoIGQ9XFxcIk0wIDI1NkMwIDExNC42IDExNC42IDAgMjU2IDBDMzk3LjQgMCA1MTIgMTE0LjYgNTEyIDI1NkM1MTIgMzk3LjQgMzk3LjQgNTEyIDI1NiA1MTJDMTE0LjYgNTEyIDAgMzk3LjQgMCAyNTZ6TTE3Ni40IDI0MEMxOTQgMjQwIDIwOC40IDIyNS43IDIwOC40IDIwOEMyMDguNCAxOTAuMyAxOTQgMTc2IDE3Ni40IDE3NkMxNTguNyAxNzYgMTQ0LjQgMTkwLjMgMTQ0LjQgMjA4QzE0NC40IDIyNS43IDE1OC43IDI0MCAxNzYuNCAyNDB6TTMzNi40IDE3NkMzMTguNyAxNzYgMzA0LjQgMTkwLjMgMzA0LjQgMjA4QzMwNC40IDIyNS43IDMxOC43IDI0MCAzMzYuNCAyNDBDMzU0IDI0MCAzNjguNCAyMjUuNyAzNjguNCAyMDhDMzY4LjQgMTkwLjMgMzU0IDE3NiAzMzYuNCAxNzZ6TTI1OS45IDM2OS40QzI4OC44IDM2OS40IDMxNi4yIDM3NS4yIDM0MC42IDM4NS41QzM1Mi45IDM5MC43IDM2Ni43IDM4MS4zIDM2MS40IDM2OS4xQzM0NC44IDMzMC45IDMwNS42IDMwMy4xIDI1OS45IDMwMy4xQzIxNC4zIDMwMy4xIDE3NS4xIDMzMC44IDE1OC40IDM2OS4xQzE1My4xIDM4MS4zIDE2Ni4xIDM5MC42IDE3OS4zIDM4NS40QzIwMy43IDM3NS4xIDIzMSAzNjkuNCAyNTkuOSAzNjkuNEwyNTkuOSAzNjkuNHpcXFwiLz48L3N2Zz5cIiIsICJleHBvcnQgZGVmYXVsdCBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgNjQwIDUxMlxcXCI+PCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjEuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggZD1cXFwiTTQ0OCA2NEgxOTJDODUuOTYgNjQgMCAxNDkuMSAwIDI1NnM4NS45NiAxOTIgMTkyIDE5MmgyNTZjMTA2IDAgMTkyLTg1Ljk2IDE5Mi0xOTJTNTU0IDY0IDQ0OCA2NHpNMjQ3LjEgMjgwaC0zMnYzMmMwIDEzLjItMTAuNzggMjQtMjMuOTggMjRjLTEzLjIgMC0yNC4wMi0xMC44LTI0LjAyLTI0di0zMkwxMzYgMjc5LjFDMTIyLjggMjc5LjEgMTExLjEgMjY5LjIgMTExLjEgMjU2YzAtMTMuMiAxMC44NS0yNC4wMSAyNC4wNS0yNC4wMUwxNjcuMSAyMzJ2LTMyYzAtMTMuMiAxMC44Mi0yNCAyNC4wMi0yNGMxMy4yIDAgMjMuOTggMTAuOCAyMy45OCAyNHYzMmgzMmMxMy4yIDAgMjQuMDIgMTAuOCAyNC4wMiAyNEMyNzEuMSAyNjkuMiAyNjEuMiAyODAgMjQ3LjEgMjgwek00MzEuMSAzNDRjLTIyLjEyIDAtMzkuMS0xNy44Ny0zOS4xLTM5LjFzMTcuODctNDAgMzkuMS00MHMzOS4xIDE3Ljg4IDM5LjEgNDBTNDU0LjEgMzQ0IDQzMS4xIDM0NHpNNDk1LjEgMjQ4Yy0yMi4xMiAwLTM5LjEtMTcuODctMzkuMS0zOS4xczE3Ljg3LTQwIDM5LjEtNDBjMjIuMTIgMCAzOS4xIDE3Ljg4IDM5LjEgNDBTNTE4LjEgMjQ4IDQ5NS4xIDI0OHpcXFwiLz48L3N2Zz5cIiIsICJleHBvcnQgZGVmYXVsdCBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgMzg0IDUxMlxcXCI+PCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjEuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggZD1cXFwiTTExMi4xIDQ1NC4zYzAgNi4yOTcgMS44MTYgMTIuNDQgNS4yODQgMTcuNjlsMTcuMTQgMjUuNjljNS4yNSA3Ljg3NSAxNy4xNyAxNC4yOCAyNi42NCAxNC4yOGg2MS42N2M5LjQzOCAwIDIxLjM2LTYuNDAxIDI2LjYxLTE0LjI4bDE3LjA4LTI1LjY4YzIuOTM4LTQuNDM4IDUuMzQ4LTEyLjM3IDUuMzQ4LTE3LjdMMjcyIDQxNS4xaC0xNjBMMTEyLjEgNDU0LjN6TTE5MS40IC4wMTMyQzg5LjQ0IC4zMjU3IDE2IDgyLjk3IDE2IDE3NS4xYzAgNDQuMzggMTYuNDQgODQuODQgNDMuNTYgMTE1LjhjMTYuNTMgMTguODQgNDIuMzQgNTguMjMgNTIuMjIgOTEuNDVjLjAzMTMgLjI1IC4wOTM4IC41MTY2IC4xMjUgLjc4MjNoMTYwLjJjLjAzMTMtLjI2NTYgLjA5MzgtLjUxNjYgLjEyNS0uNzgyM2M5Ljg3NS0zMy4yMiAzNS42OS03Mi42MSA1Mi4yMi05MS40NUMzNTEuNiAyNjAuOCAzNjggMjIwLjQgMzY4IDE3NS4xQzM2OCA3OC42MSAyODguOS0uMjgzNyAxOTEuNCAuMDEzMnpNMTkyIDk2LjAxYy00NC4xMyAwLTgwIDM1Ljg5LTgwIDc5LjFDMTEyIDE4NC44IDEwNC44IDE5MiA5NiAxOTJTODAgMTg0LjggODAgMTc2YzAtNjEuNzYgNTAuMjUtMTExLjEgMTEyLTExMS4xYzguODQ0IDAgMTYgNy4xNTkgMTYgMTZTMjAwLjggOTYuMDEgMTkyIDk2LjAxelxcXCIvPjwvc3ZnPlwiIiwgImV4cG9ydCBkZWZhdWx0IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCA2NDAgNTEyXFxcIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuMS4xIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIyIEZvbnRpY29ucywgSW5jLiAtLT48cGF0aCBkPVxcXCJNNTEyIDMySDEyMGMtMTMuMjUgMC0yNCAxMC43NS0yNCAyNEw5Ni4wMSAyODhjMCA1MyA0MyA5NiA5NiA5NmgxOTJDNDM3IDM4NCA0ODAgMzQxIDQ4MCAyODhoMzJjNzAuNjMgMCAxMjgtNTcuMzggMTI4LTEyOFM1ODIuNiAzMiA1MTIgMzJ6TTUxMiAyMjRoLTMyVjk2aDMyYzM1LjI1IDAgNjQgMjguNzUgNjQgNjRTNTQ3LjMgMjI0IDUxMiAyMjR6TTU2MCA0MTZoLTU0NEM3LjE2NCA0MTYgMCA0MjMuMiAwIDQzMkMwIDQ1OC41IDIxLjQ5IDQ4MCA0OCA0ODBoNDgwYzI2LjUxIDAgNDgtMjEuNDkgNDgtNDhDNTc2IDQyMy4yIDU2OC44IDQxNiA1NjAgNDE2elxcXCIvPjwvc3ZnPlwiIiwgImV4cG9ydCBkZWZhdWx0IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCA1NzYgNTEyXFxcIj48IS0tISBGb250IEF3ZXNvbWUgUHJvIDYuMS4xIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlIChDb21tZXJjaWFsIExpY2Vuc2UpIENvcHlyaWdodCAyMDIyIEZvbnRpY29ucywgSW5jLiAtLT48cGF0aCBkPVxcXCJNNDgyLjMgMTkyQzUxNi41IDE5MiA1NzYgMjIxIDU3NiAyNTZDNTc2IDI5MiA1MTYuNSAzMjAgNDgyLjMgMzIwSDM2NS43TDI2NS4yIDQ5NS45QzI1OS41IDUwNS44IDI0OC45IDUxMiAyMzcuNCA1MTJIMTgxLjJDMTcwLjYgNTEyIDE2Mi45IDUwMS44IDE2NS44IDQ5MS42TDIxNC45IDMyMEgxMTJMNjguOCAzNzcuNkM2NS43OCAzODEuNiA2MS4wNCAzODQgNTYgMzg0SDE0LjAzQzYuMjg0IDM4NCAwIDM3Ny43IDAgMzY5LjFDMCAzNjguNyAuMTgxOCAzNjcuNCAuNTM5OCAzNjYuMUwzMiAyNTZMLjUzOTggMTQ1LjlDLjE4MTggMTQ0LjYgMCAxNDMuMyAwIDE0MkMwIDEzNC4zIDYuMjg0IDEyOCAxNC4wMyAxMjhINTZDNjEuMDQgMTI4IDY1Ljc4IDEzMC40IDY4LjggMTM0LjRMMTEyIDE5MkgyMTQuOUwxNjUuOCAyMC40QzE2Mi45IDEwLjE3IDE3MC42IDAgMTgxLjIgMEgyMzcuNEMyNDguOSAwIDI1OS41IDYuMTUzIDI2NS4yIDE2LjEyTDM2NS43IDE5Mkg0ODIuM3pcXFwiLz48L3N2Zz5cIiIsICJleHBvcnQgZGVmYXVsdCBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgNjQwIDUxMlxcXCI+PCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjEuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggZD1cXFwiTTkuMzc1IDIzMy40QzMuMzc1IDIzOS40IDAgMjQ3LjUgMCAyNTZ2MTI4YzAgOC41IDMuMzc1IDE2LjYyIDkuMzc1IDIyLjYyUzIzLjUgNDE2IDMyIDQxNmgzMlYyMjRIMzJDMjMuNSAyMjQgMTUuMzggMjI3LjQgOS4zNzUgMjMzLjR6TTQ2NCA5NkgzNTJWMzJjMC0xNy42Mi0xNC4zOC0zMi0zMi0zMlMyODggMTQuMzggMjg4IDMydjY0SDE3NkMxMzEuOCA5NiA5NiAxMzEuOCA5NiAxNzZWNDQ4YzAgMzUuMzggMjguNjIgNjQgNjQgNjRoMzIwYzM1LjM4IDAgNjQtMjguNjIgNjQtNjRWMTc2QzU0NCAxMzEuOCA1MDguMyA5NiA0NjQgOTZ6TTI1NiA0MTZIMTkydi0zMmg2NFY0MTZ6TTIyNCAyOTZDMjAxLjkgMjk2IDE4NCAyNzguMSAxODQgMjU2UzIwMS45IDIxNiAyMjQgMjE2UzI2NCAyMzMuOSAyNjQgMjU2UzI0Ni4xIDI5NiAyMjQgMjk2ek0zNTIgNDE2SDI4OHYtMzJoNjRWNDE2ek00NDggNDE2aC02NHYtMzJoNjRWNDE2ek00MTYgMjk2Yy0yMi4xMiAwLTQwLTE3Ljg4LTQwLTQwUzM5My45IDIxNiA0MTYgMjE2UzQ1NiAyMzMuOSA0NTYgMjU2UzQzOC4xIDI5NiA0MTYgMjk2ek02MzAuNiAyMzMuNEM2MjQuNiAyMjcuNCA2MTYuNSAyMjQgNjA4IDIyNGgtMzJ2MTkyaDMyYzguNSAwIDE2LjYyLTMuMzc1IDIyLjYyLTkuMzc1UzY0MCAzOTIuNSA2NDAgMzg0VjI1NkM2NDAgMjQ3LjUgNjM2LjYgMjM5LjQgNjMwLjYgMjMzLjR6XFxcIi8+PC9zdmc+XCIiLCAiZXhwb3J0IGRlZmF1bHQgXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDUxMiA1MTJcXFwiPlxcbiAgPGRlZnM+XFxuICAgIDxyYWRpYWxHcmFkaWVudCBncmFkaWVudFVuaXRzPVxcXCJ1c2VyU3BhY2VPblVzZVxcXCIgY3k9XFxcIjEwJVxcXCIgaWQ9XFxcImdyYWRpZW50LTBcXFwiPlxcbiAgICAgIDxzdG9wIG9mZnNldD1cXFwiMFxcXCIgc3RvcC1jb2xvcj1cXFwiaHNsKDUwLCAxMDAlLCA1MCUpXFxcIiAvPlxcbiAgICAgIDxzdG9wIG9mZnNldD1cXFwiMVxcXCIgc3RvcC1jb2xvcj1cXFwiaHNsKDUwLCAxMDAlLCA2MCUpXFxcIiAvPlxcbiAgICA8L3JhZGlhbEdyYWRpZW50PlxcbiAgPC9kZWZzPlxcbiAgPCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjEuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+XFxuICA8ZWxsaXBzZSBzdHJva2U9XFxcIiMwMDBcXFwiIGZpbGw9XFxcInJnYmEoMCwgMCwgMCwgMC42KVxcXCIgY3g9XFxcIjE3Mi41ODZcXFwiIGN5PVxcXCIyMDcuMDA2XFxcIiByeD1cXFwiMzkuOTc0XFxcIiByeT1cXFwiMzkuOTc0XFxcIi8+XFxuICA8ZWxsaXBzZSBzdHJva2U9XFxcIiMwMDBcXFwiIGZpbGw9XFxcInJnYmEoMCwgMCwgMCwgMC42KVxcXCIgY3g9XFxcIjMzNC41MjNcXFwiIGN5PVxcXCIyMDcuNDgxXFxcIiByeD1cXFwiMzkuOTc0XFxcIiByeT1cXFwiMzkuOTc0XFxcIi8+XFxuICA8ZWxsaXBzZSBzdHJva2U9XFxcIiMwMDBcXFwiIGZpbGw9XFxcInJnYmEoMCwgMCwgMCwgMC42KVxcXCIgY3g9XFxcIjMxMy4zMjVcXFwiIGN5PVxcXCIzNTYuMjA4XFxcIiByeD1cXFwiOTEuNDk3XFxcIiByeT1cXFwiNTkuODkzXFxcIi8+XFxuICA8cGF0aCBmaWxsPVxcXCIjNTVhN2ZmXFxcIiBkPVxcXCJNIDE1OS40MjcgMjc0LjA2IEwgMTAyLjE1OCAzNjMuMjg2IEwgMTI0LjM2NiA0MTcuMDExIEwgMTYwLjQ3NiA0MjMuMzM4IEwgMTk2LjkzNyA0MTQuNzM2IEwgMjE4LjUwMiAzNzUuMjE0XFxcIj48L3BhdGg+XFxuICA8cGF0aCBmaWxsPVxcXCJ1cmwoI2dyYWRpZW50LTApXFxcIiBkPVxcXCJNMjU2IDBDMzk3LjQgMCA1MTIgMTE0LjYgNTEyIDI1NkM1MTIgMzk3LjQgMzk3LjQgNTEyIDI1NiA1MTJDMTE0LjYgNTEyIDAgMzk3LjQgMCAyNTZDMCAxMTQuNiAxMTQuNiAwIDI1NiAwek0yNTYgMzUyQzI5MC45IDM1MiAzMjMuMiAzNjcuOCAzNDguMyAzOTQuOUMzNTQuMyA0MDEuNCAzNjQuNCA0MDEuNyAzNzAuOSAzOTUuN0MzNzcuNCAzODkuNyAzNzcuNyAzNzkuNiAzNzEuNyAzNzMuMUMzNDEuNiAzNDAuNSAzMDEgMzIwIDI1NiAzMjBDMjQ3LjIgMzIwIDI0MCAzMjcuMiAyNDAgMzM2QzI0MCAzNDQuOCAyNDcuMiAzNTIgMjU2IDM1MkgyNTZ6TTIwOCAzNjlDMjA4IDM0OSAxNzkuNiAzMDguNiAxNjYuNCAyOTEuM0MxNjMuMiAyODYuOSAxNTYuOCAyODYuOSAxNTMuNiAyOTEuM0MxNDAuNiAzMDguNiAxMTIgMzQ5IDExMiAzNjlDMTEyIDM5NSAxMzMuNSA0MTYgMTYwIDQxNkMxODYuNSA0MTYgMjA4IDM5NSAyMDggMzY5SDIwOHpNMzAzLjYgMjA4QzMwMy42IDIyNS43IDMxNy4xIDI0MCAzMzUuNiAyNDBDMzUzLjMgMjQwIDM2Ny42IDIyNS43IDM2Ny42IDIwOEMzNjcuNiAxOTAuMyAzNTMuMyAxNzYgMzM1LjYgMTc2QzMxNy4xIDE3NiAzMDMuNiAxOTAuMyAzMDMuNiAyMDh6TTIwNy42IDIwOEMyMDcuNiAxOTAuMyAxOTMuMyAxNzYgMTc1LjYgMTc2QzE1Ny4xIDE3NiAxNDMuNiAxOTAuMyAxNDMuNiAyMDhDMTQzLjYgMjI1LjcgMTU3LjEgMjQwIDE3NS42IDI0MEMxOTMuMyAyNDAgMjA3LjYgMjI1LjcgMjA3LjYgMjA4elxcXCIgLz5cXG48L3N2Zz5cIiIsICJleHBvcnQgZGVmYXVsdCBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgNTEyIDUxMlxcXCI+PCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjEuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggZD1cXFwiTTUwMC4zIDQ0My43bC0xMTkuNy0xMTkuN2MyNy4yMi00MC40MSA0MC42NS05MC45IDMzLjQ2LTE0NC43QzQwMS44IDg3Ljc5IDMyNi44IDEzLjMyIDIzNS4yIDEuNzIzQzk5LjAxLTE1LjUxLTE1LjUxIDk5LjAxIDEuNzI0IDIzNS4yYzExLjYgOTEuNjQgODYuMDggMTY2LjcgMTc3LjYgMTc4LjljNTMuOCA3LjE4OSAxMDQuMy02LjIzNiAxNDQuNy0zMy40NmwxMTkuNyAxMTkuN2MxNS42MiAxNS42MiA0MC45NSAxNS42MiA1Ni41NyAwQzUxNS45IDQ4NC43IDUxNS45IDQ1OS4zIDUwMC4zIDQ0My43ek03OS4xIDIwOGMwLTcwLjU4IDU3LjQyLTEyOCAxMjgtMTI4czEyOCA1Ny40MiAxMjggMTI4YzAgNzAuNTgtNTcuNDIgMTI4LTEyOCAxMjhTNzkuMSAyNzguNiA3OS4xIDIwOHpcXFwiLz48L3N2Zz5cIiIsICJleHBvcnQgZGVmYXVsdCBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgNTEyIDUxMlxcXCI+PCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjEuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggZD1cXFwiTTAgMjU2QzAgMTE0LjYgMTE0LjYgMCAyNTYgMEMzOTcuNCAwIDUxMiAxMTQuNiA1MTIgMjU2QzUxMiAzOTcuNCAzOTcuNCA1MTIgMjU2IDUxMkMxMTQuNiA1MTIgMCAzOTcuNCAwIDI1NnpNMjU2LjMgMzMxLjhDMjA4LjkgMzMxLjggMTY0LjEgMzI0LjkgMTI0LjUgMzEyLjhDMTEyLjIgMzA5IDEwMC4yIDMxOS43IDEwNS4yIDMzMS41QzEzMC4xIDM5MC42IDE4OC40IDQzMiAyNTYuMyA0MzJDMzI0LjIgNDMyIDM4Mi40IDM5MC42IDQwNy40IDMzMS41QzQxMi40IDMxOS43IDQwMC40IDMwOSAzODguMSAzMTIuOEMzNDguNCAzMjQuOSAzMDMuNyAzMzEuOCAyNTYuMyAzMzEuOEgyNTYuM3pNMTc2LjQgMTc2QzE1OC43IDE3NiAxNDQuNCAxOTAuMyAxNDQuNCAyMDhDMTQ0LjQgMjI1LjcgMTU4LjcgMjQwIDE3Ni40IDI0MEMxOTQgMjQwIDIwOC40IDIyNS43IDIwOC40IDIwOEMyMDguNCAxOTAuMyAxOTQgMTc2IDE3Ni40IDE3NnpNMzM2LjQgMjQwQzM1NCAyNDAgMzY4LjQgMjI1LjcgMzY4LjQgMjA4QzM2OC40IDE5MC4zIDM1NCAxNzYgMzM2LjQgMTc2QzMxOC43IDE3NiAzMDQuNCAxOTAuMyAzMDQuNCAyMDhDMzA0LjQgMjI1LjcgMzE4LjcgMjQwIDMzNi40IDI0MHpcXFwiLz48L3N2Zz5cIiIsICJleHBvcnQgZGVmYXVsdCBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgNTEyIDUxMlxcXCI+PCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjEuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggZD1cXFwiTTUwMC4zIDcuMjUxQzUwNy43IDEzLjMzIDUxMiAyMi40MSA1MTIgMzEuMVYxNzUuMUM1MTIgMjAyLjUgNDgzLjMgMjIzLjEgNDQ3LjEgMjIzLjFDNDEyLjcgMjIzLjEgMzgzLjEgMjAyLjUgMzgzLjEgMTc1LjFDMzgzLjEgMTQ5LjUgNDEyLjcgMTI3LjEgNDQ3LjEgMTI3LjFWNzEuMDNMMzUxLjEgOTAuMjNWMjA3LjFDMzUxLjEgMjM0LjUgMzIzLjMgMjU1LjEgMjg3LjEgMjU1LjFDMjUyLjcgMjU1LjEgMjIzLjEgMjM0LjUgMjIzLjEgMjA3LjFDMjIzLjEgMTgxLjUgMjUyLjcgMTU5LjEgMjg3LjEgMTU5LjFWNjMuMUMyODcuMSA0OC43NCAyOTguOCAzNS42MSAzMTMuNyAzMi42Mkw0NzMuNyAuNjE5OEM0ODMuMS0xLjI2MSA0OTIuOSAxLjE3MyA1MDAuMyA3LjI1MUg1MDAuM3pNNzQuNjYgMzAzLjFMODYuNSAyODYuMkM5Mi40MyAyNzcuMyAxMDIuNCAyNzEuMSAxMTMuMSAyNzEuMUgxNzQuOUMxODUuNiAyNzEuMSAxOTUuNiAyNzcuMyAyMDEuNSAyODYuMkwyMTMuMyAzMDMuMUgyMzkuMUMyNjYuNSAzMDMuMSAyODcuMSAzMjUuNSAyODcuMSAzNTEuMVY0NjMuMUMyODcuMSA0OTAuNSAyNjYuNSA1MTEuMSAyMzkuMSA1MTEuMUg0Ny4xQzIxLjQ5IDUxMS4xLS4wMDE5IDQ5MC41LS4wMDE5IDQ2My4xVjM1MS4xQy0uMDAxOSAzMjUuNSAyMS40OSAzMDMuMSA0Ny4xIDMwMy4xSDc0LjY2ek0xNDMuMSAzNTkuMUMxMTcuNSAzNTkuMSA5NS4xIDM4MS41IDk1LjEgNDA3LjFDOTUuMSA0MzQuNSAxMTcuNSA0NTUuMSAxNDMuMSA0NTUuMUMxNzAuNSA0NTUuMSAxOTEuMSA0MzQuNSAxOTEuMSA0MDcuMUMxOTEuMSAzODEuNSAxNzAuNSAzNTkuMSAxNDMuMSAzNTkuMXpNNDQwLjMgMzY3LjFINDk2QzUwMi43IDM2Ny4xIDUwOC42IDM3Mi4xIDUxMC4xIDM3OC40QzUxMy4zIDM4NC42IDUxMS42IDM5MS43IDUwNi41IDM5NkwzNzguNSA1MDhDMzcyLjkgNTEyLjEgMzY0LjYgNTEzLjMgMzU4LjYgNTA4LjlDMzUyLjYgNTA0LjYgMzUwLjMgNDk2LjYgMzUzLjMgNDg5LjdMMzkxLjcgMzk5LjFIMzM2QzMyOS4zIDM5OS4xIDMyMy40IDM5NS45IDMyMSAzODkuNkMzMTguNyAzODMuNCAzMjAuNCAzNzYuMyAzMjUuNSAzNzEuMUw0NTMuNSAyNTkuMUM0NTkuMSAyNTUgNDY3LjQgMjU0LjcgNDczLjQgMjU5LjFDNDc5LjQgMjYzLjQgNDgxLjYgMjcxLjQgNDc4LjcgMjc4LjNMNDQwLjMgMzY3LjF6TTExNi43IDIxOS4xTDE5Ljg1IDExOS4yQy04LjExMiA5MC4yNi02LjYxNCA0Mi4zMSAyNC44NSAxNS4zNEM1MS44Mi04LjEzNyA5My4yNi0zLjY0MiAxMTguMiAyMS44M0wxMjguMiAzMi4zMkwxMzcuNyAyMS44M0MxNjIuNy0zLjY0MiAyMDMuNi04LjEzNyAyMzEuNiAxNS4zNEMyNjIuNiA0Mi4zMSAyNjQuMSA5MC4yNiAyMzYuMSAxMTkuMkwxMzkuNyAyMTkuMUMxMzMuMiAyMjUuNiAxMjIuNyAyMjUuNiAxMTYuNyAyMTkuMUgxMTYuN3pcXFwiLz48L3N2Zz5cIiIsICJleHBvcnQgZGVmYXVsdCBcIjxzdmcgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB2aWV3Qm94PVxcXCIwIDAgNDQ4IDUxMlxcXCI+PCEtLSEgRm9udCBBd2Vzb21lIFBybyA2LjEuMSBieSBAZm9udGF3ZXNvbWUgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbSBMaWNlbnNlIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20vbGljZW5zZSAoQ29tbWVyY2lhbCBMaWNlbnNlKSBDb3B5cmlnaHQgMjAyMiBGb250aWNvbnMsIEluYy4gLS0+PHBhdGggZD1cXFwiTTQxMy44IDQ0Ny4xTDI1NiA0NDhsMCAzMS45OUMyNTYgNDk3LjcgMjQxLjggNTEyIDIyNC4xIDUxMmMtMTcuNjcgMC0zMi4xLTE0LjMyLTMyLjEtMzEuOTlsMC0zMS45OWwtMTU4LjktLjAwOTljLTI4LjUgMC00My42OS0zNC40OS0yNC42OS01Ni40bDY4Ljk4LTc5LjU5SDYyLjIyYy0yNS40MSAwLTM5LjE1LTI5LjgtMjIuNjctNDkuMTNsNjAuNDEtNzAuODVIODkuMjFjLTIxLjI4IDAtMzIuODctMjIuNS0xOS4yOC0zNy4zMWwxMzQuOC0xNDYuNWMxMC40LTExLjMgMjguMjItMTEuMyAzOC42Mi0uMDAzM2wxMzQuOSAxNDYuNWMxMy42MiAxNC44MSAyLjAwMSAzNy4zMS0xOS4yOCAzNy4zMWgtMTAuNzdsNjAuMzUgNzAuODZjMTYuNDYgMTkuMzQgMi43MTYgNDkuMTItMjIuNjggNDkuMTJoLTE1LjJsNjguOTggNzkuNTlDNDU4LjcgNDEzLjcgNDQzLjEgNDQ3LjEgNDEzLjggNDQ3LjF6XFxcIi8+PC9zdmc+XCIiLCAiZXhwb3J0IGRlZmF1bHQgXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDY0MCA1MTJcXFwiPjwhLS0hIEZvbnQgQXdlc29tZSBQcm8gNi4xLjEgYnkgQGZvbnRhd2Vzb21lIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20gTGljZW5zZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tL2xpY2Vuc2UgKENvbW1lcmNpYWwgTGljZW5zZSkgQ29weXJpZ2h0IDIwMjIgRm9udGljb25zLCBJbmMuIC0tPjxwYXRoIGQ9XFxcIk0yMjQgMjU2YzcwLjcgMCAxMjgtNTcuMzEgMTI4LTEyOFMyOTQuNyAwIDIyNCAwQzE1My4zIDAgOTYgNTcuMzEgOTYgMTI4UzE1My4zIDI1NiAyMjQgMjU2ek0yNzQuNyAzMDRIMTczLjNjLTk1LjczIDAtMTczLjMgNzcuNi0xNzMuMyAxNzMuM0MwIDQ5Ni41IDE1LjUyIDUxMiAzNC42NiA1MTJINDEzLjNDNDMyLjUgNTEyIDQ0OCA0OTYuNSA0NDggNDc3LjNDNDQ4IDM4MS42IDM3MC40IDMwNCAyNzQuNyAzMDR6TTQ3OS4xIDMyMGgtNzMuODVDNDUxLjIgMzU3LjcgNDgwIDQxNC4xIDQ4MCA0NzcuM0M0ODAgNDkwLjEgNDc2LjIgNTAxLjkgNDcwIDUxMmgxMzhDNjI1LjcgNTEyIDY0MCA0OTcuNiA2NDAgNDc5LjFDNjQwIDM5MS42IDU2OC40IDMyMCA0NzkuMSAzMjB6TTQzMiAyNTZDNDkzLjkgMjU2IDU0NCAyMDUuOSA1NDQgMTQ0UzQ5My45IDMyIDQzMiAzMmMtMjUuMTEgMC00OC4wNCA4LjU1NS02Ni43MiAyMi41MUMzNzYuOCA3Ni42MyAzODQgMTAxLjQgMzg0IDEyOGMwIDM1LjUyLTExLjkzIDY4LjE0LTMxLjU5IDk0LjcxQzM3Mi43IDI0My4yIDQwMC44IDI1NiA0MzIgMjU2elxcXCIvPjwvc3ZnPlwiIiwgImV4cG9ydCBkZWZhdWx0IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCA1MTIgNTEyXFxcIj5cXG4gIDxkZWZzPlxcbiAgICA8cmFkaWFsR3JhZGllbnQgaWQ9XFxcInJhZGlhbFxcXCIgY3k9XFxcIjg1JVxcXCI+XFxuICAgICAgPHN0b3Agb2Zmc2V0PVxcXCIyMCVcXFwiIHN0b3AtY29sb3I9XFxcInZhcigtLWNvbG9yLXNlY29uZGFyeSlcXFwiIC8+XFxuICAgICAgPHN0b3Agb2Zmc2V0PVxcXCIxMDAlXFxcIiBzdG9wLWNvbG9yPVxcXCJ2YXIoLS1jb2xvci1wcmltYXJ5KVxcXCIgLz5cXG4gICAgPC9yYWRpYWxHcmFkaWVudD5cXG4gIDwvZGVmcz5cXG4gIDwhLS0hIEZvbnQgQXdlc29tZSBQcm8gNi4xLjEgYnkgQGZvbnRhd2Vzb21lIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20gTGljZW5zZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tL2xpY2Vuc2UgKENvbW1lcmNpYWwgTGljZW5zZSkgQ29weXJpZ2h0IDIwMjIgRm9udGljb25zLCBJbmMuIC0tPlxcbiAgPHBhdGggZmlsbD1cXFwidXJsKCcjcmFkaWFsJylcXFwiIGQ9XFxcIk01MDYuMyA0MTdsLTIxMy4zLTM2NGMtMTYuMzMtMjgtNTcuNTQtMjgtNzMuOTggMGwtMjEzLjIgMzY0Qy0xMC41OSA0NDQuOSA5Ljg0OSA0ODAgNDIuNzQgNDgwaDQyNi42QzUwMi4xIDQ4MCA1MjIuNiA0NDUgNTA2LjMgNDE3ek0yMzIgMTY4YzAtMTMuMjUgMTAuNzUtMjQgMjQtMjRTMjgwIDE1NC44IDI4MCAxNjh2MTI4YzAgMTMuMjUtMTAuNzUgMjQtMjMuMSAyNFMyMzIgMzA5LjMgMjMyIDI5NlYxNjh6TTI1NiA0MTZjLTE3LjM2IDAtMzEuNDQtMTQuMDgtMzEuNDQtMzEuNDRjMC0xNy4zNiAxNC4wNy0zMS40NCAzMS40NC0zMS40NHMzMS40NCAxNC4wOCAzMS40NCAzMS40NEMyODcuNCA0MDEuOSAyNzMuNCA0MTYgMjU2IDQxNnpcXFwiIC8+XFxuPC9zdmc+XCIiLCAiZXhwb3J0IGRlZmF1bHQgXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDMyMCA1MTJcXFwiPjwhLS0hIEZvbnQgQXdlc29tZSBQcm8gNi4xLjEgYnkgQGZvbnRhd2Vzb21lIC0gaHR0cHM6Ly9mb250YXdlc29tZS5jb20gTGljZW5zZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tL2xpY2Vuc2UgKENvbW1lcmNpYWwgTGljZW5zZSkgQ29weXJpZ2h0IDIwMjIgRm9udGljb25zLCBJbmMuIC0tPjxwYXRoIGQ9XFxcIk0zMTAuNiAzNjEuNGMxMi41IDEyLjUgMTIuNSAzMi43NSAwIDQ1LjI1QzMwNC40IDQxMi45IDI5Ni4yIDQxNiAyODggNDE2cy0xNi4zOC0zLjEyNS0yMi42Mi05LjM3NUwxNjAgMzAxLjNMNTQuNjMgNDA2LjZDNDguMzggNDEyLjkgNDAuMTkgNDE2IDMyIDQxNlMxNS42MyA0MTIuOSA5LjM3NSA0MDYuNmMtMTIuNS0xMi41LTEyLjUtMzIuNzUgMC00NS4yNWwxMDUuNC0xMDUuNEw5LjM3NSAxNTAuNmMtMTIuNS0xMi41LTEyLjUtMzIuNzUgMC00NS4yNXMzMi43NS0xMi41IDQ1LjI1IDBMMTYwIDIxMC44bDEwNS40LTEwNS40YzEyLjUtMTIuNSAzMi43NS0xMi41IDQ1LjI1IDBzMTIuNSAzMi43NSAwIDQ1LjI1bC0xMDUuNCAxMDUuNEwzMTAuNiAzNjEuNHpcXFwiLz48L3N2Zz5cIiIsICJpbXBvcnQgeyBwcmVmaXhDbGFzc05hbWUsIHRvRWxlbWVudCB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IHsgQ2F0ZWdvcnlLZXkgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCBjbG9jayBmcm9tICcuL2Nsb2NrLXNvbGlkLnN2Zz9yYXcnO1xuaW1wb3J0IGZsYWcgZnJvbSAnLi9mbGFnLXNvbGlkLnN2Zz9yYXcnO1xuaW1wb3J0IGZyb3duIGZyb20gJy4vZmFjZS1mcm93bi1vcGVuLXNvbGlkLnN2Zz9yYXcnO1xuaW1wb3J0IGdhbWVwYWQgZnJvbSAnLi9nYW1lcGFkLXNvbGlkLnN2Zz9yYXcnO1xuaW1wb3J0IGxpZ2h0YnVsYiBmcm9tICcuL2xpZ2h0YnVsYi1zb2xpZC5zdmc/cmF3JztcbmltcG9ydCBtdWcgZnJvbSAnLi9tdWctc2F1Y2VyLXNvbGlkLnN2Zz9yYXcnO1xuaW1wb3J0IHBsYW5lIGZyb20gJy4vcGxhbmUtc29saWQuc3ZnP3Jhdyc7XG5pbXBvcnQgcm9ib3QgZnJvbSAnLi9yb2JvdC1zb2xpZC5zdmc/cmF3JztcbmltcG9ydCBzYWQgZnJvbSAnLi9mYWNlLXNhZC10ZWFyLXNvbGlkLnN2Zz9yYXcnO1xuaW1wb3J0IHNlYXJjaCBmcm9tICcuL21hZ25pZnlpbmctZ2xhc3Mtc29saWQuc3ZnP3Jhdyc7XG5pbXBvcnQgc21pbGV5IGZyb20gJy4vZmFjZS1ncmluLXNvbGlkLnN2Zz9yYXcnO1xuaW1wb3J0IHN5bWJvbHMgZnJvbSAnLi9pY29ucy1zb2xpZC5zdmc/cmF3JztcbmltcG9ydCB0cmVlIGZyb20gJy4vdHJlZS1zb2xpZC5zdmc/cmF3JztcbmltcG9ydCB1c2VycyBmcm9tICcuL3VzZXItZ3JvdXAtc29saWQuc3ZnP3Jhdyc7XG5pbXBvcnQgd2FybmluZyBmcm9tICcuL3RyaWFuZ2xlLWV4Y2xhbWF0aW9uLXNvbGlkLnN2Zz9yYXcnO1xuaW1wb3J0IHhtYXJrIGZyb20gJy4veG1hcmstc29saWQuc3ZnP3Jhdyc7XG5cbmZ1bmN0aW9uIGNyZWF0ZUljb24oaWNvbk5hbWU6IHN0cmluZywgc3ZnOiBzdHJpbmcpOiBTVkdFbGVtZW50IHtcbiAgY29uc3QgZWwgPSB0b0VsZW1lbnQ8U1ZHU1ZHRWxlbWVudD4oc3ZnKTtcbiAgZWwuZGF0YXNldC5pY29uID0gaWNvbk5hbWU7XG4gIGVsLmNsYXNzTGlzdC5hZGQocHJlZml4Q2xhc3NOYW1lKCdpY29uJykpO1xuICByZXR1cm4gZWw7XG59XG5cbmV4cG9ydCB0eXBlIEljb25TaXplID0gJ3NtYWxsJyB8ICdtZWRpdW0nIHwgJ2xhcmdlJyB8ICcyeCcgfCAnM3gnIHwgJzR4JyB8ICc1eCc7XG5cbmNvbnN0IGljb25zID0ge1xuICBjbG9jaywgXG4gIGZsYWcsXG4gIGZyb3duLFxuICBnYW1lcGFkLCBcbiAgbGlnaHRidWxiLCBcbiAgbXVnLCBcbiAgcGxhbmUsIFxuICByb2JvdCwgXG4gIHNhZCxcbiAgc2VhcmNoLFxuICBzbWlsZXksIFxuICBzeW1ib2xzLCBcbiAgdHJlZSxcbiAgdXNlcnMsIFxuICB3YXJuaW5nLCBcbiAgeG1hcmssXG59O1xuXG5leHBvcnQgeyBpY29ucyB9O1xuXG5leHBvcnQgY29uc3QgY2F0ZWdvcnlJY29uczogUmVjb3JkPENhdGVnb3J5S2V5LCBzdHJpbmc+ID0ge1xuICAncmVjZW50cyc6ICdjbG9jaycsXG4gICdzbWlsZXlzLWVtb3Rpb24nOiAnc21pbGV5JyxcbiAgJ3Blb3BsZS1ib2R5JzogJ3VzZXJzJyxcbiAgJ2FuaW1hbHMtbmF0dXJlJzogJ3RyZWUnLFxuICAnZm9vZC1kcmluayc6ICdtdWcnLFxuICAnYWN0aXZpdGllcyc6ICdnYW1lcGFkJyxcbiAgJ3RyYXZlbC1wbGFjZXMnOiAncGxhbmUnLFxuICAnb2JqZWN0cyc6ICdsaWdodGJ1bGInLFxuICAnc3ltYm9scyc6ICdzeW1ib2xzJyxcbiAgJ2ZsYWdzJzogJ2ZsYWcnLFxuICAnY3VzdG9tJzogJ3JvYm90J1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGljb24obmFtZTogc3RyaW5nLCBzaXplPzogSWNvblNpemUpOiBFbGVtZW50IHtcbiAgaWYgKCEobmFtZSBpbiBpY29ucykpIHtcbiAgICBjb25zb2xlLndhcm4oYFVua25vd24gaWNvbjogXCIke25hbWV9XCJgKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIH1cblxuICBjb25zdCBpY29uID0gY3JlYXRlSWNvbihuYW1lLCBpY29uc1tuYW1lXSk7XG4gIGlmIChzaXplKSB7XG4gICAgaWNvbi5jbGFzc0xpc3QuYWRkKHByZWZpeENsYXNzTmFtZShgaWNvbi0ke3NpemV9YCkpO1xuICB9XG5cbiAgcmV0dXJuIGljb247XG59XG4iLCAiaW1wb3J0IHsgaWNvbiwgSWNvblNpemUgfSBmcm9tICcuL2ljb25zJztcbmltcG9ydCB7IFZpZXcgfSBmcm9tICcuL3ZpZXdzL3ZpZXcnO1xuaW1wb3J0IHsgdG9FbGVtZW50IH0gZnJvbSAnLi91dGlsJztcblxuZXhwb3J0IHR5cGUgVGVtcGxhdGVEYXRhID0gUmVjb3JkPHN0cmluZywgYW55PjtcbnR5cGUgVmlld0RhdGEgPSBSZWNvcmQ8c3RyaW5nLCBWaWV3PjtcblxudHlwZSBSZW5kZXJNb2RlID0gJ3N5bmMnIHwgJ2FzeW5jJztcblxudHlwZSBUZW1wbGF0ZU9wdGlvbnMgPSB7XG4gIG1vZGU6IFJlbmRlck1vZGU7XG59XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBUZW1wbGF0ZU9wdGlvbnMgPSB7XG4gIG1vZGU6ICdzeW5jJ1xufTtcblxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlPEUgZXh0ZW5kcyBIVE1MRWxlbWVudCA9IEhUTUxFbGVtZW50PiB7XG4gICN0ZW1wbGF0ZUZuOiAoVGVtcGxhdGVEYXRhKSA9PiBzdHJpbmc7XG4gICNtb2RlOiBSZW5kZXJNb2RlO1xuXG4gIGNvbnN0cnVjdG9yKHRlbXBsYXRlRm46IChUZW1wbGF0ZURhdGEpID0+IHN0cmluZywgb3B0aW9uczogUGFydGlhbDxUZW1wbGF0ZU9wdGlvbnM+ID0ge30pIHtcbiAgICB0aGlzLiN0ZW1wbGF0ZUZuID0gdGVtcGxhdGVGbjtcbiAgICB0aGlzLiNtb2RlID0gb3B0aW9ucy5tb2RlIHx8IGRlZmF1bHRPcHRpb25zLm1vZGU7XG4gIH1cblxuICByZW5kZXJTeW5jKGRhdGE6IFRlbXBsYXRlRGF0YSA9IHt9KTogRSB7XG4gICAgY29uc3QgcmVzdWx0ID0gdG9FbGVtZW50PEU+KHRoaXMuI3RlbXBsYXRlRm4oZGF0YSkpO1xuICAgIHRoaXMuI2JpbmRQbGFjZWhvbGRlcnMocmVzdWx0LCBkYXRhKTtcbiAgICB0aGlzLiNiaW5kSWNvbnMocmVzdWx0KTtcbiAgICB0aGlzLiNyZW5kZXJDaGlsZFZpZXdzKHJlc3VsdCwgZGF0YSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGFzeW5jIHJlbmRlckFzeW5jKGRhdGE6IFRlbXBsYXRlRGF0YSA9IHt9KTogUHJvbWlzZTxFPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gdG9FbGVtZW50PEU+KHRoaXMuI3RlbXBsYXRlRm4oZGF0YSkpO1xuICAgIHRoaXMuI2JpbmRQbGFjZWhvbGRlcnMocmVzdWx0LCBkYXRhKTtcbiAgICB0aGlzLiNiaW5kSWNvbnMocmVzdWx0KTtcbiAgICBhd2FpdCB0aGlzLiNyZW5kZXJDaGlsZFZpZXdzKHJlc3VsdCwgZGF0YSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHJlbmRlcihkYXRhOiBUZW1wbGF0ZURhdGEpOiBFIHwgUHJvbWlzZTxFPiB7XG4gICAgcmV0dXJuIHRoaXMuI21vZGUgPT09ICdzeW5jJyA/IHRoaXMucmVuZGVyU3luYyhkYXRhKSA6IHRoaXMucmVuZGVyQXN5bmMoZGF0YSk7XG4gIH1cblxuICBhc3luYyAjcmVuZGVyQ2hpbGRWaWV3cyhyZXN1bHQ6IEUsIGRhdGE6IFZpZXdEYXRhKSB7XG4gICAgY29uc3QgcGxhY2Vob2xkZXJzID0gcmVzdWx0LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCdbZGF0YS12aWV3XScpO1xuXG4gICAgY29uc3QgYXN5bmNWaWV3czogUHJvbWlzZTxIVE1MRWxlbWVudD5bXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBwbGFjZWhvbGRlciBvZiBwbGFjZWhvbGRlcnMpIHtcbiAgICAgIGNvbnN0IHZpZXcgPSBkYXRhW3BsYWNlaG9sZGVyLmRhdGFzZXQudmlldyBhcyBzdHJpbmddO1xuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgaWYgKHBsYWNlaG9sZGVyLmRhdGFzZXQucmVuZGVyICE9PSAnc3luYycpIHtcbiAgICAgICAgICBhc3luY1ZpZXdzLnB1c2godmlldy5yZW5kZXIoKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICBwbGFjZWhvbGRlci5yZXBsYWNlV2l0aChyZXN1bHQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGxhY2Vob2xkZXIucmVwbGFjZVdpdGgodmlldy5yZW5kZXJTeW5jKCkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwbGFjZWhvbGRlci5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoYXN5bmNWaWV3cyk7XG4gIH1cblxuICAjYmluZEljb25zKHJlc3VsdDogRSkge1xuICAgIGNvbnN0IGljb25zID0gcmVzdWx0LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KCdpW2RhdGEtaWNvbl0nKTtcbiAgICBpY29ucy5mb3JFYWNoKChwbGFjZWhvbGRlcjogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IHsgaWNvbjogaWNvbktleSwgc2l6ZSB9ID0gcGxhY2Vob2xkZXIuZGF0YXNldDtcbiAgICAgIHBsYWNlaG9sZGVyLnJlcGxhY2VXaXRoKGljb24oaWNvbktleSBhcyBzdHJpbmcsIHNpemUgYXMgSWNvblNpemUpKTtcbiAgICB9KVxuICB9XG5cbiAgI2JpbmRQbGFjZWhvbGRlcnMocmVzdWx0OiBFLCBkYXRhOiBUZW1wbGF0ZURhdGEpOiBFIHtcbiAgICBjb25zdCBwbGFjZWhvbGRlcnMgPSByZXN1bHQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oJ1tkYXRhLXBsYWNlaG9sZGVyXScpO1xuICAgIFxuICAgIHBsYWNlaG9sZGVycy5mb3JFYWNoKChwbGFjZWhvbGRlcjogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IHBsYWNlaG9sZGVyLmRhdGFzZXQucGxhY2Vob2xkZXI7XG5cbiAgICAgIGlmIChrZXkgJiYgZGF0YVtrZXldKSB7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gZGF0YVtrZXldO1xuICAgICAgICBwbGFjZWhvbGRlci5yZXBsYWNlV2l0aCguLi5bcmVwbGFjZW1lbnRdLmZsYXQoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oYE1pc3NpbmcgcGxhY2Vob2xkZXIgZWxlbWVudCBmb3Iga2V5IFwiJHtrZXl9XCJgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi92aWV3JztcbmltcG9ydCB7IFRlbXBsYXRlIH0gZnJvbSAnLi4vVGVtcGxhdGUnO1xuaW1wb3J0IHsgZ2V0UHJlZml4ZWRDbGFzc2VzIH0gZnJvbSAnLi4vdXRpbCc7XG5cbmNvbnN0IGNsYXNzZXMgPSBnZXRQcmVmaXhlZENsYXNzZXMoXG4gICdpbWFnZVBsYWNlaG9sZGVyJyxcbiAgJ3BsYWNlaG9sZGVyJ1xuKTtcblxuY29uc3QgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUoKHsgY2xhc3NlcyB9KSA9PiAvKiBodG1sICovYFxuICA8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLnBsYWNlaG9sZGVyfSAke2NsYXNzZXMuaW1hZ2VQbGFjZWhvbGRlcn1cIj48L2Rpdj5cbmApO1xuXG50eXBlIEltYWdlT3B0aW9ucyA9IHtcbiAgY2xhc3NOYW1lcz86IHN0cmluZztcbn07XG5cbmV4cG9ydCBjbGFzcyBJbWFnZSBleHRlbmRzIFZpZXcge1xuICBwcml2YXRlIGNsYXNzTmFtZXM/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoeyBjbGFzc05hbWVzIH06IEltYWdlT3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZSwgY2xhc3NlcyB9KTtcbiAgICB0aGlzLmNsYXNzTmFtZXMgPSBjbGFzc05hbWVzO1xuICB9XG5cbiAgbG9hZChzcmM6IHN0cmluZyB8IFByb21pc2U8c3RyaW5nPikge1xuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGlmICh0aGlzLmNsYXNzTmFtZXMpIHtcbiAgICAgIGltZy5jbGFzc05hbWUgPSB0aGlzLmNsYXNzTmFtZXM7XG4gICAgfVxuXG4gICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVsLnJlcGxhY2VXaXRoKGltZyk7XG4gICAgfSwgeyBvbmNlOiB0cnVlIH0pO1xuXG4gICAgUHJvbWlzZS5yZXNvbHZlKHNyYykudGhlbihzcmMgPT4gaW1nLnNyYyA9IHNyYyk7XG4gIH1cblxuICByZW5kZXJTeW5jKCkge1xuICAgIHN1cGVyLnJlbmRlclN5bmMoKTtcbiAgICBpZiAodGhpcy5jbGFzc05hbWVzKSB7XG4gICAgICBjb25zdCBjbGFzc05hbWVzID0gdGhpcy5jbGFzc05hbWVzLnNwbGl0KCcgJyk7XG4gICAgICBjbGFzc05hbWVzLmZvckVhY2goY2xhc3NOYW1lID0+IHRoaXMuZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lbDtcbiAgfVxufVxuIiwgImltcG9ydCB7IExhenlMb2FkZXIgfSBmcm9tICcuLi9MYXp5TG9hZGVyJztcbmltcG9ydCB7IEN1c3RvbUVtb2ppLCBFbW9qaVJlY29yZCwgRW1vamlTZWxlY3Rpb24gfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi4vdmlld3Mvdmlldyc7XG5pbXBvcnQgeyBJbWFnZSB9IGZyb20gJy4uL3ZpZXdzL0ltYWdlJztcbmltcG9ydCB7IGdldFByZWZpeGVkQ2xhc3NlcyB9IGZyb20gJy4uL3V0aWwnO1xuXG5jb25zdCBjbGFzc2VzID0gZ2V0UHJlZml4ZWRDbGFzc2VzKCdjdXN0b21FbW9qaScpO1xuXG5leHBvcnQgdHlwZSBSZW5kZXJUYXNrID0ge1xuICBjb250ZW50OiBWaWV3IHwgRWxlbWVudDtcbiAgcmVzb2x2ZXI/OiAoKSA9PiBFbGVtZW50O1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVuZGVyZXIge1xuICBhYnN0cmFjdCByZW5kZXIoZW1vamk6IEVtb2ppUmVjb3JkLCBjbGFzc05hbWVzPzogc3RyaW5nKTogUmVuZGVyVGFzaztcbiAgYWJzdHJhY3QgZW1pdChlbW9qaTogRW1vamlSZWNvcmQpOiBFbW9qaVNlbGVjdGlvbiB8IFByb21pc2U8RW1vamlTZWxlY3Rpb24+O1xuXG4gIHJlbmRlckVsZW1lbnQoY29udGVudDogRWxlbWVudCk6IFJlbmRlclRhc2sge1xuICAgIHJldHVybiB7IGNvbnRlbnQgfTtcbiAgfVxuXG4gIHJlbmRlckltYWdlKGNsYXNzTmFtZXMgPSAnJywgdXJsUmVzb2x2ZXI6ICgpID0+IHN0cmluZyB8IFByb21pc2U8c3RyaW5nPik6IFJlbmRlclRhc2sge1xuICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKHsgY2xhc3NOYW1lcyB9KTtcbiAgICBpbWFnZS5yZW5kZXJTeW5jKCk7XG5cbiAgICBjb25zdCByZXNvbHZlciA9ICgpID0+IHtcbiAgICAgIGltYWdlLmxvYWQodXJsUmVzb2x2ZXIoKSk7XG4gICAgICByZXR1cm4gaW1hZ2UuZWw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgY29udGVudDogaW1hZ2UsIHJlc29sdmVyIH07XG4gIH1cblxuICBkb1JlbmRlcihlbW9qaTogRW1vamlSZWNvcmQsIGxhenlMb2FkZXI/OiBMYXp5TG9hZGVyLCBjbGFzc05hbWVzPzogc3RyaW5nKTogRWxlbWVudCB7XG4gICAgaWYgKGVtb2ppLmN1c3RvbSkge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyQ3VzdG9tKGVtb2ppIGFzIEN1c3RvbUVtb2ppLCBsYXp5TG9hZGVyLCBjbGFzc05hbWVzKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGNvbnRlbnQsIHJlc29sdmVyIH0gPSB0aGlzLnJlbmRlcihlbW9qaSwgY2xhc3NOYW1lcyk7XG4gICAgY29uc3QgY29udGVudEVsZW1lbnQgPSBjb250ZW50IGluc3RhbmNlb2YgRWxlbWVudCA/IGNvbnRlbnQgOiBjb250ZW50LmVsO1xuXG4gICAgLy8gaWYgKGxhenlMb2FkZXIgJiYgcmVzb2x2ZXIpIHtcbiAgICAvLyAgIHJldHVybiBsYXp5TG9hZGVyLmxhenlMb2FkKGNvbnRlbnRFbGVtZW50LCByZXNvbHZlcilcbiAgICAvLyB9XG5cbiAgICBpZiAocmVzb2x2ZXIpIHtcbiAgICAgIHJlc29sdmVyKCk7XG4gICAgfVxuICAgIHJldHVybiBjb250ZW50RWxlbWVudDtcbiAgfVxuXG4gIGRvRW1pdChlbW9qaTogRW1vamlSZWNvcmQpOiBFbW9qaVNlbGVjdGlvbiB8IFByb21pc2U8RW1vamlTZWxlY3Rpb24+IHtcbiAgICBpZiAoZW1vamkuY3VzdG9tKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbWl0Q3VzdG9tKGVtb2ppIGFzIEN1c3RvbUVtb2ppKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lbWl0KGVtb2ppKTtcbiAgfVxuXG4gIGVtaXRDdXN0b20oeyB1cmwsIGxhYmVsLCBlbW9qaSwgZGF0YSB9OiBDdXN0b21FbW9qaSk6IEVtb2ppU2VsZWN0aW9uIHtcbiAgICByZXR1cm4geyB1cmwsIGxhYmVsLCBlbW9qaSwgZGF0YSB9O1xuICB9XG5cbiAgcmVuZGVyQ3VzdG9tKGVtb2ppOiBDdXN0b21FbW9qaSwgbGF6eUxvYWRlcj86IExhenlMb2FkZXIsIGFkZGl0aW9uYWxDbGFzc2VzID0gJycpOiBFbGVtZW50IHtcbiAgICBjb25zdCBjbGFzc05hbWVzID0gW2NsYXNzZXMuY3VzdG9tRW1vamksIGFkZGl0aW9uYWxDbGFzc2VzXS5qb2luKCcgJykudHJpbSgpO1xuXG4gICAgY29uc3QgeyBjb250ZW50LCByZXNvbHZlciB9ID0gdGhpcy5yZW5kZXJJbWFnZShjbGFzc05hbWVzLCAoKSA9PiBlbW9qaS51cmwpO1xuICAgIGNvbnN0IGNvbnRlbnRFbGVtZW50ID0gY29udGVudCBpbnN0YW5jZW9mIEVsZW1lbnQgPyBjb250ZW50IDogY29udGVudC5lbDtcblxuICAgIGlmIChyZXNvbHZlcikge1xuICAgICAgcmVzb2x2ZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGVudEVsZW1lbnQ7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXInO1xuaW1wb3J0IHsgRW1vamlSZWNvcmQsIEVtb2ppU2VsZWN0aW9uIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgVGVtcGxhdGUgfSBmcm9tICcuLi9UZW1wbGF0ZSc7XG5cbmNvbnN0IHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKCh7IGVtb2ppIH0pID0+IC8qIGh0bWwgKi8gYDxzcGFuPiR7ZW1vaml9PC9zcGFuPmApO1xuXG5leHBvcnQgY2xhc3MgTmF0aXZlUmVuZGVyZXIgZXh0ZW5kcyBSZW5kZXJlciB7XG4gIHJlbmRlcihlbW9qaTogRW1vamlSZWNvcmQpIHtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJFbGVtZW50KHRlbXBsYXRlLnJlbmRlclN5bmMoeyBlbW9qaTogZW1vamkuZW1vamkgfSkpO1xuICB9XG5cbiAgZW1pdCh7IGVtb2ppLCBoZXhjb2RlLCBsYWJlbCB9OiBFbW9qaVJlY29yZCk6IEVtb2ppU2VsZWN0aW9uIHtcbiAgICByZXR1cm4geyBlbW9qaSwgaGV4Y29kZSwgbGFiZWwgfTtcbiAgfVxufVxuIiwgImV4cG9ydCBkZWZhdWx0IHtcbiAgJ2NhdGVnb3JpZXMuYWN0aXZpdGllcyc6ICdBY3Rpdml0aWVzJyxcbiAgJ2NhdGVnb3JpZXMuYW5pbWFscy1uYXR1cmUnOiAnQW5pbWFscyAmIE5hdHVyZScsXG4gICdjYXRlZ29yaWVzLmN1c3RvbSc6ICdDdXN0b20nLFxuICAnY2F0ZWdvcmllcy5mbGFncyc6ICdGbGFncycsXG4gICdjYXRlZ29yaWVzLmZvb2QtZHJpbmsnOiAnRm9vZCAmIERyaW5rJyxcbiAgJ2NhdGVnb3JpZXMub2JqZWN0cyc6ICdPYmplY3RzJyxcbiAgJ2NhdGVnb3JpZXMucGVvcGxlLWJvZHknOiAnUGVvcGxlICYgQm9keScsXG4gICdjYXRlZ29yaWVzLnJlY2VudHMnOiAnUmVjZW50bHkgVXNlZCcsXG4gICdjYXRlZ29yaWVzLnNtaWxleXMtZW1vdGlvbic6ICdTbWlsZXlzICYgRW1vdGlvbicsXG4gICdjYXRlZ29yaWVzLnN5bWJvbHMnOiAnU3ltYm9scycsXG4gICdjYXRlZ29yaWVzLnRyYXZlbC1wbGFjZXMnOiAnVHJhdmVsICYgUGxhY2VzJyxcbiAgJ2Vycm9yLmxvYWQnOiAnRmFpbGVkIHRvIGxvYWQgZW1vamlzJyxcbiAgJ3JlY2VudHMuY2xlYXInOiAnQ2xlYXIgcmVjZW50IGVtb2ppcycsXG4gICdyZWNlbnRzLm5vbmUnOiAnWW91IGhhdmVuXFwndCBzZWxlY3RlZCBhbnkgZW1vamlzIHlldC4nLFxuICAncmV0cnknOiAnVHJ5IGFnYWluJyxcbiAgJ3NlYXJjaC5jbGVhcic6ICdDbGVhciBzZWFyY2gnLFxuICAnc2VhcmNoLmVycm9yJzogJ0ZhaWxlZCB0byBzZWFyY2ggZW1vamlzJyxcbiAgJ3NlYXJjaC5ub3RGb3VuZCc6ICdObyByZXN1bHRzIGZvdW5kJyxcbiAgJ3NlYXJjaCc6ICdTZWFyY2ggZW1vamlzLi4uJ1xufTtcbiIsICJpbXBvcnQgeyBHcm91cE1lc3NhZ2UsIEVtb2ppLCBMb2NhbGUgfSBmcm9tICdlbW9qaWJhc2UnO1xuaW1wb3J0IHsgUGlja2VyT3B0aW9ucywgRW1vamlSZWNvcmQsIENhdGVnb3J5LCBDYXRlZ29yeUtleSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IGFwcGx5UnVsZXMgfSBmcm9tICcuLi9ydWxlcyc7XG5pbXBvcnQgeyBxdWVyeU1hdGNoZXMsIGdldEVtb2ppUmVjb3JkLCBEYXRhU3RvcmUgfSBmcm9tICcuL0RhdGFTdG9yZSc7XG5cbi8vIEJhc2UgZGF0YWJhc2UgbmFtZS4gSXQgd2lsbCBoYXZlIHRoZSBsb2NhbGUgYXBwZW5kZWQgdG8gaXQuXG5jb25zdCBEQVRBQkFTRV9OQU1FID0gJ1BpY01vJztcblxuZXhwb3J0IGZ1bmN0aW9uIEluZGV4ZWREYlN0b3JlRmFjdG9yeShsb2NhbGU6IExvY2FsZSk6IERhdGFTdG9yZSB7XG4gIHJldHVybiBuZXcgSW5kZXhlZERiU3RvcmUobG9jYWxlKTtcbn1cblxuSW5kZXhlZERiU3RvcmVGYWN0b3J5LmRlbGV0ZURhdGFiYXNlID0gKGxvY2FsZTogTG9jYWxlKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShgJHtEQVRBQkFTRV9OQU1FfS0ke2xvY2FsZX1gKTtcbiAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCByZXNvbHZlKTtcbiAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgcmVqZWN0KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY2xhc3MgSW5kZXhlZERiU3RvcmUgZXh0ZW5kcyBEYXRhU3RvcmUge1xuICBwcml2YXRlIGRiOiBJREJEYXRhYmFzZTtcblxuICAvKipcbiAgICogQ3JlYXRlcy9vcGVucyB0aGUgZGF0YWJhc2UuXG4gICAqXG4gICAqIFRoZXJlIGFyZSB0aHJlZSBkYXRhIHN0b3JlczpcbiAgICpcbiAgICogLSBjYXRlZ29yeTogc3RvcmVzIHRoZSBjYXRlZ29yaWVzXG4gICAqIC0gZW1vamk6IHN0b3JlcyB0aGUgZW1vamkgZGF0YSBpdHNlbGZcbiAgICogLSBtZXRhOiBzdG9yZXMgbWV0YWRhdGEgc3VjaCBhcyB0aGUgRVRhZ3NcbiAgICpcbiAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZGF0YWJhc2UgaXMgcmVhZHlcbiAgICovXG4gIGFzeW5jIG9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKGAke0RBVEFCQVNFX05BTUV9LSR7dGhpcy5sb2NhbGV9YCk7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5kYiA9IGV2ZW50LnRhcmdldD8ucmVzdWx0O1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcblxuICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHJlamVjdCk7XG5cbiAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIGFzeW5jIChldmVudDogYW55KSA9PiB7XG4gICAgICAgIHRoaXMuZGIgPSBldmVudC50YXJnZXQ/LnJlc3VsdDtcblxuICAgICAgICB0aGlzLmRiLmNyZWF0ZU9iamVjdFN0b3JlKCdjYXRlZ29yeScsIHsga2V5UGF0aDogJ29yZGVyJyB9KTtcblxuICAgICAgICBjb25zdCBlbW9qaVN0b3JlID0gdGhpcy5kYi5jcmVhdGVPYmplY3RTdG9yZSgnZW1vamknLCB7IGtleVBhdGg6ICdlbW9qaScgfSk7XG4gICAgICAgIGVtb2ppU3RvcmUuY3JlYXRlSW5kZXgoJ2NhdGVnb3J5JywgJ2dyb3VwJyk7XG4gICAgICAgIGVtb2ppU3RvcmUuY3JlYXRlSW5kZXgoJ3ZlcnNpb24nLCAndmVyc2lvbicpO1xuXG4gICAgICAgIHRoaXMuZGIuY3JlYXRlT2JqZWN0U3RvcmUoJ21ldGEnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlKCkge1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKGAke0RBVEFCQVNFX05BTUV9LSR7dGhpcy5sb2NhbGV9YCk7XG4gICAgYXdhaXQgdGhpcy53YWl0Rm9yUmVxdWVzdChyZXF1ZXN0KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuZGIuY2xvc2UoKTtcbiAgfVxuXG4gIGFzeW5jIGdldEVtb2ppQ291bnQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oJ2Vtb2ppJywgJ3JlYWRvbmx5Jyk7XG4gICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgnZW1vamknKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLndhaXRGb3JSZXF1ZXN0KHN0b3JlLmNvdW50KCkpO1xuICAgIHJldHVybiByZXN1bHQudGFyZ2V0LnJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBFVGFncyBzdG9yZWQgaW4gdGhlIG1ldGEgZGF0YXN0b3JlLlxuICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgRVRhZyBkYXRhXG4gICAqL1xuICBhc3luYyBnZXRFdGFncygpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZD4+IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oJ21ldGEnLCAncmVhZG9ubHknKTtcbiAgICBjb25zdCBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCdtZXRhJyk7XG4gICAgY29uc3QgW2Vtb2ppc0V0YWcsIG1lc3NhZ2VzRXRhZ10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLndhaXRGb3JSZXF1ZXN0KHN0b3JlLmdldCgnZW1vamlzRXRhZycpKSxcbiAgICAgIHRoaXMud2FpdEZvclJlcXVlc3Qoc3RvcmUuZ2V0KCdtZXNzYWdlc0V0YWcnKSlcbiAgICBdKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdG9yZWRFbW9qaXNFdGFnOiBlbW9qaXNFdGFnLnRhcmdldC5yZXN1bHQsXG4gICAgICBzdG9yZWRNZXNzYWdlc0V0YWc6IG1lc3NhZ2VzRXRhZy50YXJnZXQucmVzdWx0XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9yZXMgRVRhZyB2YWx1ZXMgZm9yIHRoZSBlbW9qaSBhbmQgbWVzc2FnZSBkYXRhLlxuICAgKiBAcGFyYW0gZW1vamlzRXRhZyB0aGUgRVRhZyBmb3IgdGhlIGVtb2ppIGRhdGFcbiAgICogQHBhcmFtIG1lc3NhZ2VzRXRhZyB0aGUgRVRhZyBmb3IgdGhlIG1lc3NhZ2UgZGF0YVxuICAgKi9cbiAgYXN5bmMgc2V0TWV0YShtZXRhKSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmRiLnRyYW5zYWN0aW9uKCdtZXRhJywgJ3JlYWR3cml0ZScpO1xuICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoJ21ldGEnKTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSByZXNvbHZlO1xuXG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0gT2JqZWN0LmtleXMobWV0YSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgcHJvcGVydGllcy5mb3JFYWNoKHByb3BlcnR5ID0+IHtcbiAgICAgICAgc3RvcmUucHV0KG1ldGFbcHJvcGVydHldLCBwcm9wZXJ0eSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldEhhc2goKSB7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmRiLnRyYW5zYWN0aW9uKCdtZXRhJywgJ3JlYWRvbmx5Jyk7XG4gICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZSgnbWV0YScpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMud2FpdEZvclJlcXVlc3Qoc3RvcmUuZ2V0KCdoYXNoJykpO1xuICAgIHJldHVybiByZXN1bHQudGFyZ2V0LnJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRoZSBkYXRhYmFzZSBpcyBwb3B1bGF0ZWQuXG4gICAqXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHRoZSBwb3B1bGF0ZWQgc3RhdGVcbiAgICovXG4gIGFzeW5jIGlzUG9wdWxhdGVkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbignY2F0ZWdvcnknLCAncmVhZG9ubHknKTtcbiAgICBjb25zdCBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCdjYXRlZ29yeScpO1xuICAgIGNvbnN0IGNhdGVnb3J5Q291bnRSZXN1bHQgPSBhd2FpdCB0aGlzLndhaXRGb3JSZXF1ZXN0KHN0b3JlLmNvdW50KCkpO1xuICAgIGNvbnN0IGNhdGVnb3J5Q291bnQgPSBjYXRlZ29yeUNvdW50UmVzdWx0LnRhcmdldC5yZXN1bHQ7XG4gICAgcmV0dXJuIGNhdGVnb3J5Q291bnQgPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYW55IGN1cnJlbnQgZGF0YSBhbmQgcmUtcG9wdWxhdGVzIHRoZSBkYXRhIHN0b3JlcyB3aXRoIHRoZSBnaXZlbiBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0gZ3JvdXBzIHRoZSBncm91cCBtZXNzYWdlIGRhdGFcbiAgICogQHBhcmFtIGVtb2ppcyB0aGUgZW1vamkgZGF0YVxuICAgKiBAcGFyYW0gZW1vamlzRXRhZyB0aGUgZW1vamkgZGF0YSBFVGFnXG4gICAqIEBwYXJhbSBtZXNzYWdlc0V0YWcgdGhlIG1lc3NhZ2UgZGF0YSBFVGFnXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIGRhdGEgaGFzIGJlZW4gd3JpdHRlblxuICAgKi9cbiAgYXN5bmMgcG9wdWxhdGUoe1xuICAgIGdyb3VwcyxcbiAgICBlbW9qaXMsXG4gICAgZW1vamlzRXRhZyxcbiAgICBtZXNzYWdlc0V0YWcsXG4gICAgaGFzaFxuICB9OiB7XG4gICAgZ3JvdXBzOiBHcm91cE1lc3NhZ2VbXTtcbiAgICBlbW9qaXM6IEVtb2ppW107XG4gICAgZW1vamlzRXRhZz86IHN0cmluZyB8IG51bGw7XG4gICAgbWVzc2FnZXNFdGFnPzogc3RyaW5nIHwgbnVsbDtcbiAgICBoYXNoPzogc3RyaW5nIHwgbnVsbDtcbiAgfSkge1xuICAgIC8vIFdpcGUgb3V0IGFueSBvbGQgZGF0YSBmaXJzdFxuICAgIGF3YWl0IHRoaXMucmVtb3ZlQWxsT2JqZWN0cygnY2F0ZWdvcnknLCAnZW1vamknKTtcblxuICAgIGNvbnN0IHRhc2tzID0gW1xuICAgICAgdGhpcy5hZGRPYmplY3RzKCdjYXRlZ29yeScsIGdyb3VwcyksXG4gICAgICB0aGlzLmFkZE9iamVjdHMoJ2Vtb2ppJywgZW1vamlzKSxcbiAgICAgIHRoaXMuc2V0TWV0YSh7IGVtb2ppc0V0YWcsIG1lc3NhZ2VzRXRhZywgaGFzaCB9KVxuICAgIF07XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZW1vamkgY2F0ZWdvcmllcy5cbiAgICpcbiAgICogSWYgYW4gaW5jbHVkZSBsaXN0IGlzIHNwZWNpZmllZCwgb25seSB0aG9zZSBjYXRlZ29yaWVzIHdpbGwgYmUgcmV0dXJuZWQgLSBhbmQgd2lsbCBiZSBpbiB0aGUgc2FtZSBzb3J0IG9yZGVyLlxuICAgKiBPdGhlcndpc2UsIGFsbCBjYXRlZ29yaWVzIChleGNlcHQgJ2NvbXBvbmVudCcpIGFyZSByZXR1cm5lZC5cbiAgICpcbiAgICogQHBhcmFtIGluY2x1ZGUgYW4gYXJyYXkgb2YgQ2F0ZWdvcnlLZXlzIHRvIGluY2x1ZGVcbiAgICogQHJldHVybnMgYW4gYXJyeWEgb2YgYWxsIGNhdGVnb3JpZXMsIG9yIG9ubHkgdGhlIG9uZXMgc3BlY2lmaWVkIGlmIGluY2x1ZGUgaXMgZ2l2ZW5cbiAgICovXG4gIGFzeW5jIGdldENhdGVnb3JpZXMob3B0aW9uczogUGlja2VyT3B0aW9ucyk6IFByb21pc2U8Q2F0ZWdvcnlbXT4ge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbignY2F0ZWdvcnknLCAncmVhZG9ubHknKTtcbiAgICBjb25zdCBjYXRlZ29yeVN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoJ2NhdGVnb3J5Jyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy53YWl0Rm9yUmVxdWVzdChjYXRlZ29yeVN0b3JlLmdldEFsbCgpKTtcbiAgICBsZXQgY2F0ZWdvcmllcyA9IHJlc3VsdC50YXJnZXQucmVzdWx0LmZpbHRlcihjYXRlZ29yeSA9PiBjYXRlZ29yeS5rZXkgIT09ICdjb21wb25lbnQnKTtcblxuICAgIGlmIChvcHRpb25zLnNob3dSZWNlbnRzKSB7XG4gICAgICBjYXRlZ29yaWVzLnVuc2hpZnQoeyBrZXk6ICdyZWNlbnRzJywgb3JkZXI6IC0xIH0pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmN1c3RvbT8ubGVuZ3RoKSB7XG4gICAgICBjYXRlZ29yaWVzLnB1c2goeyBrZXk6ICdjdXN0b20nLCBvcmRlcjogMTAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuY2F0ZWdvcmllcykge1xuICAgICAgY29uc3QgaW5jbHVkZUxpc3QgPSBvcHRpb25zLmNhdGVnb3JpZXMgYXMgQ2F0ZWdvcnlLZXlbXTtcbiAgICAgIGNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzLmZpbHRlcihjYXRlZ29yeSA9PiBpbmNsdWRlTGlzdC5pbmNsdWRlcyhjYXRlZ29yeS5rZXkpKTtcbiAgICAgIGNhdGVnb3JpZXMuc29ydCgoYTogQ2F0ZWdvcnksIGI6IENhdGVnb3J5KSA9PiBpbmNsdWRlTGlzdC5pbmRleE9mKGEua2V5KSAtIGluY2x1ZGVMaXN0LmluZGV4T2YoYi5rZXkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2F0ZWdvcmllcy5zb3J0KChhOiBDYXRlZ29yeSwgYjogQ2F0ZWdvcnkpID0+IGEub3JkZXIgLSBiLm9yZGVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2F0ZWdvcmllcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFsbCBlbW9qaXMgZm9yIGEgcGFydGljdWxhciBjYXRlZ29yeSBhbmQgZW1vamkgdmVyc2lvbi5cbiAgICpcbiAgICogQHBhcmFtIGNhdGVnb3J5IHRoZSBjYXRlZ29yeSB0byBnZXQgZW1vamlzIGZvclxuICAgKiBAcGFyYW0gZW1vamlWZXJzaW9uIHRoZSBtYXhpbXVtIHZlcnNpb24gZm9yIHJldHVybmVkIGVtb2ppc1xuICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBhcnJheSBvZiB0aGUgRW1vamlSZWNvcmQgZGF0YVxuICAgKi9cbiAgYXN5bmMgZ2V0RW1vamlzKGNhdGVnb3J5OiBDYXRlZ29yeSwgZW1vamlWZXJzaW9uOiBudW1iZXIpOiBQcm9taXNlPEVtb2ppUmVjb3JkW10+IHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRoaXMuZGIudHJhbnNhY3Rpb24oJ2Vtb2ppJywgJ3JlYWRvbmx5Jyk7XG4gICAgY29uc3QgZW1vamlTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCdlbW9qaScpO1xuICAgIGNvbnN0IGdyb3Vwc0luZGV4ID0gZW1vamlTdG9yZS5pbmRleCgnY2F0ZWdvcnknKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLndhaXRGb3JSZXF1ZXN0KGdyb3Vwc0luZGV4LmdldEFsbChjYXRlZ29yeS5vcmRlcikpO1xuICAgIGNvbnN0IGVtb2ppcyA9IHJlc3VsdC50YXJnZXQucmVzdWx0IGFzIEVtb2ppW107XG4gICAgY29uc3QgcmVjb3JkcyA9IGVtb2ppc1xuICAgICAgLmZpbHRlcigoZTogRW1vamkpID0+IGUudmVyc2lvbiA8PSBlbW9qaVZlcnNpb24pXG4gICAgICAuc29ydCgoYTogRW1vamksIGI6IEVtb2ppKSA9PiB7XG4gICAgICAgIGlmIChhLm9yZGVyICE9IG51bGwgJiYgYi5vcmRlciAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGEub3JkZXIgLSBiLm9yZGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9KVxuICAgICAgLm1hcChnZXRFbW9qaVJlY29yZCk7XG5cbiAgICByZXR1cm4gYXBwbHlSdWxlcyhyZWNvcmRzLCBlbW9qaVZlcnNpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaGVzIHRoZSBkYXRhYmFzZSBmb3IgZW1vamlzLlxuICAgKlxuICAgKiBAcGFyYW0gcXVlcnkgdGhlIHRleHQgcXVlcnlcbiAgICogQHBhcmFtIGN1c3RvbUVtb2ppcyB0aGUgY3VzdG9tIGVtb2ppc1xuICAgKiBAcGFyYW0gZW1vamlWZXJzaW9uIHRoZSBtYXhpbXVtIGVtb2ppIHZlcnNpb24gZm9yIHNlYXJjaCByZXN1bHRzXG4gICAqIEBwYXJhbSBjYXRlZ29yaWVzIHRoZSBjYXRlZ29yaWVzIHRvIHNlYXJjaFxuICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgbWF0Y2hpbmcgRW1vamlSZWNvcmRzXG4gICAqL1xuICBhc3luYyBzZWFyY2hFbW9qaXMoXG4gICAgcXVlcnk6IHN0cmluZyxcbiAgICBjdXN0b21FbW9qaXM6IEVtb2ppUmVjb3JkW10sXG4gICAgZW1vamlWZXJzaW9uOiBudW1iZXIsXG4gICAgY2F0ZWdvcmllczogQ2F0ZWdvcnlbXVxuICApOiBQcm9taXNlPEVtb2ppUmVjb3JkW10+IHtcbiAgICBjb25zdCByZXN1bHRzOiBFbW9qaVJlY29yZFtdID0gW107XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0aGlzLmRiLnRyYW5zYWN0aW9uKCdlbW9qaScsICdyZWFkb25seScpO1xuICAgICAgY29uc3QgZW1vamlTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKCdlbW9qaScpO1xuICAgICAgY29uc3QgcmVxdWVzdCA9IGVtb2ppU3RvcmUub3BlbkN1cnNvcigpO1xuXG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCAoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJzb3I6IElEQkN1cnNvcldpdGhWYWx1ZSA9IGV2ZW50LnRhcmdldD8ucmVzdWx0O1xuICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKFtcbiAgICAgICAgICAgIC8vIG1hdGNoaW5nIGVtb2ppcyBmcm9tIHRoZSBkYXRhYmFzZVxuICAgICAgICAgICAgLi4uYXBwbHlSdWxlcyhyZXN1bHRzLCBlbW9qaVZlcnNpb24pLFxuXG4gICAgICAgICAgICAvLyBtYXRjaGluZyBjdXN0b20gZW1vamlzXG4gICAgICAgICAgICAuLi5jdXN0b21FbW9qaXMuZmlsdGVyKGVtb2ppID0+IHF1ZXJ5TWF0Y2hlcyhlbW9qaSwgcXVlcnkpKVxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW1vamkgPSBjdXJzb3IudmFsdWUgYXMgRW1vamk7XG4gICAgICAgIGlmIChxdWVyeU1hdGNoZXMoZW1vamksIHF1ZXJ5LCBjYXRlZ29yaWVzKSAmJiBlbW9qaS52ZXJzaW9uIDw9IGVtb2ppVmVyc2lvbikge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChnZXRFbW9qaVJlY29yZChlbW9qaSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XG4gICAgICB9KTtcblxuICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlcnJvcjogRXZlbnQpID0+IHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXRzIGZvciBhIHJlcXVlc3QgdG8gY29tcGxldGUuXG4gICAqXG4gICAqIEBwYXJhbSByZXF1ZXN0IHRoZSByZXF1ZXN0XG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHJlcXVlc3Qgc3VjY2VlZHMsIG9yIHJlamVjdHMgaWYgaXQgZmFpbHNcbiAgICovXG4gIGFzeW5jIHdhaXRGb3JSZXF1ZXN0KHJlcXVlc3Q6IElEQlJlcXVlc3QpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IHJlc29sdmU7XG4gICAgICByZXF1ZXN0Lm9uZXJyb3IgPSByZWplY3Q7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogV3JhcHMgYW4gb3BlcmF0aW9uIGluIGFuIEluZGV4ZWREQiB0cmFuc2FjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHN0b3JlTmFtZSB0aGUgZGF0YSBzdG9yZShzKSB0byB1c2VcbiAgICogQHBhcmFtIG1vZGUgdGhlIHRyYW5zYWN0aW9uIG1vZGVcbiAgICogQHBhcmFtIGNhbGxiYWNrIGEgY2FsbGJhY2sgY29udGFpbmluZyB0aGUgd29yayB0byBkbyBpbiB0aGUgdHJhbnNhY3Rpb25cbiAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgdHJhbnNhY3Rpb24gY29tcGxldGVzLCBvciByZWplY3RzIGlmIGl0IGZhaWxzXG4gICAqL1xuICBwcm90ZWN0ZWQgd2l0aFRyYW5zYWN0aW9uKFxuICAgIHN0b3JlTmFtZTogc3RyaW5nIHwgc3RyaW5nW10sXG4gICAgbW9kZTogSURCVHJhbnNhY3Rpb25Nb2RlID0gJ3JlYWR3cml0ZScsXG4gICAgY2FsbGJhY2s6ICh0cmFuc2FjdGlvbjogSURCVHJhbnNhY3Rpb24pID0+IHZvaWRcbiAgKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWUsIG1vZGUpO1xuICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IHJlc29sdmU7XG4gICAgICB0cmFuc2FjdGlvbi5vbmVycm9yID0gcmVqZWN0O1xuXG4gICAgICBjYWxsYmFjayh0cmFuc2FjdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgZW50cmllcyBmcm9tIG9uZSBvciBtb3JlIHN0b3Jlcy5cbiAgICogQHBhcmFtIHN0b3JlTmFtZXMgdGhlIHN0b3JlcyB0byBjbGVhclxuICAgKiBAcmV0dXJuIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNsZWFyIGlzIGNvbXBsZXRlXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgcmVtb3ZlQWxsT2JqZWN0cyguLi5zdG9yZU5hbWVzOiBzdHJpbmdbXSkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihzdG9yZU5hbWVzLCAncmVhZHdyaXRlJyk7XG4gICAgY29uc3Qgc3RvcmVzID0gc3RvcmVOYW1lcy5tYXAoc3RvcmVOYW1lID0+IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSkpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHN0b3Jlcy5tYXAoc3RvcmUgPT4gdGhpcy53YWl0Rm9yUmVxdWVzdChzdG9yZS5jbGVhcigpKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBjb2xsZWN0aW9uIG9mIG9iamVjdHMgdG8gYSBkYXRhIHN0b3JlLlxuICAgKlxuICAgKiBAcGFyYW0gc3RvcmVOYW1lIHRoZSBzdG9yZSB0byBwb3B1bGF0ZVxuICAgKiBAcGFyYW0gb2JqZWN0cyB0aGUgb2JqZWN0cyB0byBhZGRcbiAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgYWRkIGlzIGNvbXBsZXRlLCBvciByZWplY3RzIGlmIGl0IGZhaWxzXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgYWRkT2JqZWN0cyhzdG9yZU5hbWU6IHN0cmluZywgb2JqZWN0czogYW55W10pIHtcbiAgICByZXR1cm4gdGhpcy53aXRoVHJhbnNhY3Rpb24oc3RvcmVOYW1lLCAncmVhZHdyaXRlJywgdHJhbnNhY3Rpb24gPT4ge1xuICAgICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuICAgICAgb2JqZWN0cy5mb3JFYWNoKG9iamVjdCA9PiB7XG4gICAgICAgIHN0b3JlLmFkZChvYmplY3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsICIvLyBBIHN1cGVyIGJhc2ljIGluLW1lbW9yeSBXZWJTdG9yYWdlIGVtdWxhdGlvbi4gVGhpcyBpcyByZXF1aXJlZCBpblxuLy8gc29tZSBlbnZpcm9ubWVudHMgd2hlcmUgbG9jYWxTdG9yYWdlL3Nlc3Npb25TdG9yYWdlIGFyZSBub3QgYWxsb3dlZC5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdG9yYWdlKCk6IFN0b3JhZ2Uge1xuICBsZXQgZGF0YSA9IHt9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0SXRlbToga2V5ID0+IGRhdGFba2V5XSxcbiAgICBzZXRJdGVtOiAoa2V5LCB2YWx1ZSkgPT4gZGF0YVtrZXldID0gdmFsdWUsXG4gICAgbGVuZ3RoOiBPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGgsXG4gICAgY2xlYXI6ICgpID0+IGRhdGEgPSB7fSxcbiAgICBrZXk6IGluZGV4ID0+IE9iamVjdC5rZXlzKGRhdGEpW2luZGV4XSxcbiAgICByZW1vdmVJdGVtOiBrZXkgPT4gZGVsZXRlIGRhdGFba2V5XVxuICB9O1xufSIsICJpbXBvcnQgeyBFbW9qaVJlY29yZCB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJlY2VudHNQcm92aWRlciB7XG4gIGFic3RyYWN0IGNsZWFyKCk6IHZvaWQ7XG4gIGFic3RyYWN0IGdldFJlY2VudHMobWF4Q291bnQ6IG51bWJlcik6IEFycmF5PEVtb2ppUmVjb3JkPjtcbiAgYWJzdHJhY3QgYWRkT3JVcGRhdGVSZWNlbnQoZW1vamk6IEVtb2ppUmVjb3JkLCBtYXhDb3VudDogbnVtYmVyKTogdm9pZDtcbn1cbiIsICJpbXBvcnQgeyBFbW9qaVJlY29yZCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFJlY2VudHNQcm92aWRlciB9IGZyb20gJy4vUmVjZW50c1Byb3ZpZGVyJztcblxuY29uc3QgU1RPUkFHRV9LRVkgPSAnUGljTW86cmVjZW50cyc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBXZWJTdG9yYWdlUHJvdmlkZXIgZXh0ZW5kcyBSZWNlbnRzUHJvdmlkZXIge1xuICAgICBzdG9yYWdlOiBTdG9yYWdlO1xuXG4gIGNvbnN0cnVjdG9yKHN0b3JhZ2U6IFN0b3JhZ2UpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc3RvcmFnZSA9IHN0b3JhZ2U7XG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0tFWSk7XG4gIH1cblxuICBnZXRSZWNlbnRzKG1heENvdW50OiBudW1iZXIpOiBBcnJheTxFbW9qaVJlY29yZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWNlbnRzID0gSlNPTi5wYXJzZSh0aGlzLnN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSkgPz8gJ1tdJyk7XG4gICAgICByZXR1cm4gcmVjZW50cy5zbGljZSgwLCBtYXhDb3VudCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHsgLy8gc3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlLCBubyByZWNlbnRzXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgYWRkT3JVcGRhdGVSZWNlbnQoZW1vamk6IEVtb2ppUmVjb3JkLCBtYXhDb3VudDogbnVtYmVyKSB7XG4gICAgLy8gQWRkIHRoZSBuZXcgcmVjZW50IHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpc3QsIHJlbW92aW5nIGl0IGlmIGl0IGV4aXN0cyBhbHJlYWR5XG4gICAgY29uc3QgcmVjZW50cyA9IFtcbiAgICAgIGVtb2ppLFxuICAgICAgLi4udGhpcy5nZXRSZWNlbnRzKG1heENvdW50KS5maWx0ZXIocmVjZW50ID0+IHJlY2VudC5oZXhjb2RlICE9PSBlbW9qaS5oZXhjb2RlKVxuICAgIF0uc2xpY2UoMCwgbWF4Q291bnQpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkocmVjZW50cykpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ3N0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZSwgcmVjZW50IGVtb2ppcyB3aWxsIG5vdCBiZSBzYXZlZCcpO1xuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7IGlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBjcmVhdGVTdG9yYWdlIH0gZnJvbSAnLi4vd2ViU3RvcmFnZVNoaW0nO1xuaW1wb3J0IHsgV2ViU3RvcmFnZVByb3ZpZGVyIH0gZnJvbSAnLi9XZWJTdG9yYWdlUHJvdmlkZXInO1xuXG5leHBvcnQgY2xhc3MgTG9jYWxTdG9yYWdlUHJvdmlkZXIgZXh0ZW5kcyBXZWJTdG9yYWdlUHJvdmlkZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihpc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpID8gbG9jYWxTdG9yYWdlIDogY3JlYXRlU3RvcmFnZSgpKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IFBpY2tlck9wdGlvbnMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGxpZ2h0VGhlbWUgfSBmcm9tICcuL3RoZW1lcyc7XG5pbXBvcnQgeyBOYXRpdmVSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL25hdGl2ZSc7XG5pbXBvcnQgZW4gZnJvbSAnLi9pMThuL2xhbmctZW4nO1xuaW1wb3J0IHsgSW5kZXhlZERiU3RvcmVGYWN0b3J5IH0gZnJvbSAnLi9kYXRhL0luZGV4ZWREYlN0b3JlJztcbmltcG9ydCB7IExvY2FsU3RvcmFnZVByb3ZpZGVyIH0gZnJvbSAnLi9yZWNlbnRzL0xvY2FsU3RvcmFnZVByb3ZpZGVyJztcblxuY29uc3QgZGVmYXVsdE9wdGlvbnM6IFBhcnRpYWw8UGlja2VyT3B0aW9ucz4gPSB7XG4gIGRhdGFTdG9yZTogSW5kZXhlZERiU3RvcmVGYWN0b3J5LFxuICB0aGVtZTogbGlnaHRUaGVtZSxcblxuICBhbmltYXRlOiB0cnVlLFxuXG4gIHNob3dDYXRlZ29yeVRhYnM6IHRydWUsXG4gIHNob3dQcmV2aWV3OiB0cnVlLFxuICBzaG93UmVjZW50czogdHJ1ZSxcbiAgc2hvd1NlYXJjaDogdHJ1ZSxcbiAgc2hvd1ZhcmlhbnRzOiB0cnVlLFxuXG4gIGVtb2ppc1BlclJvdzogOCxcbiAgdmlzaWJsZVJvd3M6IDYsXG5cbiAgZW1vamlWZXJzaW9uOiAnYXV0bycsXG4gIGkxOG46IGVuLFxuICBsb2NhbGU6ICdlbicsXG5cbiAgbWF4UmVjZW50czogNTAsXG5cbiAgY3VzdG9tOiBbXVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9wdGlvbnMob3B0aW9uczogUGFydGlhbDxQaWNrZXJPcHRpb25zPiA9IHt9KTogUGlja2VyT3B0aW9ucyB7XG4gIHJldHVybiB7IFxuICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgIC4uLm9wdGlvbnMsXG4gICAgcmVuZGVyZXI6IG9wdGlvbnMucmVuZGVyZXIgfHwgbmV3IE5hdGl2ZVJlbmRlcmVyKCksXG4gICAgcmVjZW50c1Byb3ZpZGVyOiBvcHRpb25zLnJlY2VudHNQcm92aWRlciB8fCBuZXcgTG9jYWxTdG9yYWdlUHJvdmlkZXIoKVxuICB9IGFzIFBpY2tlck9wdGlvbnM7XG59XG4iLCAiZXhwb3J0IHR5cGUgQXN5bmNFdmVudENhbGxiYWNrID0gKC4uLmFyZ3M6IGFueVtdKSA9PiBQcm9taXNlPHZvaWQ+O1xuZXhwb3J0IHR5cGUgRXZlbnRDYWxsYmFjayA9ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIEV2ZW50QXJncyA9IGFueVtdO1xuXG5leHBvcnQgdHlwZSBFdmVudEtleTxUPiA9IEV4dHJhY3Q8VCwgc3RyaW5nPjtcblxuZXhwb3J0IHR5cGUgRXZlbnRCaW5kaW5nID0ge1xuICBjb250ZXh0PzogYW55O1xuICBoYW5kbGVyOiBFdmVudENhbGxiYWNrO1xuICBvbmNlPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIEV2ZW50SGFuZGxlclJlY29yZDxUPiA9IHtcbiAgZXZlbnQ6IEV2ZW50S2V5PFQ+O1xuICBoYW5kbGVyOiBFdmVudENhbGxiYWNrO1xufTtcblxuZXhwb3J0IGNsYXNzIEV2ZW50czxUPiB7XG4gICNldmVudHM6IE1hcDxzdHJpbmcsIEV2ZW50QmluZGluZ1tdPiA9IG5ldyBNYXAoKTtcbiAgXG4gICNnZXRCaW5kaW5ncyhldmVudDogRXZlbnRLZXk8VD4pOiBFdmVudEJpbmRpbmdbXSB7XG4gICAgaWYgKCF0aGlzLiNldmVudHMuaGFzKGV2ZW50KSkge1xuICAgICAgdGhpcy4jZXZlbnRzLnNldChldmVudCwgW10pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLiNldmVudHMuZ2V0KGV2ZW50KSBhcyBFdmVudEJpbmRpbmdbXTtcbiAgfVxuXG4gICNhZGRMaXN0ZW5lcihldmVudDogRXZlbnRLZXk8VD4sIGhhbmRsZXI6IEV2ZW50Q2FsbGJhY2ssIGNvbnRleHQ/OiBhbnksIG9uY2UgPSBmYWxzZSkge1xuICAgIGNvbnN0IGJpbmRpbmdzID0gdGhpcy4jZ2V0QmluZGluZ3MoZXZlbnQpO1xuICAgIGJpbmRpbmdzLnB1c2goeyBjb250ZXh0LCBoYW5kbGVyLCBvbmNlIH0pO1xuICB9XG5cbiAgb24oZXZlbnQ6IEV2ZW50S2V5PFQ+LCBoYW5kbGVyOiBFdmVudENhbGxiYWNrLCBjb250ZXh0PzogYW55KSB7XG4gICAgdGhpcy4jYWRkTGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIGNvbnRleHQpO1xuICB9XG5cbiAgb25jZShldmVudDogRXZlbnRLZXk8VD4sIGhhbmRsZXI6IEV2ZW50Q2FsbGJhY2ssIGNvbnRleHQ/OiBhbnkpIHtcbiAgICB0aGlzLiNhZGRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgY29udGV4dCwgdHJ1ZSk7XG4gIH1cblxuICBvZmYoZXZlbnQ6IEV2ZW50S2V5PFQ+LCBoYW5kbGVyOiBFdmVudENhbGxiYWNrKSB7XG4gICAgY29uc3QgYmluZGluZ3MgPSB0aGlzLiNnZXRCaW5kaW5ncyhldmVudCk7XG4gICAgdGhpcy4jZXZlbnRzLnNldChldmVudCwgYmluZGluZ3MuZmlsdGVyKGggPT4gaC5oYW5kbGVyICE9PSBoYW5kbGVyKSk7XG4gIH1cblxuICBlbWl0KGV2ZW50OiBFdmVudEtleTxUPiwgLi4uYXJnczogRXZlbnRBcmdzKSB7XG4gICAgY29uc3QgYmluZGluZ3MgPSB0aGlzLiNnZXRCaW5kaW5ncyhldmVudCk7XG4gICAgYmluZGluZ3MuZm9yRWFjaCgoYmluZGluZzogRXZlbnRCaW5kaW5nKSA9PiB7XG4gICAgICBiaW5kaW5nLmhhbmRsZXIuYXBwbHkoYmluZGluZy5jb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmIChiaW5kaW5nLm9uY2UpIHtcbiAgICAgICAgdGhpcy5vZmYoZXZlbnQsIGJpbmRpbmcuaGFuZGxlcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmVBbGwoKSB7XG4gICAgdGhpcy4jZXZlbnRzLmNsZWFyKCk7XG4gIH1cbn1cbiIsICJleHBvcnQgZGVmYXVsdCB7XG4gIGluamVjdFN0eWxlczogdHJ1ZVxufTtcbiIsICJpbXBvcnQgeyBFdmVudHMsIEV2ZW50S2V5IH0gZnJvbSAnLi9ldmVudHMnO1xuXG5leHBvcnQgdHlwZSBBcHBFdmVudCA9XG4gIHwgJ2RhdGE6cmVhZHknXG4gIHwgJ2Vycm9yJ1xuICB8ICdyZWluaXRpYWxpemUnXG4gIHwgJ2Vtb2ppOnNlbGVjdCdcbiAgfCAnY29udGVudDpzaG93J1xuICB8ICdwcmV2aWV3OnNob3cnXG4gIHwgJ3ByZXZpZXc6aGlkZSdcbiAgfCAndmFyaWFudFBvcHVwOmhpZGUnXG4gIHwgJ2NhdGVnb3J5OnNlbGVjdCdcbiAgfCAnY2F0ZWdvcnk6bmV4dCdcbiAgfCAnY2F0ZWdvcnk6cHJldmlvdXMnXG4gIHwgJ3JlY2VudDphZGQnXG4gIHwgJ2ZvY3VzOmNoYW5nZSc7XG5cbmV4cG9ydCB0eXBlIEFwcEV2ZW50S2V5ID0gRXZlbnRLZXk8QXBwRXZlbnQ+O1xuXG5leHBvcnQgY2xhc3MgQXBwRXZlbnRzIGV4dGVuZHMgRXZlbnRzPEFwcEV2ZW50PiB7fVxuIiwgImltcG9ydCB7IEV2ZW50cywgRXZlbnRLZXkgfSBmcm9tICcuL2V2ZW50cyc7XG5cbmV4cG9ydCB0eXBlIEV4dGVybmFsRXZlbnQgPSBcbiAgJ2Vtb2ppOnNlbGVjdCcgfFxuICAnZGF0YTpyZWFkeSc7XG5cbmV4cG9ydCB0eXBlIEV4dGVybmFsRXZlbnRLZXkgPSBFdmVudEtleTxFeHRlcm5hbEV2ZW50PjtcblxuZXhwb3J0IGNsYXNzIEV4dGVybmFsRXZlbnRzIGV4dGVuZHMgRXZlbnRzPEV4dGVybmFsRXZlbnQ+IHt9XG4iLCAiaW1wb3J0IHsgVmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJy4uL1RlbXBsYXRlJztcbmltcG9ydCB7IEVtb2ppQ29udGFpbmVyIH0gZnJvbSAnLi9FbW9qaUNvbnRhaW5lcic7XG5pbXBvcnQgeyBDYXRlZ29yeSwgRW1vamlGb2N1c1RhcmdldCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IExhenlMb2FkZXIgfSBmcm9tICcuLi9MYXp5TG9hZGVyJztcbmltcG9ydCB7IGdldFByZWZpeGVkQ2xhc3NlcyB9IGZyb20gJy4uL3V0aWwnO1xuXG50eXBlIEJhc2VFbW9qaUNhdGVnb3J5T3B0aW9ucyA9IHtcbiAgY2F0ZWdvcnk6IENhdGVnb3J5O1xuICBzaG93VmFyaWFudHM6IGJvb2xlYW47XG4gIGxhenlMb2FkZXI/OiBMYXp5TG9hZGVyO1xuICB0ZW1wbGF0ZTogVGVtcGxhdGU7XG59XG5cbmV4cG9ydCBjb25zdCBjbGFzc2VzID0gZ2V0UHJlZml4ZWRDbGFzc2VzKFxuICAnZW1vamlDYXRlZ29yeScsXG4gICdjYXRlZ29yeU5hbWUnLFxuICAnbm9SZWNlbnRzJyxcbiAgJ3JlY2VudEVtb2ppcydcbik7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlRW1vamlDYXRlZ29yeSBleHRlbmRzIFZpZXcge1xuICBjYXRlZ29yeTogQ2F0ZWdvcnk7XG4gIHByb3RlY3RlZCBzaG93VmFyaWFudHM6IGJvb2xlYW47XG4gIHByb3RlY3RlZCBsYXp5TG9hZGVyPzogTGF6eUxvYWRlcjtcbiAgcHJvdGVjdGVkIGVtb2ppQ29udGFpbmVyOiBFbW9qaUNvbnRhaW5lcjtcblxuICBwcm90ZWN0ZWQgYmFzZVVJRWxlbWVudHMgPSB7XG4gICAgY2F0ZWdvcnlOYW1lOiBWaWV3LmJ5Q2xhc3MoY2xhc3Nlcy5jYXRlZ29yeU5hbWUpXG4gIH1cblxuICBzZXRBY3RpdmUoYWN0aXZlOiBib29sZWFuLCBmb2N1c1RhcmdldD86IEVtb2ppRm9jdXNUYXJnZXQsIHBlcmZvcm1Gb2N1cz86IGJvb2xlYW4pIHtcbiAgICB0aGlzLmVtb2ppQ29udGFpbmVyLnNldEFjdGl2ZShhY3RpdmUsIGZvY3VzVGFyZ2V0LCBwZXJmb3JtRm9jdXMpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoeyB0ZW1wbGF0ZSwgY2F0ZWdvcnksIHNob3dWYXJpYW50cywgbGF6eUxvYWRlciB9OiBCYXNlRW1vamlDYXRlZ29yeU9wdGlvbnMpIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlLCBjbGFzc2VzIH0pO1xuXG4gICAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgIHRoaXMuc2hvd1ZhcmlhbnRzID0gc2hvd1ZhcmlhbnRzO1xuICAgIHRoaXMubGF6eUxvYWRlciA9IGxhenlMb2FkZXI7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJy4uL1RlbXBsYXRlJztcblxuZXhwb3J0IGRlZmF1bHQgbmV3IFRlbXBsYXRlKCh7IGNsYXNzZXMsIGVtb2ppIH0pID0+IC8qIGh0bWwgKi9gXG4gIDxidXR0b25cbiAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICBjbGFzcz1cIiR7Y2xhc3Nlcy5lbW9qaUJ1dHRvbn1cIlxuICAgIHRpdGxlPVwiJHtlbW9qaS5sYWJlbH1cIlxuICAgIGRhdGEtZW1vamk9XCIke2Vtb2ppLmVtb2ppfVwiXG4gICAgdGFiaW5kZXg9XCItMVwiPlxuICAgIDxkaXYgZGF0YS1wbGFjZWhvbGRlcj1cImVtb2ppQ29udGVudFwiPjwvZGl2PlxuICA8L2J1dHRvbj5cbmApOyIsICJpbXBvcnQgeyBMYXp5TG9hZGVyIH0gZnJvbSAnLi4vTGF6eUxvYWRlcic7XG5cbmltcG9ydCB7IFZpZXcgfSBmcm9tICcuL3ZpZXcnO1xuXG5pbXBvcnQgeyBDYXRlZ29yeUtleSwgRW1vamlSZWNvcmQgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB0ZW1wbGF0ZSBmcm9tICcuL0Vtb2ppLnRlbXBsYXRlJztcbmltcG9ydCB7IGdldFByZWZpeGVkQ2xhc3NlcyB9IGZyb20gJy4uL3V0aWwnO1xuXG5jb25zdCBjbGFzc2VzID0gZ2V0UHJlZml4ZWRDbGFzc2VzKCdlbW9qaUJ1dHRvbicpO1xuXG5cbnR5cGUgRW1vamlPcHRpb25zID0ge1xuICBlbW9qaTogRW1vamlSZWNvcmRcbiAgbGF6eUxvYWRlcj86IExhenlMb2FkZXI7XG4gIGNhdGVnb3J5PzogQ2F0ZWdvcnlLZXk7XG59O1xuXG5leHBvcnQgY2xhc3MgRW1vamkgZXh0ZW5kcyBWaWV3IHtcbiAgcHJpdmF0ZSBlbW9qaTogRW1vamlSZWNvcmRcbiAgcHJpdmF0ZSBsYXp5TG9hZGVyPzogTGF6eUxvYWRlcjtcbiAgcHJpdmF0ZSBjYXRlZ29yeT86IENhdGVnb3J5S2V5O1xuXG4gIGNvbnN0cnVjdG9yKHsgZW1vamksIGxhenlMb2FkZXIsIGNhdGVnb3J5IH06IEVtb2ppT3B0aW9ucykge1xuICAgIHN1cGVyKHsgdGVtcGxhdGUsIGNsYXNzZXMgfSk7XG5cbiAgICB0aGlzLmVtb2ppID0gZW1vamk7XG4gICAgdGhpcy5sYXp5TG9hZGVyID0gbGF6eUxvYWRlcjtcbiAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMudWlFdmVudHMgPSBbXG4gICAgICBWaWV3LnVpRXZlbnQoJ2ZvY3VzJywgdGhpcy5oYW5kbGVGb2N1cylcbiAgICBdO1xuICAgIFxuICAgIHN1cGVyLmluaXRpYWxpemUoKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlRm9jdXMoKSB7XG4gICAgaWYgKHRoaXMuY2F0ZWdvcnkpIHtcbiAgICAgIHRoaXMuZXZlbnRzLmVtaXQoJ2ZvY3VzOmNoYW5nZScsIHRoaXMuY2F0ZWdvcnkpO1xuICAgIH1cbiAgfVxuXG4gIGFjdGl2YXRlRm9jdXMocGVyZm9ybUZvY3VzPzogYm9vbGVhbikge1xuICAgIHRoaXMuZWwudGFiSW5kZXggPSAwO1xuICAgIGlmIChwZXJmb3JtRm9jdXMpIHtcbiAgICAgIHRoaXMuZWwuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBkZWFjdGl2YXRlRm9jdXMoKSB7XG4gICAgdGhpcy5lbC50YWJJbmRleCA9IC0xO1xuICB9XG5cbiAgcmVuZGVyU3luYygpOiBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuIHN1cGVyLnJlbmRlclN5bmMoe1xuICAgICAgZW1vamk6IHRoaXMuZW1vamksXG4gICAgICBlbW9qaUNvbnRlbnQ6IHRoaXMucmVuZGVyZXIuZG9SZW5kZXIodGhpcy5lbW9qaSwgdGhpcy5sYXp5TG9hZGVyKVxuICAgIH0pO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgRXZlbnRzIH0gZnJvbSAnLi9ldmVudHMnO1xuXG50eXBlIEZvY3VzR3JpZEV2ZW50ID0gJ2ZvY3VzOmNoYW5nZScgfCAnZm9jdXM6dW5kZXJmbG93JyB8ICdmb2N1czpvdmVyZmxvdyc7XG5cbmV4cG9ydCB0eXBlIEZvY3VzQ2hhbmdlRXZlbnQgPSB7XG4gIGZyb206IG51bWJlcjtcbiAgdG86IG51bWJlcjtcbiAgcGVyZm9ybUZvY3VzOiBib29sZWFuO1xufTtcblxudHlwZSBDZWxsID0ge1xuICByb3c6IG51bWJlcjtcbiAgY29sdW1uOiBudW1iZXI7XG59O1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gYXJyYXkgb2YgZW1vamlzIGFzIGEgZ3JpZCB3aXRoIHJvd3MgYW5kIGNvbHVtbnMgYXMgdGhleSBhcHBlYXIgaW4gdGhlIFVJLlxuICogVGhpcyBtYWtlcyBmb2N1cyB0cmF2ZXJzYWwgY2FsY3VsYXRpb25zIGxlc3MgY29tcGxleCBpbiB0aGUgRW1vamlDb250YWluZXIuXG4gKiBcbiAqIFRoZSBncmlkIGlzIGdpdmVuIGEgZmxhdCBhcnJheSBvZiBlbW9qaXMgZm9yIHRoZSBjdXJyZW50IGNhdGVnb3J5IGFuZCB0aGUgbnVtYmVyIG9mIGNvbHVtbnMuIEl0IHdpbGwgY3JlYXRlXG4gKiBhIHZpcnR1YWwgZ3JpZCBzdHJ1Y3R1cmUgbWFwcGluZyB0aG9zZSBlbW9qaXMgdG8gcm93cyBvZiB0aGUgZGVzaXJlZCBsZW5ndGguXG4gKiBcbiAqIFRoZSBmb2N1cyBjYW4gYmUgdHJhdmVyc2VkIGxlZnQsIHJpZ2h0LCB1cCwgYW5kIGRvd24sIG9yIHRvIGEgc3BlY2lmaWMgcm93IGFuZCBjb2x1bW4gY29vcmRpbmF0ZS4gTGF0ZXIsIHRoZSBjdXJyZW50bHlcbiAqIHNlbGVjdGVkIGdyaWQgY2VsbCBjYW4gYmUgdHJhbnNsYXRlZCBiYWNrIHRvIHRoZSBpbmRleCBpbiB0aGUgb3JpZ2luYWwgZW1vamkgYXJyYXkuXG4gKiBcbiAqIFRoZSBncmlkIGVtaXRzIHRocmVlIGV2ZW50czpcbiAqIC0gZm9jdXM6Y2hhbmdlIC0gd2hlbiB0aGUgZm9jdXNlZCBjZWxsIGNoYW5nZXNcbiAqICAgICAgICAgICAgICAgICAgRXZlbnQgcHJvcGVydGllczogZnJvbSAodGhlIHByZXZpb3VzIGluZGV4KSwgdG8gKHRoZSBuZXcgaW5kZXgpLCBhbmQgcGVyZm9ybUZvY3VzICh3aGV0aGVyIHRvIGZvY3VzIHRoZSBuZXcgY2VsbClcbiAqIFxuICogLSBmb2N1czp1bmRlcmZsb3cgLSB3aGVuIHRoZSBmb2N1cyB0cmllcyB0byBtb3ZlIGJlbG93IHRoZSBmaXJzdCBlbW9qaSBpbiB0aGUgY2F0ZWdvcnlcbiAqICAgICAgICAgICAgICAgICAgICAgRXZlbnQgcHJvcGVydGllczogaW5kZXggKHRoZSBjdXJyZW50IGluZGV4IHdpdGhpbiB0aGUgZ3JpZClcbiAqIFxuICogLSBmb2N1czpvdmVyZmxvdyAtIHdoZW4gdGhlIGZvY3VzIHRyaWVzIHRvIG1vdmUgYmV5b25kIHRoZSBsYXN0IGVtb2ppIGluIHRoZSBjYXRlZ29yeVxuICogICAgICAgICAgICAgICAgICAgICBFdmVudCBwcm9wZXJ0aWVzOiBpbmRleCAodGhlIGN1cnJlbnQgaW5kZXggd2l0aGluIHRoZSBncmlkKVxuICovXG4gZXhwb3J0IGNsYXNzIEZvY3VzR3JpZCB7XG4gIHByaXZhdGUgZm9jdXNlZFJvdzogbnVtYmVyO1xuICBwcml2YXRlIGZvY3VzZWRDb2x1bW46IG51bWJlcjtcbiAgcHJpdmF0ZSByb3dDb3VudDogbnVtYmVyO1xuICBwcml2YXRlIGNvbHVtbkNvdW50OiBudW1iZXI7XG4gIHByaXZhdGUgZW1vamlDb3VudDogbnVtYmVyO1xuICBwcml2YXRlIHdyYXA6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBldmVudHMgPSBuZXcgRXZlbnRzPEZvY3VzR3JpZEV2ZW50PigpO1xuXG4gIC8qKiBNYXBzIGZvY3VzIHRyYXZlcnNhbCBrZXlzIHRvIHRoZWlyIGFzc29jaWF0ZWQgaGFuZGxlcnMuICovXG4gIHByaXZhdGUga2V5SGFuZGxlcnMgPSB7XG4gICAgQXJyb3dMZWZ0OiB0aGlzLmZvY3VzUHJldmlvdXMuYmluZCh0aGlzKSxcbiAgICBBcnJvd1JpZ2h0OiB0aGlzLmZvY3VzTmV4dC5iaW5kKHRoaXMpLFxuICAgIEFycm93VXA6IHRoaXMuZm9jdXNVcC5iaW5kKHRoaXMpLFxuICAgIEFycm93RG93bjogdGhpcy5mb2N1c0Rvd24uYmluZCh0aGlzKVxuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgRm9jdXNHcmlkLlxuICAgKiBcbiAgICogQHBhcmFtIGNvbHVtbkNvdW50IFRoZSBudW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgZW1vamkgcGlja2VyLlxuICAgKiBAcGFyYW0gZW1vamlDb3VudCBUaGUgdG90YWwgbnVtYmVyIG9mIGVtb2ppcyBpbiB0aGlzIGNhdGVnb3J5LlxuICAgKiBAcGFyYW0gaW5pdGlhbFJvdyBUaGUgaW5pdGlhbCBmb2N1c2VkIHJvdy5cbiAgICogQHBhcmFtIGluaXRpYWxDb2x1bW4gVGhlIGluaXRpYWwgZm9jdXNlZCBjb2x1bW4uXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb2x1bW5Db3VudDogbnVtYmVyLCBlbW9qaUNvdW50OiBudW1iZXIsIGluaXRpYWxSb3cgPSAwLCBpbml0aWFsQ29sdW1uID0gMCwgd3JhcCA9IGZhbHNlKSB7XG4gICAgdGhpcy5yb3dDb3VudCA9IE1hdGguY2VpbChlbW9qaUNvdW50IC8gY29sdW1uQ291bnQpO1xuICAgIHRoaXMuY29sdW1uQ291bnQgPSBjb2x1bW5Db3VudDtcbiAgICB0aGlzLmZvY3VzZWRSb3cgPSBpbml0aWFsUm93O1xuICAgIHRoaXMuZm9jdXNlZENvbHVtbiA9IGluaXRpYWxDb2x1bW47XG4gICAgdGhpcy5lbW9qaUNvdW50ID0gZW1vamlDb3VudDtcbiAgICB0aGlzLndyYXAgPSB3cmFwO1xuXG4gICAgdGhpcy5oYW5kbGVLZXlEb3duID0gdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgYm91bmQgZXZlbnQgbGlzdGVuZXJzLlxuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLmV2ZW50cy5yZW1vdmVBbGwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWMgQVBJIGZvciBsaXN0ZW5pbmcgZm9yIGZvY3VzIGV2ZW50cy5cbiAgICovXG4gIG9uKGV2ZW50OiBGb2N1c0dyaWRFdmVudCwgaGFuZGxlcjogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5ldmVudHMub24oZXZlbnQsIGhhbmRsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMga2V5ZG93biBldmVudHMgdGhhdCBhcmUgZm9yd2FyZGVkIGZyb20gdGhlIEVtb2ppQ29udGFpbmVyIGFuZCBleGVjdXRlc1xuICAgKiB0aGUgYXBwcm9wcmlhdGUgZm9jdXMgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSBldmVudCB0aGUgS2V5Ym9hcmRFdmVudCB0aGF0IG9jY3VycmVkXG4gICAqL1xuICBoYW5kbGVLZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSBpbiB0aGlzLmtleUhhbmRsZXJzKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5rZXlIYW5kbGVyc1tldmVudC5rZXldKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGZvY3VzZWQgY2VsbCB0byBhIHNwZWNpZmljIHJvdyBhbmQsIG9wdGlvbmFsbHksIGNvbHVtbi4gSWYgbm8gY29sdW1uIGlzIHNwZWNpZmllZCxcbiAgICogdGhlIGZvY3VzZWQgY29sdW1uIHJlbWFpbnMgdW5jaGFuZ2VkLlxuICAgKiBcbiAgICogVGhlIGBwZXJmb3JtRm9jdXNgIGZsYWcgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBmb2N1cyBzaG91bGQgYmUgbW92ZWQgdG8gdGhlIG5ldyBjZWxsLiBJZiBpdFxuICAgKiBpcyBmYWxzZSwgdGhlIGZvY3VzZWQgZWxlbWVudCB3aWxsIGJlIGNoYW5nZWQgYnV0IHRoZSBhY3R1YWwgZm9jdXMoKSBjYWxsIHdpbGwgbm90IGJlIHRyaWdnZXJlZCB5ZXQuXG4gICAqIFxuICAgKiBAcGFyYW0gcm93IFRoZSBuZXcgZm9jdXNlZCByb3dcbiAgICogQHBhcmFtIGNvbHVtbiBUaGUgbmV3IGZvY3VzZWQgY29sdW1uLCBpZiBzcGVjaWZpZWRcbiAgICogQHBhcmFtIHBlcmZvcm1Gb2N1cyBXaGV0aGVyIG9yIG5vdCB0byBwZXJmb3JtIHRoZSBhY3R1YWwgZm9jdXMgb3BlcmF0aW9uLlxuICAgKi9cbiAgc2V0Q2VsbChyb3c6IG51bWJlciwgY29sdW1uPzogbnVtYmVyLCBwZXJmb3JtRm9jdXMgPSB0cnVlKSB7XG4gICAgY29uc3QgcHJldmlvdXNJbmRleCA9IHRoaXMuZ2V0SW5kZXgoKTtcbiAgICB0aGlzLmZvY3VzZWRSb3cgPSByb3c7XG5cbiAgICBpZiAoY29sdW1uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIElmIHRoZSBjb2x1bW4gZXhjZWVkcyB0aGUgY29sdW1uIGNvdW50LCBmb2N1cyB0aGUgbGFzdCBjb2x1bW4uXG4gICAgICB0aGlzLmZvY3VzZWRDb2x1bW4gPSBNYXRoLm1pbih0aGlzLmNvbHVtbkNvdW50LCBjb2x1bW4pO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBnaXZlbiBjZWxsIGlzIG91dCBvZiBib3VuZHMsIGZvY3VzIHRvIHRoZSBsYXN0IGNlbGwuXG4gICAgaWYgKHRoaXMuZm9jdXNlZFJvdyA+PSB0aGlzLnJvd0NvdW50IHx8IHRoaXMuZ2V0SW5kZXgoKSA+PSB0aGlzLmVtb2ppQ291bnQpIHtcbiAgICAgIHRoaXMuZm9jdXNlZFJvdyA9IHRoaXMucm93Q291bnQgLSAxO1xuICAgICAgdGhpcy5mb2N1c2VkQ29sdW1uID0gKHRoaXMuZW1vamlDb3VudCAlIHRoaXMuY29sdW1uQ291bnQpIC0gMTtcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50cy5lbWl0KCdmb2N1czpjaGFuZ2UnLCB7IGZyb206IHByZXZpb3VzSW5kZXgsIHRvOiB0aGlzLmdldEluZGV4KCksIHBlcmZvcm1Gb2N1cyB9KTtcbiAgfVxuXG4gIHNldEZvY3VzZWRJbmRleChpbmRleDogbnVtYmVyLCBwZXJmb3JtRm9jdXMgPSB0cnVlKSB7XG4gICAgY29uc3Qgcm93ID0gTWF0aC5mbG9vcihpbmRleCAvIHRoaXMuY29sdW1uQ291bnQpO1xuICAgIGNvbnN0IGNvbHVtbiA9IGluZGV4ICUgdGhpcy5jb2x1bW5Db3VudDtcbiAgICB0aGlzLnNldENlbGwocm93LCBjb2x1bW4sIHBlcmZvcm1Gb2N1cyk7XG4gIH1cblxuICAvKipcbiAgICogTW92ZXMgdGhlIGZvY3VzIHRvIHRoZSBuZXh0IGNlbGwgaW4gdGhlIGN1cnJlbnQgcm93LlxuICAgKiBFbWl0cyBgZm9jdXM6b3ZlcmZsb3dgIGlmIHRoZXJlIGlzIG5vIG5leHQgY2VsbC4gXG4gICAqL1xuICBmb2N1c05leHQoKSB7XG4gICAgaWYgKHRoaXMuZm9jdXNlZENvbHVtbiA8IHRoaXMuY29sdW1uQ291bnQgLSAxICYmIHRoaXMuZ2V0SW5kZXgoKSA8IHRoaXMuZW1vamlDb3VudCAtIDEpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbCh0aGlzLmZvY3VzZWRSb3csIHRoaXMuZm9jdXNlZENvbHVtbiArIDEpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5mb2N1c2VkUm93IDwgdGhpcy5yb3dDb3VudCAtIDEpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbCh0aGlzLmZvY3VzZWRSb3cgKyAxLCAwKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMud3JhcCkge1xuICAgICAgdGhpcy5zZXRDZWxsKDAsIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV2ZW50cy5lbWl0KCdmb2N1czpvdmVyZmxvdycsIDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlcyB0aGUgZm9jdXMgdG8gdGhlIHByZXZpb3VzIGNlbGwgaW4gdGhlIGN1cnJlbnQgcm93LlxuICAgKiBFbWl0cyBgZm9jdXM6dW5kZXJmbG93YCBpZiB0aGVyZSBpcyBubyBwcmV2aW91cyBjZWxsLlxuICAgKi9cbiAgZm9jdXNQcmV2aW91cygpIHtcbiAgICBpZiAodGhpcy5mb2N1c2VkQ29sdW1uID4gMCkge1xuICAgICAgdGhpcy5zZXRDZWxsKHRoaXMuZm9jdXNlZFJvdywgdGhpcy5mb2N1c2VkQ29sdW1uIC0gMSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmZvY3VzZWRSb3cgPiAwKSB7XG4gICAgICB0aGlzLnNldENlbGwodGhpcy5mb2N1c2VkUm93IC0gMSwgdGhpcy5jb2x1bW5Db3VudCAtIDEpO1xuICAgIH0gZWxzZSBpZiAodGhpcy53cmFwKSB7XG4gICAgICB0aGlzLnNldENlbGwodGhpcy5yb3dDb3VudCAtIDEsIHRoaXMuY29sdW1uQ291bnQgLSAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ldmVudHMuZW1pdCgnZm9jdXM6dW5kZXJmbG93JywgdGhpcy5jb2x1bW5Db3VudCAtIDEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlcyB0aGUgZm9jdXMgdG8gdGhlIGNlbGwgZGlyZWN0bHkgYWJvdmUgdGhlIGN1cnJlbnQgb25lLlxuICAgKiBFbWl0cyBgZm9jdXM6dW5kZXJmbG93YCBpZiB0aGUgY3VycmVudCBjZWxsIGlzIGluIHRoZSBmaXJzdCByb3cuXG4gICAqL1xuICBmb2N1c1VwKCkge1xuICAgIGlmICh0aGlzLmZvY3VzZWRSb3cgPiAwKSB7XG4gICAgICB0aGlzLnNldENlbGwodGhpcy5mb2N1c2VkUm93IC0gMSwgdGhpcy5mb2N1c2VkQ29sdW1uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ldmVudHMuZW1pdCgnZm9jdXM6dW5kZXJmbG93JywgdGhpcy5mb2N1c2VkQ29sdW1uKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTW92ZXMgdGhlIGZvY3VzIHRvIHRoZSBjZWxsIGRpcmVjdGx5IGJlbG93IHRoZSBjdXJyZW50IG9uZS5cbiAgICogRW1pdHMgYGZvY3VzOm92ZXJmbG93YCBpZiB0aGUgY3VycmVudCBjZWxsIGlzIGluIHRoZSBsYXN0IHJvdy5cbiAgICovXG4gIGZvY3VzRG93bigpIHtcbiAgICBpZiAodGhpcy5mb2N1c2VkUm93IDwgdGhpcy5yb3dDb3VudCAtIDEpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbCh0aGlzLmZvY3VzZWRSb3cgKyAxLCB0aGlzLmZvY3VzZWRDb2x1bW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV2ZW50cy5lbWl0KCdmb2N1czpvdmVyZmxvdycsIHRoaXMuZm9jdXNlZENvbHVtbik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1vdmVzIHRoZSBmb2N1cyB0byBhIHNwZWNpZmljIGVtb2ppIGluIHRoZSBjYXRlZ29yeS5cbiAgICogQHBhcmFtIGluZGV4IHRoZSBpbmRleCBvZiB0aGUgZW1vamkgdG8gZm9jdXMgb25cbiAgICovXG4gIGZvY3VzVG9JbmRleChpbmRleDogbnVtYmVyKSB7XG4gICAgdGhpcy5zZXRDZWxsKE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLmNvbHVtbkNvdW50KSwgaW5kZXggJSB0aGlzLmNvbHVtbkNvdW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbmRleCBpbiB0aGUgZW1vamkgYXJyYXkgb2YgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGNlbGwuXG4gICAqIEByZXR1cm5zIHRoZSBjdXJyZW50bHkgZm9jdXNlZCBjZWxsJ3MgaW5kZXhcbiAgICovXG4gIGdldEluZGV4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLmZvY3VzZWRSb3cgKiB0aGlzLmNvbHVtbkNvdW50KSArIHRoaXMuZm9jdXNlZENvbHVtbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByb3cgYW5kIGNvbHVtbiBvZiB0aGUgY3VycmVudGx5IGZvY3VzZWQgY2VsbC5cbiAgICogQHJldHVybnMgdGhlIHJvdyBhbmQgY29sdW1uIGRhdGFcbiAgICovXG4gIGdldENlbGwoKTogQ2VsbCB7XG4gICAgcmV0dXJuIHsgcm93OiB0aGlzLmZvY3VzZWRSb3csIGNvbHVtbjogdGhpcy5mb2N1c2VkQ29sdW1uIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdG90YWwgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIGdyaWRcbiAgICogQHJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBncmlkXG4gICAqL1xuICBnZXRSb3dDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb3dDb3VudDtcbiAgfVxufVxuIiwgImltcG9ydCB7IFRlbXBsYXRlIH0gZnJvbSAnLi4vVGVtcGxhdGUnO1xuXG5leHBvcnQgZGVmYXVsdCBuZXcgVGVtcGxhdGUoKHsgY2xhc3NlcyB9KSA9PiAvKiBodG1sICovYFxuICA8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLmVtb2ppQ29udGFpbmVyfVwiPlxuICAgIDxkaXYgZGF0YS1wbGFjZWhvbGRlcj1cImVtb2ppc1wiPjwvZGl2PlxuICA8L2Rpdj5cbmApO1xuIiwgImltcG9ydCB7IEVtb2ppIH0gZnJvbSAnLi9FbW9qaSc7XG5pbXBvcnQgeyBMYXp5TG9hZGVyIH0gZnJvbSAnLi4vTGF6eUxvYWRlcic7XG5pbXBvcnQgeyBnZXRFbW9qaUZvckV2ZW50LCBnZXRQcmVmaXhlZENsYXNzZXMgfSBmcm9tICcuLi91dGlsJztcbmltcG9ydCB7IFZpZXcgfSBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IHsgQ2F0ZWdvcnlLZXksIEVtb2ppRm9jdXNUYXJnZXQsIEVtb2ppUmVjb3JkIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgRm9jdXNHcmlkLCBGb2N1c0NoYW5nZUV2ZW50IH0gZnJvbSAnLi4vZm9jdXNHcmlkJztcblxuaW1wb3J0IHRlbXBsYXRlIGZyb20gJy4vRW1vamlDb250YWluZXIudGVtcGxhdGUnO1xuXG5jb25zdCBjbGFzc2VzID0gZ2V0UHJlZml4ZWRDbGFzc2VzKCdlbW9qaUNvbnRhaW5lcicpO1xuXG50eXBlIEVtb2ppQ29udGFpbmVyT3B0aW9ucyA9IHtcbiAgZW1vamlzOiBFbW9qaVJlY29yZFtdO1xuICBzaG93VmFyaWFudHM6IGJvb2xlYW47XG4gIHByZXZpZXc6IGJvb2xlYW47XG4gIGxhenlMb2FkZXI/OiBMYXp5TG9hZGVyO1xuICBjYXRlZ29yeT86IENhdGVnb3J5S2V5O1xuICBmdWxsSGVpZ2h0PzogYm9vbGVhbjtcbn07XG5cbi8qKlxuICogQW4gRW1vamlDb250YWluZXIgY29udGFpbnMgYWxsIHRoZSBlbW9qaXMgaW4gYSBnaXZlbiBjYXRlZ29yeS5cbiAqIFxuICogSXQgbWFuYWdlcyBrZXliYW9yZCBmb2N1cyBmb3IgYWxsIGVtb2ppcyBpbiB0aGUgY2F0ZWdvcnkuXG4gKi9cbmV4cG9ydCBjbGFzcyBFbW9qaUNvbnRhaW5lciBleHRlbmRzIFZpZXcge1xuICBwcm90ZWN0ZWQgZW1vamlzOiBFbW9qaVJlY29yZFtdO1xuICBwcm90ZWN0ZWQgc2hvd1ZhcmlhbnRzOiBib29sZWFuO1xuICBwcm90ZWN0ZWQgcHJldmlldzogYm9vbGVhbjtcbiAgcHJvdGVjdGVkIGxhenlMb2FkZXI/OiBMYXp5TG9hZGVyO1xuICBwcml2YXRlIGNhdGVnb3J5PzogQ2F0ZWdvcnlLZXk7XG4gIHByaXZhdGUgZ3JpZDogRm9jdXNHcmlkO1xuICBlbW9qaVZpZXdzOiBFbW9qaVtdO1xuICBlbW9qaUVsZW1lbnRzOiBIVE1MRWxlbWVudFtdO1xuICBmdWxsSGVpZ2h0ID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoeyBlbW9qaXMsIHNob3dWYXJpYW50cywgcHJldmlldyA9IHRydWUsIGxhenlMb2FkZXIsIGNhdGVnb3J5LCBmdWxsSGVpZ2h0ID0gZmFsc2UgfTogRW1vamlDb250YWluZXJPcHRpb25zKSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZSwgY2xhc3NlcyB9KTtcblxuICAgIHRoaXMuc2hvd1ZhcmlhbnRzID0gc2hvd1ZhcmlhbnRzO1xuICAgIHRoaXMubGF6eUxvYWRlciA9IGxhenlMb2FkZXI7XG4gICAgdGhpcy5wcmV2aWV3ID0gcHJldmlldztcbiAgICB0aGlzLmVtb2ppcyA9IGVtb2ppcztcbiAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgdGhpcy5mdWxsSGVpZ2h0ID0gZnVsbEhlaWdodDtcblxuICAgIHRoaXMuc2V0Rm9jdXMgPSB0aGlzLnNldEZvY3VzLmJpbmQodGhpcyk7XG4gICAgdGhpcy50cmlnZ2VyTmV4dENhdGVnb3J5ID0gdGhpcy50cmlnZ2VyTmV4dENhdGVnb3J5LmJpbmQodGhpcyk7XG4gICAgdGhpcy50cmlnZ2VyUHJldmlvdXNDYXRlZ29yeSA9IHRoaXMudHJpZ2dlclByZXZpb3VzQ2F0ZWdvcnkuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5ncmlkID0gbmV3IEZvY3VzR3JpZCh0aGlzLm9wdGlvbnMuZW1vamlzUGVyUm93LCB0aGlzLmVtb2ppQ291bnQsIDAsIDAsICF0aGlzLmNhdGVnb3J5KTtcbiAgICB0aGlzLmdyaWQub24oJ2ZvY3VzOmNoYW5nZScsIHRoaXMuc2V0Rm9jdXMpO1xuICAgIHRoaXMuZ3JpZC5vbignZm9jdXM6b3ZlcmZsb3cnLCB0aGlzLnRyaWdnZXJOZXh0Q2F0ZWdvcnkpO1xuICAgIHRoaXMuZ3JpZC5vbignZm9jdXM6dW5kZXJmbG93JywgdGhpcy50cmlnZ2VyUHJldmlvdXNDYXRlZ29yeSk7XG5cbiAgICB0aGlzLnVpRXZlbnRzID0gW1xuICAgICAgVmlldy51aUV2ZW50KCdjbGljaycsIHRoaXMuc2VsZWN0RW1vamkpLFxuICAgICAgVmlldy51aUV2ZW50KCdrZXlkb3duJywgdGhpcy5ncmlkLmhhbmRsZUtleURvd24pXG4gICAgXTtcblxuICAgIGlmICh0aGlzLnByZXZpZXcpIHtcbiAgICAgIHRoaXMudWlFdmVudHMucHVzaChcbiAgICAgICAgVmlldy51aUV2ZW50KCdtb3VzZW92ZXInLCB0aGlzLnNob3dQcmV2aWV3KSxcbiAgICAgICAgVmlldy51aUV2ZW50KCdtb3VzZW91dCcsIHRoaXMuaGlkZVByZXZpZXcpLFxuICAgICAgICBWaWV3LnVpRXZlbnQoJ2ZvY3VzJywgdGhpcy5zaG93UHJldmlldywgeyBjYXB0dXJlOiB0cnVlIH0pLFxuICAgICAgICBWaWV3LnVpRXZlbnQoJ2JsdXInLCB0aGlzLmhpZGVQcmV2aWV3LCB7IGNhcHR1cmU6IHRydWUgfSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcmtzIHRoZSBzcGVjaWZpZWQgY2VsbCBpbiB0aGUgZW1vamkgZ3JpZCBhcyBmb2N1c2VkLlxuICAgKiBcbiAgICogQHBhcmFtIGZvY3VzVGFyZ2V0IFRoZSB0YXJnZXQgZW1vamkgdG8gbWFrZSBmb2N1c2FibGUuXG4gICAqIEBwYXJhbSBwZXJmb3JtRm9jdXMgV2hldGhlciBvciBub3QgdG8gYWN0dWFsbHkgZm9jdXMgdGhlIG5ldyB0YXJnZXQuXG4gICAqL1xuICBwcml2YXRlIHNldEZvY3VzZWRWaWV3KGZvY3VzVGFyZ2V0OiBFbW9qaUZvY3VzVGFyZ2V0IHwgdW5kZWZpbmVkLCBwZXJmb3JtRm9jdXM/OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKCFmb2N1c1RhcmdldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZm9jdXNUYXJnZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW1vamlzLmZpbmRJbmRleChlbW9qaSA9PiBlbW9qaS5lbW9qaSA9PT0gZm9jdXNUYXJnZXQpO1xuICAgICAgdGhpcy5ncmlkLnNldEZvY3VzZWRJbmRleChpbmRleCwgZmFsc2UpO1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0VmlldyA9IHRoaXMuZW1vamlWaWV3c1tpbmRleF0uZWw7XG4gICAgICAgIHRhcmdldFZpZXcuc2Nyb2xsSW50b1ZpZXcoKTtcblxuICAgICAgICAvLyBOZWVkIHRvIHNjcm9sbCB1cCBhIGJpdCB0byBvZmZzZXQgdGhlIHN0aWNreSBoZWFkZXJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gdGFyZ2V0Vmlldy5wYXJlbnRFbGVtZW50Py5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBlbW9qaUFyZWEgPSB0YXJnZXRWaWV3LnBhcmVudEVsZW1lbnQ/LnBhcmVudEVsZW1lbnQ/LnBhcmVudEVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGVtb2ppQXJlYS5zY3JvbGxUb3AgLT0gaGVhZGVyPy5vZmZzZXRIZWlnaHQgPz8gMDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZm9jdXNUYXJnZXQucm93ID09PSAnZmlyc3QnIHx8IGZvY3VzVGFyZ2V0LnJvdyA9PT0gMCkge1xuICAgICAgdGhpcy5ncmlkLnNldENlbGwoMCwgZm9jdXNUYXJnZXQub2Zmc2V0LCBwZXJmb3JtRm9jdXMpO1xuICAgIH0gZWxzZSBpZiAoZm9jdXNUYXJnZXQucm93ID09PSAnbGFzdCcpIHtcbiAgICAgIHRoaXMuZ3JpZC5zZXRDZWxsKHRoaXMuZ3JpZC5nZXRSb3dDb3VudCgpIC0gMSwgZm9jdXNUYXJnZXQub2Zmc2V0LCBwZXJmb3JtRm9jdXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhY3RpdmUgc3RhdGUgb2YgdGhpcyBjYXRlZ29yeSdzIGVtb2ppcy4gSWYgYSBjYXRlZ29yeSBpcyBhY3RpdmUsIGl0cyBlbW9qaXNcbiAgICogYXJlIGZvY3VzYWJsZS5cbiAgICogXG4gICAqIEBwYXJhbSBhY3RpdmUgdGhlIGRlc2lyZWQgYWN0aXZlIHN0YXRlXG4gICAqIEBwYXJhbSBmb2N1c1RhcmdldCB0aGUgdGFyZ2V0IGVtb2ppIHRvIG1ha2UgZm9jdXNhYmxlIGlmIGFjdGl2ZSBpcyB0cnVlXG4gICAqIEBwYXJhbSBwZXJmb3JtRm9jdXMgd2hldGhlciBvciBub3QgdG8gYWN0dWFsbHkgZm9jdXMgdGhlIG5ldyB0YXJnZXQgaWYgYWN0aXZlIGlzIHRydWVcbiAgICovXG4gIHNldEFjdGl2ZShhY3RpdmU6IGJvb2xlYW4sIGZvY3VzVGFyZ2V0PzogRW1vamlGb2N1c1RhcmdldCwgcGVyZm9ybUZvY3VzPzogYm9vbGVhbikge1xuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIHRoaXMuc2V0Rm9jdXNlZFZpZXcoZm9jdXNUYXJnZXQsIHBlcmZvcm1Gb2N1cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW1vamlWaWV3c1t0aGlzLmdyaWQuZ2V0SW5kZXgoKV0/LmRlYWN0aXZhdGVGb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlclN5bmMoKTogSFRNTEVsZW1lbnQge1xuICAgIHRoaXMuZW1vamlWaWV3cyA9IHRoaXMuZW1vamlzLm1hcChlbW9qaSA9PlxuICAgICAgdGhpcy52aWV3RmFjdG9yeS5jcmVhdGUoRW1vamksIHtcbiAgICAgICAgZW1vamksXG4gICAgICAgIGNhdGVnb3J5OiB0aGlzLmNhdGVnb3J5LFxuICAgICAgICBsYXp5TG9hZGVyOiB0aGlzLmxhenlMb2FkZXIsXG4gICAgICAgIHJlbmRlcmVyOiB0aGlzLnJlbmRlcmVyXG4gICAgICB9KVxuICAgICk7XG5cbiAgICB0aGlzLmVtb2ppRWxlbWVudHMgPSB0aGlzLmVtb2ppVmlld3MubWFwKHZpZXcgPT4gdmlldy5yZW5kZXJTeW5jKCkpO1xuXG4gICAgcmV0dXJuIHN1cGVyLnJlbmRlclN5bmMoe1xuICAgICAgZW1vamlzOiB0aGlzLmVtb2ppRWxlbWVudHMsXG4gICAgICBpMThuOiB0aGlzLmkxOG5cbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuZW1vamlWaWV3cy5mb3JFYWNoKHZpZXcgPT4gdmlldy5kZXN0cm95KCkpO1xuICAgIHRoaXMuZ3JpZC5kZXN0cm95KCk7XG4gIH1cblxuICAvKipcbiAgICogQ2F1c2VzIHRoZSBwcmV2aW91cyBjYXRlZ29yeSB0byBiZWNvbWUgYWN0aXZlL2ZvY3VzYWJsZSBkdWUgdG8gYSBmb2N1czp1bmRlcmZsb3cgZXZlbnQuXG4gICAqIEBwYXJhbSBjb2x1bW4gdGhlIGN1cnJlbnRseSBmb2N1c2VkIGNvbHVtblxuICAgKi9cbiAgcHJpdmF0ZSB0cmlnZ2VyUHJldmlvdXNDYXRlZ29yeShjb2x1bW46IG51bWJlcikge1xuICAgIHRoaXMuZXZlbnRzLmVtaXQoJ2NhdGVnb3J5OnByZXZpb3VzJywgY29sdW1uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYXVzZXMgdGhlIG5leHQgY2F0ZWdvcnkgdG8gYmVjb21lIGFjdGl2ZS9mb2N1c2FibGUgZHVlIHRvIGEgZm9jdXM6b3ZlcmZsb3cgZXZlbnQuXG4gICAqIEBwYXJhbSBjb2x1bW4gdGhlIGN1cnJlbnRseSBmb2N1c2VkIGNvbHVtblxuICAgKi9cbiAgcHJpdmF0ZSB0cmlnZ2VyTmV4dENhdGVnb3J5KGNvbHVtbjogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuY2F0ZWdvcnkpIHtcbiAgICAgIHRoaXMuZXZlbnRzLmVtaXQoJ2NhdGVnb3J5Om5leHQnLCBjb2x1bW4pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFjdHMgdG8gYSBmb2N1czpjaGFuZ2UgZXZlbnQgZnJvbSB0aGUgZ3JpZC5cbiAgICogXG4gICAqIFRoZSBjdXJyZW50IGVtb2ppIGlzIGRlYWN0aXZhdGVkLCBhbmQgdGhlIG5ldyBlbW9qaSBpcyBhY3RpdmF0ZWQuXG4gICAqIEFuIGV2ZW50IGlzIHRoZW4gZW1pdHRlZCB3aGljaCB3aWxsIHBhdXNlIHRoZSBzY3JvbGwgbGlzdGVuZXIgaW4gdGhlIG1haW4gZW1vamkgYXJlYSxcbiAgICogb3RoZXJ3aXNlIHRoZSBhY3RpdmUgY2F0ZWdvcnkgdGFiIGNhbiBnZXQgb3V0IG9mIHN5bmMuXG4gICAqIFxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIGZvY3VzOmNoYW5nZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgc2V0Rm9jdXMoeyBmcm9tLCB0bywgcGVyZm9ybUZvY3VzIH06IEZvY3VzQ2hhbmdlRXZlbnQpIHtcbiAgICB0aGlzLmVtb2ppVmlld3NbZnJvbV0/LmRlYWN0aXZhdGVGb2N1cygpO1xuICAgIHRoaXMuZW1vamlWaWV3c1t0b10/LmFjdGl2YXRlRm9jdXMocGVyZm9ybUZvY3VzKTtcbiAgfVxuXG4gIHByaXZhdGUgc2VsZWN0RW1vamkoZXZlbnQ6IEV2ZW50KSB7XG4gICAgLy8gUHJldmVudCB0aGUgZG9jdW1lbnQgY2xpY2sgbGlzdGVuZXIgZnJvbSBmaXJpbmcsIHdoaWNoIGluIHNvbWUgY2FzZXNcbiAgICAvLyBjYW4gY2F1c2UgdGhlIHBpY2tlciB0byBjbG9zZSBldmVuIHdoZW4gaXQncyBjb25maWd1cmVkIG5vdCB0by5cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBjb25zdCBlbW9qaSA9IGdldEVtb2ppRm9yRXZlbnQoZXZlbnQsIHRoaXMuZW1vamlzKTtcbiAgICBpZiAoZW1vamkpIHtcbiAgICAgIHRoaXMuZXZlbnRzLmVtaXQoJ2Vtb2ppOnNlbGVjdCcsIHtcbiAgICAgICAgZW1vamksXG4gICAgICAgIHNob3dWYXJpYW50czogdGhpcy5zaG93VmFyaWFudHNcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd1ByZXZpZXcoZXZlbnQ6IEV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KCdidXR0b24nKTtcbiAgICBjb25zdCBjb250ZW50ID0gYnV0dG9uPy5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICBcbiAgICBjb25zdCBlbW9qaSA9IGdldEVtb2ppRm9yRXZlbnQoZXZlbnQsIHRoaXMuZW1vamlzKTtcbiAgICBpZiAoZW1vamkpIHtcbiAgICAgIHRoaXMuZXZlbnRzLmVtaXQoJ3ByZXZpZXc6c2hvdycsIGVtb2ppLCBjb250ZW50Py5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGlkZVByZXZpZXcoZXZlbnQ6IEV2ZW50KSB7XG4gICAgY29uc3QgZW1vamkgPSBnZXRFbW9qaUZvckV2ZW50KGV2ZW50LCB0aGlzLmVtb2ppcyk7XG4gICAgaWYgKGVtb2ppKSB7XG4gICAgICB0aGlzLmV2ZW50cy5lbWl0KCdwcmV2aWV3OmhpZGUnKTtcbiAgICB9XG4gIH1cblxuICBnZXQgZW1vamlDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmVtb2ppcy5sZW5ndGg7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJy4uL1RlbXBsYXRlJztcblxuZXhwb3J0IGRlZmF1bHQgbmV3IFRlbXBsYXRlKCh7IGNsYXNzZXMsIGNhdGVnb3J5LCBwaWNrZXJJZCwgaWNvbiwgaTE4biB9KSA9PiAvKiBodG1sICovYFxuICA8c2VjdGlvbiBjbGFzcz1cIiR7Y2xhc3Nlcy5lbW9qaUNhdGVnb3J5fVwiIHJvbGU9XCJ0YWJwYW5lbFwiIGFyaWEtbGFiZWxsZWRieT1cIiR7cGlja2VySWR9LWNhdGVnb3J5LSR7Y2F0ZWdvcnkua2V5fVwiPlxuICAgIDxoMyBkYXRhLWNhdGVnb3J5PVwiJHtjYXRlZ29yeS5rZXl9XCIgY2xhc3M9XCIke2NsYXNzZXMuY2F0ZWdvcnlOYW1lfVwiPlxuICAgICAgPGkgZGF0YS1pY29uPVwiJHtpY29ufVwiPjwvaT5cbiAgICAgICR7aTE4bi5nZXQoYGNhdGVnb3JpZXMuJHtjYXRlZ29yeS5rZXl9YCwgY2F0ZWdvcnkubWVzc2FnZSB8fCBjYXRlZ29yeS5rZXkpfVxuICAgIDwvaDM+XG4gICAgPGRpdiBkYXRhLXZpZXc9XCJlbW9qaXNcIiBkYXRhLXJlbmRlcj1cInN5bmNcIj48L2Rpdj5cbiAgPC9zZWN0aW9uPlxuYCk7XG4iLCAiaW1wb3J0IHsgQmFzZUVtb2ppQ2F0ZWdvcnkgfSBmcm9tICcuL0Jhc2VFbW9qaUNhdGVnb3J5JztcbmltcG9ydCB7IEVtb2ppQ29udGFpbmVyIH0gZnJvbSAnLi9FbW9qaUNvbnRhaW5lcic7XG5pbXBvcnQgeyBMYXp5TG9hZGVyIH0gZnJvbSAnLi4vTGF6eUxvYWRlcic7XG5pbXBvcnQgeyBjYXRlZ29yeUljb25zIH0gZnJvbSAnLi4vaWNvbnMnO1xuaW1wb3J0IHsgQ2F0ZWdvcnkgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgdGVtcGxhdGUgZnJvbSAnLi9FbW9qaUNhdGVnb3J5LnRlbXBsYXRlJztcblxudHlwZSBFbW9qaUNhdGVnb3J5T3B0aW9ucyA9IHtcbiAgY2F0ZWdvcnk6IENhdGVnb3J5O1xuICBzaG93VmFyaWFudHM6IGJvb2xlYW47XG4gIGxhenlMb2FkZXI/OiBMYXp5TG9hZGVyO1xuICBlbW9qaVZlcnNpb246IG51bWJlcjtcbn07XG5leHBvcnQgY2xhc3MgRW1vamlDYXRlZ29yeSBleHRlbmRzIEJhc2VFbW9qaUNhdGVnb3J5IHtcbiAgcHJpdmF0ZSBlbW9qaVZlcnNpb246IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcih7IGNhdGVnb3J5LCBzaG93VmFyaWFudHMsIGxhenlMb2FkZXIsIGVtb2ppVmVyc2lvbiB9OiBFbW9qaUNhdGVnb3J5T3B0aW9ucykge1xuICAgIHN1cGVyKHsgY2F0ZWdvcnksIHNob3dWYXJpYW50cywgbGF6eUxvYWRlciwgdGVtcGxhdGUgfSk7XG5cbiAgICB0aGlzLnNob3dWYXJpYW50cyA9IHNob3dWYXJpYW50cztcbiAgICB0aGlzLmxhenlMb2FkZXIgPSBsYXp5TG9hZGVyO1xuICAgIHRoaXMuZW1vamlWZXJzaW9uID0gZW1vamlWZXJzaW9uO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLnVpRWxlbWVudHMgPSB7IC4uLnRoaXMuYmFzZVVJRWxlbWVudHMgfTtcbiAgICBzdXBlci5pbml0aWFsaXplKCk7XG4gIH1cblxuICBhc3luYyByZW5kZXIoKTogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xuICAgIGF3YWl0IHRoaXMuZW1vamlEYXRhUHJvbWlzZTtcbiAgICBjb25zdCBlbW9qaXMgPSBhd2FpdCB0aGlzLmVtb2ppRGF0YS5nZXRFbW9qaXModGhpcy5jYXRlZ29yeSwgdGhpcy5lbW9qaVZlcnNpb24pO1xuXG4gICAgdGhpcy5lbW9qaUNvbnRhaW5lciA9IHRoaXMudmlld0ZhY3RvcnkuY3JlYXRlKEVtb2ppQ29udGFpbmVyLCB7XG4gICAgICBlbW9qaXMsXG4gICAgICBzaG93VmFyaWFudHM6IHRoaXMuc2hvd1ZhcmlhbnRzLFxuICAgICAgbGF6eUxvYWRlcjogdGhpcy5sYXp5TG9hZGVyLFxuICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnkua2V5XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3VwZXIucmVuZGVyKHtcbiAgICAgIGNhdGVnb3J5OiB0aGlzLmNhdGVnb3J5LFxuICAgICAgZW1vamlzOiB0aGlzLmVtb2ppQ29udGFpbmVyLFxuICAgICAgZW1vamlDb3VudDogZW1vamlzLmxlbmd0aCxcbiAgICAgIGljb246IGNhdGVnb3J5SWNvbnNbdGhpcy5jYXRlZ29yeS5rZXldXG4gICAgfSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFbW9qaUNvbnRhaW5lciB9IGZyb20gJy4vRW1vamlDb250YWluZXInO1xuaW1wb3J0IHsgRW1vamkgYXMgRW1vamlWaWV3IH0gZnJvbSAnLi9FbW9qaSc7XG5pbXBvcnQgeyBFbW9qaVJlY29yZCB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFJlY2VudEVtb2ppQ29udGFpbmVyIGV4dGVuZHMgRW1vamlDb250YWluZXIge1xuICBjb25zdHJ1Y3Rvcih7IGNhdGVnb3J5LCBlbW9qaXMsIHByZXZpZXcgPSB0cnVlLCBsYXp5TG9hZGVyIH0pIHtcbiAgICBzdXBlcih7IGNhdGVnb3J5LCBlbW9qaXMsIHNob3dWYXJpYW50czogZmFsc2UsIHByZXZpZXcsIGxhenlMb2FkZXIgfSk7XG4gIH1cblxuICBhc3luYyBhZGRPclVwZGF0ZShlbW9qaTogRW1vamlSZWNvcmQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBJZiB0aGUgZW1vamkgYWxyZWFkeSBleGlzdHMsIHJlbW92ZSBpdCBhcyBpdCBpcyBiZWluZyBtb3ZlZCB0byB0aGUgZnJvbnRcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcihgW2RhdGEtZW1vamk9XCIke2Vtb2ppLmVtb2ppfVwiXWApO1xuICAgIGlmIChleGlzdGluZykge1xuICAgICAgdGhpcy5lbC5yZW1vdmVDaGlsZChleGlzdGluZyk7XG4gICAgICB0aGlzLmVtb2ppcyA9IHRoaXMuZW1vamlzLmZpbHRlcihlID0+IGUgIT09IGVtb2ppKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIHRoZSBuZXcgZW1vamkgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbGlzdFxuICAgIGNvbnN0IG5ld1ZpZXcgPSB0aGlzLnZpZXdGYWN0b3J5LmNyZWF0ZShFbW9qaVZpZXcsIHsgZW1vamkgfSk7XG4gICAgdGhpcy5lbC5pbnNlcnRCZWZvcmUobmV3Vmlldy5yZW5kZXJTeW5jKCksIHRoaXMuZWwuZmlyc3RDaGlsZCk7XG4gICAgdGhpcy5lbW9qaXMgPSBbXG4gICAgICBlbW9qaSxcbiAgICAgIC4uLnRoaXMuZW1vamlzLmZpbHRlcihlID0+IGUgIT09IGVtb2ppKVxuICAgIF07XG5cbiAgICAvLyBQcnVuZSB0aGUgbGlzdCB0byB0aGUgbWF4aW11bSBsZW5ndGhcbiAgICBpZiAodGhpcy5lbW9qaXMubGVuZ3RoID4gdGhpcy5vcHRpb25zLm1heFJlY2VudHMpIHtcbiAgICAgIHRoaXMuZW1vamlzID0gdGhpcy5lbW9qaXMuc2xpY2UoMCwgdGhpcy5vcHRpb25zLm1heFJlY2VudHMpO1xuICAgICAgY29uc3QgZXhjZXNzID0gdGhpcy5lbC5jaGlsZEVsZW1lbnRDb3VudCAtIHRoaXMub3B0aW9ucy5tYXhSZWNlbnRzO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleGNlc3M7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5lbC5sYXN0RWxlbWVudENoaWxkKSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVDaGlsZCh0aGlzLmVsLmxhc3RFbGVtZW50Q2hpbGQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59IiwgImltcG9ydCB7IFRlbXBsYXRlIH0gZnJvbSAnLi4vVGVtcGxhdGUnO1xuXG5leHBvcnQgZGVmYXVsdCBuZXcgVGVtcGxhdGUoKHsgZW1vamlDb3VudCwgY2xhc3NlcywgY2F0ZWdvcnksIHBpY2tlcklkLCBpY29uLCBpMThuIH0pID0+IC8qIGh0bWwgKi9gXG4gIDxzZWN0aW9uIGNsYXNzPVwiJHtjbGFzc2VzLmVtb2ppQ2F0ZWdvcnl9XCIgcm9sZT1cInRhYnBhbmVsXCIgYXJpYS1sYWJlbGxlZGJ5PVwiJHtwaWNrZXJJZH0tY2F0ZWdvcnktJHtjYXRlZ29yeS5rZXl9XCI+XG4gICAgPGgzIGRhdGEtY2F0ZWdvcnk9XCIke2NhdGVnb3J5LmtleX1cIiBjbGFzcz1cIiR7Y2xhc3Nlcy5jYXRlZ29yeU5hbWV9XCI+XG4gICAgICA8aSBkYXRhLWljb249XCIke2ljb259XCI+PC9pPlxuICAgICAgJHtpMThuLmdldChgY2F0ZWdvcmllcy4ke2NhdGVnb3J5LmtleX1gLCBjYXRlZ29yeS5tZXNzYWdlIHx8IGNhdGVnb3J5LmtleSl9XG4gICAgPC9oMz5cbiAgICA8ZGl2IGRhdGEtZW1wdHk9XCIke2Vtb2ppQ291bnQgPT09IDB9XCIgY2xhc3M9XCIke2NsYXNzZXMucmVjZW50RW1vamlzfVwiPlxuICAgICAgPGRpdiBkYXRhLXZpZXc9XCJlbW9qaXNcIiBkYXRhLXJlbmRlcj1cInN5bmNcIj48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLm5vUmVjZW50c31cIj5cbiAgICAgICR7aTE4bi5nZXQoJ3JlY2VudHMubm9uZScpfVxuICAgIDwvZGl2PlxuICA8L3NlY3Rpb24+XG5gLCB7IG1vZGU6ICdhc3luYycgfSk7IiwgImltcG9ydCB7IFZpZXcgfSBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IHsgQmFzZUVtb2ppQ2F0ZWdvcnksIGNsYXNzZXMgfSBmcm9tICcuL0Jhc2VFbW9qaUNhdGVnb3J5JztcbmltcG9ydCB7IFJlY2VudEVtb2ppQ29udGFpbmVyIH0gZnJvbSAnLi9SZWNlbnRFbW9qaUNvbnRhaW5lcic7XG5pbXBvcnQgeyBDYXRlZ29yeSwgRW1vamlSZWNvcmQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBMYXp5TG9hZGVyIH0gZnJvbSAnLi4vTGF6eUxvYWRlcic7XG5pbXBvcnQgeyBjYXRlZ29yeUljb25zIH0gZnJvbSAnLi4vaWNvbnMnO1xuaW1wb3J0IHRlbXBsYXRlIGZyb20gJy4vUmVjZW50RW1vamlDYXRlZ29yeS50ZW1wbGF0ZSc7XG5pbXBvcnQgeyBSZWNlbnRzUHJvdmlkZXIgfSBmcm9tICcuLi9yZWNlbnRzL1JlY2VudHNQcm92aWRlcic7XG5cbnR5cGUgUmVjZW50RW1vamlDYXRlZ29yeU9wdGlvbnMgPSB7XG4gIGNhdGVnb3J5OiBDYXRlZ29yeTtcbiAgcHJvdmlkZXI6IFJlY2VudHNQcm92aWRlcjtcbiAgbGF6eUxvYWRlcj86IExhenlMb2FkZXI7XG59O1xuZXhwb3J0IGNsYXNzIFJlY2VudEVtb2ppQ2F0ZWdvcnkgZXh0ZW5kcyBCYXNlRW1vamlDYXRlZ29yeSB7XG4gIGVtb2ppQ29udGFpbmVyOiBSZWNlbnRFbW9qaUNvbnRhaW5lcjtcbiAgcHJpdmF0ZSBwcm92aWRlcjogUmVjZW50c1Byb3ZpZGVyO1xuXG4gIGNvbnN0cnVjdG9yKHsgY2F0ZWdvcnksIGxhenlMb2FkZXIsIHByb3ZpZGVyIH06IFJlY2VudEVtb2ppQ2F0ZWdvcnlPcHRpb25zKSB7XG4gICAgc3VwZXIoeyBjYXRlZ29yeSwgc2hvd1ZhcmlhbnRzOiBmYWxzZSwgbGF6eUxvYWRlciwgdGVtcGxhdGUgfSk7XG4gICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLnVpRWxlbWVudHMgPSB7XG4gICAgICAuLi50aGlzLmJhc2VVSUVsZW1lbnRzLFxuICAgICAgcmVjZW50czogVmlldy5ieUNsYXNzKGNsYXNzZXMucmVjZW50RW1vamlzKSxcbiAgICB9O1xuXG4gICAgdGhpcy5hcHBFdmVudHMgPSB7XG4gICAgICAncmVjZW50OmFkZCc6IHRoaXMuYWRkUmVjZW50XG4gICAgfTtcblxuICAgIHN1cGVyLmluaXRpYWxpemUoKTtcbiAgfVxuXG4gIGFzeW5jIGFkZFJlY2VudChyZWNlbnQ6IEVtb2ppUmVjb3JkKSB7XG4gICAgYXdhaXQgdGhpcy5lbW9qaUNvbnRhaW5lci5hZGRPclVwZGF0ZShyZWNlbnQpO1xuICAgIHRoaXMudWkucmVjZW50cy5kYXRhc2V0LmVtcHR5ID0gJ2ZhbHNlJztcbiAgfVxuXG4gIGFzeW5jIHJlbmRlcigpOiBQcm9taXNlPEhUTUxFbGVtZW50PiB7XG4gICAgY29uc3QgcmVjZW50cyA9IHRoaXMucHJvdmlkZXI/LmdldFJlY2VudHModGhpcy5vcHRpb25zLm1heFJlY2VudHMpO1xuXG4gICAgdGhpcy5lbW9qaUNvbnRhaW5lciA9IHRoaXMudmlld0ZhY3RvcnkuY3JlYXRlKFJlY2VudEVtb2ppQ29udGFpbmVyLCB7XG4gICAgICBlbW9qaXM6IHJlY2VudHMsXG4gICAgICBzaG93VmFyaWFudHM6IGZhbHNlLFxuICAgICAgbGF6eUxvYWRlcjogdGhpcy5sYXp5TG9hZGVyLFxuICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnkua2V5XG4gICAgfSk7XG5cbiAgICBhd2FpdCBzdXBlci5yZW5kZXIoe1xuICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnksXG4gICAgICBlbW9qaXM6IHRoaXMuZW1vamlDb250YWluZXIsXG4gICAgICBlbW9qaUNvdW50OiByZWNlbnRzLmxlbmd0aCxcbiAgICAgIGljb246IGNhdGVnb3J5SWNvbnNbdGhpcy5jYXRlZ29yeS5rZXldXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHRoaXMuZWw7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJy4uL1RlbXBsYXRlJztcblxuZXhwb3J0IGRlZmF1bHQgbmV3IFRlbXBsYXRlKCh7IGNsYXNzZXMsIGNhdGVnb3J5LCBwaWNrZXJJZCwgaWNvbiwgaTE4biB9KSA9PiAvKiBodG1sICovYFxuICA8c2VjdGlvbiBjbGFzcz1cIiR7Y2xhc3Nlcy5lbW9qaUNhdGVnb3J5fVwiIHJvbGU9XCJ0YWJwYW5lbFwiIGFyaWEtbGFiZWxsZWRieT1cIiR7cGlja2VySWR9LWNhdGVnb3J5LSR7Y2F0ZWdvcnkua2V5fVwiPlxuICAgIDxoMyBkYXRhLWNhdGVnb3J5PVwiJHtjYXRlZ29yeS5rZXl9XCIgY2xhc3M9XCIke2NsYXNzZXMuY2F0ZWdvcnlOYW1lfVwiPlxuICAgICAgPGkgZGF0YS1pY29uPVwiJHtpY29ufVwiPjwvaT5cbiAgICAgICR7aTE4bi5nZXQoYGNhdGVnb3JpZXMuJHtjYXRlZ29yeS5rZXl9YCwgY2F0ZWdvcnkubWVzc2FnZSB8fCBjYXRlZ29yeS5rZXkpfVxuICAgIDwvaDM+XG4gICAgPGRpdiBkYXRhLXZpZXc9XCJlbW9qaXNcIiBkYXRhLXJlbmRlcj1cInN5bmNcIj48L2Rpdj5cbiAgPC9zZWN0aW9uPlxuYCk7IiwgImltcG9ydCB7IEVtb2ppQ29udGFpbmVyIH0gZnJvbSAnLi9FbW9qaUNvbnRhaW5lcic7XG5pbXBvcnQgeyBCYXNlRW1vamlDYXRlZ29yeSB9IGZyb20gJy4vQmFzZUVtb2ppQ2F0ZWdvcnknO1xuaW1wb3J0IHsgTGF6eUxvYWRlciB9IGZyb20gJy4uL0xhenlMb2FkZXInO1xuaW1wb3J0IHsgQ2F0ZWdvcnkgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBjYXRlZ29yeUljb25zIH0gZnJvbSAnLi4vaWNvbnMnO1xuaW1wb3J0IHRlbXBsYXRlIGZyb20gJy4vQ3VzdG9tRW1vamlDYXRlZ29yeS50ZW1wbGF0ZSc7XG5cbnR5cGUgQ3VzdG9tRW1vamlDYXRlZ29yeU9wdGlvbnMgPSB7XG4gIGNhdGVnb3J5OiBDYXRlZ29yeTtcbiAgbGF6eUxvYWRlcj86IExhenlMb2FkZXI7XG59XG5leHBvcnQgY2xhc3MgQ3VzdG9tRW1vamlDYXRlZ29yeSBleHRlbmRzIEJhc2VFbW9qaUNhdGVnb3J5IHtcbiAgY29uc3RydWN0b3IoeyBjYXRlZ29yeSwgbGF6eUxvYWRlciB9OiBDdXN0b21FbW9qaUNhdGVnb3J5T3B0aW9ucykge1xuICAgIHN1cGVyKHsgdGVtcGxhdGUsIHNob3dWYXJpYW50czogZmFsc2UsIGxhenlMb2FkZXIsIGNhdGVnb3J5fSlcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy51aUVsZW1lbnRzID0geyAuLi50aGlzLmJhc2VVSUVsZW1lbnRzIH07XG4gICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xuICB9XG5cbiAgYXN5bmMgcmVuZGVyKCk6IFByb21pc2U8SFRNTEVsZW1lbnQ+IHtcbiAgICB0aGlzLmVtb2ppQ29udGFpbmVyID0gdGhpcy52aWV3RmFjdG9yeS5jcmVhdGUoRW1vamlDb250YWluZXIsIHtcbiAgICAgIGVtb2ppczogdGhpcy5jdXN0b21FbW9qaXMsXG4gICAgICBzaG93VmFyaWFudHM6IHRoaXMuc2hvd1ZhcmlhbnRzLFxuICAgICAgbGF6eUxvYWRlcjogdGhpcy5sYXp5TG9hZGVyLFxuICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnkua2V5XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3VwZXIucmVuZGVyKHtcbiAgICAgIGNhdGVnb3J5OiB0aGlzLmNhdGVnb3J5LFxuICAgICAgZW1vamlzOiB0aGlzLmVtb2ppQ29udGFpbmVyLFxuICAgICAgZW1vamlDb3VudDogdGhpcy5jdXN0b21FbW9qaXMubGVuZ3RoLFxuICAgICAgaWNvbjogY2F0ZWdvcnlJY29uc1t0aGlzLmNhdGVnb3J5LmtleV1cbiAgICB9KTtcbiAgfVxufSIsICJ0eXBlIENhbGxiYWNrID0gKCkgPT4gdm9pZDtcblxuZXhwb3J0IGNsYXNzIExhenlMb2FkZXIge1xuICBwcml2YXRlIGVsZW1lbnRzOiBNYXA8RWxlbWVudCwgQ2FsbGJhY2s+ID0gbmV3IE1hcCgpO1xuXG4gIGxhenlMb2FkKHBsYWNlaG9sZGVyOiBIVE1MRWxlbWVudCwgY2FsbGJhY2s6IENhbGxiYWNrKTogSFRNTEVsZW1lbnQge1xuICAgIHRoaXMuZWxlbWVudHMuc2V0KHBsYWNlaG9sZGVyLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xuICB9XG5cbiAgb2JzZXJ2ZShyb290OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICh3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICBlbnRyaWVzID0+IHtcbiAgICAgICAgICBlbnRyaWVzXG4gICAgICAgICAgICAuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmludGVyc2VjdGlvblJhdGlvID4gMClcbiAgICAgICAgICAgIC5tYXAoZW50cnkgPT4gZW50cnkudGFyZ2V0KVxuICAgICAgICAgICAgLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5lbGVtZW50cy5nZXQoZWxlbWVudCk7XG4gICAgICAgICAgICAgIGNhbGxiYWNrPy4oKTtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGVsZW1lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb290XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIHRoaXMuZWxlbWVudHMuZm9yRWFjaCgoY2FsbGJhY2ssIGVsZW1lbnQpID0+IHtcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnRzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgVmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBDYXRlZ29yeVRhYnMgfSBmcm9tICcuL0NhdGVnb3J5VGFicyc7XG5pbXBvcnQgeyBFbW9qaUNhdGVnb3J5IH0gZnJvbSAnLi9FbW9qaUNhdGVnb3J5JztcbmltcG9ydCB7IFJlY2VudEVtb2ppQ2F0ZWdvcnkgfSBmcm9tICcuL1JlY2VudEVtb2ppQ2F0ZWdvcnknO1xuaW1wb3J0IHsgQ3VzdG9tRW1vamlDYXRlZ29yeSB9IGZyb20gJy4vQ3VzdG9tRW1vamlDYXRlZ29yeSc7XG5pbXBvcnQgeyBnZXRQcmVmaXhlZENsYXNzZXMsIHRocm90dGxlIH0gZnJvbSAnLi4vdXRpbCc7XG5pbXBvcnQgeyBMYXp5TG9hZGVyIH0gZnJvbSAnLi4vTGF6eUxvYWRlcic7XG5pbXBvcnQgeyBDYXRlZ29yeSwgQ2F0ZWdvcnlLZXksIEVtb2ppRm9jdXNUYXJnZXQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJy4uL1RlbXBsYXRlJztcblxuaW1wb3J0IHsgU2V0QWN0aXZlT3B0aW9ucyB9IGZyb20gJy4vQ2F0ZWdvcnlUYWInO1xuY29uc3QgY2xhc3NlcyA9IGdldFByZWZpeGVkQ2xhc3NlcygnZW1vamlBcmVhJyk7XG5cbmNvbnN0IHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKCh7IGNsYXNzZXMgfSkgPT4gLyogaHRtbCAqL2BcbiAgPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy5lbW9qaUFyZWF9XCI+XG4gICAgPGRpdiBkYXRhLXBsYWNlaG9sZGVyPVwiZW1vamlzXCI+PC9kaXY+XG4gIDwvZGl2PlxuYCwgeyBtb2RlOiAnYXN5bmMnIH0pO1xuXG5jb25zdCBjYXRlZ29yeUNsYXNzZXMgPSB7XG4gIHJlY2VudHM6IFJlY2VudEVtb2ppQ2F0ZWdvcnksXG4gIGN1c3RvbTogQ3VzdG9tRW1vamlDYXRlZ29yeVxufTtcblxuZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlDbGFzcyhjYXRlZ29yeTogQ2F0ZWdvcnkpIHtcbiAgcmV0dXJuIGNhdGVnb3J5Q2xhc3Nlc1tjYXRlZ29yeS5rZXldIHx8IEVtb2ppQ2F0ZWdvcnk7XG59XG5cbnR5cGUgU2Nyb2xsTGlzdGVuZXJTdGF0ZSA9IFxuICAnYWN0aXZlJyB8IC8vIGhhbmRsZSBzY3JvbGwgZXZlbnRzXG4gICdzdXNwZW5kJyB8IC8vIGRvbid0IGhhbmRsZSBzY3JvbGwgZXZlbnRzXG4gICdyZXN1bWUnOyAvLyBza2lwIGN1cnJlbnQgc2Nyb2xsIGV2ZW50IHRoZW4gcmUtZW5hYmxlIGZvciB0aGUgbmV4dCBvbmVcblxudHlwZSBDYXRlZ29yeUZvY3VzVGFyZ2V0ID0gJ2J1dHRvbicgfCBFbW9qaUZvY3VzVGFyZ2V0O1xuXG50eXBlIFNlbGVjdENhdGVnb3J5T3B0aW9ucyA9IHtcbiAgZm9jdXM/OiBDYXRlZ29yeUZvY3VzVGFyZ2V0O1xuICBzY3JvbGw/OiAnYW5pbWF0ZScgfCAnanVtcCc7XG4gIHBlcmZvcm1Gb2N1cz86IGJvb2xlYW47XG59O1xuXG5mdW5jdGlvbiBnZXRGb2N1c1RhcmdldChmb2N1czogQ2F0ZWdvcnlGb2N1c1RhcmdldCB8IHVuZGVmaW5lZCk6IEVtb2ppRm9jdXNUYXJnZXQgfCB1bmRlZmluZWQge1xuICBpZiAoIWZvY3VzIHx8IGZvY3VzID09PSAnYnV0dG9uJykge1xuICAgIHJldHVybiB7XG4gICAgICByb3c6ICdmaXJzdCcsXG4gICAgICBvZmZzZXQ6IDBcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZvY3VzO1xufVxuXG50eXBlIEVtb2ppQXJlYU9wdGlvbnMgPSB7XG4gIGNhdGVnb3J5VGFicz86IENhdGVnb3J5VGFicztcbiAgY2F0ZWdvcmllczogQ2F0ZWdvcnlbXTtcbiAgZW1vamlWZXJzaW9uOiBudW1iZXI7XG59XG5cbi8qKlxuICogVGhlIEVtb2ppQXJlYSBpcyB0aGUgbWFpbiB2aWV3IG9mIHRoZSBwaWNrZXIsIGl0IGNvbnRhaW5zIGFsbCB0aGUgY2F0ZWdvcmllcyBhbmQgdGhlaXIgZW1vamlzIGluc2lkZVxuICogYSBtYWluIHNjcm9sbGFibGUgYXJlYS5cbiAqL1xuZXhwb3J0IGNsYXNzIEVtb2ppQXJlYSBleHRlbmRzIFZpZXcge1xuICBwcml2YXRlIHNlbGVjdGVkQ2F0ZWdvcnkgPSAwO1xuICBwcml2YXRlIGNhdGVnb3J5VGFicz86IENhdGVnb3J5VGFicztcbiAgcHJpdmF0ZSBjYXRlZ29yaWVzOiBDYXRlZ29yeVtdO1xuICBwcml2YXRlIGVtb2ppVmVyc2lvbjogbnVtYmVyO1xuXG4gIHByaXZhdGUgb2JzZXJ2ZXI6IFJlc2l6ZU9ic2VydmVyO1xuXG4gIHByaXZhdGUgc2Nyb2xsTGlzdGVuZXJTdGF0ZTogU2Nyb2xsTGlzdGVuZXJTdGF0ZSA9ICdhY3RpdmUnO1xuICBwcml2YXRlIGxhenlMb2FkZXIgPSBuZXcgTGF6eUxvYWRlcigpO1xuXG4gIGVtb2ppQ2F0ZWdvcmllczogRW1vamlDYXRlZ29yeVtdO1xuXG4gIGNvbnN0cnVjdG9yKHsgY2F0ZWdvcnlUYWJzLCBjYXRlZ29yaWVzLCBlbW9qaVZlcnNpb24gfTogRW1vamlBcmVhT3B0aW9ucykge1xuICAgIHN1cGVyKHsgdGVtcGxhdGUsIGNsYXNzZXMgfSk7XG5cbiAgICB0aGlzLmNhdGVnb3J5VGFicyA9IGNhdGVnb3J5VGFicztcbiAgICB0aGlzLmNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzO1xuICAgIHRoaXMuZW1vamlWZXJzaW9uID0gZW1vamlWZXJzaW9uO1xuXG4gICAgdGhpcy5oYW5kbGVTY3JvbGwgPSB0aHJvdHRsZSh0aGlzLmhhbmRsZVNjcm9sbC5iaW5kKHRoaXMpLCAxMDApO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLmFwcEV2ZW50cyA9IHsgXG4gICAgICAnY2F0ZWdvcnk6c2VsZWN0JzogdGhpcy5oYW5kbGVDYXRlZ29yeVNlbGVjdCxcbiAgICAgICdjYXRlZ29yeTpwcmV2aW91cyc6IHRoaXMuZm9jdXNQcmV2aW91c0NhdGVnb3J5LFxuICAgICAgJ2NhdGVnb3J5Om5leHQnOiB0aGlzLmZvY3VzTmV4dENhdGVnb3J5LFxuICAgICAgJ2ZvY3VzOmNoYW5nZSc6IHRoaXMudXBkYXRlRm9jdXNlZENhdGVnb3J5XG4gICAgfTtcbiAgICB0aGlzLnVpRWxlbWVudHMgPSB7IGVtb2ppczogVmlldy5ieUNsYXNzKGNsYXNzZXMuZW1vamlBcmVhKSB9O1xuICAgIHRoaXMudWlFdmVudHMgPSBbIFZpZXcudWlFdmVudCgnc2Nyb2xsJywgdGhpcy5oYW5kbGVTY3JvbGwpIF1cblxuICAgIHN1cGVyLmluaXRpYWxpemUoKTtcbiAgfVxuXG4gIGdldCBmb2N1c2FibGVFbW9qaSgpOiBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuIHRoaXMuZWwucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oJ1t0YWJpbmRleD1cIjBcIl0nKSBhcyBIVE1MRWxlbWVudDtcbiAgfVxuXG4gIGFzeW5jIHJlbmRlcigpOiBQcm9taXNlPEhUTUxFbGVtZW50PiB7XG4gICAgdGhpcy5lbW9qaUNhdGVnb3JpZXMgPSB0aGlzLmNhdGVnb3JpZXMubWFwKHRoaXMuY3JlYXRlQ2F0ZWdvcnksIHRoaXMpO1xuXG4gICAgY29uc3QgY2F0ZWdvcnlFbW9qaUVsZW1lbnRzID0ge307XG4gICAgdGhpcy5jYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5LCBpbmRleCkgPT4ge1xuICAgICAgY2F0ZWdvcnlFbW9qaUVsZW1lbnRzW2BlbW9qaXMtJHtjYXRlZ29yeS5rZXl9YF0gPSB0aGlzLmVtb2ppQ2F0ZWdvcmllc1tpbmRleF07XG4gICAgfSk7XG5cbiAgICBhd2FpdCBzdXBlci5yZW5kZXIoe1xuICAgICAgZW1vamlzOiBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmVtb2ppQ2F0ZWdvcmllcy5tYXAoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkucmVuZGVyKCkpKVxuICAgIH0pO1xuXG4gICAgdGhpcy5sYXp5TG9hZGVyLm9ic2VydmUodGhpcy5lbCk7XG5cbiAgICByZXR1cm4gdGhpcy5lbDtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuZW1vamlDYXRlZ29yaWVzLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgICAgdGhpcy5vYnNlcnZlcj8udW5vYnNlcnZlKGNhdGVnb3J5LmVsKTtcbiAgICAgIGNhdGVnb3J5LmRlc3Ryb3koKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ2F0ZWdvcnlTZWxlY3QoY2F0ZWdvcnk6IENhdGVnb3J5S2V5LCBvcHRpb25zPzogU2VsZWN0Q2F0ZWdvcnlPcHRpb25zKSB7XG5cbiAgICAvLyBPbiB0b3VjaCBkZXZpY2VzLCBpZiB0aGVyZSBpcyBhIFwibW9tZW50dW0gc2Nyb2xsXCIgaW4gcHJvZ3Jlc3MsIHdlIG5lZWQgdG8gc3RvcCBpdCBzbyB3ZSBjYW4ganVtcCB0byB0aGUgc2VsZWN0ZWQgY2F0ZWdvcnlcbiAgICB0aGlzLmVsLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgdGhpcy5zZWxlY3RDYXRlZ29yeShjYXRlZ29yeSwgb3B0aW9ucyk7XG4gICAgdGhpcy5lbC5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQ2F0ZWdvcnkoY2F0ZWdvcnk6IENhdGVnb3J5KTogRW1vamlDYXRlZ29yeSB7XG4gICAgY29uc3QgQ2F0ZWdvcnkgPSBnZXRDYXRlZ29yeUNsYXNzKGNhdGVnb3J5KTtcblxuICAgIHJldHVybiB0aGlzLnZpZXdGYWN0b3J5LmNyZWF0ZShDYXRlZ29yeSwge1xuICAgICAgY2F0ZWdvcnksXG4gICAgICBzaG93VmFyaWFudHM6IHRydWUsXG4gICAgICBsYXp5TG9hZGVyOiB0aGlzLmxhenlMb2FkZXIsXG4gICAgICBlbW9qaVZlcnNpb246IHRoaXMuZW1vamlWZXJzaW9uLFxuICAgICAgcHJvdmlkZXI6IHRoaXMub3B0aW9ucy5yZWNlbnRzUHJvdmlkZXJcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZXJtaW5lSW5pdGlhbENhdGVnb3J5KCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuaW5pdGlhbENhdGVnb3J5KSB7XG4gICAgICBpZiAodGhpcy5jYXRlZ29yaWVzLmZpbmQoYyA9PiBjLmtleSA9PT0gdGhpcy5vcHRpb25zLmluaXRpYWxDYXRlZ29yeSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pbml0aWFsQ2F0ZWdvcnk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY2F0ZWdvcmllcy5maW5kKGMgPT4gYy5rZXkgIT09ICdyZWNlbnRzJyk/LmtleTtcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZXJtaW5lRm9jdXNUYXJnZXQoY2F0ZWdvcnkpIHtcbiAgICBjb25zdCBjYXRlZ29yeVZpZXcgPSB0aGlzLmVtb2ppQ2F0ZWdvcmllcy5maW5kKGMgPT4gYy5jYXRlZ29yeS5rZXkgPT09IGNhdGVnb3J5KTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmluaXRpYWxFbW9qaSAmJiBjYXRlZ29yeVZpZXc/LmVsLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWVtb2ppPVwiJHt0aGlzLm9wdGlvbnMuaW5pdGlhbEVtb2ppfVwiXWApKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmluaXRpYWxFbW9qaTtcbiAgICB9XG5cbiAgICByZXR1cm4gJ2J1dHRvbidcbiAgfVxuXG4gIHJlc2V0KHBlcmZvcm1Gb2N1cyA9IHRydWUpOiB2b2lkIHtcbiAgICB0aGlzLmV2ZW50cy5lbWl0KCdwcmV2aWV3OmhpZGUnKTtcblxuICAgIGNvbnN0IGNhdGVnb3J5ID0gdGhpcy5kZXRlcm1pbmVJbml0aWFsQ2F0ZWdvcnkoKTtcbiAgICBpZiAoY2F0ZWdvcnkpIHtcbiAgICAgIHRoaXMuc2VsZWN0Q2F0ZWdvcnkoY2F0ZWdvcnksIHsgXG4gICAgICAgIGZvY3VzOiB0aGlzLmRldGVybWluZUZvY3VzVGFyZ2V0KGNhdGVnb3J5KSxcbiAgICAgICAgcGVyZm9ybUZvY3VzLCBcbiAgICAgICAgc2Nyb2xsOiAnanVtcCcgXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZWxlY3RlZENhdGVnb3J5ID0gdGhpcy5nZXRDYXRlZ29yeUluZGV4KGNhdGVnb3J5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gYSBjYXRlZ29yeSBrZXksIHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBjYXRlZ29yeSBpbiB0aGUgY2F0ZWdvcmllcyBhcnJheS5cbiAgICogQHBhcmFtIGtleSBcbiAgICogQHJldHVybnMgXG4gICAqL1xuICBwcml2YXRlIGdldENhdGVnb3J5SW5kZXgoa2V5OiBDYXRlZ29yeUtleSk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY2F0ZWdvcmllcy5maW5kSW5kZXgoY2F0ZWdvcnkgPT4gY2F0ZWdvcnkua2V5ID09PSBrZXkpO1xuICB9XG5cbiAgcHJpdmF0ZSBmb2N1c1ByZXZpb3VzQ2F0ZWdvcnkoY29sdW1uOiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZENhdGVnb3J5ID4gMCkge1xuICAgICAgdGhpcy5mb2N1c0NhdGVnb3J5KHRoaXMuc2VsZWN0ZWRDYXRlZ29yeSAtIDEsIHsgcm93OiAnbGFzdCcsIG9mZnNldDogY29sdW1uID8/IHRoaXMub3B0aW9ucy5lbW9qaXNQZXJSb3cgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBmb2N1c05leHRDYXRlZ29yeShjb2x1bW46IG51bWJlcikge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkQ2F0ZWdvcnkgPCB0aGlzLmNhdGVnb3JpZXMubGVuZ3RoIC0gMSkge1xuICAgICAgdGhpcy5mb2N1c0NhdGVnb3J5KHRoaXMuc2VsZWN0ZWRDYXRlZ29yeSArIDEsIHsgcm93OiAnZmlyc3QnLCBvZmZzZXQ6IGNvbHVtbiA/PyAwIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGFuZ2VzIHRoZSBmb2N1c2VkIGNhdGVnb3J5LlxuICAgKiBcbiAgICogQHBhcmFtIGNhdGVnb3J5IHRoZSBpbmRleCBvZiB0aGUgY2F0ZWdvcnlcbiAgICogQHBhcmFtIGZvY3VzVGFyZ2V0IHRoZSBkZXNpcmVkIGZvY3VzIHRhcmdldCBpbiB0aGUgbmV3IGNhdGVnb3J5XG4gICAqL1xuICBwcml2YXRlIGZvY3VzQ2F0ZWdvcnkoY2F0ZWdvcnk6IG51bWJlciwgZm9jdXNUYXJnZXQ6IENhdGVnb3J5Rm9jdXNUYXJnZXQpIHtcbiAgICB0aGlzLnNlbGVjdENhdGVnb3J5KGNhdGVnb3J5LCB7XG4gICAgICBmb2N1czogZm9jdXNUYXJnZXQsXG4gICAgICBwZXJmb3JtRm9jdXM6IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGFuZ2VzIHRoZSBjdXJyZW50IGNhdGVnb3J5LCBvcHRpb25hbGx5IGFuaW1hdGluZywgc2Nyb2xsaW5nLCBhbmQgY2hhbmdpbmcgdGhlIGZvY3VzLlxuICAgKiBcbiAgICogU3VwcG9ydGVkIG9wdGlvbnMgYXJlOlxuICAgKiAtIGZvY3VzOiBUaGUgdGFyZ2V0IGVsZW1lbnQgdGhhdCBzaG91bGQgYmVjb21lIGZvY3VzYWJsZVxuICAgKiAtIHBlcmZvcm1Gb2N1czogV2hldGhlciBvciBub3QgdG8gYWN0dWFsbHkgZm9jdXMgdGhlIG5ldyBmb2N1c2FibGUgZWxlbWVudFxuICAgKiAtIHNjcm9sbDogV2hldGhlciB0aGUgc2Nyb2xsaW5nIHNob3VsZCBiZSBpbW1lZGlhdGUgKGp1bXApLCBhbmltYXRlZCAoYW5pbWF0ZSksIG9yIG5vbmUgKHVuZGVmaW5lZCkuXG4gICAqIC0gYW5pbWF0ZTogV2hldGhlciBvciBub3QgdG8gYW5pbWF0ZSBhY3RpdmUgaW5kaWNhdG9yIHVuZGVyIHRoZSBidXR0b24uXG4gICAqIFxuICAgKiBAcGFyYW0gY2F0ZWdvcnkgVGhlIGtleSBvciBpbmRleCBvZiB0aGUgY2F0ZWdvcnkgdG8gc2VsZWN0LlxuICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBmb3IgdGhlIGNhdGVnb3J5IHNlbGVjdGlvbi5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2VsZWN0Q2F0ZWdvcnkoY2F0ZWdvcnk6IENhdGVnb3J5S2V5IHwgbnVtYmVyLCBvcHRpb25zOiBTZWxlY3RDYXRlZ29yeU9wdGlvbnMgPSB7fSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuc2Nyb2xsTGlzdGVuZXJTdGF0ZSA9ICdzdXNwZW5kJztcbiAgICBjb25zdCB7IGZvY3VzLCBwZXJmb3JtRm9jdXMsIHNjcm9sbCB9ID0ge1xuICAgICAgcGVyZm9ybUZvY3VzOiBmYWxzZSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuXG4gICAgdGhpcy5lbW9qaUNhdGVnb3JpZXNbdGhpcy5zZWxlY3RlZENhdGVnb3J5XS5zZXRBY3RpdmUoZmFsc2UpO1xuXG4gICAgY29uc3QgY2F0ZWdvcnlJbmRleCA9IHRoaXMuc2VsZWN0ZWRDYXRlZ29yeSA9IHR5cGVvZiBjYXRlZ29yeSA9PT0gJ251bWJlcicgPyBjYXRlZ29yeSA6IHRoaXMuZ2V0Q2F0ZWdvcnlJbmRleChjYXRlZ29yeSk7XG4gICAgdGhpcy5jYXRlZ29yeVRhYnM/LnNldEFjdGl2ZVRhYih0aGlzLnNlbGVjdGVkQ2F0ZWdvcnksIHtcbiAgICAgIHBlcmZvcm1Gb2N1cyxcbiAgICAgIHNjcm9sbDogZm9jdXMgPT09ICdidXR0b24nXG4gICAgfSlcbiAgICAvLyB0aGlzLmNhdGVnb3J5VGFicz8uc2V0QWN0aXZlVGFiKHRoaXMuc2VsZWN0ZWRDYXRlZ29yeSwgcGVyZm9ybUZvY3VzLCBmb2N1cyA9PT0gJ2J1dHRvbicpO1xuICAgIGNvbnN0IHRhcmdldFBvc2l0aW9uID0gdGhpcy5lbW9qaUNhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF0uZWwub2Zmc2V0VG9wO1xuICAgIHRoaXMuZW1vamlDYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdLnNldEFjdGl2ZSh0cnVlLCBnZXRGb2N1c1RhcmdldChmb2N1cyksIGZvY3VzICE9PSAnYnV0dG9uJyAmJiBwZXJmb3JtRm9jdXMpO1xuXG4gICAgaWYgKHNjcm9sbCkge1xuICAgICAgdGhpcy5lbC5zY3JvbGxUb3AgPSB0YXJnZXRQb3NpdGlvbjtcbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbExpc3RlbmVyU3RhdGUgPSAncmVzdW1lJztcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBjYXRlZ29yeSB0YWJzIHRvIHJlZmxlY3QgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGNhdGVnb3J5LlxuICAgKiBAcGFyYW0gY2F0ZWdvcnkgdGhlIGtleSBvZiB0aGUgY3VycmVudGx5IGZvY3VzZWQgY2F0ZWdvcnlcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlRm9jdXNlZENhdGVnb3J5KGNhdGVnb3J5OiBDYXRlZ29yeUtleSkge1xuICAgIC8vIERvIG5vdGhpbmcgaWYgdGhpcyBpcyBhbHJlYWR5IHRoZSBmb2N1c2VkIGNhdGVnb3J5XG4gICAgaWYgKHRoaXMuY2F0ZWdvcmllc1t0aGlzLnNlbGVjdGVkQ2F0ZWdvcnldLmtleSA9PT0gY2F0ZWdvcnkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbExpc3RlbmVyU3RhdGUgPSAnc3VzcGVuZCc7XG4gICAgdGhpcy5zZWxlY3RlZENhdGVnb3J5ID0gdGhpcy5nZXRDYXRlZ29yeUluZGV4KGNhdGVnb3J5KTtcbiAgICB0aGlzLmNhdGVnb3J5VGFicz8uc2V0QWN0aXZlVGFiKHRoaXMuc2VsZWN0ZWRDYXRlZ29yeSwge1xuICAgICAgY2hhbmdlRm9jdXNhYmxlOiBmYWxzZSxcbiAgICAgIHBlcmZvcm1Gb2N1czogZmFsc2VcbiAgICB9KTtcbiAgICB0aGlzLnNjcm9sbExpc3RlbmVyU3RhdGUgPSAncmVzdW1lJztcbiAgfVxuXG4gIC8qKlxuICAgKiBPbiBzY3JvbGwsIGNoZWNrcyB0aGUgbmV3IHNjcm9sbCBwb3NpdGlvbiBhbmQgaGlnaGxpZ2h0cyBhIG5ldyBjYXRlZ29yeSBpZiBuZWNlc3NhcnkuXG4gICAqL1xuICBoYW5kbGVTY3JvbGwoKTogdm9pZCB7XG4gICAgLy8gRG8gbm90aGluZyBpZiB3ZSBhcmUgaW4gdGhlICdzdXNwZW5kJyBzdGF0ZSBvciBpZiBjYXRlZ29yeSB0YWJzIGFyZSBkaXNhYmxlZC5cbiAgICBpZiAodGhpcy5zY3JvbGxMaXN0ZW5lclN0YXRlID09PSAnc3VzcGVuZCcgfHwgIXRoaXMuY2F0ZWdvcnlUYWJzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgYXJlIGluIHRoZSAncmVzdW1lJyBzdGF0ZSwgZG9uJ3QgaGFuZGxlIHRoZSBzY3JvbGwgYnV0IHJlLWVuYWJsZSB0aGUgbGlzdGVuZXIgZm9yIHRoZVxuICAgIC8vIG5leHQgc2Nyb2xsIGV2ZW50LlxuICAgIGlmICh0aGlzLnNjcm9sbExpc3RlbmVyU3RhdGUgPT09ICdyZXN1bWUnKSB7XG4gICAgICB0aGlzLnNjcm9sbExpc3RlbmVyU3RhdGUgPSAnYWN0aXZlJztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50UG9zaXRpb24gPSB0aGlzLmVsLnNjcm9sbFRvcDtcbiAgICBjb25zdCBtYXhTY3JvbGwgPSB0aGlzLmVsLnNjcm9sbEhlaWdodCAtIHRoaXMuZWwub2Zmc2V0SGVpZ2h0OyAgICBcblxuICAgIGNvbnN0IHRhcmdldENhdGVnb3J5ID0gdGhpcy5lbW9qaUNhdGVnb3JpZXMuZmluZEluZGV4KChjYXRlZ29yeTogRW1vamlDYXRlZ29yeSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgcmV0dXJuIGN1cnJlbnRQb3NpdGlvbiA8ICh0aGlzLmVtb2ppQ2F0ZWdvcmllc1tpbmRleCArIDFdKT8uZWwub2Zmc2V0VG9wO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgb3B0aW9uczogU2V0QWN0aXZlT3B0aW9ucyA9IHtcbiAgICAgIGNoYW5nZUZvY3VzYWJsZTogZmFsc2UsXG4gICAgICBwZXJmb3JtRm9jdXM6IGZhbHNlLFxuICAgICAgc2Nyb2xsOiBmYWxzZVxuICAgIH07XG5cbiAgICBpZiAoY3VycmVudFBvc2l0aW9uID09PSAwKSB7XG4gICAgICB0aGlzLmNhdGVnb3J5VGFicy5zZXRBY3RpdmVUYWIoMCwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIGlmIChNYXRoLmZsb29yKGN1cnJlbnRQb3NpdGlvbikgPT09IE1hdGguZmxvb3IobWF4U2Nyb2xsKSB8fCB0YXJnZXRDYXRlZ29yeSA8IDApIHtcbiAgICAgIHRoaXMuY2F0ZWdvcnlUYWJzLnNldEFjdGl2ZVRhYih0aGlzLmNhdGVnb3JpZXMubGVuZ3RoIC0gMSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2F0ZWdvcnlUYWJzLnNldEFjdGl2ZVRhYih0YXJnZXRDYXRlZ29yeSwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgVGVtcGxhdGUgfSBmcm9tICcuLi9UZW1wbGF0ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBUZW1wbGF0ZSgoeyBjbGFzc0xpc3QsIGNsYXNzZXMsIGljb24sIG1lc3NhZ2UgfSkgPT4gLyogaHRtbCAqL2BcbjxkaXYgY2xhc3M9XCIke2NsYXNzTGlzdH1cIiByb2xlPVwiYWxlcnRcIj5cbiAgPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy5pY29uQ29udGFpbmVyfVwiPjxpIGRhdGEtc2l6ZT1cIjEweFwiIGRhdGEtaWNvbj1cIiR7aWNvbn1cIj48L2k+PC9kaXY+XG4gIDxoMyBjbGFzcz1cIiR7Y2xhc3Nlcy50aXRsZX1cIj4ke21lc3NhZ2V9PC9oMz5cbjwvZGl2PlxuYCk7XG4iLCAiaW1wb3J0IHsgVmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJy4uL1RlbXBsYXRlJztcbmltcG9ydCBlcnJvclRlbXBsYXRlIGZyb20gJy4vRXJyb3JNZXNzYWdlLnRlbXBsYXRlJztcbmltcG9ydCB7IGdldFByZWZpeGVkQ2xhc3NlcyB9IGZyb20gJy4uL3V0aWwnO1xuXG50eXBlIEVycm9yTWVzc2FnZU9wdGlvbnMgPSB7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgaWNvbj86IHN0cmluZztcbiAgdGVtcGxhdGU/OiBUZW1wbGF0ZTtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xufTtcblxuY29uc3QgY2xhc3NlcyA9IGdldFByZWZpeGVkQ2xhc3NlcygnZXJyb3InLCAnaWNvbkNvbnRhaW5lcicsICd0aXRsZScpO1xuXG5leHBvcnQgY2xhc3MgRXJyb3JNZXNzYWdlIGV4dGVuZHMgVmlldyB7XG4gIHByaXZhdGUgbWVzc2FnZTogc3RyaW5nO1xuICBwcml2YXRlIGljb246IHN0cmluZztcbiAgcHJpdmF0ZSBjbGFzc05hbWU/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlLCBpY29uID0gJ3dhcm5pbmcnLCB0ZW1wbGF0ZSA9IGVycm9yVGVtcGxhdGUsIGNsYXNzTmFtZSB9OiBFcnJvck1lc3NhZ2VPcHRpb25zKSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZSwgY2xhc3NlcyB9KTtcblxuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy5pY29uID0gaWNvbjtcbiAgICB0aGlzLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgfVxuXG4gIHJlbmRlclN5bmMoKSB7XG4gICAgY29uc3QgY2xhc3NMaXN0ID0gW2NsYXNzZXMuZXJyb3IsIHRoaXMuY2xhc3NOYW1lXS5qb2luKCcgJykudHJpbSgpO1xuICAgIHJldHVybiBzdXBlci5yZW5kZXJTeW5jKHsgbWVzc2FnZTogdGhpcy5tZXNzYWdlLCBpY29uOiB0aGlzLmljb24sIGNsYXNzTGlzdCB9KTtcbiAgfVxufSIsICJpbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJy4uL1RlbXBsYXRlJztcblxuZXhwb3J0IGRlZmF1bHQgbmV3IFRlbXBsYXRlKCh7IGNsYXNzTGlzdCwgY2xhc3NlcywgaWNvbiwgaTE4biwgbWVzc2FnZSB9KSA9PiAvKiBodG1sICovYFxuICA8ZGl2IGNsYXNzPVwiJHtjbGFzc0xpc3R9XCIgcm9sZT1cImFsZXJ0XCI+XG4gICAgPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy5pY29ufVwiPjxpIGRhdGEtc2l6ZT1cIjEweFwiIGRhdGEtaWNvbj1cIiR7aWNvbn1cIj48L2k+PC9kaXY+XG4gICAgPGgzIGNsYXNzPVwiJHtjbGFzc2VzLnRpdGxlfVwiPiR7bWVzc2FnZX08L2gzPlxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiPiR7aTE4bi5nZXQoJ3JldHJ5Jyl9PC9idXR0b24+XG4gIDwvZGl2PlxuYCk7XG4iLCAiaW1wb3J0IHsgVmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBFcnJvck1lc3NhZ2UgfSBmcm9tICcuL0Vycm9yTWVzc2FnZSc7XG5pbXBvcnQgeyBpbml0RGF0YWJhc2UgfSBmcm9tICcuLi9kYXRhL2Vtb2ppRGF0YSc7XG5cbmltcG9ydCB0ZW1wbGF0ZSBmcm9tICcuL0RhdGFFcnJvci50ZW1wbGF0ZSc7XG5pbXBvcnQgeyBnZXRQcmVmaXhlZENsYXNzZXMgfSBmcm9tICcuLi91dGlsJztcblxuY29uc3QgY2xhc3NlcyA9IGdldFByZWZpeGVkQ2xhc3NlcygnZGF0YUVycm9yJyk7XG5cbnR5cGUgRGF0YUVycm9yT3B0aW9ucyA9IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNsYXNzIERhdGFFcnJvciBleHRlbmRzIEVycm9yTWVzc2FnZSB7XG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSB9OiBEYXRhRXJyb3JPcHRpb25zKSB7XG4gICAgc3VwZXIoeyBtZXNzYWdlLCB0ZW1wbGF0ZSwgY2xhc3NOYW1lOiBjbGFzc2VzLmRhdGFFcnJvciB9KTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy51aUVsZW1lbnRzID0geyByZXRyeUJ1dHRvbjogJ2J1dHRvbicgfTtcbiAgICB0aGlzLnVpRXZlbnRzID0gW1ZpZXcuY2hpbGRFdmVudCgncmV0cnlCdXR0b24nLCAnY2xpY2snLCB0aGlzLm9uUmV0cnkpXTtcblxuICAgIHN1cGVyLmluaXRpYWxpemUoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgb25SZXRyeSgpIHtcbiAgICBpZiAodGhpcy5lbW9qaURhdGEpIHtcbiAgICAgIGF3YWl0IHRoaXMuZW1vamlEYXRhLmRlbGV0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLm9wdGlvbnMuZGF0YVN0b3JlLmRlbGV0ZURhdGFiYXNlKHRoaXMub3B0aW9ucy5sb2NhbGUpO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRzLmVtaXQoJ3JlaW5pdGlhbGl6ZScpO1xuICAgIGNvbnN0IGRiID0gYXdhaXQgaW5pdERhdGFiYXNlKHRoaXMub3B0aW9ucy5sb2NhbGUsIHRoaXMub3B0aW9ucy5kYXRhU3RvcmUsIHRoaXMub3B0aW9ucy5tZXNzYWdlcywgdGhpcy5vcHRpb25zLmVtb2ppRGF0YSwgdGhpcy5lbW9qaURhdGEpO1xuICAgIHRoaXMudmlld0ZhY3Rvcnkuc2V0RW1vamlEYXRhKGRiKTtcbiAgICB0aGlzLmV2ZW50cy5lbWl0KCdkYXRhOnJlYWR5JywgZGIpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgVmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBFbW9qaVJlY29yZCB9IGZyb20gJy4uL3R5cGVzJztcblxuaW1wb3J0IHsgVGVtcGxhdGUgfSBmcm9tICcuLi9UZW1wbGF0ZSc7XG5pbXBvcnQgeyBnZXRQcmVmaXhlZENsYXNzZXMsIGVtcHR5LCByZXBsYWNlQ2hpbGRyZW4gfSBmcm9tICcuLi91dGlsJztcblxuY29uc3QgY2xhc3NlcyA9IGdldFByZWZpeGVkQ2xhc3NlcyhcbiAgJ3ByZXZpZXcnLFxuICAncHJldmlld0Vtb2ppJyxcbiAgJ3ByZXZpZXdOYW1lJyxcbiAgJ3RhZ0xpc3QnLFxuICAndGFnJ1xuKTtcblxuY29uc3QgdGFnVGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUoKHsgY2xhc3NlcywgdGFnIH0pID0+IC8qIGh0bWwgKi9gXG4gIDxsaSBjbGFzcz1cIiR7Y2xhc3Nlcy50YWd9XCI+JHt0YWd9PC9saT5cbmApO1xuXG5jb25zdCB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZSgoeyBjbGFzc2VzIH0pID0+IC8qIGh0bWwgKi9gXG4gIDxkaXYgY2xhc3M9XCIke2NsYXNzZXMucHJldmlld31cIj5cbiAgICA8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLnByZXZpZXdFbW9qaX1cIj48L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLnByZXZpZXdOYW1lfVwiPjwvZGl2PlxuICAgIDx1bCBjbGFzcz1cIiR7Y2xhc3Nlcy50YWdMaXN0fVwiPjwvdWw+XG4gIDwvZGl2PlxuYCk7XG5cbmV4cG9ydCBjbGFzcyBFbW9qaVByZXZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoeyB0ZW1wbGF0ZSwgY2xhc3NlcyB9KTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy51aUVsZW1lbnRzID0ge1xuICAgICAgZW1vamk6IFZpZXcuYnlDbGFzcyhjbGFzc2VzLnByZXZpZXdFbW9qaSksIFxuICAgICAgbmFtZTogVmlldy5ieUNsYXNzKGNsYXNzZXMucHJldmlld05hbWUpLFxuICAgICAgdGFnTGlzdDogVmlldy5ieUNsYXNzKGNsYXNzZXMudGFnTGlzdClcbiAgICB9O1xuXG4gICAgdGhpcy5hcHBFdmVudHMgPSB7XG4gICAgICAncHJldmlldzpzaG93JzogdGhpcy5zaG93UHJldmlldyxcbiAgICAgICdwcmV2aWV3OmhpZGUnOiB0aGlzLmhpZGVQcmV2aWV3XG4gICAgfTtcblxuICAgIHN1cGVyLmluaXRpYWxpemUoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd1ByZXZpZXcoZW1vamk6IEVtb2ppUmVjb3JkLCBjb250ZW50OiBIVE1MRWxlbWVudCkge1xuICAgIHJlcGxhY2VDaGlsZHJlbih0aGlzLnVpLmVtb2ppLCBjb250ZW50KTtcbiAgICB0aGlzLnVpLm5hbWUudGV4dENvbnRlbnQgPSBlbW9qaS5sYWJlbDtcbiAgICBpZiAoZW1vamkudGFncykge1xuICAgICAgdGhpcy51aS50YWdMaXN0LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICBjb25zdCB0YWdzID0gZW1vamkudGFncy5tYXAodGFnID0+IHRhZ1RlbXBsYXRlLnJlbmRlclN5bmMoeyB0YWcsIGNsYXNzZXMgfSkgYXMgSFRNTEVsZW1lbnQpO1xuICAgICAgcmVwbGFjZUNoaWxkcmVuKHRoaXMudWkudGFnTGlzdCwgLi4udGFncyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoaWRlUHJldmlldygpIHtcbiAgICBlbXB0eSh0aGlzLnVpLmVtb2ppKTtcbiAgICBlbXB0eSh0aGlzLnVpLm5hbWUpO1xuICAgIGVtcHR5KHRoaXMudWkudGFnTGlzdCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBUZW1wbGF0ZSB9IGZyb20gJy4uL1RlbXBsYXRlJztcblxuZXhwb3J0IGNvbnN0IGNsZWFyU2VhcmNoQnV0dG9uVGVtcGxhdGUgPSBuZXcgVGVtcGxhdGU8SFRNTEJ1dHRvbkVsZW1lbnQ+KCh7IGNsYXNzZXMsIGkxOG4gfSkgPT4gLyogaHRtbCAqL2BcbiAgPGJ1dHRvbiB0aXRsZT1cIiR7aTE4bi5nZXQoJ3NlYXJjaC5jbGVhcicpfVwiIGNsYXNzPVwiJHtjbGFzc2VzLmNsZWFyU2VhcmNoQnV0dG9ufVwiPlxuICAgIDxpIGRhdGEtaWNvbj1cInhtYXJrXCI+PC9pPlxuICA8L2J1dHRvbj5cbmApO1xuXG5leHBvcnQgY29uc3Qgc2VhcmNoVGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUoKHsgY2xhc3NlcywgaTE4biB9KSA9PiAvKiBodG1sICovYFxuPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy5zZWFyY2hDb250YWluZXJ9XCI+XG4gIDxpbnB1dCBjbGFzcz1cIiR7Y2xhc3Nlcy5zZWFyY2hGaWVsZH1cIiBwbGFjZWhvbGRlcj1cIiR7aTE4bi5nZXQoJ3NlYXJjaCcpfVwiPlxuICA8c3BhbiBjbGFzcz1cIiR7Y2xhc3Nlcy5zZWFyY2hBY2Nlc3Nvcnl9XCI+PC9zcGFuPlxuPC9kaXY+XG5gLCB7IG1vZGU6ICdhc3luYycgfSk7IiwgImltcG9ydCB7IFZpZXcgfSBmcm9tICcuL3ZpZXcnO1xuXG5pbXBvcnQgeyBpY29uIH0gZnJvbSAnLi4vaWNvbnMnO1xuXG5pbXBvcnQgeyBFbW9qaUNvbnRhaW5lciB9IGZyb20gJy4vRW1vamlDb250YWluZXInO1xuaW1wb3J0IHsgRXJyb3JNZXNzYWdlIH0gZnJvbSAnLi9FcnJvck1lc3NhZ2UnO1xuXG5pbXBvcnQgeyBkZWJvdW5jZSwgZ2V0UHJlZml4ZWRDbGFzc2VzLCByZXBsYWNlQ2hpbGRyZW4gfSBmcm9tICcuLi91dGlsJztcbmltcG9ydCB7IExhenlMb2FkZXIgfSBmcm9tICcuLi9MYXp5TG9hZGVyJztcbmltcG9ydCB7IENhdGVnb3J5IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyBjbGVhclNlYXJjaEJ1dHRvblRlbXBsYXRlLCBzZWFyY2hUZW1wbGF0ZSB9IGZyb20gJy4vU2VhcmNoLnRlbXBsYXRlJztcblxudHlwZSBTZWFyY2hPcHRpb25zID0ge1xuICBjYXRlZ29yaWVzOiBDYXRlZ29yeVtdO1xuICBlbW9qaVZlcnNpb246IG51bWJlcjtcbn07XG5cbmNvbnN0IGNsYXNzZXMgPSBnZXRQcmVmaXhlZENsYXNzZXMoXG4gICdzZWFyY2hDb250YWluZXInLFxuICAnc2VhcmNoRmllbGQnLFxuICAnY2xlYXJCdXR0b24nLFxuICAnc2VhcmNoQWNjZXNzb3J5JyxcbiAgJ2NsZWFyU2VhcmNoQnV0dG9uJyxcbiAgJ25vdEZvdW5kJ1xuKTtcblxuZXhwb3J0IGNsYXNzIFNlYXJjaCBleHRlbmRzIFZpZXcge1xuICBwcml2YXRlIGNhdGVnb3JpZXM6IENhdGVnb3J5W107XG4gIHByaXZhdGUgZW1vamlWZXJzaW9uOiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBzZWFyY2hJY29uOiBFbGVtZW50O1xuICBwcml2YXRlIGNsZWFyU2VhcmNoQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSByZXN1bHRzQ29udGFpbmVyOiBFbW9qaUNvbnRhaW5lciB8IG51bGw7XG4gIHByaXZhdGUgbm90Rm91bmRNZXNzYWdlOiBFcnJvck1lc3NhZ2U7XG4gIHByaXZhdGUgZXJyb3JNZXNzYWdlOiBFcnJvck1lc3NhZ2U7XG5cbiAgc2VhcmNoRmllbGQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoeyBjYXRlZ29yaWVzLCBlbW9qaVZlcnNpb24gfTogU2VhcmNoT3B0aW9ucykge1xuICAgIHN1cGVyKHsgdGVtcGxhdGU6IHNlYXJjaFRlbXBsYXRlLCBjbGFzc2VzIH0pO1xuXG4gICAgdGhpcy5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcy5maWx0ZXIoKGNhdGVnb3J5OiBDYXRlZ29yeSkgPT4gY2F0ZWdvcnkua2V5ICE9PSAncmVjZW50cycpO1xuICAgIHRoaXMuZW1vamlWZXJzaW9uID0gZW1vamlWZXJzaW9uO1xuXG4gICAgdGhpcy5zZWFyY2ggPSBkZWJvdW5jZSh0aGlzLnNlYXJjaC5iaW5kKHRoaXMpLCAxMDApO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLnVpRWxlbWVudHMgPSB7XG4gICAgICBzZWFyY2hGaWVsZDogVmlldy5ieUNsYXNzKGNsYXNzZXMuc2VhcmNoRmllbGQpLFxuICAgICAgc2VhcmNoQWNjZXNzb3J5OiBWaWV3LmJ5Q2xhc3MoY2xhc3Nlcy5zZWFyY2hBY2Nlc3NvcnkpXG4gICAgfTtcblxuICAgIHRoaXMudWlFdmVudHMgPSBbXG4gICAgICBWaWV3LmNoaWxkRXZlbnQoJ3NlYXJjaEZpZWxkJywgJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93biksXG4gICAgICBWaWV3LmNoaWxkRXZlbnQoJ3NlYXJjaEZpZWxkJywgJ2lucHV0JywgdGhpcy5vblNlYXJjaElucHV0KVxuICAgIF07XG5cbiAgICBzdXBlci5pbml0aWFsaXplKCk7XG4gIH1cblxuICBhc3luYyByZW5kZXIoKTogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xuICAgIGF3YWl0IHN1cGVyLnJlbmRlcigpO1xuXG4gICAgdGhpcy5zZWFyY2hJY29uID0gaWNvbignc2VhcmNoJyk7XG5cbiAgICB0aGlzLm5vdEZvdW5kTWVzc2FnZSA9IHRoaXMudmlld0ZhY3RvcnkuY3JlYXRlKEVycm9yTWVzc2FnZSwgeyBcbiAgICAgIG1lc3NhZ2U6IHRoaXMuaTE4bi5nZXQoJ3NlYXJjaC5ub3RGb3VuZCcpLFxuICAgICAgY2xhc3NOYW1lOiBjbGFzc2VzLm5vdEZvdW5kLFxuICAgICAgaWNvbjogJ3NhZCcgXG4gICAgfSk7XG4gICAgdGhpcy5ub3RGb3VuZE1lc3NhZ2UucmVuZGVyU3luYygpO1xuXG4gICAgdGhpcy5lcnJvck1lc3NhZ2UgPSB0aGlzLnZpZXdGYWN0b3J5LmNyZWF0ZShFcnJvck1lc3NhZ2UsIHsgbWVzc2FnZTogdGhpcy5pMThuLmdldCgnc2VhcmNoLmVycm9yJykgfSk7XG4gICAgdGhpcy5lcnJvck1lc3NhZ2UucmVuZGVyU3luYygpO1xuXG4gICAgdGhpcy5jbGVhclNlYXJjaEJ1dHRvbiA9IGNsZWFyU2VhcmNoQnV0dG9uVGVtcGxhdGUucmVuZGVyKHtcbiAgICAgIGNsYXNzZXMsXG4gICAgICBpMThuOiB0aGlzLmkxOG5cbiAgICB9KSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgIHRoaXMuY2xlYXJTZWFyY2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHRoaXMub25DbGVhclNlYXJjaChldmVudCkpO1xuXG4gICAgdGhpcy5zZWFyY2hGaWVsZCA9IHRoaXMudWkuc2VhcmNoRmllbGQgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgIHRoaXMuc2hvd1NlYXJjaEljb24oKTtcblxuICAgIHJldHVybiB0aGlzLmVsO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93U2VhcmNoSWNvbigpIHtcbiAgICB0aGlzLnNob3dTZWFyY2hBY2Nlc3NvcnkodGhpcy5zZWFyY2hJY29uKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd0NsZWFyU2VhcmNoQnV0dG9uKCkge1xuICAgIHRoaXMuc2hvd1NlYXJjaEFjY2Vzc29yeSh0aGlzLmNsZWFyU2VhcmNoQnV0dG9uKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd1NlYXJjaEFjY2Vzc29yeShhY2Nlc3Nvcnk6IEVsZW1lbnQpIHtcbiAgICByZXBsYWNlQ2hpbGRyZW4odGhpcy51aS5zZWFyY2hBY2Nlc3NvcnksIGFjY2Vzc29yeSk7XG4gIH1cblxuICBjbGVhcigpOiB2b2lkIHtcbiAgICAodGhpcy5zZWFyY2hGaWVsZCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9ICcnO1xuICAgIHRoaXMuc2hvd1NlYXJjaEljb24oKTtcbiAgfVxuXG4gIGZvY3VzKCk6IHZvaWQge1xuICAgIHRoaXMuc2VhcmNoRmllbGQuZm9jdXMoKTtcbiAgfVxuXG4gIG9uQ2xlYXJTZWFyY2goZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICB0aGlzLnNlYXJjaEZpZWxkLnZhbHVlID0gJyc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyPy5kZXN0cm95KCk7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyID0gbnVsbDtcblxuICAgIHRoaXMuc2hvd1NlYXJjaEljb24oKTtcblxuICAgIHRoaXMuZXZlbnRzLmVtaXQoJ2NvbnRlbnQ6c2hvdycpO1xuICAgIHRoaXMuc2VhcmNoRmllbGQuZm9jdXMoKTtcbiAgfVxuXG4gIGhhbmRsZVJlc3VsdHNLZXlkb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKHRoaXMucmVzdWx0c0NvbnRhaW5lcikge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgdGhpcy5vbkNsZWFyU2VhcmNoKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbktleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJyAmJiB0aGlzLnNlYXJjaEZpZWxkLnZhbHVlKSB7XG4gICAgICB0aGlzLm9uQ2xlYXJTZWFyY2goZXZlbnQpO1xuICAgIH0gZWxzZSBpZiAoKGV2ZW50LmtleSA9PT0gJ0VudGVyJyB8fCBldmVudC5rZXkgPT09ICdBcnJvd0Rvd24nKSAmJiB0aGlzLnJlc3VsdHNDb250YWluZXIpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuZWwucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oJ1t0YWJpbmRleD1cIjBcIl0nKT8uZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBvblNlYXJjaElucHV0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNlYXJjaEZpZWxkLnZhbHVlKSB7XG4gICAgICB0aGlzLnNob3dDbGVhclNlYXJjaEJ1dHRvbigpO1xuICAgICAgdGhpcy5zZWFyY2goKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbkNsZWFyU2VhcmNoKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZWFyY2goKSB7XG4gICAgaWYgKCF0aGlzLnNlYXJjaEZpZWxkLnZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSBhd2FpdCB0aGlzLmVtb2ppRGF0YS5zZWFyY2hFbW9qaXMoXG4gICAgICAgIHRoaXMuc2VhcmNoRmllbGQudmFsdWUsXG4gICAgICAgIHRoaXMuY3VzdG9tRW1vamlzLCBcbiAgICAgICAgdGhpcy5lbW9qaVZlcnNpb24sXG4gICAgICAgIHRoaXMuY2F0ZWdvcmllc1xuICAgICAgKTtcblxuICAgICAgdGhpcy5ldmVudHMuZW1pdCgncHJldmlldzpoaWRlJyk7XG5cbiAgICAgIGlmIChzZWFyY2hSZXN1bHRzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBsYXp5TG9hZGVyID0gbmV3IExhenlMb2FkZXIoKTtcbiAgICAgICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyID0gdGhpcy52aWV3RmFjdG9yeS5jcmVhdGUoRW1vamlDb250YWluZXIsIHtcbiAgICAgICAgICBlbW9qaXM6IHNlYXJjaFJlc3VsdHMsXG4gICAgICAgICAgZnVsbEhlaWdodDogdHJ1ZSxcbiAgICAgICAgICBzaG93VmFyaWFudHM6IHRydWUsXG4gICAgICAgICAgbGF6eUxvYWRlclxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnJlc3VsdHNDb250YWluZXIucmVuZGVyU3luYygpO1xuICAgICAgICBpZiAodGhpcy5yZXN1bHRzQ29udGFpbmVyPy5lbCkge1xuICAgICAgICAgIGxhenlMb2FkZXIub2JzZXJ2ZSh0aGlzLnJlc3VsdHNDb250YWluZXIuZWwpO1xuICAgICAgICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zZXRBY3RpdmUodHJ1ZSwgeyByb3c6IDAsIG9mZnNldDogMH0sIGZhbHNlKTtcblxuICAgICAgICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5lbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZXZlbnQgPT4gdGhpcy5oYW5kbGVSZXN1bHRzS2V5ZG93bihldmVudCkpO1xuXG4gICAgICAgICAgdGhpcy5ldmVudHMuZW1pdCgnY29udGVudDpzaG93JywgdGhpcy5yZXN1bHRzQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ldmVudHMuZW1pdCgnY29udGVudDpzaG93JywgdGhpcy5ub3RGb3VuZE1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmV2ZW50cy5lbWl0KCdjb250ZW50OnNob3cnLCB0aGlzLmVycm9yTWVzc2FnZSk7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgVGVtcGxhdGUgfSBmcm9tICcuLi9UZW1wbGF0ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBUZW1wbGF0ZSgoeyBjbGFzc2VzIH0pID0+IC8qIGh0bWwgKi9gXG4gIDxkaXYgY2xhc3M9XCIke2NsYXNzZXMudmFyaWFudE92ZXJsYXl9XCI+XG4gICAgPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy52YXJpYW50UG9wdXB9XCI+XG4gICAgICA8ZGl2IGRhdGEtdmlldz1cImVtb2ppc1wiIGRhdGEtcmVuZGVyPVwic3luY1wiPjwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbmApO1xuIiwgImltcG9ydCB7IFZpZXcgfSBmcm9tICcuL3ZpZXcnO1xuXG5pbXBvcnQgeyBFbW9qaUNvbnRhaW5lciB9IGZyb20gJy4vRW1vamlDb250YWluZXInO1xuaW1wb3J0IHsgRW1vamlSZWNvcmQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBhbmltYXRlLCBnZXRQcmVmaXhlZENsYXNzZXMgfSBmcm9tICcuLi91dGlsJztcbmltcG9ydCB7IEZvY3VzVHJhcCB9IGZyb20gJy4uL2ZvY3VzVHJhcCc7XG5cbmltcG9ydCB0ZW1wbGF0ZSBmcm9tICcuL1ZhcmlhbnRQb3B1cC50ZW1wbGF0ZSc7XG5cbmNvbnN0IGNsYXNzZXMgPSBnZXRQcmVmaXhlZENsYXNzZXMoXG4gICd2YXJpYW50T3ZlcmxheScsXG4gICd2YXJpYW50UG9wdXAnXG4pO1xuXG50eXBlIFZhcmlhbnRQb3B1cE9wdGlvbnMgPSB7XG4gIGVtb2ppOiBFbW9qaVJlY29yZDtcbiAgcGFyZW50OiBIVE1MRWxlbWVudDtcbn07XG5cbmNvbnN0IGFuaW1hdGlvbk9wdGlvbnMgPSB7XG4gIGVhc2luZzogJ2Vhc2UtaW4tb3V0JyxcbiAgZHVyYXRpb246IDI1MCxcbiAgZmlsbDogJ2JvdGgnIGFzIEZpbGxNb2RlXG59O1xuXG5jb25zdCBvdmVybGF5QW5pbWF0aW9uID0ge1xuICBvcGFjaXR5OiBbMCwgMV1cbn07XG5cbmNvbnN0IHBvcHVwQW5pbWF0aW9uID0ge1xuICBvcGFjaXR5OiBbMCwgMV0sXG4gIHRyYW5zZm9ybTogWydzY2FsZTNkKDAuOCwgMC44LCAwLjgpJywgJ3NjYWxlM2QoMSwgMSwgMSknXVxufTtcblxuZXhwb3J0IGNsYXNzIFZhcmlhbnRQb3B1cCBleHRlbmRzIFZpZXcge1xuICBwcml2YXRlIGZvY3VzZWRFbW9qaUluZGV4ID0gMDtcblxuICBwcml2YXRlIGVtb2ppOiBFbW9qaVJlY29yZDtcbiAgcHJpdmF0ZSByZW5kZXJlZEVtb2ppczogSFRNTEVsZW1lbnRbXTtcblxuICBwcml2YXRlIGVtb2ppQ29udGFpbmVyOiBFbW9qaUNvbnRhaW5lcjtcbiAgcHJpdmF0ZSBmb2N1c1RyYXAgPSBuZXcgRm9jdXNUcmFwKCk7XG5cbiAgY29uc3RydWN0b3IoeyBlbW9qaSwgcGFyZW50IH06IFZhcmlhbnRQb3B1cE9wdGlvbnMpIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlLCBjbGFzc2VzLCBwYXJlbnQgfSk7XG5cbiAgICB0aGlzLmVtb2ppID0gZW1vamk7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgICAgdGhpcy51aUVsZW1lbnRzID0ge1xuICAgICAgICBwb3B1cDogVmlldy5ieUNsYXNzKGNsYXNzZXMudmFyaWFudFBvcHVwKVxuICAgICAgfTtcblxuICAgICAgdGhpcy51aUV2ZW50cyA9IFtcbiAgICAgICAgVmlldy51aUV2ZW50KCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2spLFxuICAgICAgICBWaWV3LnVpRXZlbnQoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleWRvd24pXG4gICAgICBdXG5cbiAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcbiAgfVxuXG4gIGFuaW1hdGVTaG93ID0gKCkgPT4gXG4gICAgUHJvbWlzZS5hbGwoW1xuICAgICAgYW5pbWF0ZSh0aGlzLmVsLCBvdmVybGF5QW5pbWF0aW9uLCBhbmltYXRpb25PcHRpb25zLCB0aGlzLm9wdGlvbnMpLFxuICAgICAgYW5pbWF0ZSh0aGlzLnVpLnBvcHVwLCBwb3B1cEFuaW1hdGlvbiwgYW5pbWF0aW9uT3B0aW9ucywgdGhpcy5vcHRpb25zKVxuICAgIF0pO1xuXG4gIGFuaW1hdGVIaWRlKCkge1xuICAgIGNvbnN0IGhpZGVPcHRpb25zOiBLZXlmcmFtZUFuaW1hdGlvbk9wdGlvbnMgPSB7IC4uLmFuaW1hdGlvbk9wdGlvbnMsIGRpcmVjdGlvbjogJ3JldmVyc2UnIH07XG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgYW5pbWF0ZSh0aGlzLmVsLCBvdmVybGF5QW5pbWF0aW9uLCBoaWRlT3B0aW9ucywgdGhpcy5vcHRpb25zKSxcbiAgICAgIGFuaW1hdGUodGhpcy51aS5wb3B1cCwgcG9wdXBBbmltYXRpb24sIGhpZGVPcHRpb25zLCB0aGlzLm9wdGlvbnMpLFxuICAgIF0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoaWRlKCkge1xuICAgIGF3YWl0IHRoaXMuYW5pbWF0ZUhpZGUoKTtcbiAgICB0aGlzLmV2ZW50cy5lbWl0KCd2YXJpYW50UG9wdXA6aGlkZScpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVLZXlkb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVDbGljayhldmVudCk6IHZvaWQge1xuICAgIGlmICghdGhpcy51aS5wb3B1cC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIGdldEVtb2ppKGluZGV4OiBudW1iZXIpOiBFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlZEVtb2ppc1tpbmRleF07XG4gIH1cblxuICBzZXRGb2N1c2VkRW1vamkobmV3SW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRGb2N1c2VkRW1vamkgPSB0aGlzLmdldEVtb2ppKHRoaXMuZm9jdXNlZEVtb2ppSW5kZXgpIGFzIEhUTUxFbGVtZW50O1xuICAgIGN1cnJlbnRGb2N1c2VkRW1vamkudGFiSW5kZXggPSAtMTtcblxuICAgIHRoaXMuZm9jdXNlZEVtb2ppSW5kZXggPSBuZXdJbmRleDtcbiAgICBjb25zdCBuZXdGb2N1c2VkRW1vamkgPSB0aGlzLmdldEVtb2ppKHRoaXMuZm9jdXNlZEVtb2ppSW5kZXgpIGFzIEhUTUxFbGVtZW50O1xuICAgIG5ld0ZvY3VzZWRFbW9qaS50YWJJbmRleCA9IDA7XG4gICAgbmV3Rm9jdXNlZEVtb2ppLmZvY3VzKCk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuZW1vamlDb250YWluZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuZm9jdXNUcmFwLmRlYWN0aXZhdGUoKTtcbiAgICBzdXBlci5kZXN0cm95KCk7XG4gIH1cblxuICByZW5kZXJTeW5jKCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBiYXNlRW1vamkgPSB7XG4gICAgICAuLi50aGlzLmVtb2ppLFxuICAgICAgc2tpbnM6IG51bGxcbiAgICB9O1xuXG4gICAgY29uc3QgdmFyaWFudHMgPSAodGhpcy5lbW9qaS5za2lucyB8fCBbXSkubWFwKHZhcmlhbnQgPT4gKHtcbiAgICAgIC4uLnZhcmlhbnQsXG4gICAgICBsYWJlbDogdGhpcy5lbW9qaS5sYWJlbCxcbiAgICAgIHRhZ3M6IHRoaXMuZW1vamkudGFnc1xuICAgIH0pKTtcblxuICAgIGNvbnN0IGVtb2ppcyA9IFtiYXNlRW1vamksIC4uLnZhcmlhbnRzXTtcbiAgICB0aGlzLmVtb2ppQ29udGFpbmVyID0gdGhpcy52aWV3RmFjdG9yeS5jcmVhdGUoRW1vamlDb250YWluZXIsIHtcbiAgICAgIGVtb2ppcyxcbiAgICAgIHByZXZpZXc6IGZhbHNlXG4gICAgfSlcblxuICAgIHN1cGVyLnJlbmRlclN5bmMoeyBlbW9qaXM6IHRoaXMuZW1vamlDb250YWluZXIgfSk7XG5cbiAgICBpZiAoZW1vamlzLmxlbmd0aCA8IHRoaXMub3B0aW9ucy5lbW9qaXNQZXJSb3cpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW1vamlzLXBlci1yb3cnLCBlbW9qaXMubGVuZ3RoLnRvU3RyaW5nKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmVsO1xuICB9XG5cbiAgYWN0aXZhdGUoKSB7XG4gICAgdGhpcy5lbW9qaUNvbnRhaW5lci5zZXRBY3RpdmUodHJ1ZSwgeyByb3c6IDAsIG9mZnNldDogMH0sIHRydWUpO1xuICAgIHRoaXMuZm9jdXNUcmFwLmFjdGl2YXRlKHRoaXMuZWwpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgVGVtcGxhdGUgfSBmcm9tICcuLi9UZW1wbGF0ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBUZW1wbGF0ZSgoeyBjbGFzc2VzLCBpMThuLCBjYXRlZ29yeSwgcGlja2VySWQsIGljb24gfSkgPT4gLyogaHRtbCAqL2BcbjxsaSBjbGFzcz1cIiR7Y2xhc3Nlcy5jYXRlZ29yeVRhYn1cIj5cbiAgPGJ1dHRvblxuICAgIGFyaWEtc2VsZWN0ZWQ9XCJmYWxzZVwiXG4gICAgcm9sZT1cInRhYlwiXG4gICAgY2xhc3M9XCIke2NsYXNzZXMuY2F0ZWdvcnlCdXR0b259XCJcbiAgICB0YWJpbmRleD1cIi0xXCJcbiAgICB0aXRsZT1cIiR7aTE4bi5nZXQoYGNhdGVnb3JpZXMuJHtjYXRlZ29yeS5rZXl9YCwgY2F0ZWdvcnkubWVzc2FnZSB8fCBjYXRlZ29yeS5rZXkpfVwiXG4gICAgdHlwZT1cImJ1dHRvblwiXG4gICAgZGF0YS1jYXRlZ29yeT1cIiR7Y2F0ZWdvcnkua2V5fVwiXG4gICAgaWQ9XCIke3BpY2tlcklkfS1jYXRlZ29yeS0ke2NhdGVnb3J5LmtleX1cIlxuICA+XG4gICAgPGkgZGF0YS1pY29uPVwiJHtpY29ufVwiPjwvaT5cbjwvbGk+XG5gKTtcbiIsICJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi92aWV3JztcblxuaW1wb3J0IHsgQ2F0ZWdvcnkgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB0ZW1wbGF0ZSBmcm9tICcuL0NhdGVnb3J5VGFiLnRlbXBsYXRlJztcbmltcG9ydCB7IGdldFByZWZpeGVkQ2xhc3NlcyB9IGZyb20gJy4uL3V0aWwnO1xuXG5cbmNvbnN0IGNsYXNzZXMgPSBnZXRQcmVmaXhlZENsYXNzZXMoXG4gICdjYXRlZ29yeVRhYicsIFxuICAnY2F0ZWdvcnlUYWJBY3RpdmUnLCBcbiAgJ2NhdGVnb3J5QnV0dG9uJ1xuKTtcblxudHlwZSBDYXRlZ29yeVRhYk9wdGlvbnMgPSB7XG4gIGNhdGVnb3J5OiBDYXRlZ29yeTtcbiAgaWNvbjogRWxlbWVudDtcbn1cblxuZXhwb3J0IHR5cGUgU2V0QWN0aXZlT3B0aW9ucyA9IHtcbiAgY2hhbmdlRm9jdXNhYmxlPzogYm9vbGVhbjtcbiAgcGVyZm9ybUZvY3VzPzogYm9vbGVhbjtcbiAgc2Nyb2xsPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIENhdGVnb3J5VGFiIGV4dGVuZHMgVmlldyB7XG4gIGNhdGVnb3J5OiBDYXRlZ29yeTtcbiAgcHJpdmF0ZSBpY29uOiBFbGVtZW50O1xuICBcbiAgaXNBY3RpdmUgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcih7IGNhdGVnb3J5LCBpY29uIH06IENhdGVnb3J5VGFiT3B0aW9ucykge1xuICAgIHN1cGVyKHsgdGVtcGxhdGUsIGNsYXNzZXMgfSk7XG5cbiAgICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG4gICAgdGhpcy5pY29uID0gaWNvbjtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy51aUVsZW1lbnRzID0ge1xuICAgICAgYnV0dG9uOiBWaWV3LmJ5Q2xhc3MoY2xhc3Nlcy5jYXRlZ29yeUJ1dHRvbilcbiAgICB9XG5cbiAgICB0aGlzLnVpRXZlbnRzID0gW1xuICAgICAgVmlldy5jaGlsZEV2ZW50KCdidXR0b24nLCAnY2xpY2snLCB0aGlzLnNlbGVjdENhdGVnb3J5KSxcbiAgICAgIFZpZXcuY2hpbGRFdmVudCgnYnV0dG9uJywgJ2ZvY3VzJywgdGhpcy5zZWxlY3RDYXRlZ29yeSlcbiAgICBdO1xuXG4gICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xuICB9XG5cbiAgcmVuZGVyU3luYygpOiBIVE1MRWxlbWVudCB7XG4gICAgc3VwZXIucmVuZGVyU3luYyh7XG4gICAgICBjYXRlZ29yeTogdGhpcy5jYXRlZ29yeSxcbiAgICAgIGljb246IHRoaXMuaWNvblxuICAgIH0pO1xuXG4gICAgdGhpcy51aS5idXR0b24uYXJpYVNlbGVjdGVkID0gJ2ZhbHNlJztcblxuICAgIHJldHVybiB0aGlzLmVsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGFjdGl2ZSBzdGF0ZSBvZiB0aGUgdGFiLlxuICAgKiBcbiAgICogQHBhcmFtIGlzQWN0aXZlIFRoZSBuZXcgYWN0aXZlIHN0YXRlXG4gICAqIEBwYXJhbSBjaGFuZ2VGb2N1cyBXaGV0aGVyIG9yIG5vdCB0byBjaGFuZ2UgdGhlIGFjdGl2ZSBmb2N1c2FibGUgZWxlbWVudCB0byB0aGUgdGFiIGJ1dHRvblxuICAgKiBAcGFyYW0gc2Nyb2xsIFdoZXRoZXIgb3Igbm90IHRvIHNjcm9sbCB0byB0aGUgbmV3IGNhdGVnb3J5XG4gICAqL1xuICBzZXRBY3RpdmUoYWN0aXZlOiBib29sZWFuLCBvcHRpb25zOiBTZXRBY3RpdmVPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IGNoYW5nZUZvY3VzYWJsZSwgcGVyZm9ybUZvY3VzLCBzY3JvbGwgfSA9IHtcbiAgICAgIGNoYW5nZUZvY3VzYWJsZTogdHJ1ZSxcbiAgICAgIHBlcmZvcm1Gb2N1czogdHJ1ZSxcbiAgICAgIHNjcm9sbDogdHJ1ZSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuXG4gICAgdGhpcy5lbC5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzZXMuY2F0ZWdvcnlUYWJBY3RpdmUsIGFjdGl2ZSk7XG5cbiAgICBpZiAoY2hhbmdlRm9jdXNhYmxlKSB7XG4gICAgICB0aGlzLnVpLmJ1dHRvbi50YWJJbmRleCA9IGFjdGl2ZSA/IDAgOiAtMTtcbiAgICAgIHRoaXMudWkuYnV0dG9uLmFyaWFTZWxlY3RlZCA9IGFjdGl2ZS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGlmIChhY3RpdmUgJiYgcGVyZm9ybUZvY3VzKSB7XG4gICAgICB0aGlzLnVpLmJ1dHRvbi5mb2N1cygpO1xuXG4gICAgICBpZiAoc2Nyb2xsKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoJ2NhdGVnb3J5OnNlbGVjdCcsIHRoaXMuY2F0ZWdvcnkua2V5LCB7IHNjcm9sbDogJ2FuaW1hdGUnLCBmb2N1czogJ2J1dHRvbicsIHBlcmZvcm1Gb2N1czogZmFsc2UgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5pc0FjdGl2ZSA9IGFjdGl2ZTtcbiAgfVxuXG4gIHByaXZhdGUgc2VsZWN0Q2F0ZWdvcnkoKSB7XG4gICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICB0aGlzLmV2ZW50cy5lbWl0KCdjYXRlZ29yeTpzZWxlY3QnLCB0aGlzLmNhdGVnb3J5LmtleSwgeyBzY3JvbGw6ICdhbmltYXRlJywgZm9jdXM6ICdidXR0b24nLCBwZXJmb3JtRm9jdXM6IHRydWUgfSk7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgVGVtcGxhdGUgfSBmcm9tICcuLi9UZW1wbGF0ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBUZW1wbGF0ZSgoeyBjbGFzc2VzIH0pID0+IC8qIGh0bWwgKi9gXG4gIDxkaXYgY2xhc3M9XCIke2NsYXNzZXMuY2F0ZWdvcnlCdXR0b25zQ29udGFpbmVyfVwiPlxuICAgIDx1bCByb2xlPVwidGFibGlzdFwiIGNsYXNzPVwiJHtjbGFzc2VzLmNhdGVnb3J5QnV0dG9uc31cIj5cbiAgICAgIDxkaXYgZGF0YS1wbGFjZWhvbGRlcj1cInRhYnNcIj48L2Rpdj5cbiAgICA8L3VsPlxuICA8L2Rpdj5cbmApOyIsICJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi92aWV3JztcblxuaW1wb3J0IHsgQ2F0ZWdvcnlUYWIsIFNldEFjdGl2ZU9wdGlvbnMgfSBmcm9tICcuL0NhdGVnb3J5VGFiJztcbmltcG9ydCB7IGNhdGVnb3J5SWNvbnMgfSBmcm9tICcuLi9pY29ucyc7XG5pbXBvcnQgeyBDYXRlZ29yeSB9IGZyb20gJy4uL3R5cGVzJztcblxuaW1wb3J0IHRlbXBsYXRlIGZyb20gJy4vQ2F0ZWdvcnlUYWJzLnRlbXBsYXRlJztcbmltcG9ydCB7IGdldFByZWZpeGVkQ2xhc3NlcyB9IGZyb20gJy4uL3V0aWwnO1xuXG50eXBlIENhdGVnb3J5VGFic09wdGlvbnMgPSB7XG4gIGNhdGVnb3JpZXM6IENhdGVnb3J5W107XG59XG5cbmNvbnN0IGNsYXNzZXMgPSBnZXRQcmVmaXhlZENsYXNzZXMoJ2NhdGVnb3J5QnV0dG9ucycsICdjYXRlZ29yeUJ1dHRvbnNDb250YWluZXInKTtcblxuZXhwb3J0IGNsYXNzIENhdGVnb3J5VGFicyBleHRlbmRzIFZpZXcge1xuICBwcml2YXRlIGNhdGVnb3JpZXM6IENhdGVnb3J5W107XG4gIHByaXZhdGUgdGFiVmlld3M6IENhdGVnb3J5VGFiW107XG4gIHByaXZhdGUgYWN0aXZlQ2F0ZWdvcnlJbmRleCA9IDA7XG5cbiAgY29uc3RydWN0b3IoeyBjYXRlZ29yaWVzIH06IENhdGVnb3J5VGFic09wdGlvbnMpIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlLCBjbGFzc2VzIH0pO1xuXG4gICAgdGhpcy5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcztcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5rZXlCaW5kaW5ncyA9IHtcbiAgICAgIEFycm93TGVmdDogdGhpcy5zdGVwU2VsZWN0ZWRUYWIoLTEpLFxuICAgICAgQXJyb3dSaWdodDogdGhpcy5zdGVwU2VsZWN0ZWRUYWIoMSlcbiAgICB9O1xuXG4gICAgdGhpcy51aUV2ZW50cyA9IFtcbiAgICAgIFZpZXcudWlFdmVudCgnc2Nyb2xsJywgdGhpcy5jaGVja092ZXJmbG93KVxuICAgIF07XG5cbiAgICBzdXBlci5pbml0aWFsaXplKCk7XG4gIH1cblxuICBjaGVja092ZXJmbG93KCkge1xuICAgIC8vIENoZWNrIHRoZSBkaWZmZXJlbmNlIHRvIGFjY291bnQgZm9yIGZyYWN0aW9uYWwgcGl4ZWxzIGluIHRoZSBzY3JvbGwgcG9zaXRpb25cbiAgICBjb25zdCBoYXNPdmVyZmxvd1JpZ2h0ID0gTWF0aC5hYnModGhpcy5lbC5zY3JvbGxMZWZ0IC0gKHRoaXMuZWwuc2Nyb2xsV2lkdGggLSB0aGlzLmVsLm9mZnNldFdpZHRoKSkgPiAxO1xuICAgIGNvbnN0IGhhc092ZXJmbG93TGVmdCA9IHRoaXMuZWwuc2Nyb2xsTGVmdCA+IDA7XG5cbiAgICB0aGlzLmVsLmNsYXNzTmFtZSA9ICdjYXRlZ29yeUJ1dHRvbnNDb250YWluZXInO1xuICAgIGlmIChoYXNPdmVyZmxvd0xlZnQgJiYgaGFzT3ZlcmZsb3dSaWdodCkge1xuICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdoYXMtb3ZlcmZsb3ctYm90aCcpO1xuICAgIH0gZWxzZSBpZiAoaGFzT3ZlcmZsb3dMZWZ0KSB7XG4gICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ2hhcy1vdmVyZmxvdy1sZWZ0Jyk7XG4gICAgfSBlbHNlIGlmIChoYXNPdmVyZmxvd1JpZ2h0KSB7XG4gICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ2hhcy1vdmVyZmxvdy1yaWdodCcpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlclN5bmMoKTogSFRNTEVsZW1lbnQge1xuICAgIHRoaXMudGFiVmlld3MgPSB0aGlzLmNhdGVnb3JpZXMubWFwKGNhdGVnb3J5ID0+IFxuICAgICAgdGhpcy52aWV3RmFjdG9yeS5jcmVhdGUoQ2F0ZWdvcnlUYWIsIHsgY2F0ZWdvcnksIGljb246IGNhdGVnb3J5SWNvbnNbY2F0ZWdvcnkua2V5XSB9KSk7XG4gICAgXG4gICAgc3VwZXIucmVuZGVyU3luYyh7XG4gICAgICB0YWJzOiB0aGlzLnRhYlZpZXdzLm1hcCh2aWV3ID0+IHZpZXcucmVuZGVyU3luYygpKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZWw7XG4gIH1cblxuICBnZXQgY3VycmVudENhdGVnb3J5KCk6IENhdGVnb3J5IHtcbiAgICByZXR1cm4gdGhpcy5jYXRlZ29yaWVzW3RoaXMuYWN0aXZlQ2F0ZWdvcnlJbmRleF07XG4gIH1cblxuICBnZXQgY3VycmVudFRhYlZpZXcoKTogQ2F0ZWdvcnlUYWIge1xuICAgIHJldHVybiB0aGlzLnRhYlZpZXdzW3RoaXMuYWN0aXZlQ2F0ZWdvcnlJbmRleF07XG4gIH1cblxuICBzZXRBY3RpdmVUYWIoaW5kZXg6IG51bWJlciwgb3B0aW9uczogU2V0QWN0aXZlT3B0aW9ucyA9IHt9KTogdm9pZCB7XG4gICAgdGhpcy5jaGVja092ZXJmbG93KCk7XG5cbiAgICBjb25zdCBvbGRDYXRlZ29yeSA9IHRoaXMuY3VycmVudFRhYlZpZXc7XG4gICAgY29uc3QgbmV3Q2F0ZWdvcnkgPSB0aGlzLnRhYlZpZXdzW2luZGV4XTtcblxuICAgIG9sZENhdGVnb3J5LnNldEFjdGl2ZShmYWxzZSwgb3B0aW9ucyk7XG4gICAgbmV3Q2F0ZWdvcnkuc2V0QWN0aXZlKHRydWUsIG9wdGlvbnMpO1xuICAgIHRoaXMuYWN0aXZlQ2F0ZWdvcnlJbmRleCA9IGluZGV4O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUYXJnZXRDYXRlZ29yeShpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYXRlZ29yaWVzLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgaWYgKGluZGV4ID49IHRoaXMuY2F0ZWdvcmllcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzdGVwU2VsZWN0ZWRUYWIoc3RlcDogbnVtYmVyKSB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld0luZGV4ID0gdGhpcy5hY3RpdmVDYXRlZ29yeUluZGV4ICsgc3RlcDtcbiAgICAgIHRoaXMuc2V0QWN0aXZlVGFiKHRoaXMuZ2V0VGFyZ2V0Q2F0ZWdvcnkobmV3SW5kZXgpLCB7XG4gICAgICAgIGNoYW5nZUZvY3VzYWJsZTogdHJ1ZSxcbiAgICAgICAgcGVyZm9ybUZvY3VzOiB0cnVlXG4gICAgICB9KTtcbiAgICB9O1xuICB9XG59XG4iLCAiLy8gUmVwcmVzZW50YXRpdmUgZW1vamlzIGZvciBlYWNoIGVtb2ppIHZlcnNpb24uIElmIGEgZ2l2ZW4gZW1vamkgaXMgc3VwcG9ydGVkLFxuLy8gd2UgYXNzdW1lIHRoZSBzeXN0ZW0gc3VwcG9ydHMgdGhhdCBlbW9qaSB2ZXJzaW9uLlxuY29uc3QgVEVTVF9FTU9KSVMgPSBbXG4gIHsgdmVyc2lvbjogMTUsIGVtb2ppOiBTdHJpbmcuZnJvbUNvZGVQb2ludCgweDFGQUU4KSB9LFxuICB7IHZlcnNpb246IDE0LCBlbW9qaTogU3RyaW5nLmZyb21Db2RlUG9pbnQoMHgxRjZERCkgfSxcbiAgeyB2ZXJzaW9uOiAxMywgZW1vamk6IFN0cmluZy5mcm9tQ29kZVBvaW50KDB4MUZBQzEpIH0sXG4gIHsgdmVyc2lvbjogMTIsIGVtb2ppOiBTdHJpbmcuZnJvbUNvZGVQb2ludCgweDFGOUE5KSB9LFxuICB7IHZlcnNpb246IDExLCBlbW9qaTogU3RyaW5nLmZyb21Db2RlUG9pbnQoMHgxRjlCNykgfSxcbiAgeyB2ZXJzaW9uOiA1LCBlbW9qaTogU3RyaW5nLmZyb21Db2RlUG9pbnQoMHgxRjkyQSkgfSwgXG4gIHsgdmVyc2lvbjogNCwgZW1vamk6IFN0cmluZy5mcm9tQ29kZVBvaW50KDB4MjY5NSkgfSxcbiAgeyB2ZXJzaW9uOiAzLCBlbW9qaTogU3RyaW5nLmZyb21Db2RlUG9pbnQoMHgxRjkyMikgfSxcbiAgeyB2ZXJzaW9uOiAyLCBlbW9qaTogU3RyaW5nLmZyb21Db2RlUG9pbnQoMHgxRjVFOCkgfSxcbiAgeyB2ZXJzaW9uOiAxLCBlbW9qaTogU3RyaW5nLmZyb21Db2RlUG9pbnQoMHgxRjYwMCkgfVxuXTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHRoZSBsYXRlc3QgZW1vamkgdmVyc2lvbiB0aGF0IGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci5cbiAqIEByZXR1cm5zIHRoZSBzdXBwb3J0ZWQgZW1vamkgdmVyc2lvbiBudW1iZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluZUVtb2ppVmVyc2lvbigpIHtcbiAgY29uc3Qgc3VwcG9ydGVkRW1vamkgPSBURVNUX0VNT0pJUy5maW5kKGVtb2ppID0+IHN1cHBvcnRzRW1vamkoZW1vamkuZW1vamkpKTtcbiAgcmV0dXJuIHN1cHBvcnRlZEVtb2ppPy52ZXJzaW9uID8/IDE7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBlbW9qaSBpcyByZW5kZXJlZCBjb3JyZWN0bHkgYnkgdGhlIGJyb3dzZXIuXG4gKiBcbiAqIEBwYXJhbSBlbW9qaSB0aGUgZW1vamkgdG8gYXR0ZW1wdCB0byByZW5kZXJcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGVtb2ppIHJlbmRlcnMgY29ycmVjdGx5LCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZnVuY3Rpb24gc3VwcG9ydHNFbW9qaShlbW9qaTogc3RyaW5nKSB7XG4gIGNvbnN0IGNvbnRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKS5nZXRDb250ZXh0KCcyZCcpO1xuXG4gIGlmIChjb250ZXh0KSB7XG4gICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSAndG9wJztcbiAgICBjb250ZXh0LmZvbnQgPSAnMzJweCBBcmlhbCc7XG4gICAgY29udGV4dC5maWxsVGV4dChlbW9qaSwgMCwgMCk7XG5cbiAgICByZXR1cm4gY29udGV4dC5nZXRJbWFnZURhdGEoMTYsIDE2LCAxLCAxKS5kYXRhWzBdICE9PSAwO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgVGVtcGxhdGUgfSBmcm9tICcuLi9UZW1wbGF0ZSc7XG5cbmZ1bmN0aW9uIHJlcGVhdChjb3VudCwgY29udGVudCkge1xuICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY291bnQgfSwgKCkgPT4gY29udGVudCkuam9pbignJyk7XG59XG5cbmZ1bmN0aW9uIGhlYWRlcih7IHNob3dIZWFkZXIsIGNsYXNzZXMgfSkge1xuICByZXR1cm4gc2hvd0hlYWRlciA/IC8qIGh0bWwgKi9gXG4gICAgPGhlYWRlciBjbGFzcz1cIiR7Y2xhc3Nlcy5oZWFkZXJ9XCI+XG4gICAgICA8ZGl2IGRhdGEtdmlldz1cInNlYXJjaFwiPjwvZGl2PlxuICAgICAgPGRpdiBkYXRhLXZpZXc9XCJjYXRlZ29yeVRhYnNcIiBkYXRhLXJlbmRlcj1cInN5bmNcIj48L2Rpdj5cbiAgICA8L2hlYWRlcj5cbiAgYCA6ICcnO1xufVxuXG5mdW5jdGlvbiByZW5kZXJQaWNrZXIoZGF0YSkge1xuICBjb25zdCB7IGNsYXNzZXMsIHRoZW1lLCBjbGFzc05hbWUgPSAnJ30gPSBkYXRhO1xuICByZXR1cm4gLyogaHRtbCAqL2BcbiAgICA8ZGl2IGNsYXNzPVwicGljbW9fX3BpY2tlciAke2NsYXNzZXMucGlja2VyfSAke3RoZW1lfSAke2NsYXNzTmFtZX1cIj5cbiAgICAgICR7aGVhZGVyKGRhdGEpfVxuICAgICAgPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy5jb250ZW50fVwiPlxuICAgICAgICA8ZGl2IGRhdGEtdmlldz1cImVtb2ppQXJlYVwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGRhdGEtdmlldz1cInByZXZpZXdcIj48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYDtcbn1cblxuZnVuY3Rpb24gcmVuZGVyUGxhY2Vob2xkZXIoZGF0YSkge1xuICBjb25zdCB7IGVtb2ppQ291bnQsIGNsYXNzZXMsIHRoZW1lLCBjbGFzc05hbWUsIGNhdGVnb3J5Q291bnQgfSA9IGRhdGE7XG5cbiAgY29uc3Qgc2VhcmNoID0gKHsgc2hvd1NlYXJjaCwgY2xhc3NlcyB9KSA9PiBzaG93U2VhcmNoID8gLyogaHRtbCAqL2BcbiAgICA8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLnNlYXJjaFNrZWxldG9ufVwiPlxuICAgICAgPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy5zZWFyY2hJbnB1dH0gJHtjbGFzc2VzLnBsYWNlaG9sZGVyfVwiPjwvZGl2PlxuICAgIDwvZGl2PlxuICBgIDogJyc7XG5cbiAgY29uc3QgY2F0ZWdvcnlUYWJzID0gKHsgc2hvd0NhdGVnb3J5VGFicywgY2xhc3NlcyB9KSA9PiBzaG93Q2F0ZWdvcnlUYWJzID8gLyogaHRtbCAqL2BcbiAgICA8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLmNhdGVnb3J5VGFic1NrZWxldG9ufVwiPlxuICAgICAgJHtyZXBlYXQoY2F0ZWdvcnlDb3VudCwgLyogaHRtbCAqL2A8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLnBsYWNlaG9sZGVyfSAke2NsYXNzZXMuY2F0ZWdvcnlUYWJ9XCI+PC9kaXY+YCl9XG4gICAgPC9kaXY+XG4gIGAgOiAnJztcblxuICBjb25zdCBoZWFkZXIgPSAoeyBzaG93SGVhZGVyLCBjbGFzc2VzIH0pID0+IHNob3dIZWFkZXIgPyAvKiBodG1sICovYFxuICAgIDxoZWFkZXIgY2xhc3M9XCIke2NsYXNzZXMuaGVhZGVyU2tlbGV0b259XCI+XG4gICAgICAke3NlYXJjaChkYXRhKX1cbiAgICAgICR7Y2F0ZWdvcnlUYWJzKGRhdGEpfVxuICAgIDwvaGVhZGVyPlxuICBgIDogJyc7XG5cbiAgY29uc3QgcHJldmlldyA9ICh7IHNob3dQcmV2aWV3LCBjbGFzc2VzIH0pID0+IHNob3dQcmV2aWV3ID8gLyogaHRtbCAqL2BcbiAgICA8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLnByZXZpZXdTa2VsZXRvbn1cIj5cbiAgICAgIDxkaXYgY2xhc3M9XCIke2NsYXNzZXMucGxhY2Vob2xkZXJ9ICR7Y2xhc3Nlcy5wcmV2aWV3RW1vaml9XCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLnBsYWNlaG9sZGVyfSAke2NsYXNzZXMucHJldmlld05hbWV9XCI+PC9kaXY+XG4gICAgICA8dWwgY2xhc3M9XCIke2NsYXNzZXMudGFnTGlzdH1cIj5cbiAgICAgICAgJHtyZXBlYXQoMywgLyogaHRtbCAqL2A8bGkgY2xhc3M9XCIke2NsYXNzZXMucGxhY2Vob2xkZXJ9ICR7Y2xhc3Nlcy50YWd9XCI+PC9saT5gKX1cbiAgICAgIDwvdWw+XG4gICAgPC9kaXY+XG4gIGAgOiAnJztcblxuICByZXR1cm4gLyogaHRtbCAqL2BcbiAgICA8ZGl2IGNsYXNzPVwicGljbW9fX3BpY2tlciAke2NsYXNzZXMuc2tlbGV0b259ICR7Y2xhc3Nlcy5waWNrZXJ9ICR7dGhlbWV9ICR7Y2xhc3NOYW1lfVwiPlxuICAgICAgJHtoZWFkZXIoZGF0YSl9XG4gICAgICA8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLmNvbnRlbnRTa2VsZXRvbn1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy5wbGFjZWhvbGRlcn0gJHtjbGFzc2VzLmNhdGVnb3J5TmFtZX1cIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIiR7Y2xhc3Nlcy5lbW9qaUdyaWR9XCI+XG4gICAgICAgICAgJHtyZXBlYXQoZW1vamlDb3VudCwgLyogaHRtbCAqL2A8ZGl2IGNsYXNzPVwiJHtjbGFzc2VzLnBsYWNlaG9sZGVyfSAke2NsYXNzZXMuZW1vaml9XCI+PC9kaXY+YCl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICAke3ByZXZpZXcoZGF0YSl9XG4gICAgPC9kaXY+XG4gIGA7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBUZW1wbGF0ZShkYXRhID0+IHtcbiAgcmV0dXJuIGRhdGEuaXNMb2FkZWQgPyByZW5kZXJQaWNrZXIoZGF0YSkgOiByZW5kZXJQbGFjZWhvbGRlcihkYXRhKTtcbn0pO1xuIiwgImltcG9ydCB7IEV4dGVybmFsRXZlbnQsIEV4dGVybmFsRXZlbnRzIH0gZnJvbSAnLi4vRXh0ZXJuYWxFdmVudHMnO1xuXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi92aWV3JztcbmltcG9ydCB7IEVtb2ppQXJlYSB9IGZyb20gJy4vRW1vamlBcmVhJztcbmltcG9ydCB7IERhdGFFcnJvciB9IGZyb20gJy4vRGF0YUVycm9yJztcbmltcG9ydCB7IEVtb2ppUHJldmlldyB9IGZyb20gJy4vUHJldmlldyc7XG5pbXBvcnQgeyBTZWFyY2ggfSBmcm9tICcuL1NlYXJjaCc7XG5pbXBvcnQgeyBWYXJpYW50UG9wdXAgfSBmcm9tICcuL1ZhcmlhbnRQb3B1cCc7XG5pbXBvcnQgeyBDYXRlZ29yeVRhYnMgfSBmcm9tICcuL0NhdGVnb3J5VGFicyc7XG5pbXBvcnQgeyBzZXRQcm92aWRlciB9IGZyb20gJy4uL3JlY2VudHMnO1xuaW1wb3J0IHsgRGF0YVN0b3JlIH0gZnJvbSAnLi4vZGF0YS9EYXRhU3RvcmUnO1xuaW1wb3J0IHsgRXZlbnRDYWxsYmFjayB9IGZyb20gJy4uL2V2ZW50cyc7XG5cbmltcG9ydCB7IGRldGVybWluZUVtb2ppVmVyc2lvbiB9IGZyb20gJy4uL2Vtb2ppU3VwcG9ydCc7XG5cbmltcG9ydCB7IENhdGVnb3J5LCBFbW9qaVJlY29yZCwgVXBkYXRhYmxlT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IExBVEVTVF9FTU9KSV9WRVJTSU9OIH0gZnJvbSAnZW1vamliYXNlJztcblxuaW1wb3J0IHRlbXBsYXRlIGZyb20gJy4vRW1vamlQaWNrZXIudGVtcGxhdGUnO1xuaW1wb3J0IHsgZ2V0UHJlZml4ZWRDbGFzc2VzLCByZXBsYWNlQ2hpbGRyZW4gfSBmcm9tICcuLi91dGlsJztcblxuY29uc3QgY2xhc3NlcyA9IGdldFByZWZpeGVkQ2xhc3NlcyhcbiAgJ3BpY2tlcicsXG4gICdza2VsZXRvbicsXG4gICdwbGFjZWhvbGRlcicsXG4gICdzZWFyY2hTa2VsZXRvbicsXG4gICdzZWFyY2hJbnB1dCcsXG4gICdjYXRlZ29yeVRhYnNTa2VsZXRvbicsXG4gICdoZWFkZXJTa2VsZXRvbicsXG4gICdjYXRlZ29yeVRhYicsXG4gICdjb250ZW50U2tlbGV0b24nLFxuICAnY2F0ZWdvcnlOYW1lJyxcbiAgJ2Vtb2ppR3JpZCcsXG4gICdlbW9qaScsXG4gICdwcmV2aWV3U2tlbGV0b24nLFxuICAncHJldmlld0Vtb2ppJyxcbiAgJ3ByZXZpZXdOYW1lJyxcbiAgJ3RhZ0xpc3QnLFxuICAndGFnJyxcbiAgJ292ZXJsYXknLFxuICAnY29udGVudCcsXG4gICdmdWxsSGVpZ2h0JyxcbiAgJ3BsdWdpbkNvbnRhaW5lcicsXG4gICdoZWFkZXInXG4pO1xuXG5jb25zdCB2YXJpYWJsZU5hbWVzID0ge1xuICBlbW9qaXNQZXJSb3c6ICctLWVtb2ppcy1wZXItcm93JyxcbiAgdmlzaWJsZVJvd3M6ICctLXJvdy1jb3VudCcsXG4gIGVtb2ppU2l6ZTogJy0tZW1vamktc2l6ZSdcbn07XG5cbi8qKlxuICogVGhlIG1haW4gZW1vamkgcGlja2VyIHZpZXcuIENvbnRhaW5zIHRoZSBmdWxsIHBpY2tlciBVSSBhbmQgYW4gZXZlbnQgZW1pdHRlciB0byByZWFjdCB0b1xuICogZW1vamkgc2VsZWN0aW9uIGV2ZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEVtb2ppUGlja2VyIGV4dGVuZHMgVmlldyB7XG4gIHBpY2tlclJlYWR5ID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBjYXRlZ29yaWVzOiBDYXRlZ29yeVtdO1xuXG4gIHByaXZhdGUgY2F0ZWdvcnlUYWJzOiBDYXRlZ29yeVRhYnM7XG4gIHByaXZhdGUgc2VhcmNoOiBTZWFyY2g7XG4gIHByaXZhdGUgZW1vamlBcmVhOiBFbW9qaUFyZWE7XG4gIHByaXZhdGUgcHJldmlldzogRW1vamlQcmV2aWV3O1xuICBwcml2YXRlIHZhcmlhbnRQb3B1cDogVmFyaWFudFBvcHVwIHwgbnVsbDtcbiAgcHJpdmF0ZSBlbW9qaVZlcnNpb246IG51bWJlcjtcblxuICBwcml2YXRlIGN1cnJlbnRWaWV3OiBWaWV3O1xuXG4gIHByaXZhdGUgZXh0ZXJuYWxFdmVudHMgPSBuZXcgRXh0ZXJuYWxFdmVudHMoKTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih7IHRlbXBsYXRlLCBjbGFzc2VzIH0pO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLnVpRWxlbWVudHMgPSB7XG4gICAgICBwaWNrZXJDb250ZW50OiBWaWV3LmJ5Q2xhc3MoY2xhc3Nlcy5jb250ZW50KSxcbiAgICAgIGhlYWRlcjogVmlldy5ieUNsYXNzKGNsYXNzZXMuaGVhZGVyKVxuICAgIH07XG5cbiAgICB0aGlzLnVpRXZlbnRzID0gW1xuICAgICAgVmlldy51aUV2ZW50KCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlEb3duKVxuICAgIF07XG5cbiAgICB0aGlzLmFwcEV2ZW50cyA9IHtcbiAgICAgIGVycm9yOiB0aGlzLm9uRXJyb3IsXG4gICAgICByZWluaXRpYWxpemU6IHRoaXMucmVpbml0aWFsaXplLFxuICAgICAgJ2RhdGE6cmVhZHknOiB0aGlzLm9uRGF0YVJlYWR5LFxuICAgICAgJ2NvbnRlbnQ6c2hvdyc6IHRoaXMuc2hvd0NvbnRlbnQsXG4gICAgICAndmFyaWFudFBvcHVwOmhpZGUnOiB0aGlzLmhpZGVWYXJpYW50UG9wdXAsXG4gICAgICAnZW1vamk6c2VsZWN0JzogdGhpcy5zZWxlY3RFbW9qaVxuICAgIH07XG5cbiAgICBzdXBlci5pbml0aWFsaXplKCk7XG4gICAgc2V0UHJvdmlkZXIodGhpcy5vcHRpb25zLnJlY2VudHNQcm92aWRlcik7XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveXMgdGhlIHBpY2tlciB3aGVuIGl0IGlzIG5vIGxvbmdlciBuZWVkZWQuXG4gICAqIEFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QsIHRoZSBwaWNrZXIgd2lsbCBubyBsb25nZXIgYmUgdXNhYmxlLlxuICAgKlxuICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBkZXN0cm95IGlzIGNvbXBsZXRlLlxuICAgKi9cbiAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgdGhpcy5zZWFyY2g/LmRlc3Ryb3koKTtcbiAgICB0aGlzLmVtb2ppQXJlYS5kZXN0cm95KCk7XG4gICAgdGhpcy5jYXRlZ29yeVRhYnM/LmRlc3Ryb3koKTtcbiAgICB0aGlzLmV2ZW50cy5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLmV4dGVybmFsRXZlbnRzLnJlbW92ZUFsbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBjbGVhciB0aGUgcmVjZW50cyB1c2luZyB0aGUgY29uZmlndXJlZCByZWNlbnRzIHByb3ZpZGVyLlxuICAgKi9cbiAgY2xlYXJSZWNlbnRzKCkge1xuICAgIHRoaXMub3B0aW9ucy5yZWNlbnRzUHJvdmlkZXIuY2xlYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0ZW5zIGZvciBhIHBpY2tlciBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50IFRoZSBldmVudCB0byBsaXN0ZW4gZm9yXG4gICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIHRoZSBldmVudCBpcyB0cmlnZ2VyZWRcbiAgICovXG4gICBhZGRFdmVudExpc3RlbmVyKGV2ZW50OiBFeHRlcm5hbEV2ZW50LCBjYWxsYmFjazogRXZlbnRDYWxsYmFjaykge1xuICAgIHRoaXMuZXh0ZXJuYWxFdmVudHMub24oZXZlbnQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgcmVjZW50IGVtb2ppIGZyb20gdGhlIHBpY2tlci5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50IFRoZSBldmVudCB0byBzdG9wIGxpc3RlbmluZyBmb3JcbiAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBwcmV2aW91c2x5IGJvdW5kIGV2ZW50IGxpc3RlbmVyXG4gICAqL1xuICByZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50OiBFeHRlcm5hbEV2ZW50LCBjYWxsYmFjazogRXZlbnRDYWxsYmFjaykge1xuICAgIHRoaXMuZXh0ZXJuYWxFdmVudHMub2ZmKGV2ZW50LCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogRmluaXNoZXMgc2V0dGluZyB1cCB0aGUgcGlja2VyIHZpZXcgb25jZSB0aGUgZGF0YSBpcyByZWFkeS5cbiAgICogVGhpcyB3aWxsIG9ubHkgYmUgY2FsbGVkIGlmIHRoZSBlbW9qaSBkYXRhIGlzIGF2YWlsYWJsZSBhbmQgYWxsXG4gICAqIGVtb2ppIHBpY2tlciB2aWV3cyBoYXZlIGJlZW4gcmVuZGVyZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGxhc3QgdGhpbmcgdG8gaGFwcGVuIGJlZm9yZSB0aGUgZW1vamkgcGlja2VyIFVJIGJlY29tZXMgdmlzaWJsZS5cbiAgICovXG4gIGluaXRpYWxpemVQaWNrZXJWaWV3KCkge1xuICAgIGlmICh0aGlzLnBpY2tlclJlYWR5KSB7XG4gICAgICB0aGlzLnNob3dDb250ZW50KCk7XG4gICAgICB0aGlzLmVtb2ppQXJlYS5yZXNldChmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVLZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgY29uc3QgaXNTaG9ydGN1dCA9IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleTtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAncycgJiYgaXNTaG9ydGN1dCAmJiB0aGlzLnNlYXJjaCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuc2VhcmNoLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgdGhyZWUgc2VjdGlvbnMgb2YgdGhlIHBpY2tlcjpcbiAgICpcbiAgICogLSBwcmV2aWV3IGFyZWEgKGlmIGVuYWJsZWQgaW4gb3B0aW9ucylcbiAgICogLSBzZWFyY2ggYXJlYSAoaWYgZW5hYmxlZCBpbiBvcHRpb25zKVxuICAgKiAtIGVtb2ppIGFyZWEgKGFsd2F5cyBzaG93bilcbiAgICpcbiAgICogQHJldHVybnMgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgdGhyZWUgY2hpbGQgdmlld3MuIFRoZSBwcmV2aWV3IGFuZCBzZWFyY2hcbiAgICogICAgICAgICAgdmlld3MgYXJlIG9wdGlvbmFsLCBhbmQgd2lsbCBiZSB1bmRlZmluZWQgaWYgdGhleSBhcmUgbm90IGVuYWJsZWQuXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkQ2hpbGRWaWV3cygpOiBbRW1vamlQcmV2aWV3LCBTZWFyY2gsIEVtb2ppQXJlYSwgQ2F0ZWdvcnlUYWJzXSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5zaG93UHJldmlldykge1xuICAgICAgdGhpcy5wcmV2aWV3ID0gdGhpcy52aWV3RmFjdG9yeS5jcmVhdGUoRW1vamlQcmV2aWV3KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnNob3dTZWFyY2gpIHtcbiAgICAgIHRoaXMuc2VhcmNoID0gdGhpcy52aWV3RmFjdG9yeS5jcmVhdGUoU2VhcmNoLCB7XG4gICAgICAgIGNhdGVnb3JpZXM6IHRoaXMuY2F0ZWdvcmllcyxcbiAgICAgICAgZW1vamlWZXJzaW9uOiB0aGlzLmVtb2ppVmVyc2lvblxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zaG93Q2F0ZWdvcnlUYWJzKSB7XG4gICAgICB0aGlzLmNhdGVnb3J5VGFicyA9IHRoaXMudmlld0ZhY3RvcnkuY3JlYXRlKENhdGVnb3J5VGFicywge1xuICAgICAgICBjYXRlZ29yaWVzOiB0aGlzLmNhdGVnb3JpZXNcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuY3VycmVudFZpZXcgPSB0aGlzLmVtb2ppQXJlYSA9IHRoaXMudmlld0ZhY3RvcnkuY3JlYXRlKEVtb2ppQXJlYSwge1xuICAgICAgY2F0ZWdvcnlUYWJzOiB0aGlzLmNhdGVnb3J5VGFicyxcbiAgICAgIGNhdGVnb3JpZXM6IHRoaXMuY2F0ZWdvcmllcyxcbiAgICAgIGVtb2ppVmVyc2lvbjogdGhpcy5lbW9qaVZlcnNpb25cbiAgICB9KTtcblxuICAgIHJldHVybiBbdGhpcy5wcmV2aWV3LCB0aGlzLnNlYXJjaCwgdGhpcy5lbW9qaUFyZWEsIHRoaXMuY2F0ZWdvcnlUYWJzXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFueSBDU1MgdmFyaWFibGVzIGNvcnJlc3BvbmRpbmcgdG8gb3B0aW9ucyB0aGF0IHdlcmUgc2V0LlxuICAgKi9cbiAgcHJpdmF0ZSBzZXRTdHlsZVByb3BlcnRpZXMoKSB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuc2hvd1NlYXJjaCkge1xuICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zZWFyY2gtaGVpZ2h0LWZ1bGwnLCAnMHB4Jyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuc2hvd0NhdGVnb3J5VGFicykge1xuICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jYXRlZ29yeS10YWJzLWhlaWdodCcsICcwcHgnKTtcbiAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2F0ZWdvcnktdGFicy1vZmZzZXQnLCAnMHB4Jyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuc2hvd1ByZXZpZXcpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tZW1vamktcHJldmlldy1oZWlnaHQtZnVsbCcsICcwcHgnKTtcbiAgICB9XG5cbiAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zW2tleV0pIHtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSh2YXJpYWJsZU5hbWVzW2tleV0sIHRoaXMub3B0aW9uc1trZXldLnRvU3RyaW5nKCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdHlsZVByb3BlcnR5KG9wdGlvbjogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eSh2YXJpYWJsZU5hbWVzW29wdGlvbl0sIHZhbHVlLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5yZW5kZXJTeW5jKCk7XG4gIH1cblxuICBwcml2YXRlIG9uRXJyb3IoZXJyb3I6IEVycm9yKSB7XG4gICAgY29uc3QgZXJyb3JWaWV3ID0gdGhpcy52aWV3RmFjdG9yeS5jcmVhdGVXaXRoT3B0aW9ucyh7IGRhdGE6IGZhbHNlIH0sIERhdGFFcnJvciwgeyBtZXNzYWdlOiB0aGlzLmkxOG4uZ2V0KCdlcnJvci5sb2FkJykgfSk7XG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5lbC5vZmZzZXRIZWlnaHQgfHwgMzc1O1xuICAgIHRoaXMuZWwuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgICByZXBsYWNlQ2hpbGRyZW4odGhpcy5lbCwgZXJyb3JWaWV3LnJlbmRlclN5bmMoKSk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gdGhlIGVtb2ppIGRhdGFiYXNlIGlzIHJlYWR5IHRvIGJlIHVzZWQuXG4gICAqXG4gICAqIFRoaXMgd2lsbCByZXBsYWNlIHRoZSBsb2FkZXIgcGxhY2Vob2xkZXIgd2l0aCB0aGUgZnVsbCBwaWNrZXIgVUkuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIG9uRGF0YVJlYWR5KGRiOiBEYXRhU3RvcmUpIHtcbiAgICAvLyBTYXZlIHRoZSBjdXJyZW50IGVsIHNvIHdlIGNhbiByZXBsYWNlIGl0IGluIHRoZSBET00gYWZ0ZXIgdGhlIG5ldyByZW5kZXIuXG4gICAgY29uc3QgY3VycmVudFZpZXcgPSB0aGlzLmVsO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChkYikge1xuICAgICAgICB0aGlzLmVtb2ppRGF0YSA9IGRiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5lbW9qaURhdGFQcm9taXNlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmVtb2ppVmVyc2lvbiA9PT0gJ2F1dG8nKSB7XG4gICAgICAgIHRoaXMuZW1vamlWZXJzaW9uID0gZGV0ZXJtaW5lRW1vamlWZXJzaW9uKCkgfHwgcGFyc2VGbG9hdChMQVRFU1RfRU1PSklfVkVSU0lPTik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVtb2ppVmVyc2lvbiA9IHRoaXMub3B0aW9ucy5lbW9qaVZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IGF3YWl0IHRoaXMuZW1vamlEYXRhLmdldENhdGVnb3JpZXModGhpcy5vcHRpb25zKTtcblxuICAgICAgY29uc3QgW3ByZXZpZXcsIHNlYXJjaCwgZW1vamlBcmVhLCBjYXRlZ29yeVRhYnNdID0gdGhpcy5idWlsZENoaWxkVmlld3MoKTtcblxuICAgICAgYXdhaXQgc3VwZXIucmVuZGVyKHtcbiAgICAgICAgaXNMb2FkZWQ6IHRydWUsXG4gICAgICAgIHNlYXJjaCxcbiAgICAgICAgY2F0ZWdvcnlUYWJzLFxuICAgICAgICBlbW9qaUFyZWEsXG4gICAgICAgIHByZXZpZXcsXG4gICAgICAgIHNob3dIZWFkZXI6IEJvb2xlYW4odGhpcy5zZWFyY2ggfHwgdGhpcy5jYXRlZ29yeVRhYnMpLFxuICAgICAgICB0aGVtZTogdGhpcy5vcHRpb25zLnRoZW1lLFxuICAgICAgICBjbGFzc05hbWU6IHRoaXMub3B0aW9ucy5jbGFzc05hbWVcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhdGVnb3J5LWNvdW50JywgdGhpcy5jYXRlZ29yaWVzLmxlbmd0aC50b1N0cmluZygpKTtcblxuICAgICAgdGhpcy5waWNrZXJSZWFkeSA9IHRydWU7XG5cbiAgICAgIGN1cnJlbnRWaWV3LnJlcGxhY2VXaXRoKHRoaXMuZWwpO1xuICAgICAgdGhpcy5zZXRTdHlsZVByb3BlcnRpZXMoKTtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVBpY2tlclZpZXcoKTtcblxuICAgICAgdGhpcy5zZXRJbml0aWFsRm9jdXMoKTtcblxuICAgICAgdGhpcy5leHRlcm5hbEV2ZW50cy5lbWl0KCdkYXRhOnJlYWR5Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZXZlbnRzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIHRoZSBwaWNrZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHRoZSByb290IGVsZW1lbnQgb2YgdGhlIHBpY2tlclxuICAgKi9cbiAgcmVuZGVyU3luYygpOiBIVE1MRWxlbWVudCB7XG4gICAgbGV0IGNhdGVnb3J5Q291bnQgPSB0aGlzLm9wdGlvbnMuY2F0ZWdvcmllcz8ubGVuZ3RoIHx8IDEwO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuc2hvd1JlY2VudHMpIHtcbiAgICAgIGNhdGVnb3J5Q291bnQgKz0gMTtcbiAgICB9XG5cbiAgICBzdXBlci5yZW5kZXJTeW5jKHtcbiAgICAgIGlzTG9hZGVkOiBmYWxzZSxcbiAgICAgIHRoZW1lOiB0aGlzLm9wdGlvbnMudGhlbWUsXG4gICAgICBjbGFzc05hbWU6IHRoaXMub3B0aW9ucy5jbGFzc05hbWUsXG4gICAgICBzaG93U2VhcmNoOiB0aGlzLm9wdGlvbnMuc2hvd1NlYXJjaCxcbiAgICAgIHNob3dQcmV2aWV3OiB0aGlzLm9wdGlvbnMuc2hvd1ByZXZpZXcsXG4gICAgICBzaG93Q2F0ZWdvcnlUYWJzOiB0aGlzLm9wdGlvbnMuc2hvd0NhdGVnb3J5VGFicyxcbiAgICAgIHNob3dIZWFkZXI6IHRoaXMub3B0aW9ucy5zaG93U2VhcmNoIHx8IHRoaXMub3B0aW9ucy5zaG93Q2F0ZWdvcnlUYWJzLFxuICAgICAgZW1vamlDb3VudDogdGhpcy5vcHRpb25zLmVtb2ppc1BlclJvdyAqIHRoaXMub3B0aW9ucy52aXNpYmxlUm93cyxcbiAgICAgIGNhdGVnb3J5Q291bnRcbiAgICB9KTtcblxuICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2F0ZWdvcnktY291bnQnLCBjYXRlZ29yeUNvdW50LnRvU3RyaW5nKCkpO1xuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMucm9vdEVsZW1lbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUGlja2VyIG11c3QgYmUgZ2l2ZW4gYSByb290IGVsZW1lbnQgdmlhIHRoZSByb290RWxlbWVudCBvcHRpb24nKTtcbiAgICB9XG4gICAgXG4gICAgcmVwbGFjZUNoaWxkcmVuKHRoaXMub3B0aW9ucy5yb290RWxlbWVudCwgdGhpcy5lbCk7XG4gICAgdGhpcy5zZXRTdHlsZVByb3BlcnRpZXMoKTtcblxuICAgIGlmICh0aGlzLnBpY2tlclJlYWR5KSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVQaWNrZXJWaWV3KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZWw7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGF0IGVsZW1lbnQsIGlmIGFueSwgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkgZm9jdXNlZCB3aGVuIHRoZSBwaWNrZXIgaXMgcmVuZGVyZWQuXG4gICAqIFxuICAgKiBAcmV0dXJucyB0aGUgZm9jdXMgdGFyZ2V0LCBvciBgbnVsbGAgaWYgbm90aGluZyBzaG91bGQgYmUgZm9jdXNlZFxuICAgKi9cbiAgcHJpdmF0ZSBnZXRJbml0aWFsRm9jdXNUYXJnZXQoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzKSB7XG4gICAgICAgIGNhc2UgJ2Vtb2ppcyc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZW1vamlBcmVhLmZvY3VzYWJsZUVtb2ppO1xuICAgICAgICBjYXNlICdzZWFyY2gnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnNlYXJjaDtcbiAgICAgICAgY2FzZSAnYXV0byc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoIHx8IHRoaXMuZW1vamlBcmVhLmZvY3VzYWJsZUVtb2ppO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzU2VhcmNoID09PSB0cnVlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ29wdGlvbnMuYXV0b0ZvY3VzU2VhcmNoIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2Ugb3B0aW9ucy5mb2N1c1RhcmdldCBpbnN0ZWFkJyk7XG4gICAgICByZXR1cm4gdGhpcy5zZWFyY2g7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGluaXRpYWwgYXV0b2ZvY3VzLCBkZXBlbmRpbmcgb24gb3B0aW9ucy5cbiAgICovXG4gIHNldEluaXRpYWxGb2N1cygpIHtcbiAgICBpZiAoIXRoaXMucGlja2VyUmVhZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmdldEluaXRpYWxGb2N1c1RhcmdldCgpPy5mb2N1cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgcGlja2VyIHRvIGl0cyBkZWZhdWx0LCBcImluYWN0aXZlXCIgc3RhdGUuXG4gICAqL1xuICByZXNldChwZXJmb3JtRm9jdXMgPSB0cnVlKSB7XG4gICAgaWYgKHRoaXMucGlja2VyUmVhZHkpIHtcbiAgICAgIHRoaXMuZW1vamlBcmVhLnJlc2V0KHBlcmZvcm1Gb2N1cyk7XG4gICAgICB0aGlzLnNob3dDb250ZW50KHRoaXMuZW1vamlBcmVhKTtcbiAgICB9XG5cbiAgICB0aGlzLnNlYXJjaD8uY2xlYXIoKTtcbiAgICB0aGlzLmhpZGVWYXJpYW50UG9wdXAoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyBjb250ZW50IGluIHRoZSBtYWluIHBpY2tlciBjb250ZW50IGFyZWEuXG4gICAqIElmIG5vIFZpZXcgaXMgc3BlY2lmaWVkLCB0aGUgYnVpbHQtaW4gZW1vamkgYXJlYSB3aWxsIGJlIHNob3duLlxuICAgKlxuICAgKiBUaGUgY3VycmVudGx5IHNob3duIHZpZXcgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIERPTSBhbmQgZGVzdHJveWVkLlxuICAgKlxuICAgKiBAcGFyYW0gY29udGVudCBUaGUgVmlldyB0byBzaG93XG4gICAqL1xuICBwcml2YXRlIHNob3dDb250ZW50KGNvbnRlbnQ6IFZpZXcgPSB0aGlzLmVtb2ppQXJlYSkge1xuICAgIGlmIChjb250ZW50ID09PSB0aGlzLmN1cnJlbnRWaWV3KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY3VycmVudFZpZXcgIT09IHRoaXMuZW1vamlBcmVhKSB7XG4gICAgICB0aGlzLmN1cnJlbnRWaWV3Py5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgdGhpcy51aS5waWNrZXJDb250ZW50LmNsYXNzTGlzdC50b2dnbGUoY2xhc3Nlcy5mdWxsSGVpZ2h0LCBjb250ZW50ICE9PSB0aGlzLmVtb2ppQXJlYSk7XG4gICAgcmVwbGFjZUNoaWxkcmVuKHRoaXMudWkucGlja2VyQ29udGVudCwgY29udGVudC5lbCk7XG4gICAgdGhpcy5jdXJyZW50VmlldyA9IGNvbnRlbnQ7XG5cbiAgICBpZiAoY29udGVudCA9PT0gdGhpcy5lbW9qaUFyZWEpIHtcbiAgICAgIHRoaXMuZW1vamlBcmVhLnJlc2V0KCk7XG4gICAgICBpZiAodGhpcy5jYXRlZ29yeVRhYnMpIHtcbiAgICAgICAgdGhpcy51aS5oZWFkZXIuYXBwZW5kQ2hpbGQodGhpcy5jYXRlZ29yeVRhYnMuZWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNhdGVnb3J5VGFicz8uZWwucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyBhbmQgZGVzdHJveXMgdGhlIHZhcmlhbnQgcG9wdXAuXG4gICAqL1xuICBwcml2YXRlIGhpZGVWYXJpYW50UG9wdXAoKSB7XG4gICAgdGhpcy52YXJpYW50UG9wdXA/LmRlc3Ryb3koKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIG1vdXNlIGV2ZW50LCBkZXRlcm1pbmVzIGlmIHRoZSBldmVudCBvY2N1cnJlZCBvbiB0aGUgcGlja2VyIG9yIG9uZSBvZiBpdHMgY29tcG9uZW50cy5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudFxuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBjbGljayBzaG91bGQgYmUgdHJlYXRlZCBhcyBvbiB0aGUgcGlja2VyLCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIGlzUGlja2VyQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBjb25zdCBjbGlja2VkTm9kZSA9IGV2ZW50LnRhcmdldCBhcyBOb2RlO1xuXG4gICAgY29uc3QgaXNDbGlja0luc2lkZVBpY2tlciA9IHRoaXMuZWwuY29udGFpbnMoY2xpY2tlZE5vZGUpO1xuICAgIGNvbnN0IGlzQ2xpY2tPblZhcmlhbnRQb3B1cCA9IHRoaXMudmFyaWFudFBvcHVwPy5lbD8uY29udGFpbnMoY2xpY2tlZE5vZGUpO1xuXG4gICAgcmV0dXJuIGlzQ2xpY2tJbnNpZGVQaWNrZXIgfHwgaXNDbGlja09uVmFyaWFudFBvcHVwO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYSBjbGljayBvbiBhbiBlbW9qaS5cbiAgICogQHBhcmFtIGVtb2ppIFRoZSBlbW9qaSB0aGF0IHdhcyBjbGlja2VkXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gZWl0aGVyIHRoZSB2YXJpYW50IHBvcHVwIGlzIHNob3duIG9yIHRoZSBlbW9qaSBpcyByZW5kZXJlZCBhbmQgZW1pdHRlZFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBzZWxlY3RFbW9qaSh7IGVtb2ppIH06IHsgZW1vamk6IEVtb2ppUmVjb3JkIH0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBTaG93IHRoZSB2YXJpYW50IHBvcHVwIGlmIHRoZSBlbW9qaSBoYXMgdmFyaWFudHNcbiAgICBpZiAoZW1vamkuc2tpbnM/Lmxlbmd0aCAmJiB0aGlzLm9wdGlvbnMuc2hvd1ZhcmlhbnRzICYmICF0aGlzLmlzVmFyaWFudFBvcHVwT3Blbikge1xuICAgICAgdGhpcy5zaG93VmFyaWFudFBvcHVwKGVtb2ppKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy52YXJpYW50UG9wdXA/LmFuaW1hdGVIaWRlKCk7XG4gICAgICB0aGlzLmV2ZW50cy5lbWl0KCd2YXJpYW50UG9wdXA6aGlkZScpO1xuICAgICAgYXdhaXQgdGhpcy5lbWl0RW1vamkoZW1vamkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGlzVmFyaWFudFBvcHVwT3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy52YXJpYW50UG9wdXAgJiYgIXRoaXMudmFyaWFudFBvcHVwLmlzRGVzdHJveWVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3dzIHRoZSB2YXJpYW50IHBvcHVwIGZvciBhbiBlbW9qaS5cbiAgICpcbiAgICogQHBhcmFtIGVtb2ppIFRoZSBlbW9qaSB3aG9zZSB2YXJpYW50cyBhcmUgdG8gYmUgc2hvd24uXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHBvcHVwIGlzIHNob3duXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNob3dWYXJpYW50UG9wdXAoZW1vamk6IEVtb2ppUmVjb3JkKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY3VycmVudEZvY3VzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudDtcbiAgICB0aGlzLmV2ZW50cy5vbmNlKCd2YXJpYW50UG9wdXA6aGlkZScsICgpID0+IHtcbiAgICAgIGN1cnJlbnRGb2N1cz8uZm9jdXMoKTtcbiAgICB9KTtcblxuICAgIHRoaXMudmFyaWFudFBvcHVwID0gdGhpcy52aWV3RmFjdG9yeS5jcmVhdGUoVmFyaWFudFBvcHVwLCB7IGVtb2ppLCBwYXJlbnQ6IHRoaXMuZWwgfSk7XG4gICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLnZhcmlhbnRQb3B1cC5yZW5kZXJTeW5jKCkpO1xuICAgIHRoaXMudmFyaWFudFBvcHVwLmFjdGl2YXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyBhbiBlbW9qaSwgYW5kIGVtaXRzIGEgcHVibGljIGVtb2ppOnNlbGVjdCBldmVudCB3aXRoIHRoZSByZW5kZXJlZCByZXN1bHQuXG4gICAqIEBwYXJhbSBlbW9qaSB0aGUgZW1vamkgdGhhdCB3YXMgc2VsZWN0ZWQuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGVtaXRFbW9qaShlbW9qaTogRW1vamlSZWNvcmQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLmV4dGVybmFsRXZlbnRzLmVtaXQoJ2Vtb2ppOnNlbGVjdCcsIGF3YWl0IHRoaXMucmVuZGVyZXIuZG9FbWl0KGVtb2ppKSk7XG4gICAgdGhpcy5vcHRpb25zLnJlY2VudHNQcm92aWRlci5hZGRPclVwZGF0ZVJlY2VudChlbW9qaSwgdGhpcy5vcHRpb25zLm1heFJlY2VudHMpO1xuICAgIHRoaXMuZXZlbnRzLmVtaXQoJ3JlY2VudDphZGQnLCBlbW9qaSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZXJzID0ge1xuICAgIHN0eWxlUHJvcGVydHk6IHByb3BlcnR5TmFtZSA9PiB2YWx1ZSA9PiB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHZhcmlhYmxlTmFtZXNbcHJvcGVydHlOYW1lXSwgdmFsdWUudG9TdHJpbmcoKSksXG5cbiAgICB0aGVtZTogdGhlbWUgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lO1xuICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5lbC5jbG9zZXN0KGAuJHtjdXJyZW50VGhlbWV9YClcblxuICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKGN1cnJlbnRUaGVtZSk7XG4gICAgICBjb250YWluZXI/LmNsYXNzTGlzdC5yZW1vdmUoY3VycmVudFRoZW1lKTtcblxuICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKHRoZW1lKTtcbiAgICAgIGNvbnRhaW5lcj8uY2xhc3NMaXN0LmFkZCh0aGVtZSk7XG4gICAgfSxcblxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2xhc3NOYW1lKSB7XG4gICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLm9wdGlvbnMuY2xhc3NOYW1lKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgfSxcblxuICAgIGVtb2ppc1BlclJvdzogdGhpcy51cGRhdGVTdHlsZVByb3BlcnR5LmJpbmQodGhpcywgJ2Vtb2ppc1BlclJvdycpLFxuICAgIGVtb2ppU2l6ZTogdGhpcy51cGRhdGVTdHlsZVByb3BlcnR5LmJpbmQodGhpcywgJ2Vtb2ppU2l6ZScpLFxuICAgIHZpc2libGVSb3dzOiB0aGlzLnVwZGF0ZVN0eWxlUHJvcGVydHkuYmluZCh0aGlzLCAndmlzaWJsZVJvd3MnKVxuICB9XG5cbiAgdXBkYXRlT3B0aW9ucyhvcHRpb25zOiBVcGRhdGFibGVPcHRpb25zKSB7XG4gICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgdGhpcy51cGRhdGVyc1tvcHRpb25dKG9wdGlvbnNbb3B0aW9uXSk7XG4gICAgfSk7XG5cbiAgICBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBBcHBFdmVudCB9IGZyb20gJy4vQXBwRXZlbnRzJztcbmltcG9ydCB7IERhdGFTdG9yZSB9IGZyb20gJy4vZGF0YS9EYXRhU3RvcmUnO1xuaW1wb3J0IHsgRXZlbnRzIH0gZnJvbSAnLi9ldmVudHMnO1xuaW1wb3J0IHsgQnVuZGxlIH0gZnJvbSAnLi9pMThuL2J1bmRsZSc7XG5pbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXJzL3JlbmRlcmVyJztcbmltcG9ydCB7IFBpY2tlck9wdGlvbnMsIEVtb2ppUmVjb3JkIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi92aWV3cy92aWV3JztcblxudHlwZSBWaWV3RmFjdG9yeU9wdGlvbnMgPSB7XG4gIGRhdGE/OiBib29sZWFuO1xufTtcblxudHlwZSBEZXBlbmRlbmN5TWFwcGluZyA9IHtcbiAgZXZlbnRzOiBFdmVudHM8QXBwRXZlbnQ+O1xuICBpMThuOiBCdW5kbGU7XG4gIHJlbmRlcmVyOiBSZW5kZXJlcjtcbiAgZW1vamlEYXRhOiBQcm9taXNlPERhdGFTdG9yZT47XG4gIG9wdGlvbnM6IFBpY2tlck9wdGlvbnM7XG4gIGN1c3RvbUVtb2ppczogRW1vamlSZWNvcmRbXTtcbiAgcGlja2VySWQ6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFZpZXdDb25zdHJ1Y3RvcjxUIGV4dGVuZHMgVmlldz4gPSBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xuZXhwb3J0IHR5cGUgVmlld0NvbnN0cnVjdG9yUGFyYW1ldGVyczxUIGV4dGVuZHMgVmlldz4gPSBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8Vmlld0NvbnN0cnVjdG9yPFQ+PjtcblxuZXhwb3J0IGNsYXNzIFZpZXdGYWN0b3J5IHtcbiAgcHJpdmF0ZSBldmVudHM6IEV2ZW50czxBcHBFdmVudD47XG4gIHByaXZhdGUgaTE4bjogQnVuZGxlO1xuICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjtcbiAgcHJpdmF0ZSBlbW9qaURhdGE6IFByb21pc2U8RGF0YVN0b3JlPjtcbiAgcHJpdmF0ZSBvcHRpb25zOiBQaWNrZXJPcHRpb25zO1xuICBwcml2YXRlIGN1c3RvbUVtb2ppczogRW1vamlSZWNvcmRbXTtcbiAgcHJpdmF0ZSBwaWNrZXJJZDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHsgZXZlbnRzLCBpMThuLCByZW5kZXJlciwgZW1vamlEYXRhLCBvcHRpb25zLCBjdXN0b21FbW9qaXMgPSBbXSwgcGlja2VySWQgfTogRGVwZW5kZW5jeU1hcHBpbmcpIHtcbiAgICB0aGlzLmV2ZW50cyA9IGV2ZW50cztcbiAgICB0aGlzLmkxOG4gPSBpMThuO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLmVtb2ppRGF0YSA9IGVtb2ppRGF0YTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuY3VzdG9tRW1vamlzID0gY3VzdG9tRW1vamlzO1xuICAgIHRoaXMucGlja2VySWQgPSBwaWNrZXJJZDtcbiAgfVxuXG4gIHNldEVtb2ppRGF0YShlbW9qaURhdGE6IERhdGFTdG9yZSkge1xuICAgIHRoaXMuZW1vamlEYXRhID0gUHJvbWlzZS5yZXNvbHZlKGVtb2ppRGF0YSk7XG4gIH1cblxuICBjcmVhdGVXaXRoT3B0aW9uczxUIGV4dGVuZHMgVmlldz4ob3B0aW9uczogVmlld0ZhY3RvcnlPcHRpb25zID0ge30sIGNvbnN0cnVjdG9yOiBWaWV3Q29uc3RydWN0b3I8VD4sIC4uLmFyZ3M6IFZpZXdDb25zdHJ1Y3RvclBhcmFtZXRlcnM8VD4pOiBUIHtcbiAgICBjb25zdCB2aWV3ID0gbmV3IGNvbnN0cnVjdG9yKC4uLmFyZ3MpO1xuICAgIFxuICAgIHZpZXcuc2V0UGlja2VySWQodGhpcy5waWNrZXJJZCk7XG4gICAgdmlldy5zZXRFdmVudHModGhpcy5ldmVudHMpO1xuICAgIHZpZXcuc2V0STE4bih0aGlzLmkxOG4pO1xuICAgIHZpZXcuc2V0UmVuZGVyZXIodGhpcy5yZW5kZXJlcik7XG5cbiAgICBpZiAob3B0aW9ucy5kYXRhICE9PSBmYWxzZSkge1xuICAgICAgdmlldy5zZXRFbW9qaURhdGEodGhpcy5lbW9qaURhdGEpO1xuICAgIH1cblxuICAgIHZpZXcuc2V0T3B0aW9ucyh0aGlzLm9wdGlvbnMpO1xuICAgIHZpZXcuc2V0Q3VzdG9tRW1vamlzKHRoaXMuY3VzdG9tRW1vamlzKTtcblxuICAgIHZpZXcudmlld0ZhY3RvcnkgPSB0aGlzO1xuXG4gICAgdmlldy5pbml0aWFsaXplKCk7XG4gICAgcmV0dXJuIHZpZXc7XG4gIH1cblxuICBjcmVhdGU8VCBleHRlbmRzIFZpZXc+KGNvbnN0cnVjdG9yOiBWaWV3Q29uc3RydWN0b3I8VD4sIC4uLmFyZ3M6IFZpZXdDb25zdHJ1Y3RvclBhcmFtZXRlcnM8VD4pOiBUIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVXaXRoT3B0aW9ucyh7fSwgY29uc3RydWN0b3IsIC4uLmFyZ3MpO1xuICB9XG59XG4iLCAiZXhwb3J0IHR5cGUgRGljdGlvbmFyeSA9IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG5cbmV4cG9ydCBjbGFzcyBCdW5kbGUge1xuICAjZGljdGlvbmFyeTogTWFwPHN0cmluZywgc3RyaW5nPjtcblxuICBjb25zdHJ1Y3RvcihkaWN0aW9uYXJ5OiBEaWN0aW9uYXJ5ID0ge30pIHtcbiAgICB0aGlzLiNkaWN0aW9uYXJ5ID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhkaWN0aW9uYXJ5KSk7XG4gIH1cblxuICBnZXQoa2V5OiBzdHJpbmcsIGZhbGxiYWNrID0ga2V5KTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy4jZGljdGlvbmFyeS5nZXQoa2V5KSB8fCBmYWxsYmFjaztcbiAgfVxufVxuIiwgImZ1bmN0aW9uIHN0eWxlSW5qZWN0KGNzcywgcmVmKSB7XG4gIGlmICggcmVmID09PSB2b2lkIDAgKSByZWYgPSB7fTtcbiAgdmFyIGluc2VydEF0ID0gcmVmLmluc2VydEF0O1xuXG4gIGlmICghY3NzIHx8IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuOyB9XG5cbiAgdmFyIGhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuXG4gIGlmIChpbnNlcnRBdCA9PT0gJ3RvcCcpIHtcbiAgICBpZiAoaGVhZC5maXJzdENoaWxkKSB7XG4gICAgICBoZWFkLmluc2VydEJlZm9yZShzdHlsZSwgaGVhZC5maXJzdENoaWxkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgc3R5bGVJbmplY3Q7XG4iLCAiaW1wb3J0IHN0eWxlSW5qZWN0IGZyb20gJ3N0eWxlLWluamVjdCc7XG5pbXBvcnQgZ2xvYmFsQ29uZmlnIGZyb20gJy4vZ2xvYmFsQ29uZmlnJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0eWxlSW5qZWN0b3IoKSB7XG4gIGxldCBpc0luamVjdGVkID0gZmFsc2U7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGluamVjdChjc3MpIHtcbiAgICBpZiAoZ2xvYmFsQ29uZmlnLmluamVjdFN0eWxlcyAmJiAhaXNJbmplY3RlZCkge1xuICAgICAgc3R5bGVJbmplY3QoY3NzKTtcbiAgICAgIGlzSW5qZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxufSIsICJpbXBvcnQgeyBBcHBFdmVudHMgfSBmcm9tICcuL0FwcEV2ZW50cyc7XG5pbXBvcnQgeyBFbW9qaVBpY2tlciB9IGZyb20gJy4vdmlld3MvRW1vamlQaWNrZXInO1xuaW1wb3J0IHsgUGlja2VyT3B0aW9ucywgQ3VzdG9tRW1vamksIEVtb2ppUmVjb3JkIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBWaWV3RmFjdG9yeSB9IGZyb20gJy4vdmlld0ZhY3RvcnknO1xuZXhwb3J0IHsgTGF6eUxvYWRlciB9IGZyb20gJy4vTGF6eUxvYWRlcic7XG5pbXBvcnQgeyBEYXRhU3RvcmUgfSBmcm9tICcuL2RhdGEvRGF0YVN0b3JlJztcbmltcG9ydCB7IGluaXREYXRhYmFzZSB9IGZyb20gJy4vZGF0YS9lbW9qaURhdGEnO1xuaW1wb3J0IHsgQnVuZGxlIH0gZnJvbSAnLi9pMThuL2J1bmRsZSc7XG5pbXBvcnQgeyBnZXRPcHRpb25zIH0gZnJvbSAnLi9vcHRpb25zJztcbmltcG9ydCB7IGNyZWF0ZVN0eWxlSW5qZWN0b3IgfSBmcm9tICcuL2luamVjdFN0eWxlcyc7XG5cbmltcG9ydCBjc3MgZnJvbSAnLi9zdHlsZXMvaW5kZXguY3NzP2lubGluZSc7XG5cbmZ1bmN0aW9uIGluaXREYXRhKG9wdGlvbnM6IFBpY2tlck9wdGlvbnMpOiBQcm9taXNlPERhdGFTdG9yZT4ge1xuICByZXR1cm4gaW5pdERhdGFiYXNlKG9wdGlvbnMubG9jYWxlLCBvcHRpb25zLmRhdGFTdG9yZSwgb3B0aW9ucy5tZXNzYWdlcywgb3B0aW9ucy5lbW9qaURhdGEpO1xufVxuXG5sZXQgcGlja2VySW5kZXggPSAwO1xuXG5sZXQgZW1vamlEYXRhUHJvbWlzZTtcblxuZnVuY3Rpb24gZ2V0UGlja2VySWQoKSB7XG4gIHJldHVybiBgcGljbW8tJHtEYXRlLm5vdygpfS0ke3BpY2tlckluZGV4Kyt9YDtcbn1cblxuY29uc3Qgc3R5bGVJbmplY3QgPSBjcmVhdGVTdHlsZUluamVjdG9yKCk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBlbW9qaSBwaWNrZXIuXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBmb3IgdGhlIGVtb2ppIHBpY2tlci5cbiAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBwaWNrZXIgd2hlbiBpdCBpcyByZWFkeS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVBpY2tlcihvcHRpb25zOiBQYXJ0aWFsPFBpY2tlck9wdGlvbnM+KTogRW1vamlQaWNrZXIge1xuICBzdHlsZUluamVjdChjc3MpO1xuICBcbiAgY29uc3QgZmluYWxPcHRpb25zID0gZ2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgY29uc3QgY3VzdG9tRW1vamlzOiBFbW9qaVJlY29yZFtdID0gKGZpbmFsT3B0aW9ucz8uY3VzdG9tIHx8IFtdKS5tYXAoKGN1c3RvbTogQ3VzdG9tRW1vamkpID0+ICh7XG4gICAgLi4uY3VzdG9tLFxuICAgIGN1c3RvbTogdHJ1ZSxcbiAgICB0YWdzOiBbJ2N1c3RvbScsIC4uLihjdXN0b20udGFncyB8fCBbXSldXG4gIH0pKTtcblxuICBjb25zdCBldmVudHMgPSBuZXcgQXBwRXZlbnRzKCk7XG4gIGlmICghZW1vamlEYXRhUHJvbWlzZSkge1xuICAgIGVtb2ppRGF0YVByb21pc2UgPSBpbml0RGF0YShmaW5hbE9wdGlvbnMpO1xuICB9XG5cbiAgY29uc3QgaTE4biA9IG5ldyBCdW5kbGUoZmluYWxPcHRpb25zLmkxOG4pO1xuXG4gIGVtb2ppRGF0YVByb21pc2UudGhlbihlbW9qaURhdGEgPT4ge1xuICAgIGV2ZW50cy5lbWl0KCdkYXRhOnJlYWR5JywgZW1vamlEYXRhKTtcbiAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgIGV2ZW50cy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgfSk7XG5cbiAgY29uc3Qgdmlld0ZhY3RvcnkgPSBuZXcgVmlld0ZhY3Rvcnkoe1xuICAgIGV2ZW50cyxcbiAgICBpMThuLFxuICAgIGN1c3RvbUVtb2ppcyxcbiAgICByZW5kZXJlcjogZmluYWxPcHRpb25zLnJlbmRlcmVyLFxuICAgIG9wdGlvbnM6IGZpbmFsT3B0aW9ucyxcbiAgICBlbW9qaURhdGE6IGVtb2ppRGF0YVByb21pc2UsXG4gICAgcGlja2VySWQ6IGdldFBpY2tlcklkKClcbiAgfSk7XG5cbiAgY29uc3QgcGlja2VyID0gdmlld0ZhY3RvcnkuY3JlYXRlKEVtb2ppUGlja2VyKTtcbiAgcGlja2VyLnJlbmRlclN5bmMoKTtcbiAgcmV0dXJuIHBpY2tlcjtcbn0iLCAiZXhwb3J0IGRlZmF1bHQge1xuICAgICdjYXRlZ29yaWVzLmFjdGl2aXRpZXMnOiAnQWt0aXZpdMOkdGVuJyxcbiAgICAnY2F0ZWdvcmllcy5hbmltYWxzLW5hdHVyZSc6ICdUaWVyZSAmIE5hdHVyJyxcbiAgICAnY2F0ZWdvcmllcy5jdXN0b20nOiAnQmVudXR6ZXJkZWZpbmllcnQnLFxuICAgICdjYXRlZ29yaWVzLmZsYWdzJzogJ0ZsYWdnZW4nLFxuICAgICdjYXRlZ29yaWVzLmZvb2QtZHJpbmsnOiAnRXNzZW4gJiBUcmlua2VuJyxcbiAgICAnY2F0ZWdvcmllcy5vYmplY3RzJzogJ0dlZ2Vuc3TDpG5kZScsXG4gICAgJ2NhdGVnb3JpZXMucGVvcGxlLWJvZHknOiAnTWVuc2NoICYgS8O2cnBlcicsXG4gICAgJ2NhdGVnb3JpZXMucmVjZW50cyc6ICdadWxldHp0IGdlbnV0enQnLFxuICAgICdjYXRlZ29yaWVzLnNtaWxleXMtZW1vdGlvbic6ICdTbWlsZXlzICYgRW1vdGlvbmVuJyxcbiAgICAnY2F0ZWdvcmllcy5zeW1ib2xzJzogJ1N5bWJvbGUnLFxuICAgICdjYXRlZ29yaWVzLnRyYXZlbC1wbGFjZXMnOiAnUmVpc2VuICYgT3J0ZScsXG4gICAgJ2Vycm9yLmxvYWQnOiAnRW1vamlzIHd1cmRlbiBuaWNodCBnZWxhZGVuJyxcbiAgICAncmVjZW50cy5jbGVhcic6ICdadWxldHp0IGdlbnV0enRlIEVtb2ppcyBsw7ZzY2hlbicsXG4gICAgJ3JlY2VudHMubm9uZSc6ICdLZWluIEVtb2ppIGF1c2dld8OkaGx0LicsXG4gICAgJ3JldHJ5JzogJ0VybmV1dCB2ZXJzdWNoZW4nLFxuICAgICdzZWFyY2guY2xlYXInOiAnU3VjaGUgbMO2c2NoZW4nLFxuICAgICdzZWFyY2guZXJyb3InOiAnU3VjaGUgZXJmb2xnbG9zJyxcbiAgICAnc2VhcmNoLm5vdEZvdW5kJzogJ0tlaW4gRW1vamkgZ2VmdW5kZW4nLFxuICAgICdzZWFyY2gnOiAnRW1vamlzIGR1cmNoc3VjaGVuIC4uLidcbiAgfTtcbiAgIiwgImV4cG9ydCBkZWZhdWx0IHtcbiAgICAnY2F0ZWdvcmllcy5hY3Rpdml0aWVzJzogJ0FrdGl2aXRlZXRpdCcsXG4gICAgJ2NhdGVnb3JpZXMuYW5pbWFscy1uYXR1cmUnOiAnRWzDpGltZXQgJiBsdW9udG8nLFxuICAgICdjYXRlZ29yaWVzLmN1c3RvbSc6ICdNdWthdXRldHR1JyxcbiAgICAnY2F0ZWdvcmllcy5mbGFncyc6ICdMaXB1dCcsXG4gICAgJ2NhdGVnb3JpZXMuZm9vZC1kcmluayc6ICdSdW9rYSAmIGp1b21hJyxcbiAgICAnY2F0ZWdvcmllcy5vYmplY3RzJzogJ0VzaW5lZXQnLFxuICAgICdjYXRlZ29yaWVzLnBlb3BsZS1ib2R5JzogJ0lobWlzZXQgJiBrZWhvJyxcbiAgICAnY2F0ZWdvcmllcy5yZWNlbnRzJzogJ1ZpaW1la3NpIGvDpHl0ZXR0eScsXG4gICAgJ2NhdGVnb3JpZXMuc21pbGV5cy1lbW90aW9uJzogJ0h5bWnDtnQgJiB0dW5uZScsXG4gICAgJ2NhdGVnb3JpZXMuc3ltYm9scyc6ICdTeW1ib2xpdCcsXG4gICAgJ2NhdGVnb3JpZXMudHJhdmVsLXBsYWNlcyc6ICdNYXRrdXN0dXMgJiBwYWlrYXQnLFxuICAgICdlcnJvci5sb2FkJzogJ0Vtb2ppZW4gbGF0YWFtaW5lbiBlcMOkb25uaXN0dWknLFxuICAgICdyZWNlbnRzLmNsZWFyJzogJ1R5aGplbm7DpCB2aWltZWtzaSBrw6R5dGV0eXQgZW1vaml0JyxcbiAgICAncmVjZW50cy5ub25lJzogJ0V0IG9sZSB2YWxpbm51dCB2aWVsw6QgZW1vamlhLicsXG4gICAgJ3JldHJ5JzogJ0tva2VpbGUgdXVkZXN0YWFuJyxcbiAgICAnc2VhcmNoLmNsZWFyJzogJ1R5aGplbm7DpCBoYWt1JyxcbiAgICAnc2VhcmNoLmVycm9yJzogJ0Vtb2ppZW4gZXRzaW1pbmVuIGVww6Rvbm5pc3R1aScsXG4gICAgJ3NlYXJjaC5ub3RGb3VuZCc6ICdFbW9qaWEgZWkgbMO2eXR5bnl0JyxcbiAgICAnc2VhcmNoJzogJ0V0c2kgZW1vamlhLi4uJ1xuICB9O1xuICAiLCAiZXhwb3J0IGRlZmF1bHQge1xuICAgICdjYXRlZ29yaWVzLmFjdGl2aXRpZXMnOiAnQWN0aXZpdMOpcycsXG4gICAgJ2NhdGVnb3JpZXMuYW5pbWFscy1uYXR1cmUnOiAnQW5pbWF1eCBldCBuYXR1cmUnLFxuICAgICdjYXRlZ29yaWVzLmN1c3RvbSc6ICdQZXJzb25uYWxpc8OpJyxcbiAgICAnY2F0ZWdvcmllcy5mbGFncyc6ICdEcmFwZWF1eCcsXG4gICAgJ2NhdGVnb3JpZXMuZm9vZC1kcmluayc6ICdOb3Vycml0dXJlIGV0IGJvaXNzb25zJyxcbiAgICAnY2F0ZWdvcmllcy5vYmplY3RzJzogJ09iamV0cycsXG4gICAgJ2NhdGVnb3JpZXMucGVvcGxlLWJvZHknOiAnUGVyc29ubmVzIGV0IGNvcnBzJyxcbiAgICAnY2F0ZWdvcmllcy5yZWNlbnRzJzogJ1LDqWNlbW1lbnQgdXRpbGlzw6knLFxuICAgICdjYXRlZ29yaWVzLnNtaWxleXMtZW1vdGlvbic6ICdWaXNhZ2VzIGV0IMOpbW90aW9ucycsXG4gICAgJ2NhdGVnb3JpZXMuc3ltYm9scyc6ICdTeW1ib2xlcycsXG4gICAgJ2NhdGVnb3JpZXMudHJhdmVsLXBsYWNlcyc6ICdWb3lhZ2VzIGV0IGxpZXV4JyxcbiAgICAnZXJyb3IubG9hZCc6ICfDiWNoZWMgZHUgY2hhcmdlbWVudCBkZXMgw6ltb2ppcycsXG4gICAgJ3JlY2VudHMuY2xlYXInOiAnRWZmYWNleiBsZXMgw6ltb2ppcyByw6ljZW50cycsXG4gICAgJ3JlY2VudHMubm9uZSc6ICdWb3VzIG5cXCdhdmV6IHBhcyBlbmNvcmUgc8OpbGVjdGlvbm7DqSBkXFwnw6ltb2ppcy4nLFxuICAgICdyZXRyeSc6ICdFc3NheWV6IMOgIG5vdXZlYXUnLFxuICAgICdzZWFyY2guY2xlYXInOiAnRWZmYWNlciBsYSByZWNoZXJjaGUnLFxuICAgICdzZWFyY2guZXJyb3InOiAnw4ljaGVjIGRlIGxhIHJlY2hlcmNoZSBkXFwnw6ltb2ppcycsXG4gICAgJ3NlYXJjaC5ub3RGb3VuZCc6ICdBdWN1biDDqW1vamkgdHJvdXbDqScsXG4gICAgJ3NlYXJjaCc6ICdSZWNoZXJjaGVyIGRlcyDDqW1vamlzLi4uJ1xuICB9O1xuICAiLCAiZXhwb3J0IGRlZmF1bHQge1xuICAgICdjYXRlZ29yaWVzLmFjdGl2aXRpZXMnOiAnQWN0aXZpdGVpdGVuJyxcbiAgICAnY2F0ZWdvcmllcy5hbmltYWxzLW5hdHVyZSc6ICdEaWVyZW4gJiBOYXR1dXInLFxuICAgICdjYXRlZ29yaWVzLmN1c3RvbSc6ICdBYW5nZXBhc3QnLFxuICAgICdjYXRlZ29yaWVzLmZsYWdzJzogJ1ZsYWdnZW4nLFxuICAgICdjYXRlZ29yaWVzLmZvb2QtZHJpbmsnOiAnRXRlbiAmIERyaW5rZW4nLFxuICAgICdjYXRlZ29yaWVzLm9iamVjdHMnOiAnVm9vcndlcnBlbicsXG4gICAgJ2NhdGVnb3JpZXMucGVvcGxlLWJvZHknOiAnTWVucyAmIExpY2hhYW0nLFxuICAgICdjYXRlZ29yaWVzLnJlY2VudHMnOiAnTGFhdHN0IGdlYnJ1aWt0JyxcbiAgICAnY2F0ZWdvcmllcy5zbWlsZXlzLWVtb3Rpb24nOiAnU21pbGV5cyBlbiBlbW90aWVzJyxcbiAgICAnY2F0ZWdvcmllcy5zeW1ib2xzJzogJ1N5bWJvbGVuJyxcbiAgICAnY2F0ZWdvcmllcy50cmF2ZWwtcGxhY2VzJzogJ1JlaXplbiAmIFBsYWF0c2VuJyxcbiAgICAnZXJyb3IubG9hZCc6ICdLYW4gZW1vamlcXCdzIG5pZXQgbGFkZW4nLFxuICAgICdyZWNlbnRzLmNsZWFyJzogJ1dpcyByZWNlbnRlIGVtb2ppXFwncycsXG4gICAgJ3JlY2VudHMubm9uZSc6ICdHZWVuIGVtb2ppIGdlc2VsZWN0ZWVyZC4nLFxuICAgICdyZXRyeSc6ICdQcm9iZWVyIGhldCBub2cgZWVucycsXG4gICAgJ3NlYXJjaC5jbGVhcic6ICdab2Vrb3BkcmFjaHQgd2lzc2VuJyxcbiAgICAnc2VhcmNoLmVycm9yJzogJ1pvZWtlbiBtaXNsdWt0JyxcbiAgICAnc2VhcmNoLm5vdEZvdW5kJzogJ0dlZW4gZW1vamkgZ2V2b25kZW4nLFxuICAgICdzZWFyY2gnOiAnWm9layBlbW9qaS4uLidcbiAgfTtcbiAgIiwgImV4cG9ydCBkZWZhdWx0IHtcbiAgICAnY2F0ZWdvcmllcy5hY3Rpdml0aWVzJzogJ0FrdGl2aXRldGVyJyxcbiAgICAnY2F0ZWdvcmllcy5hbmltYWxzLW5hdHVyZSc6ICdEeXIgJiBuYXR1cicsXG4gICAgJ2NhdGVnb3JpZXMuY3VzdG9tJzogJ1RpbHBhc3NldCcsXG4gICAgJ2NhdGVnb3JpZXMuZmxhZ3MnOiAnRmxhZ2cnLFxuICAgICdjYXRlZ29yaWVzLmZvb2QtZHJpbmsnOiAnTWF0ICYgZHJpa2tlJyxcbiAgICAnY2F0ZWdvcmllcy5vYmplY3RzJzogJ09iamVrdGVyJyxcbiAgICAnY2F0ZWdvcmllcy5wZW9wbGUtYm9keSc6ICdNZW5uZXNrZXIgJiBrcm9wcCcsXG4gICAgJ2NhdGVnb3JpZXMucmVjZW50cyc6ICdOeWxpZyBicnVrdGUnLFxuICAgICdjYXRlZ29yaWVzLnNtaWxleXMtZW1vdGlvbic6ICdTbWlsZWZqZXMgJiBmw7hsZWxzZXInLFxuICAgICdjYXRlZ29yaWVzLnN5bWJvbHMnOiAnU3ltYm9sZXInLFxuICAgICdjYXRlZ29yaWVzLnRyYXZlbC1wbGFjZXMnOiAnUmVpc2UgJiBzdGVkZXInLFxuICAgICdlcnJvci5sb2FkJzogJ0tsYXJ0ZSBpa2tlIGxhc3RlIGlubiBlbW9qaXMnLFxuICAgICdyZWNlbnRzLmNsZWFyJzogJ0ZqZXJuIG55bGlnZSBlbW9qaXMnLFxuICAgICdyZWNlbnRzLm5vbmUnOiAnRHUgaGFyIGlra2UgdmFsZ3Qgbm9lbiBlbW9qaXMgZW5kYS4nLFxuICAgICdyZXRyeSc6ICdQcsO4diBpZ2plbicsXG4gICAgJ3NlYXJjaC5jbGVhcic6ICdUw7htIHPDuGsnLFxuICAgICdzZWFyY2guZXJyb3InOiAnS2xhcnRlIGlra2Ugw6Ugc8O4a2UgZXR0ZXIgZW1vamlzJyxcbiAgICAnc2VhcmNoLm5vdEZvdW5kJzogJ0luZ2VuIGVtb2ppcyBmdW5uZXQnLFxuICAgICdzZWFyY2gnOiAnU8O4ayBldHRlciBlbW9qaXMuLi4nXG4gIH07XG4gICIsICJleHBvcnQgZGVmYXVsdCB7XG4gICAgJ2NhdGVnb3JpZXMuYWN0aXZpdGllcyc6ICdBa3Rpdml0ZXRlcicsXG4gICAgJ2NhdGVnb3JpZXMuYW5pbWFscy1uYXR1cmUnOiAnRGp1ciAmIG5hdHVyJyxcbiAgICAnY2F0ZWdvcmllcy5jdXN0b20nOiAnQW5wYXNzYWQnLFxuICAgICdjYXRlZ29yaWVzLmZsYWdzJzogJ0ZsYWdnYScsXG4gICAgJ2NhdGVnb3JpZXMuZm9vZC1kcmluayc6ICdNYXQgJiBkcnljaycsXG4gICAgJ2NhdGVnb3JpZXMub2JqZWN0cyc6ICdPYmpla3QnLFxuICAgICdjYXRlZ29yaWVzLnBlb3BsZS1ib2R5JzogJ03DpG5uaXNrb3IgJiBrcm9wcCcsXG4gICAgJ2NhdGVnb3JpZXMucmVjZW50cyc6ICdOeWxpZ2VuIGFudsOkbmQnLFxuICAgICdjYXRlZ29yaWVzLnNtaWxleXMtZW1vdGlvbic6ICdIdW3DtnIgJiBrw6Ruc2xvcicsXG4gICAgJ2NhdGVnb3JpZXMuc3ltYm9scyc6ICdTeW1ib2xlcicsXG4gICAgJ2NhdGVnb3JpZXMudHJhdmVsLXBsYWNlcyc6ICdSZXNvciAmIHBsYXRzZXInLFxuICAgICdlcnJvci5sb2FkJzogJ0RldCBnaWNrIGludGUgYXR0IGxhZGRhIGVtb2ppcycsXG4gICAgJ3JlY2VudHMuY2xlYXInOiAnVGEgYm9ydCBkZSBzZW5hc3RlIGVtb2ppcycsXG4gICAgJ3JlY2VudHMubm9uZSc6ICdEdSBoYXIgaW50ZSB2YWx0IG7DpWdyYSBlbW9qaXMgw6RuJyxcbiAgICAncmV0cnknOiAnRsO2cnPDtmsgaWdlbicsXG4gICAgJ3NlYXJjaC5jbGVhcic6ICdUb20gc8O2a25pbmcnLFxuICAgICdzZWFyY2guZXJyb3InOiAnRGV0IGdpY2sgaW50ZSBhdHQgc8O2a2EgZWZ0ZXIgZW1vamlzJyxcbiAgICAnc2VhcmNoLm5vdEZvdW5kJzogJ0luZ2EgZW1vamlzIGhpdHRhZGVzJyxcbiAgICAnc2VhcmNoJzogJ1PDtmsgZWZ0ZXIgZW1vamlzLi4uJ1xuICB9O1xuICAiLCAiaW1wb3J0IHsgaXNTZXNzaW9uU3RvcmFnZUF2YWlsYWJsZSB9IGZyb20gJy4uL3V0aWwnO1xuaW1wb3J0IHsgY3JlYXRlU3RvcmFnZSB9IGZyb20gJy4uL3dlYlN0b3JhZ2VTaGltJztcbmltcG9ydCB7IFdlYlN0b3JhZ2VQcm92aWRlciB9IGZyb20gJy4vV2ViU3RvcmFnZVByb3ZpZGVyJztcblxuZXhwb3J0IGNsYXNzIFNlc3Npb25TdG9yYWdlUHJvdmlkZXIgZXh0ZW5kcyBXZWJTdG9yYWdlUHJvdmlkZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihpc1Nlc3Npb25TdG9yYWdlQXZhaWxhYmxlKCkgPyBzZXNzaW9uU3RvcmFnZSA6IGNyZWF0ZVN0b3JhZ2UoKSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBFbW9qaVJlY29yZCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFJlY2VudHNQcm92aWRlciB9IGZyb20gJy4vUmVjZW50c1Byb3ZpZGVyJztcblxuZXhwb3J0IGNsYXNzIEluTWVtb3J5UHJvdmlkZXIgZXh0ZW5kcyBSZWNlbnRzUHJvdmlkZXIge1xuICByZWNlbnRzID0gW10gYXMgQXJyYXk8RW1vamlSZWNvcmQ+O1xuXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMucmVjZW50cyA9IFtdO1xuICB9XG5cbiAgZ2V0UmVjZW50cyhtYXhDb3VudDogbnVtYmVyKTogQXJyYXk8RW1vamlSZWNvcmQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZWNlbnRzLnNsaWNlKDAsIG1heENvdW50KTtcbiAgfVxuXG4gIGFkZE9yVXBkYXRlUmVjZW50KGVtb2ppOiBFbW9qaVJlY29yZCwgbWF4Q291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMucmVjZW50cyA9IFtcbiAgICAgIGVtb2ppLFxuICAgICAgLi4udGhpcy5nZXRSZWNlbnRzKG1heENvdW50KS5maWx0ZXIocmVjZW50ID0+IHJlY2VudC5oZXhjb2RlICE9PSBlbW9qaS5oZXhjb2RlKVxuICAgIF0uc2xpY2UoMCwgbWF4Q291bnQpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgTG9jYWxlLCBNZXNzYWdlc0RhdGFzZXQsIEVtb2ppIH0gZnJvbSAnZW1vamliYXNlJztcbmltcG9ydCB7IGluaXREYXRhYmFzZSBhcyBpbml0RGF0YWJhc2VJbnRlcm5hbCB9IGZyb20gJy4vZGF0YS9lbW9qaURhdGEnO1xuXG5leHBvcnQgKiBmcm9tICcuL3V0aWwnO1xuZXhwb3J0ICogZnJvbSAnLi9mb2N1c1RyYXAnO1xuZXhwb3J0ICogZnJvbSAnLi9vcHRpb25zJztcbmV4cG9ydCAqIGZyb20gJy4vZXZlbnRzJztcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0ICogZnJvbSAnLi90aGVtZXMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBnbG9iYWxDb25maWcgfSBmcm9tICcuL2dsb2JhbENvbmZpZyc7XG5leHBvcnQgeyBjcmVhdGVQaWNrZXIgfSBmcm9tICcuL2NyZWF0ZVBpY2tlcic7XG5leHBvcnQgeyBFbW9qaVBpY2tlciB9IGZyb20gJy4vdmlld3MvRW1vamlQaWNrZXInO1xuZXhwb3J0IHR5cGUgeyBFeHRlcm5hbEV2ZW50LCBFeHRlcm5hbEV2ZW50S2V5IH0gZnJvbSAnLi9FeHRlcm5hbEV2ZW50cyc7XG5cbmV4cG9ydCB7IFJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlcnMvcmVuZGVyZXInO1xuZXhwb3J0IHsgTmF0aXZlUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVycy9uYXRpdmUnO1xuXG5pbXBvcnQgKiBhcyBpMThuIGZyb20gJy4vaTE4bic7XG5leHBvcnQgeyBpMThuIH07XG5cbmV4cG9ydCB7IGRlZmF1bHQgYXMgZW4gfSBmcm9tICcuL2kxOG4vbGFuZy1lbic7XG5leHBvcnQgeyBkZWxldGVEYXRhYmFzZSB9IGZyb20gJy4vZGF0YS9lbW9qaURhdGEnO1xuaW1wb3J0IHsgRGF0YVN0b3JlRmFjdG9yeSB9IGZyb20gJy4vZGF0YS9EYXRhU3RvcmUnO1xuZXhwb3J0IHsgY3JlYXRlU3R5bGVJbmplY3RvciB9IGZyb20gJy4vaW5qZWN0U3R5bGVzJztcbmV4cG9ydCB7IEluZGV4ZWREYlN0b3JlRmFjdG9yeSB9IGZyb20gJy4vZGF0YS9JbmRleGVkRGJTdG9yZSc7XG5leHBvcnQgeyBJbk1lbW9yeVN0b3JlRmFjdG9yeSB9IGZyb20gJy4vZGF0YS9Jbk1lbW9yeVN0b3JlJztcblxuZXhwb3J0ICogZnJvbSAnLi9yZWNlbnRzL2luZGV4JztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURhdGFiYXNlKGxvY2FsZTogTG9jYWxlLCBmYWN0b3J5OiBEYXRhU3RvcmVGYWN0b3J5LCBzdGF0aWNNZXNzYWdlcz86IE1lc3NhZ2VzRGF0YXNldCwgc3RhdGljRW1vamlzPzogRW1vamlbXSk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBkYXRhYmFzZSA9IGF3YWl0IGluaXREYXRhYmFzZUludGVybmFsKGxvY2FsZSwgZmFjdG9yeSwgc3RhdGljTWVzc2FnZXMsIHN0YXRpY0Vtb2ppcyk7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LEtBQUssQ0FBQztBQUd2RSxhQUFXLFFBQVE7QUFNbkIsU0FBTyxhQUFhO0FBRXBCLE1BQUksU0FBUyxlQUFlLFdBQVcsR0FBRztBQUN0QyxRQUFJLE1BQU07QUFDVixhQUFTLGVBQWUsV0FBVyxFQUFFLFdBQVcsU0FBUyxPQUFPO0FBQzVELFlBQU0sZUFBZTtBQUNyQixVQUFJLFdBQVcsSUFBSSxTQUFTO0FBQzVCLGVBQVMsT0FBTyxVQUFVLFNBQVMsZUFBZSxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFFcEUsVUFBSSxNQUFNLElBQUksZUFBZTtBQUM3QixVQUFJLEtBQUssUUFBUSxNQUFNLFVBQVUsSUFBSTtBQUNyQyxVQUFJLHFCQUFxQixXQUFXO0FBQ2hDLFlBQUksSUFBSSxlQUFlLGVBQWUsUUFBUSxJQUFJLFdBQVcsS0FBSztBQUM5RCxrQkFBUSxJQUFJLDhCQUE4QjtBQUMxQyxjQUFJLFVBQVUsSUFBSTtBQUNsQixrQkFBUSxJQUFJLG9DQUFvQyxPQUFPO0FBQ3ZELGNBQUksU0FBUyxlQUFlLGVBQWUsR0FBRztBQUMxQyxxQkFBUyxlQUFlLGVBQWUsRUFBRSxRQUFRO0FBQUEsVUFDckQ7QUFDQSxjQUFJLFNBQVMsZUFBZSxlQUFlLEdBQUc7QUFDMUMscUJBQVMsZUFBZSxlQUFlLEVBQUUsUUFBUTtBQUFBLFVBQ3JEO0FBQ0EsY0FBSSxRQUFRLFNBQVMsY0FBYyxLQUFLO0FBQ3hDLGdCQUFNLGFBQWEsT0FBTyxNQUFNLG1CQUFtQixPQUFPO0FBQzFELG1CQUFTLGVBQWUsYUFBYSxFQUFFLFlBQVksS0FBSztBQUFBLFFBQzVEO0FBQUEsTUFDSjtBQUNBLFVBQUksS0FBSyxRQUFRO0FBQUEsSUFDckI7QUFBQSxFQUNKOyIsCiAgIm5hbWVzIjogWyJ3aW5kb3ciLCAiZG9jdW1lbnQiLCAieCIsICJ0b3BiYXIiLCAiQ3VzdG9tRXZlbnQiLCAiY2xvc3VyZTIiLCAiX2UiLCAiYyIsICJsaXZlU29ja2V0IiwgImNsb3N1cmUiLCAieCIsICJsb2NhbFN0b3JhZ2UiLCAiZiIsICJfIiwgIl9lIiwgImF0IiwgIkxBVEVTVF9FTU9KSV9WRVJTSU9OIiwgImdldEZldGNoVXJsIiwgInBhdGgiLCAidmVyc2lvbiIsICJjZG5VcmwiLCAiZmV0Y2hVcmwiLCAiZmV0Y2hGcm9tQ0ROIiwgIm9wdGlvbnMiLCAibG9jYWwiLCAib3B0cyIsICJzdG9yYWdlIiwgImNhY2hlS2V5IiwgImNhY2hlZERhdGEiLCAicmVzcG9uc2UiLCAiZGF0YSIsICJlIiwgIkFMSUFTRVMiLCAiZmV0Y2hTaG9ydGNvZGVzIiwgImxvY2FsZSIsICJwcmVzZXQiLCAiX0FMSUFTRVMkcHJlc2V0IiwgImpvaW5TaG9ydGNvZGVzVG9FbW9qaSIsICJlbW9qaSIsICJzaG9ydGNvZGVEYXRhc2V0cyIsICJsaXN0IiwgImRhdGFzZXQiLCAic2hvcnRjb2RlcyIsICJjb2RlIiwgInNraW4iLCAiZmxhdHRlbkVtb2ppRGF0YSIsICJlbW9qaXMiLCAic2tpbnMiLCAiYmFzZUVtb2ppIiwgInNraW5FbW9qaSIsICJqb2luU2hvcnRjb2RlcyIsICJmZXRjaEVtb2ppcyIsICJjb21wYWN0IiwgImZsYXQiLCAicHJlc2V0cyIsICJwcm9taXNlIiwgImN1c3RvbUxvY2FsZSIsICJjdXN0b21QcmVzZXQiLCAiZmV0Y2hNZXNzYWdlcyIsICJnZXRFbW9qaUZvckV2ZW50IiwgImV2ZW50IiwgImVtb2ppRWxlbWVudCIsICJzaG91bGRBbmltYXRlIiwgIl9hIiwgIm1hdGNoZXIiLCAiY2FzZUluc2Vuc2l0aXZlSW5jbHVkZXMiLCAic3RyIiwgInNlYXJjaCIsICJ0aHJvdHRsZSIsICJmbiIsICJ3YWl0IiwgInRpbWVvdXQiLCAiZGVib3VuY2UiLCAiYXJncyIsICJhbmltYXRlIiwgImVsZW1lbnQiLCAia2V5ZnJhbWVzIiwgInBpY2tlck9wdGlvbnMiLCAicHJvcGVydHlJbmRleCIsICJmaW5hbFN0YXRlIiwgInJlc3VsdCIsICJrZXkiLCAidmFsdWVzIiwgInRvRWxlbWVudCIsICJodG1sIiwgInRlbXBsYXRlIiwgImNvbXB1dGVIYXNoIiwgIm9iaiIsICJhcnIiLCAiaGFzaEJ1ZmZlciIsICJiIiwgImdldFByZWZpeGVkQ2xhc3NlcyIsICJjbGFzc05hbWVzIiwgImNsYXNzTmFtZSIsICJwcmVmaXhDbGFzc05hbWUiLCAiZW1wdHkiLCAicmVwbGFjZUNoaWxkcmVuIiwgInBhcmVudCIsICJjaGlsZHJlbiIsICJpc1N0b3JhZ2VBdmFpbGFibGUiLCAiaXNTZXNzaW9uU3RvcmFnZUF2YWlsYWJsZSIsICJpc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSIsICJnZXRFbW9qaVJlY29yZCIsICJxdWVyeU1hdGNoZXMiLCAicXVlcnkiLCAiY2F0ZWdvcmllcyIsICJjYXRlZ29yeSIsICJ0YWciLCAiRGF0YVN0b3JlIiwgInJ1bGVzIiwgImVtb2ppVmVyc2lvbiIsICJhcHBseVJ1bGVzVG9FbW9qaSIsICJydWxlIiwgImFwcGx5UnVsZXMiLCAiaW5zdGFuY2VzIiwgIkluTWVtb3J5U3RvcmVGYWN0b3J5IiwgIkluTWVtb3J5U3RvcmUiLCAiaW5jbHVkZUxpc3QiLCAiYSIsICJlbW9qaVJlc3VsdHMiLCAiY3VzdG9tRW1vamlzIiwgIm1hdGNoaW5nRW1vamlzIiwgIm1hdGNoaW5nQ3VzdG9tIiwgInJlc3VsdHMiLCAibWV0YSIsICJnZXRDZG5VcmxzIiwgImJhc2UiLCAiZ2V0RXRhZyIsICJ1cmwiLCAiZ2V0RXRhZ3MiLCAiZW1vamlzVXJsIiwgIm1lc3NhZ2VzVXJsIiwgImNoZWNrVXBkYXRlcyIsICJkYiIsICJlbW9qaXNFdGFnIiwgIm1lc3NhZ2VzRXRhZyIsICJldGFncyIsICJzdG9yZWRFbW9qaXNFdGFnIiwgInN0b3JlZE1lc3NhZ2VzRXRhZyIsICJtZXNzYWdlcyIsICJjaGVja0xvY2FsVXBkYXRlcyIsICJoYXNoIiwgInN0b3JlZEhhc2giLCAib3BlbkRhdGFiYXNlIiwgImZhY3RvcnkiLCAiZXhpc3RpbmdEYiIsICJpbml0RGF0YWJhc2VGcm9tQ2RuIiwgImluaXREYXRhYmFzZVdpdGhMb2NhbERhdGEiLCAiaW5pdERhdGFiYXNlIiwgInN0YXRpY01lc3NhZ2VzIiwgInN0YXRpY0Vtb2ppcyIsICJGb2N1c1RyYXAiLCAicm9vdEVsZW1lbnQiLCAiX2EiLCAiZXZlbnQiLCAicmVmZXJlbmNlRWxlbWVudCIsICJ0YXJnZXRFbGVtZW50IiwgImxpZ2h0VGhlbWUiLCAiZGFya1RoZW1lIiwgImF1dG9UaGVtZSIsICJnZXRQcmVmaXhlZENsYXNzZXMiLCAiVmlldyIsICJ0ZW1wbGF0ZSIsICJjbGFzc2VzIiwgInBhcmVudCIsICJjdXN0b21FbW9qaXMiLCAiZXZlbnRzIiwgInBpY2tlcklkIiwgImFyZ3MiLCAiaTE4biIsICJyZW5kZXJlciIsICJlbW9qaURhdGFQcm9taXNlIiwgImVtb2ppRGF0YSIsICJvcHRpb25zIiwgInRlbXBsYXRlRGF0YSIsICJoYW5kbGVyIiwgInJlc3VsdCIsICJrZXkiLCAiYmluZGluZyIsICJvYnNlcnZlciIsICJsaXN0IiwgInJlY29yZCIsICJzaG91bGRBbmltYXRlIiwgInRhcmdldCIsICJjbGFzc05hbWUiLCAiY2xvY2siLCAiZmxhZyIsICJmcm93biIsICJnYW1lcGFkIiwgImxpZ2h0YnVsYiIsICJtdWciLCAicGxhbmUiLCAicm9ib3QiLCAic2FkIiwgInNlYXJjaCIsICJzbWlsZXkiLCAic3ltYm9scyIsICJ0cmVlIiwgInVzZXJzIiwgIndhcm5pbmciLCAieG1hcmsiLCAiY3JlYXRlSWNvbiIsICJpY29uTmFtZSIsICJzdmciLCAiZWwiLCAidG9FbGVtZW50IiwgInByZWZpeENsYXNzTmFtZSIsICJpY29ucyIsICJjYXRlZ29yeUljb25zIiwgImljb24iLCAibmFtZSIsICJzaXplIiwgImRlZmF1bHRPcHRpb25zIiwgIl90ZW1wbGF0ZUZuIiwgIl9tb2RlIiwgIl9yZW5kZXJDaGlsZFZpZXdzIiwgInJlbmRlckNoaWxkVmlld3NfZm4iLCAiX2JpbmRJY29ucyIsICJiaW5kSWNvbnNfZm4iLCAiX2JpbmRQbGFjZWhvbGRlcnMiLCAiYmluZFBsYWNlaG9sZGVyc19mbiIsICJUZW1wbGF0ZSIsICJ0ZW1wbGF0ZUZuIiwgIl9fcHJpdmF0ZUFkZCIsICJfX3ByaXZhdGVTZXQiLCAiZGF0YSIsICJfX3ByaXZhdGVHZXQiLCAiX19wcml2YXRlTWV0aG9kIiwgInBsYWNlaG9sZGVycyIsICJhc3luY1ZpZXdzIiwgInBsYWNlaG9sZGVyIiwgInZpZXciLCAiaWNvbktleSIsICJyZXBsYWNlbWVudCIsICJJbWFnZSIsICJjbGFzc05hbWVzIiwgInNyYyIsICJpbWciLCAiUmVuZGVyZXIiLCAiY29udGVudCIsICJ1cmxSZXNvbHZlciIsICJpbWFnZSIsICJlbW9qaSIsICJsYXp5TG9hZGVyIiwgInJlc29sdmVyIiwgImNvbnRlbnRFbGVtZW50IiwgInVybCIsICJsYWJlbCIsICJhZGRpdGlvbmFsQ2xhc3NlcyIsICJOYXRpdmVSZW5kZXJlciIsICJoZXhjb2RlIiwgImVuIiwgIkRBVEFCQVNFX05BTUUiLCAiSW5kZXhlZERiU3RvcmVGYWN0b3J5IiwgImxvY2FsZSIsICJJbmRleGVkRGJTdG9yZSIsICJyZXNvbHZlIiwgInJlamVjdCIsICJyZXF1ZXN0IiwgIkRhdGFTdG9yZSIsICJlbW9qaVN0b3JlIiwgInN0b3JlIiwgImVtb2ppc0V0YWciLCAibWVzc2FnZXNFdGFnIiwgIm1ldGEiLCAidHJhbnNhY3Rpb24iLCAicHJvcGVydHkiLCAiZ3JvdXBzIiwgImVtb2ppcyIsICJoYXNoIiwgInRhc2tzIiwgImNhdGVnb3J5U3RvcmUiLCAiY2F0ZWdvcmllcyIsICJjYXRlZ29yeSIsICJpbmNsdWRlTGlzdCIsICJhIiwgImIiLCAiZW1vamlWZXJzaW9uIiwgImdyb3Vwc0luZGV4IiwgInJlY29yZHMiLCAiZSIsICJnZXRFbW9qaVJlY29yZCIsICJhcHBseVJ1bGVzIiwgInF1ZXJ5IiwgInJlc3VsdHMiLCAiY3Vyc29yIiwgInF1ZXJ5TWF0Y2hlcyIsICJlcnJvciIsICJzdG9yZU5hbWUiLCAibW9kZSIsICJjYWxsYmFjayIsICJzdG9yZU5hbWVzIiwgInN0b3JlcyIsICJvYmplY3RzIiwgIm9iamVjdCIsICJjcmVhdGVTdG9yYWdlIiwgInZhbHVlIiwgImluZGV4IiwgIlJlY2VudHNQcm92aWRlciIsICJTVE9SQUdFX0tFWSIsICJXZWJTdG9yYWdlUHJvdmlkZXIiLCAic3RvcmFnZSIsICJtYXhDb3VudCIsICJyZWNlbnRzIiwgInJlY2VudCIsICJMb2NhbFN0b3JhZ2VQcm92aWRlciIsICJpc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSIsICJnZXRPcHRpb25zIiwgIl9ldmVudHMiLCAiX2dldEJpbmRpbmdzIiwgImdldEJpbmRpbmdzX2ZuIiwgIl9hZGRMaXN0ZW5lciIsICJhZGRMaXN0ZW5lcl9mbiIsICJFdmVudHMiLCAiY29udGV4dCIsICJiaW5kaW5ncyIsICJoIiwgIm9uY2UiLCAiZ2xvYmFsQ29uZmlnIiwgIkFwcEV2ZW50cyIsICJFeHRlcm5hbEV2ZW50cyIsICJCYXNlRW1vamlDYXRlZ29yeSIsICJzaG93VmFyaWFudHMiLCAiYWN0aXZlIiwgImZvY3VzVGFyZ2V0IiwgInBlcmZvcm1Gb2N1cyIsICJ0ZW1wbGF0ZSRiIiwgIkVtb2ppIiwgIkZvY3VzR3JpZCIsICJjb2x1bW5Db3VudCIsICJlbW9qaUNvdW50IiwgImluaXRpYWxSb3ciLCAiaW5pdGlhbENvbHVtbiIsICJ3cmFwIiwgInJvdyIsICJjb2x1bW4iLCAicHJldmlvdXNJbmRleCIsICJ0ZW1wbGF0ZSRhIiwgIkVtb2ppQ29udGFpbmVyIiwgInByZXZpZXciLCAiZnVsbEhlaWdodCIsICJfYiIsICJfYyIsICJfZCIsICJ0YXJnZXRWaWV3IiwgImhlYWRlciIsICJlbW9qaUFyZWEiLCAiZnJvbSIsICJ0byIsICJnZXRFbW9qaUZvckV2ZW50IiwgImJ1dHRvbiIsICJ0ZW1wbGF0ZSQ5IiwgIkVtb2ppQ2F0ZWdvcnkiLCAiUmVjZW50RW1vamlDb250YWluZXIiLCAiZXhpc3RpbmciLCAibmV3VmlldyIsICJFbW9qaVZpZXciLCAiZXhjZXNzIiwgImkiLCAidGVtcGxhdGUkOCIsICJSZWNlbnRFbW9qaUNhdGVnb3J5IiwgInByb3ZpZGVyIiwgInRlbXBsYXRlJDciLCAiQ3VzdG9tRW1vamlDYXRlZ29yeSIsICJMYXp5TG9hZGVyIiwgInJvb3QiLCAiZW50cmllcyIsICJlbnRyeSIsICJlbGVtZW50IiwgImNhdGVnb3J5Q2xhc3NlcyIsICJnZXRDYXRlZ29yeUNsYXNzIiwgImdldEZvY3VzVGFyZ2V0IiwgImZvY3VzIiwgIkVtb2ppQXJlYSIsICJjYXRlZ29yeVRhYnMiLCAidGhyb3R0bGUiLCAiY2F0ZWdvcnlFbW9qaUVsZW1lbnRzIiwgIkNhdGVnb3J5IiwgImMiLCAiY2F0ZWdvcnlWaWV3IiwgInNjcm9sbCIsICJjYXRlZ29yeUluZGV4IiwgInRhcmdldFBvc2l0aW9uIiwgImN1cnJlbnRQb3NpdGlvbiIsICJtYXhTY3JvbGwiLCAidGFyZ2V0Q2F0ZWdvcnkiLCAiZXJyb3JUZW1wbGF0ZSIsICJjbGFzc0xpc3QiLCAibWVzc2FnZSIsICJFcnJvck1lc3NhZ2UiLCAidGVtcGxhdGUkNSIsICJEYXRhRXJyb3IiLCAiZGIiLCAiaW5pdERhdGFiYXNlIiwgInRhZ1RlbXBsYXRlIiwgInRhZyIsICJFbW9qaVByZXZpZXciLCAicmVwbGFjZUNoaWxkcmVuIiwgInRhZ3MiLCAiZW1wdHkiLCAiY2xlYXJTZWFyY2hCdXR0b25UZW1wbGF0ZSIsICJzZWFyY2hUZW1wbGF0ZSIsICJTZWFyY2giLCAiZGVib3VuY2UiLCAiYWNjZXNzb3J5IiwgInNlYXJjaFJlc3VsdHMiLCAidGVtcGxhdGUkMyIsICJhbmltYXRpb25PcHRpb25zIiwgIm92ZXJsYXlBbmltYXRpb24iLCAicG9wdXBBbmltYXRpb24iLCAiVmFyaWFudFBvcHVwIiwgImFuaW1hdGUiLCAiaGlkZU9wdGlvbnMiLCAibmV3SW5kZXgiLCAiY3VycmVudEZvY3VzZWRFbW9qaSIsICJuZXdGb2N1c2VkRW1vamkiLCAiYmFzZUVtb2ppIiwgInZhcmlhbnRzIiwgInZhcmlhbnQiLCAidGVtcGxhdGUkMiIsICJDYXRlZ29yeVRhYiIsICJjaGFuZ2VGb2N1c2FibGUiLCAidGVtcGxhdGUkMSIsICJDYXRlZ29yeVRhYnMiLCAiaGFzT3ZlcmZsb3dSaWdodCIsICJoYXNPdmVyZmxvd0xlZnQiLCAib2xkQ2F0ZWdvcnkiLCAibmV3Q2F0ZWdvcnkiLCAic3RlcCIsICJURVNUX0VNT0pJUyIsICJkZXRlcm1pbmVFbW9qaVZlcnNpb24iLCAic3VwcG9ydGVkRW1vamkiLCAic3VwcG9ydHNFbW9qaSIsICJyZXBlYXQiLCAiY291bnQiLCAic2hvd0hlYWRlciIsICJyZW5kZXJQaWNrZXIiLCAidGhlbWUiLCAicmVuZGVyUGxhY2Vob2xkZXIiLCAiY2F0ZWdvcnlDb3VudCIsICJzaG93U2VhcmNoIiwgInNob3dDYXRlZ29yeVRhYnMiLCAic2hvd1ByZXZpZXciLCAidmFyaWFibGVOYW1lcyIsICJFbW9qaVBpY2tlciIsICJwcm9wZXJ0eU5hbWUiLCAiY3VycmVudFRoZW1lIiwgImNvbnRhaW5lciIsICJpc1Nob3J0Y3V0IiwgIm9wdGlvbiIsICJlcnJvclZpZXciLCAiaGVpZ2h0IiwgImN1cnJlbnRWaWV3IiwgIkxBVEVTVF9FTU9KSV9WRVJTSU9OIiwgImNsaWNrZWROb2RlIiwgImlzQ2xpY2tJbnNpZGVQaWNrZXIiLCAiaXNDbGlja09uVmFyaWFudFBvcHVwIiwgImN1cnJlbnRGb2N1cyIsICJWaWV3RmFjdG9yeSIsICJjb25zdHJ1Y3RvciIsICJfZGljdGlvbmFyeSIsICJCdW5kbGUiLCAiZGljdGlvbmFyeSIsICJmYWxsYmFjayIsICJzdHlsZUluamVjdCIsICJjc3MiLCAicmVmIiwgImluc2VydEF0IiwgImhlYWQiLCAic3R5bGUiLCAiY3JlYXRlU3R5bGVJbmplY3RvciIsICJpc0luamVjdGVkIiwgImluaXREYXRhIiwgInBpY2tlckluZGV4IiwgImdldFBpY2tlcklkIiwgImNyZWF0ZVBpY2tlciIsICJmaW5hbE9wdGlvbnMiLCAiY3VzdG9tIiwgInBpY2tlciIsICJ0b3BiYXIiXQp9Cg==
